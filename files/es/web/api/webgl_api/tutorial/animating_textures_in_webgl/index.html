---
title: Animating textures in WebGL
slug: Web/API/WebGL_API/Tutorial/Animating_textures_in_WebGL
translation_of: Web/API/WebGL_API/Tutorial/Animating_textures_in_WebGL
---
<p></p><section id="Quick_Links">
 <ol>
  <li><a href="/es/docs/Web/API/WebGL_API"><strong>WebGL API</strong></a></li>
  <li class="toggle">
    <details open>
      <summary>WebGL tutorial</summary>
      <ol>
        <li><a href="/es/docs/Web/API/WebGL_API/Tutorial/Getting_started_with_WebGL">Getting started with WebGL</a></li>
        <li><a href="/es/docs/Web/API/WebGL_API/Tutorial/Adding_2D_content_to_a_WebGL_context">Adding 2D content to a WebGL context</a></li>
        <li><a href="/es/docs/Web/API/WebGL_API/Tutorial/Using_shaders_to_apply_color_in_WebGL">Using shaders to apply color in WebGL</a></li>
        <li><a href="/es/docs/Web/API/WebGL_API/Tutorial/Animating_objects_with_WebGL">Animating objects with WebGL</a></li>
        <li><a href="/es/docs/Web/API/WebGL_API/Tutorial/Creating_3D_objects_using_WebGL">Creating 3D objects using WebGL</a></li>
        <li><a href="/es/docs/Web/API/WebGL_API/Tutorial/Using_textures_in_WebGL">Using textures in WebGL</a></li>
        <li><a href="/es/docs/Web/API/WebGL_API/Tutorial/Lighting_in_WebGL">Lighting in WebGL</a></li>
        <li><a href="/es/docs/Web/API/WebGL_API/Tutorial/Animating_textures_in_WebGL">Animating textures in WebGL</a></li>
      </ol>
    </details>
  </li>
  <li class="toggle">
    <details open>
      <summary>Examples and articles</summary>
      <ol>
        <li><a href="/es/docs/Web/API/WebGL_API/Matrix_math_for_the_web">Matrix math for the web</a></li>
        <li><a href="/es/docs/Web/API/WebGL_API/WebGL_model_view_projection">WebGL model view projection</a></li>
        <li><a href="/es/docs/Web/API/WebGL_API/WebGL_best_practices">WebGL best practices</a></li>
        <li><a href="/es/docs/Web/API/WebGL_API/Using_Extensions">Using WebGL extensions</a></li>
        <li><a href="/es/docs/Web/API/WebGL_API/Basic_2D_animation_example">A basic 2D WebGL animation example</a></li>
      </ol>
    </details>
  </li>
  <li class="toggle">
    <details open>
      <summary>Interfaces</summary>
      <ol>
        <li><a href="/es/docs/Web/API/WebGLRenderingContext"><code>WebGLRenderingContext</code></a></li>
        <li><a href="/es/docs/Web/API/WebGL2RenderingContext"><code>WebGL2RenderingContext</code></a></li>
        <li><a href="/es/docs/Web/API/WebGLActiveInfo"><code>WebGLActiveInfo</code></a></li>
        <li><a href="/es/docs/Web/API/WebGLBuffer"><code>WebGLBuffer</code></a></li>
        <li><a href="/es/docs/Web/API/WebGLContextEvent"><code>WebGLContextEvent</code></a></li>
        <li><a href="/es/docs/Web/API/WebGLFramebuffer"><code>WebGLFramebuffer</code></a></li>
        <li><a href="/es/docs/Web/API/WebGLProgram"><code>WebGLProgram</code></a></li>
        <li><a href="/es/docs/Web/API/WebGLQuery"><code>WebGLQuery</code></a></li>
        <li><a href="/es/docs/Web/API/WebGLRenderbuffer"><code>WebGLRenderbuffer</code></a></li>
        <li><a href="/es/docs/Web/API/WebGLSampler"><code>WebGLSampler</code></a></li>
        <li><a href="/es/docs/Web/API/WebGLShader"><code>WebGLShader</code></a></li>
        <li><a href="/es/docs/Web/API/WebGLShaderPrecisionFormat"><code>WebGLShaderPrecisionFormat</code></a></li>
        <li><a href="/es/docs/Web/API/WebGLSync"><code>WebGLSync</code></a></li>
        <li><a href="/es/docs/Web/API/WebGLTexture"><code>WebGLTexture</code></a></li>
        <li><a href="/es/docs/Web/API/WebGLTransformFeedback"><code>WebGLTransformFeedback</code></a></li>
        <li><a href="/es/docs/Web/API/WebGLUniformLocation"><code>WebGLUniformLocation</code></a></li>
        <li><a href="/es/docs/Web/API/WebGLVertexArrayObject"><code>WebGLVertexArrayObject</code></a></li>
      </ol>
    </details>
  </li>

  <li><strong><a href="/es/docs/MDN">Documentation:</a></strong></li>
  <li class="toggle">
    <details>
      <summary>Useful lists</summary>
      <ol>
        <li><a href="/es/docs/tag/WebGL">Pages tagged &quot;WebGL&quot;</a></li>
      </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
      <summary>Contribute</summary>
      <ol>
        <li><a href="/es/docs/MDN/Doc_status/API/WebGL">WebGL doc status</a></li>
        <li><a href="/es/docs/MDN">The MDN project</a></li>
      </ol>
    </details>
  </li>
 </ol>
</section> <div style="text-align: right;" class="prevnext">
    <p><a style="float: left;" href="/es/docs/Web/API/WebGL_API/Tutorial/Lighting_in_WebGL" class="button">« Anterior</a><br></p>
</div><p></p>

<p>En esta demostración nos basamos en el ejemplo anterior, solo que ahora reemplazaremos nuestra textura estática con los fotogramas de un video Ogg.</p>

<p>Esto es de hecho muy fácil de entender y de hacer, así que vamos a empezar. </p>

<p>Podemos utilizar un código similar para usar, como fuente para las texturas, otros tipos de datos tales como <a href="/es/docs/Web/HTML/Elemento/canvas" title="El elemento HTML canvas (&lt;canvas&gt;) se puede utilizar para dibujar gráficos a través de secuencias de comandos (por lo general JavaScript ). Por ejemplo, puede usarse para dibujar gráficos, hacer composiciones de fotos o incluso realizar animaciones."><code>&lt;canvas&gt;</code></a>.</p>

<h2 id="Obteniendo_acceso_al_video">Obteniendo acceso al video</h2>

<p>El primer paso es añadir el HTML para crear el elemento <a href="/es/docs/Web/HTML/Elemento/video" title="El elemento video se utiliza para incrustar vídeos en un documento HTML o XHTML."><code>&lt;video&gt;</code></a> que usaremos para obtener los fotogramas de video:</p>

<pre class="brush: js">&lt;video id=&quot;video&quot;&gt;
  Parece ser que tu navegador no soporta el elemento HTML5. &lt;code&gt;&amp;lt;video&amp;gt;&lt;/code&gt;
&lt;/video&gt;
</pre>

<p>Esto simplemente crea un elemento para reproducir el archivo de video &quot;Firefox.ogv&quot;. Usaremos CSS para ocultar el video</p>

<pre class="brush: css">video {
  display: none;
}
</pre>

<p>Ahora pasamos al código JavasScript, empezando por añadir una línea de código a la función start() para obtener la referencia al elemento de video:</p>

<pre class="brush: js">videoElement = document.getElementById(&quot;video&quot;);
</pre>

<p>Y reemplazamos el código que configura las llamadas de &quot;interval-driven&quot; en drawScecene() por esto:</p>

<pre class="brush: js">videoElement.addEventListener(&quot;canplaythrough&quot;, startVideo, true);
videoElement.addEventListener(&quot;ended&quot;, videoDone, true);
</pre>

<p>Finalmente configuramos el atributo src para empezar a cargar el video. FIXME (bjacob): También se debe configurar preload=&quot;auto&quot; o si no, el video nunca ejecuta canplaythrough en Firefox. En Chrome se debería cargar el video aun sin usar preload=&quot;auto&quot;.</p>

<pre class="brush: js">video.preload = &quot;auto&quot;;
videoElement.src = &quot;Firefox.ogv&quot;;</pre>

<p>El objetivo aquí es no empezar la animación hasta que una parte suficiente del video se haya cargado de modo que pueda ser reproducido sin interrupciones. Para esto añadimos un event listener para esperar a que el elemento de video nos diga que ya ha cargado los suficientes datos como para reproducir el video puede ser reproducido sin pausas.</p>

<p>The <code>startVideo()</code> quedará así:</p>

<pre class="brush: js">function startVideo() {
  videoElement.play();
  intervalID = setInterval(drawScene, 15);
}
</pre>

<p>Esto simplemente reproduce el video, entonces establece las llamadas &quot;interval-driven&quot; a drawScene() para gestionar el renderizado del cubo.</p>

<p>Añadiremos también un segundo event listener en el &quot;ended&quot; del video de modo que cuando el video haya finalizado de reproducirse nosotros podamos parar la animación.</p>

<pre class="brush: js">function videoDone() {
  clearInterval(intervalID);
}</pre>

<p>La función de videoDone() simplemente llama a <a href="/es/docs/Web/API/Window/clearInterval" title="La documentación acerca de este tema no ha sido escrita todavía . ¡Por favor  considera contribuir !"><code>window.clearInterval()</code></a>  para terminar de llamar a la función de actualizar la animación.</p>

<h2 id="Usando_los_fotogramas_del_video_como_textura">Usando los fotogramas del video como textura</h2>

<p>El siguiente paso es initTexture(), el cual se ha vuelto mucho más simple desde que no es necesario cargar un archivo de imagen. En lugar de esto, todo lo que vamos a hacer es crear un objeto de textura vacío para configurar el filtering cuando lo usemos más tarde:</p>

<pre class="brush: js">function initTextures() {
  cubeTexture = gl.createTexture();
  gl.bindTexture(gl.TEXTURE_2D, cubeTexture);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
}
</pre>

<div>La función updateTexture() quedaría así; Aquí es donde se realiza el trabajo real.</div>

<pre class="brush: js">function updateTexture() {
  gl.bindTexture(gl.TEXTURE_2D, cubeTexture);
  gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA,
        gl.UNSIGNED_BYTE, videoElement);
}
</pre>

<p>Has visto este código antes. Es prácticamente idéntico a la rutina de handleTextureLoaded() en el ejemplo anterior, excepto que cuando llamamos a texImage2D() en lugar de pasarle un objeto Image, lo pasamos en el elemento <a href="/es/docs/Web/HTML/Elemento/video" title="El elemento video se utiliza para incrustar vídeos en un documento HTML o XHTML."><code>&lt;video&gt;</code></a>. Ya que WebGL sabe como obtener el fotograma actual y usarlo como textura.</p>

<p><code>updateTexture()</code> se llama cada vez que estamos preparados para que la función drawScene() redibuje la escena. La única diferencia es que añadimos la llamada de updateTexture() antes de hacer nada más.</p>

<p>¡Esto es todo al respecto!</p>

<p><iframe src="https://mdn.github.io/webgl-examples/tutorial/sample8/index.html" width="670" class="live-sample-frame" height="510" frameborder="0"></iframe></p>

<p><a href="https://github.com/mdn/webgl-examples/tree/gh-pages/tutorial/sample8">Ver el código completo</a> | <a href="http://mdn.github.io/webgl-examples/tutorial/sample8/">Abrir esta demo en una nueva página</a></p>

<h2 id="Artículos_relacionados">Artículos relacionados</h2>

<ul>
 <li><a href="/es/Using_HTML5_audio_and_video">Usar audio y video en Firefox</a></li>
</ul>

<p></p><div style="text-align: right;" class="prevnext">
    <p><a style="float: left;" href="/es/docs/Web/API/WebGL_API/Tutorial/Lighting_in_WebGL" class="button">« Anterior</a><br></p>
</div><p></p>
