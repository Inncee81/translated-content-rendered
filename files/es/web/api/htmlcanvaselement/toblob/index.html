---
title: HTMLCanvasElement.toBlob()
slug: Web/API/HTMLCanvasElement/toBlob
translation_of: Web/API/HTMLCanvasElement/toBlob
---
<div>
<div>
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/es/docs/Web/API/Canvas_API">Canvas API</a></strong></li><li><strong><a href="/es/docs/Web/API/HTMLCanvasElement"><code>HTMLCanvasElement</code></a></strong></li><li class="toggle"><details open><summary>Propiedades</summary><ol><li><a href="/es/docs/Web/API/HTMLCanvasElement/height"><code>height</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><span class="sidebar-icon"><span title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/es/docs/Web/API/HTMLCanvasElement/mozOpaque"><code>mozOpaque</code></a> <a style="opacity: 0.5;" href="/es/docs/Web/API/HTMLCanvasElement/mozOpaque$translate">[Traducir]</a></li><li><a href="/es/docs/Web/API/HTMLCanvasElement/width"><code>width</code></a></li></ol></details></li><li class="toggle"><details open><summary>Métodos</summary><ol><li><span class="sidebar-icon"><span title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/es/docs/Web/API/HTMLCanvasElement/captureStream"><code>captureStream()</code></a> <a style="opacity: 0.5;" href="/es/docs/Web/API/HTMLCanvasElement/captureStream$translate">[Traducir]</a></li><li><a href="/es/docs/Web/API/HTMLCanvasElement/getContext"><code>getContext()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/es/docs/Web/API/HTMLCanvasElement/mozFetchAsStream"><code>mozFetchAsStream()</code></a> <a style="opacity: 0.5;" href="/es/docs/Web/API/HTMLCanvasElement/mozFetchAsStream$translate">[Traducir]</a></s></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/es/docs/Web/API/HTMLCanvasElement/mozGetAsFile"><code>mozGetAsFile()</code></a> <a style="opacity: 0.5;" href="/es/docs/Web/API/HTMLCanvasElement/mozGetAsFile$translate">[Traducir]</a></li><li><em><code>toBlob()</code></em></li><li><a href="/es/docs/Web/API/HTMLCanvasElement/toDataURL"><code>toDataURL()</code></a></li><li><span class="sidebar-icon"><span title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/es/docs/Web/API/HTMLCanvasElement/transferControlToOffscreen"><code>transferControlToOffscreen()</code></a> <a style="opacity: 0.5;" href="/es/docs/Web/API/HTMLCanvasElement/transferControlToOffscreen$translate">[Traducir]</a></li></ol></details></li><li class="toggle"><details open><summary>Herencia</summary><ol><li><a href="/es/docs/Web/API/HTMLElement"><code>HTMLElement</code></a></li><li><a href="/es/docs/Web/API/Element"><code>Element</code></a></li><li><a href="/es/docs/Web/API/Node"><code>Node</code></a></li><li><a href="/es/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li><li class="toggle"><details open><summary>Páginas relacionadas a Canvas API</summary><ol><li><a href="/es/docs/Web/API/Canvas"><code>Canvas</code></a></li><li><a href="/es/docs/Web/API/CanvasGradient"><code>CanvasGradient</code></a></li><li><a href="/es/docs/Web/API/CanvasImageSource"><code>CanvasImageSource</code></a></li><li><a href="/es/docs/Web/API/CanvasPattern"><code>CanvasPattern</code></a></li><li><a href="/es/docs/Web/API/CanvasRenderingContext2D"><code>CanvasRenderingContext2D</code></a></li><li><a href="/es/docs/Web/API/ImageBitmap"><code>ImageBitmap</code></a></li><li><a href="/es/docs/Web/API/ImageBitmapFactories"><code>ImageBitmapFactories</code></a></li><li><a href="/es/docs/Web/API/ImageBitmapRenderingContext"><code>ImageBitmapRenderingContext</code></a></li><li><a href="/es/docs/Web/API/ImageData"><code>ImageData</code></a></li><li><a href="/es/docs/Web/API/OffscreenCanvas"><code>OffscreenCanvas</code></a></li><li><a href="/es/docs/Web/API/Path2D"><code>Path2D</code></a></li><li><a href="/es/docs/Web/API/RenderingContext"><code>RenderingContext</code></a></li><li><a href="/es/docs/Web/API/TextMetrics"><code>TextMetrics</code></a></li></ol></details></li></ol></section></div>
</div>
</div>

<p>EL metodo <strong><code>HTMLCanvasElement.toBlob()</code></strong> crea un objeto <a href="/es/docs/Web/API/Blob" title="Un objeto Blob representa un objeto tipo fichero de  datos planos inmutables. Los Blobs representan datos que no necesariamente se encuentran en un formato nativo de JavaScript. La interfaz File se encuentra basada en un Blob, heredando y expendiendo la funcionalidad de un Blob para soportar archivos en el sistema del usuario."><code>Blob</code></a> que representa la imagen contenida en el canvas; este archivo puede ser cacheado en el disco oo guardado en la memoria a desicion del  user agent. Si la propiedad <code>type</code> no se especifica el tipo de la imagen será <code>image/png</code>. La imagen creada tiene una resolución de 96dpi.<br>
 El tercer argumento es usado con las imagenes  <code>image/jpeg</code> para especificar la calidad de salida.</p>

<h2 id="Syntax">Syntax</h2>

<pre class="syntaxbox"><var>void <em>canvas</em>.toBlob(<em>callback</em>, <em>type</em>, <em>encoderOptions</em>);</var>
</pre>

<h3 id="Parameters">Parameters</h3>

<dl>
 <dt>callback</dt>
 <dd>A callback function with the resulting <a href="/es/docs/Web/API/Blob" title="Un objeto Blob representa un objeto tipo fichero de  datos planos inmutables. Los Blobs representan datos que no necesariamente se encuentran en un formato nativo de JavaScript. La interfaz File se encuentra basada en un Blob, heredando y expendiendo la funcionalidad de un Blob para soportar archivos en el sistema del usuario."><code>Blob</code></a> object as a single argument.</dd>
 <dt><code>type</code> <span class="optional optionalInline notecard inline">Optional</span></dt>
 <dd>A <a href="/es/docs/Web/API/DOMString" title="DOMString es un String UTF-16. Dado que JavaScript ya usa estos strings, se mapea DOMString directamente a String."><code>DOMString</code></a> indicating the image format. The default type is <code>image/png</code>.</dd>
 <dt><code>encoderOptions</code> <span class="optional optionalInline notecard inline">Optional</span></dt>
 <dd>A <a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Number" title="El objeto Number es un objeto envolvente que permite trabajar con valores numéricos. Un objeto Number se crea utilizando el constructor Number()."><code>Number</code></a> between <code>0</code> and <code>1</code> indicating image quality if the requested type is <code>image/jpeg </code>or <code>image/webp</code>. If this argument is anything else, the default value for image quality is used. Other arguments are ignored.</dd>
</dl>

<h3 id="Return_value">Return value</h3>

<p>None.</p>

<h2 id="Examples">Examples</h2>

<h3 id="Getting_a_file_representing_the_canvas">Getting a file representing the canvas</h3>

<p>Once you have drawn content into a canvas, you can convert it into a file of any supported image format. The code snippet below, for example, takes the image in the <a href="/es/docs/Web/HTML/Elemento/canvas" title="El elemento HTML canvas (&lt;canvas&gt;) se puede utilizar para dibujar gráficos a través de secuencias de comandos (por lo general JavaScript ). Por ejemplo, puede usarse para dibujar gráficos, hacer composiciones de fotos o incluso realizar animaciones."><code>&lt;canvas&gt;</code></a> element whose ID is &quot;canvas&quot;, obtains a copy of it as a PNG image, then appends a new <a href="/es/docs/Web/HTML/Elemento/img" title="&lt;img&gt;"><code>&lt;img&gt;</code></a> element to the document, whose source image is the one created using the canvas.</p>

<pre class="brush: js">var canvas = document.getElementById(&quot;canvas&quot;);

canvas.toBlob(function(blob) {
  var newImg = document.createElement(&quot;img&quot;),
      url = URL.createObjectURL(blob);

  newImg.onload = function() {
    // no longer need to read the blob so it&apos;s revoked
    URL.revokeObjectURL(url);
  };

  newImg.src = url;
  document.body.appendChild(newImg);
});
</pre>

<p>Note that here we&apos;re creating a PNG image; if you add a second parameter to the <code>toBlob()</code> call, you can specify the image type. For example, to get the image in JPEG format:</p>

<pre class="brush: js"> canvas.toBlob(function(blob){...}, &quot;image/jpeg&quot;, 0.95); // JPEG at 95% quality</pre>

<div>
<h3 id="A_way_to_convert_a_canvas_to_an_ico_(Mozilla_only)">A way to convert a canvas to an ico (Mozilla only)</h3>

<p>This uses <code>-moz-parse</code> to convert the canvas to ico. Windows XP doesn&apos;t support converting from PNG to ico, so it uses bmp instead. A download link is created by setting the download attribute. The value of the download attribute is the name it will use as the file name.</p>

<pre class="brush: js">var canvas = document.getElementById(&quot;canvas&quot;);
var d = canvas.width;
ctx = canvas.getContext(&quot;2d&quot;);
ctx.beginPath();
ctx.moveTo(d / 2, 0);
ctx.lineTo(d, d);
ctx.lineTo(0, d);
ctx.closePath();
ctx.fillStyle = &quot;yellow&quot;;
ctx.fill();

function blobCallback(iconName) {
  return function(b) {
    var a = document.createElement(&quot;a&quot;);
    a.textContent = &quot;Download&quot;;
    document.body.appendChild(a);
    a.style.display = &quot;block&quot;;
    a.download = iconName + &quot;.ico&quot;;
    a.href = window.URL.createObjectURL(b);
  }
}
canvas.toBlob(blobCallback(&apos;passThisString&apos;), &apos;image/vnd.microsoft.icon&apos;,
              &apos;-moz-parse-options:format=bmp;bpp=32&apos;);</pre>
</div>

<h3 id="Save_toBlob_to_disk_with_OS.File_(chromeadd-on_context_only)">Save toBlob to disk with OS.File (chrome/add-on context only)</h3>

<div class="note">
<p>This technique saves it to the desktop and is only useful in Firefox chrome context or add-on code as OS APIs are not present on web sites.</p>
</div>

<pre class="brush: js">var canvas = document.getElementById(&quot;canvas&quot;);
var d = canvas.width;
ctx = canvas.getContext(&quot;2d&quot;);
ctx.beginPath();
ctx.moveTo(d / 2, 0);
ctx.lineTo(d, d);
ctx.lineTo(0, d);
ctx.closePath();
ctx.fillStyle = &quot;yellow&quot;;
ctx.fill();

function blobCallback(iconName) {
  return function(b) {
    var r = new FileReader();
    r.onloadend = function () {
    // r.result contains the ArrayBuffer.
    Cu.import(&apos;resource://gre/modules/osfile.jsm&apos;);
    var writePath = OS.Path.join(OS.Constants.Path.desktopDir,
                                 iconName + &apos;.ico&apos;);
    var promise = OS.File.writeAtomic(writePath, new Uint8Array(r.result),
                                      {tmpPath:writePath + &apos;.tmp&apos;});
    promise.then(
      function() {
        console.log(&apos;successfully wrote file&apos;);
      },
      function() {
        console.log(&apos;failure writing file&apos;)
      }
    );
  };
  r.readAsArrayBuffer(b);
  }
}

canvas.toBlob(blobCallback(&apos;passThisString&apos;), &apos;image/vnd.microsoft.icon&apos;,
              &apos;-moz-parse-options:format=bmp;bpp=32&apos;);</pre>

<h2 id="Polyfill">Polyfill</h2>

<p>A low performance polyfill based on toDataURL.</p>

<pre class="brush: js">if (!HTMLCanvasElement.prototype.toBlob) {
 Object.defineProperty(HTMLCanvasElement.prototype, &apos;toBlob&apos;, {
  value: function (callback, type, quality) {

    var binStr = atob( this.toDataURL(type, quality).split(&apos;,&apos;)[1] ),
        len = binStr.length,
        arr = new Uint8Array(len);

    for (var i=0; i&lt;len; i++ ) {
     arr[i] = binStr.charCodeAt(i);
    }

    callback( new Blob( [arr], {type: type || &apos;image/png&apos;} ) );
  }
 });
}
</pre>

<h2 id="Specifications">Specifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a lang="en" href="https://html.spec.whatwg.org/multipage/scripting.html#dom-canvas-toblob" class="external" hreflang="en">HTML Living Standard<br><small lang="es">La definición de &apos;HTMLCanvasElement.toBlob&apos; en esta especificación.</small></a></td>
   <td><span class="spec-Living">Living Standard</span></td>
   <td>No change since the latest snapshot, <a lang="en" title="La especificación &apos;HTML5&apos;" href="https://www.w3.org/TR/html50/" class="external" hreflang="en">HTML5</a></td>
  </tr>
  <tr>
   <td><a lang="en" href="https://www.w3.org/TR/html51/scripting-1.html#dom-canvas-toblob" class="external" hreflang="en">HTML 5.1<br><small lang="es">La definición de &apos;HTMLCanvasElement.toBlob&apos; en esta especificación.</small></a></td>
   <td><span class="spec-REC">Recommendation</span></td>
   <td>No change</td>
  </tr>
  <tr>
   <td><a lang="en" href="https://www.w3.org/TR/html50/scripting-1.html#dom-canvas-toblob" class="external" hreflang="en">HTML5<br><small lang="es">La definición de &apos;HTMLCanvasElement.toBlob&apos; en esta especificación.</small></a></td>
   <td><span class="spec-REC">Recommendation</span></td>
   <td>Snapshot of the <a lang="en" title="La especificación &apos;HTML Living Standard&apos;" href="https://html.spec.whatwg.org/multipage/" class="external" hreflang="en">HTML Living Standard</a> containing the initial definition.</td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<p></p><div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/es/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Escritorio</a></li>
        <li><a>Móvil</a></li>
    </ul>
</div><p></p>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td><span style="color: #f00;">Sin soporte</span><sup>[1]</sup></td>
   <td><a href="/en-US/Firefox/Releases/19" title="Publicado en 2013-02-19.">19</a> (19)</td>
   <td>10<span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/es/docs/Web/Guide/Prefixes" title="The name of this feature is prefixed with &apos;ms&apos; as this browser considers it experimental">ms</a></span></td>
   <td><span style="color: #f00;">Sin soporte</span></td>
   <td><span style="color: #f00;">Sin soporte</span><sup>[2]</sup></td>
  </tr>
  <tr>
   <td>Image quality parameter (jpeg)</td>
   <td><span style="color: #f00;">Sin soporte</span></td>
   <td><a href="/en-US/Firefox/Releases/25" title="Publicado en 2013-10-29.">25</a> (25)</td>
   <td><span style="color: #f00;">Sin soporte</span></td>
   <td><span style="color: #f00;">Sin soporte</span></td>
   <td><span style="color: #f00;">Sin soporte</span></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Chrome for Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td><span style="color: #f00;">Sin soporte</span></td>
   <td><span style="color: #f00;">Sin soporte</span></td>
   <td>19.0 (19)</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
   <td><span style="color: #f00;">Sin soporte</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
  </tr>
  <tr>
   <td>Image quality parameter (jpeg)</td>
   <td><span style="color: #f00;">Sin soporte</span></td>
   <td><span style="color: #f00;">Sin soporte</span></td>
   <td>25.0 (25)</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
   <td><span style="color: #f00;">Sin soporte</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibilidad desconocida, por favor actualízala.">?</span></td>
  </tr>
 </tbody>
</table>
</div>

<p>[1] Chrome does not implement this feature yet. See <a href="http://crbug.com/67587">bug 67587</a>.</p>

<p>[2] WebKit does not implement this feature yet. See <a href="https://bugs.webkit.org/show_bug.cgi?id=71270" class="external" rel="external" title>WebKit bug 71270</a>.</p>

<h2 id="See_also">See also</h2>

<ul>
 <li>The interface defining it, <a href="/es/docs/Web/API/HTMLCanvasElement"><code>HTMLCanvasElement</code></a>.</li>
 <li><a href="/es/docs/Web/API/Blob"><code>Blob</code></a></li>
</ul>
