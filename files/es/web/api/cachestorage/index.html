---
title: CacheStorage
slug: Web/API/CacheStorage
tags:
  - API
  - CacheStorage
  - Experimental
  - Interface
  - NeedsTranslation
  - Reference
  - Service Workers
  - ServiceWorker
  - TopicStub
translation_of: Web/API/CacheStorage
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/es/docs/Web/API/Service_Worker_API">Service Worker API</a></strong></li><li><strong><a href="/es/docs/Web/API/CacheStorage"><code>CacheStorage</code></a></strong></li><li class="toggle"><details open><summary>Métodos</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/es/docs/Web/API/CacheStorage/delete"><code>delete()</code></a> <a href="/es/docs/Web/API/CacheStorage/delete$translate" style="opacity: 0.5;">[Traducir]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/es/docs/Web/API/CacheStorage/has"><code>has()</code></a> <a href="/es/docs/Web/API/CacheStorage/has$translate" style="opacity: 0.5;">[Traducir]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/es/docs/Web/API/CacheStorage/keys"><code>keys()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/es/docs/Web/API/CacheStorage/match"><code>match()</code></a> <a href="/es/docs/Web/API/CacheStorage/match$translate" style="opacity: 0.5;">[Traducir]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/es/docs/Web/API/CacheStorage/open"><code>open()</code></a> <a href="/es/docs/Web/API/CacheStorage/open$translate" style="opacity: 0.5;">[Traducir]</a></li></ol></details></li><li class="toggle"><details open><summary>Páginas relacionadas a Service Workers API</summary><ol><li><a href="/es/docs/Web/API/Cache"><code>Cache</code></a></li><li><a href="/es/docs/Web/API/Client"><code>Client</code></a></li><li><a href="/es/docs/Web/API/Clients"><code>Clients</code></a></li><li><a href="/es/docs/Web/API/ExtendableEvent"><code>ExtendableEvent</code></a></li><li><a href="/es/docs/Web/API/FetchEvent"><code>FetchEvent</code></a></li><li><a href="/es/docs/Web/API/InstallEvent"><code>InstallEvent</code></a></li><li><a href="/es/docs/Web/API/Navigator/serviceWorker"><code>Navigator.serviceWorker</code></a></li><li><a href="/es/docs/Web/API/NotificationEvent"><code>NotificationEvent</code></a></li><li><a href="/es/docs/Web/API/PeriodicSyncEvent"><code>PeriodicSyncEvent</code></a></li><li><a href="/es/docs/Web/API/PeriodicSyncManager"><code>PeriodicSyncManager</code></a></li><li><a href="/es/docs/Web/API/PeriodicSyncRegistration"><code>PeriodicSyncRegistration</code></a></li><li><a href="/es/docs/Web/API/ServiceWorker"><code>ServiceWorker</code></a></li><li><a href="/es/docs/Web/API/ServiceWorkerContainer"><code>ServiceWorkerContainer</code></a></li><li><a href="/es/docs/Web/API/ServiceWorkerGlobalScope"><code>ServiceWorkerGlobalScope</code></a></li><li><a href="/es/docs/Web/API/ServiceWorkerRegistration"><code>ServiceWorkerRegistration</code></a></li><li><a href="/es/docs/Web/API/SyncEvent"><code>SyncEvent</code></a></li><li><a href="/es/docs/Web/API/SyncManager"><code>SyncManager</code></a></li><li><a href="/es/docs/Web/API/SyncRegistration"><code>SyncRegistration</code></a></li><li><a href="/es/docs/Web/API/WindowClient"><code>WindowClient</code></a></li></ol></details></li></ol></section>

<p>The <strong><code>CacheStorage</code></strong> interface represents the storage for <a href="/es/docs/Web/API/Cache"><code>Cache</code></a> objects.</p>

<p>The interface:</p>

<ul>
 <li>Provides a master directory of all the named caches that can be accessed by a <a href="/es/docs/Web/API/ServiceWorker"><code>ServiceWorker</code></a> or other type of worker or <a href="/es/docs/Web/API/Window"><code>window</code></a> scope (you’re not limited to only using it with service workers, even though the <a class="external" href="https://w3c.github.io/ServiceWorker/" hreflang="en" lang="en">Service Workers</a> spec defines it).
  <div class="note"><strong>Note</strong>: <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1026063">Chrome and Safari only expose `CacheStorage` to the windowed context over HTTPS</a>. <a href="/es/docs/Web/API/Window/caches"><code>window.caches</code></a> will be undefined unless an SSL certificate is configured.</div>
 </li>
 <li>Maintains a mapping of string names to corresponding <a href="/es/docs/Web/API/Cache"><code>Cache</code></a> objects.</li>
</ul>

<p>Use <a href="/es/docs/Web/API/CacheStorage/open"><code>CacheStorage.open()</code></a> to obtain a <a href="/es/docs/Web/API/Cache"><code>Cache</code></a> instance.</p>

<p>Use <a href="/es/docs/Web/API/CacheStorage/match"><code>CacheStorage.match()</code></a> to check if a given <a href="/es/docs/Web/API/Request"><code>Request</code></a> is a key in any of the <a href="/es/docs/Web/API/Cache"><code>Cache</code></a> objects that the <code>CacheStorage</code> object tracks.</p>

<p>You can access <code>CacheStorage</code> through the global <a href="/es/docs/Web/API/WindowOrWorkerGlobalScope/caches"><code>caches</code></a> property.</p>

<div class="note"><strong>Note</strong>: CacheStorage always rejects with a <code>SecurityError</code> on untrusted origins (i.e. those that aren&apos;t using HTTPS, although this definition will likely become more complex in the future.) When testing, you can get around this by checking the &quot;Enable Service Workers over HTTP (when toolbox is open)&quot; option in the Firefox Devtools options/gear menu.</div>

<div class="note"><strong>Note</strong>: <a href="/es/docs/Web/API/CacheStorage/match"><code>CacheStorage.match()</code></a> is a convenience method. Equivalent functionality to match a cache entry can be implemented by returning an array of cache names from <a href="/es/docs/Web/API/CacheStorage/keys"><code>CacheStorage.keys()</code></a>, opening each cache with <a href="/es/docs/Web/API/CacheStorage/open"><code>CacheStorage.open()</code></a>, and matching the one you want with <a href="/es/docs/Web/API/Cache/match"><code>Cache.match()</code></a>.</div>

<h2 id="Methods">Methods</h2>

<dl>
 <dt><a href="/es/docs/Web/API/CacheStorage/match"><code>CacheStorage.match()</code></a></dt>
 <dd>Checks if a given <a href="/es/docs/Web/API/Request"><code>Request</code></a> is a key in any of the <a href="/es/docs/Web/API/Cache"><code>Cache</code></a> objects that the <a href="/es/docs/Web/API/CacheStorage"><code>CacheStorage</code></a> object tracks, and returns a <a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Promise"><code>Promise</code></a> that resolves to that match.</dd>
 <dt><a href="/es/docs/Web/API/CacheStorage/has"><code>CacheStorage.has()</code></a></dt>
 <dd>Returns a <a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Promise"><code>Promise</code></a> that resolves to <code>true</code> if a <a href="/es/docs/Web/API/Cache"><code>Cache</code></a> object matching the <code>cacheName</code> exists.</dd>
 <dt><a href="/es/docs/Web/API/CacheStorage/open"><code>CacheStorage.open()</code></a></dt>
 <dd>Returns a <a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Promise"><code>Promise</code></a> that resolves to the <a href="/es/docs/Web/API/Cache"><code>Cache</code></a> object matching the <code>cacheName</code> (a new cache is created if it doesn&apos;t already exist.)</dd>
 <dt><a href="/es/docs/Web/API/CacheStorage/delete"><code>CacheStorage.delete()</code></a></dt>
 <dd>Finds the <a href="/es/docs/Web/API/Cache"><code>Cache</code></a> object matching the <code>cacheName</code>, and if found, deletes the <a href="/es/docs/Web/API/Cache"><code>Cache</code></a> object and returns a <a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Promise"><code>Promise</code></a> that resolves to <code>true</code>. If no <a href="/es/docs/Web/API/Cache"><code>Cache</code></a> object is found, it resolves to <code>false</code>.</dd>
 <dt><a href="/es/docs/Web/API/CacheStorage/keys"><code>CacheStorage.keys()</code></a></dt>
 <dd>Returns a <a href="/es/docs/Web/JavaScript/Referencia/Objetos_globales/Promise"><code>Promise</code></a> that will resolve with an array containing strings corresponding to all of the named <a href="/es/docs/Web/API/Cache"><code>Cache</code></a> objects tracked by the <a href="/es/docs/Web/API/CacheStorage"><code>CacheStorage</code></a>. Use this method to iterate over a list of all the <a href="/es/docs/Web/API/Cache"><code>Cache</code></a> objects.</dd>
</dl>

<h2 id="Examples">Examples</h2>

<p>This code snippet is from the MDN <a href="https://github.com/mdn/sw-test/">sw-test example</a> (see <a href="https://mdn.github.io/sw-test/">sw-test running live</a>.) This service worker script waits for an <a href="/es/docs/Web/API/InstallEvent"><code>InstallEvent</code></a> to fire, then runs <a href="/es/docs/Web/API/ExtendableEvent/waitUntil"><code>waitUntil</code></a> to handle the install process for the app. This consists of calling <a href="/es/docs/Web/API/CacheStorage/open"><code>CacheStorage.open</code></a> to create a new cache, then using <a href="/es/docs/Web/API/Cache/addAll"><code>Cache.addAll</code></a> to add a series of assets to it.</p>

<p>In the second code block, we wait for a <a href="/es/docs/Web/API/FetchEvent"><code>FetchEvent</code></a> to fire. We construct a custom response like so:</p>

<ol>
 <li>Check whether a match for the request is found in the CacheStorage. If so, serve that.</li>
 <li>If not, fetch the request from the network, then also open the cache created in the first block and add a clone of the request to it using <a href="/es/docs/Web/API/Cache/put"><code>Cache.put</code></a> (<code>cache.put(event.request, response.clone())</code>.)</li>
 <li>If this fails (e.g. because the network is down), return a fallback response.</li>
</ol>

<p>Finally, return whatever the custom response ended up being equal to, using <a href="/es/docs/Web/API/FetchEvent/respondWith"><code>FetchEvent.respondWith</code></a>.</p>

<pre class="brush: js notranslate">self.addEventListener(&apos;install&apos;, function(event) {
  event.waitUntil(
    caches.open(&apos;v1&apos;).then(function(cache) {
      return cache.addAll([
        &apos;/sw-test/&apos;,
        &apos;/sw-test/index.html&apos;,
        &apos;/sw-test/style.css&apos;,
        &apos;/sw-test/app.js&apos;,
        &apos;/sw-test/image-list.js&apos;,
        &apos;/sw-test/star-wars-logo.jpg&apos;,
        &apos;/sw-test/gallery/bountyHunters.jpg&apos;,
        &apos;/sw-test/gallery/myLittleVader.jpg&apos;,
        &apos;/sw-test/gallery/snowTroopers.jpg&apos;
      ]);
    })
  );
});

self.addEventListener(&apos;fetch&apos;, function(event) {
  event.respondWith(caches.match(event.request).then(function(response) {
    // caches.match() always resolves
    // but in case of success response will have value
    if (response !== undefined) {
      return response;
    } else {
      return fetch(event.request).then(function (response) {
        // response may be used only once
        // we need to save clone to put one copy in cache
        // and serve second one
        let responseClone = response.clone();

        caches.open(&apos;v1&apos;).then(function (cache) {
          cache.put(event.request, responseClone);
        });
        return response;
      }).catch(function () {
        return caches.match(&apos;/sw-test/gallery/myLittleVader.jpg&apos;);
      });
    }
  }));
});
</pre>

<p>This snippet shows how the API can be used outside of a service worker context, and uses the <code>await</code> operator for much more readable code.</p>

<pre class="brush: js notranslate">// Try to get data from the cache, but fall back to fetching it live.
async function getData() {
   const cacheVersion = 1;
   const cacheName    = `myapp-${ cacheVersion }`;
   const url          = &apos;https://jsonplaceholder.typicode.com/todos/1&apos;;
   let cachedData     = await getCachedData( cacheName, url );

   if ( cachedData ) {
      console.log( &apos;Retrieved cached data&apos; );
      return cachedData;
   }

   console.log( &apos;Fetching fresh data&apos; );

   const cacheStorage = await caches.open( cacheName );
   await cacheStorage.add( url );
   cachedData = await getCachedData( cacheName, url );
   await deleteOldCaches( cacheName );

   return cachedData;
}

// Get data from the cache.
async function getCachedData( cacheName, url ) {
   const cacheStorage   = await caches.open( cacheName );
   const cachedResponse = await cacheStorage.match( url );

   if ( ! cachedResponse || ! cachedResponse.ok ) {
      return false;
   }

   return await cachedResponse.json();
}

// Delete any old caches to respect user&apos;s disk space.
async function deleteOldCaches( currentCache ) {
   const keys = await caches.keys();

   for ( const key of keys ) {
      const isOurCache = &apos;myapp-&apos; === key.substr( 0, 6 );

      if ( currentCache === key || ! isOurCache ) {
         continue;
      }

      caches.delete( key );
   }
}

try {
   const data = await getData();
   console.log( { data } );
} catch ( error ) {
   console.error( { error } );
}</pre>

<h2 id="Specifications">Specifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://w3c.github.io/ServiceWorker/#cachestorage" hreflang="en" lang="en">Service Workers<br><small lang="es">La definición de &apos;CacheStorage&apos; en esta especificación.</small></a></td>
   <td><span class="spec-WD">Working Draft</span></td>
   <td>Initial definition.</td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<div class="hidden">The compatibility table on this page is generated from structured data. If you&apos;d like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</div>

<div class="bc-data" id="bcd:api.CacheStorage"></div>

<h2 id="See_also">See also</h2>

<ul>
 <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorker_API/Using_Service_Workers">Using Service Workers</a></li>
 <li><a href="/es/docs/Web/API/Cache"><code>Cache</code></a></li>
 <li><a href="/es/docs/Web/API/WindowOrWorkerGlobalScope/caches"><code>WindowOrWorkerGlobalScope.caches</code></a></li>
</ul>
