---
title: 'Руководство часть 9: Работа с формами'
slug: Learn/Server-side/Django/Forms
tags:
  - HTML
  - django
  - Для начинающих
  - Руководство
  - Серверная сторона
  - Формы
  - Формы Django
translation_of: Learn/Server-side/Django/Forms
---
<div><section class="Quick_links" id="Quick_Links">

<ol>
  <li data-default-state="closed"><a href="/ru/docs/Learn/Getting_started_with_the_web"><strong>Новички начинают здесь!</strong></a></li>
  <li class="toggle">
      <details>
          <summary>Начало работы с Вебом</summary>
          <ol>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web">Начало работы с Вебом</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/Installing_basic_software">Установка базового программного обеспечения</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/What_will_your_website_look_like">Каким должен быть ваш веб-сайт?</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/Dealing_with_files">Работа с файлами</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/HTML_basics">Основы HTML</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/CSS_basics">Основы CSS</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/JavaScript_basics">Основы JavaScript</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/Publishing_your_website">Публикация вашего веб-сайта</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/How_the_Web_works">Как работает Веб</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state="closed"><a href="/ru/docs/Learn/HTML"><strong>HTML — структура Веба</strong></a></li>
  <li class="toggle">
      <details>
          <summary>Вступление в HTML</summary>
          <ol>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML">Вступление в HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Getting_started">Начало работы с HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/The_head_metadata_in_HTML">Что в &quot;шапке&quot;? Метаданные в HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/HTML_text_fundamentals">Тексты в HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Creating_hyperlinks">Создание гиперссылок</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Advanced_text_formatting">Продвинутое форматирование текста</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Document_and_website_structure">Структура документа и веб-сайта</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Debugging_HTML">Отладка HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Marking_up_a_letter">Задание: Выделение символа</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Structuring_a_page_of_content">Задание: Структура страницы</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>Мультимедиа и встраивание</summary>
          <ol>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding">Мультимедиа и встраивание</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Images_in_HTML">Изображения в HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Video_and_audio_content">Видео и аудио контент</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Other_embedding_technologies">От object до iframe — другие технологии встраивания</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Adding_vector_graphics_to_the_Web">Добавление векторный графики в Веб</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images">Отзывчивые изображения</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Mozilla_splash_page">Задание: Страница о Mozilla</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>HTML tables</summary>
          <ol>
            <li><a href="/ru/docs/Learn/HTML/Tables">HTML tables overview</a></li>
            <li><a href="/ru/docs/Learn/HTML/Tables/Basics">HTML table basics</a></li>
            <li><a href="/ru/docs/Learn/HTML/Tables/Advanced">HTML Table advanced features and accessibility</a></li>
            <li><a href="/ru/docs/Learn/HTML/Tables/Structuring_planet_data">Assessment: Structuring planet data</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state="closed"><a href="/ru/docs/Learn/CSS"><strong>CSS — стилизирование Веба</strong></a></li>
  <li class="toggle">
      <details>
          <summary>CSS first steps</summary>
          <ol>
            <li><a href="/ru/docs/Learn/CSS/First_steps">CSS first steps overview</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/What_is_CSS">What is CSS?</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/Getting_started">Getting started with CSS</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/How_CSS_is_structured">How CSS is structured</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/How_CSS_works">How CSS works</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/Using_your_new_knowledge">Using your new knowledge</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>CSS building blocks</summary>
          <ol>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks">CSS building blocks overview</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Cascade_and_inheritance">Cascade and inheritance</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Selectors">CSS selectors</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/The_box_model">The box model</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Backgrounds_and_borders">Backgrounds and borders</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Handling_different_text_directions">Handling different text directions</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Overflowing_content">Overflowing content</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Values_and_units">Values and units</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Sizing_items_in_CSS">Sizing items in CSS</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Images_media_form_elements">Images, media, and form elements</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Styling_tables">Styling tables</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Debugging_CSS">Debugging CSS</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Organizing">Organizing your CSS</a></li>
      </ol></details>
  </li>
  <li class="toggle">
      <details>
          <summary>Стилизирование текста</summary>
          <ol>
            <li><a href="/ru/docs/Learn/CSS/Styling_text">Стилизирование текста</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Fundamentals">Основы стилизирования текста и шрифта</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Styling_lists">Стилизирование списков</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Styling_links">Стилизирование ссылок</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Web_fonts">Веб-шрифты</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Typesetting_a_homepage">Задание: Стилизирование школьного сайта</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>CSS макет</summary>
          <ol>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout">CSS макет</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Introduction">Вступление</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Normal_Flow">Normal Flow</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Flexbox">Flexbox</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Grids">Сетки</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Floats">Float</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Positioning">Позиционирование</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Multiple-column_Layout">Multiple-column Layout</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Responsive_Design">Responsive design</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Media_queries">Beginner&apos;s guide to media queries</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Legacy_Layout_Methods">Legacy Layout Methods</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Supporting_Older_Browsers">Supporting Older Browsers</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Fundamental_Layout_Comprehension">Fundamental Layout Comprehension</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state="closed"><a href="/ru/docs/Learn/JavaScript"><strong>JavaScript — динамический клиентский скриптинг</strong></a></li>
  <li class="toggle">
      <details>
          <summary>Первые шаги в JavaScript</summary>
          <ol>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps">Первые шаги в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/What_is_JavaScript">Что такое JavaScript?</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/A_first_splash">Первое погружение в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/What_went_wrong">Что-то пошло не так? Устранение ошибок JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Variables">Хранение нужной информации — Переменные</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Math">Основы JavaScript — Числа и операторы</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Strings">Работа с текстом — Строки в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Useful_string_methods">Полезные методы для строк</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Arrays">Массивы</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Silly_story_generator">Задание: Генератор глупых историй</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>Блоки в JavaScript</summary>
          <ol>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks">Блоки в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/conditionals">Делаем решения в вашем годе — Условия</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Looping_code">Повторение кода</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Functions">Функции — Переиспользуемые блоки кода</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Build_your_own_function">Создаём свою функцию</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Return_values">Возвращаемые значения функций</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Events">Введение в события</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Image_gallery">Задание: Галерея изображений</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>Введение в объекты JavaScript</summary>
          <ol>
            <li><a href="/ru/docs/Learn/JavaScript/Objects">Введение в объекты JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Basics">Основы объектов</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Object-oriented_JS">Объектно-ориентированный JavaScript для новичков</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Object_prototypes">Прототипы объектов</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Inheritance">Наследование в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/JSON">Работа с JSON данными</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Object_building_practice">Практика по созданию объектов</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Adding_bouncing_balls_features">Задание: Добавление возможностей в пример с прыгающими шарами</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Asynchronous JavaScript</summary>
        <ol>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous">Asynchronous JavaScript overview</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Concepts">General asynchronous programming concepts</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Introducing">Introducing asynchronous JavaScript</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Timeouts_and_intervals">Cooperative asynchronous Java​Script: Timeouts and intervals</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Promises">Graceful asynchronous programming with Promises</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Async_await">Making asynchronous programming easier with async and await</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Choosing_the_right_approach">Choosing the right approach</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Client-side web APIs</summary>
        <ol>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs">Client-side web APIs</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Introduction">Introduction to web APIs</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Manipulating_documents">Manipulating documents</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Fetching_data">Fetching data from the server</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Third_party_APIs">Third party APIs</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Drawing_graphics">Drawing graphics</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Video_and_audio_APIs">Video and audio APIs</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Client-side_storage">Client-side storage</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/ru/docs/Learn/Forms"><strong>Web forms — Working with user data</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Core forms learning pathway</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Forms">Web forms overview</a></li>
          <li><a href="/ru/docs/Learn/Forms/Your_first_form">Your first form</a></li>
          <li><a href="/ru/docs/Learn/Forms/How_to_structure_a_web_form">How to structure a web form</a></li>
          <li><a href="/ru/docs/Learn/Forms/Basic_native_form_controls">Basic native form controls</a></li>
          <li><a href="/ru/docs/Learn/Forms/HTML5_input_types">The HTML5 input types</a></li>
          <li><a href="/ru/docs/Learn/Forms/Other_form_controls">Other form controls</a></li>
          <li><a href="/ru/docs/Learn/Forms/Styling_web_forms">Styling web forms</a></li>
          <li><a href="/ru/docs/Learn/Forms/Advanced_form_styling">Advanced form styling</a></li>
          <li><a href="/ru/docs/Learn/Forms/UI_pseudo-classes">UI pseudo-classes</a></li>
          <li><a href="/ru/docs/Learn/Forms/Form_validation">Client-side form validation</a></li>
          <li><a href="/ru/docs/Learn/Forms/Sending_and_retrieving_form_data">Sending form data</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Advanced forms articles</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Forms/How_to_build_custom_form_controls">How to build custom form controls</a></li>
          <li><a href="/ru/docs/Learn/Forms/Sending_forms_through_JavaScript">Sending forms through JavaScript</a></li>
          <li><a href="/ru/docs/Learn/Forms/Property_compatibility_table_for_form_controls">CSS property compatibility table for form controls</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/ru/docs/Learn/Accessibility"><strong>Accessibility — Make the web usable by everyone</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Accessibility guides</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Accessibility">Accessibility overview</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/What_is_accessibility">What is accessibility?</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/HTML">HTML: A good basis for accessibility</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/CSS_and_JavaScript">CSS and JavaScript accessibility best practices</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/WAI-ARIA_basics">WAI-ARIA basics</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/Multimedia">Accessible multimedia</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/Mobile">Mobile accessibility</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Accessibility assessment</summary>
        <ol>
            <li><a href="/ru/docs/Learn/Accessibility/Accessibility_troubleshooting">Assessment: Accessibility troubleshooting</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/ru/docs/Learn/Tools_and_testing"><strong>Инструменты и тестирование</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Client-side web development tools</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools">Client-side web development tools index</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Overview">Client-side tooling overview</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Command_line">Command line crash course</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Package_management">Package management basics</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Introducing_complete_toolchain">Introducing a complete toolchain</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Deployment">Deploying our app</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Introduction to client-side frameworks</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Introduction">Client-side frameworks overview</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Main_features">Framework main features</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>React</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_getting_started">Getting started with React</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_todo_list_beginning">Beginning our React todo list</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_components">Componentizing our React app</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state">React interactivity: Events and state</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_filtering_conditional_rendering">React interactivity: Editing, filtering, conditional rendering</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_accessibility">Accessibility in React</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_resources">React resources</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Ember</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_getting_started">Getting started with Ember</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_structure_componentization">Ember app structure and componentization</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_interactivity_events_state">Ember interactivity: Events, classes and state</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_conditional_footer">Ember Interactivity: Footer functionality, conditional rendering</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_routing">Routing in Ember</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_resources">Ember resources and troubleshooting</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Vue</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_getting_started">Getting started with Vue</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_first_component">Creating our first Vue component</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_rendering_lists">Rendering a list of Vue components</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_methods_events_models">Adding a new todo form: Vue events, methods, and models</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_styling">Styling Vue components with CSS</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_computed_properties">Using Vue computed properties</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_conditional_rendering  ">Vue conditional rendering: editing existing todos</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_refs_focus_management">Focus management with Vue refs</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_resources">Vue resources</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Git and GitHub</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/GitHub">Git and GitHub overview</a></li>
          <li><a href="https://guides.github.com/activities/hello-world/">Hello World</a></li>
          <li><a href="https://guides.github.com/introduction/git-handbook/">Git Handbook</a></li>
          <li><a href="https://guides.github.com/activities/forking/">Forking Projects</a></li>
          <li><a href="https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests">About pull requests</a></li>
          <li><a href="https://guides.github.com/features/issues/">Mastering Issues</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Кроссбраузерное тестирование</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing">Кроссбраузерное тестирование</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Introduction">Вступление в кроссбраузерное тестирование</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Testing_strategies">Стратегии выполнения тестирования</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/HTML_and_CSS">Решение частых проблем с HTML и CSS</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/JavaScript">Решение частых проблем с JavaScript</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Accessibility">Решение частых проблем доступности</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Feature_detection">Проверка поддержки возможностей</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Automated_testing">Вступление в автоматическое тестирование</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Your_own_automation_environment">Установка вашей автоматической среды тестирования</a></li>
        </ol>
    </details>
  </li>
  <li data-default-state="open"><a href="/ru/docs/Learn/Server-side"><strong>Программирование серверной части сайта</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Первые шаги</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Server-side/First_steps">Первые шаги</a></li>
          <li><a href="/ru/docs/Learn/Server-side/First_steps/Introduction">Вступление в серверное программирование</a></li>
          <li><a href="/ru/docs/Learn/Server-side/First_steps/Client-Server_overview">Клиент-сервер</a></li>
          <li><a href="/ru/docs/Learn/Server-side/First_steps/Web_frameworks">Веб-фреймворки для серверной части</a></li>
          <li><a href="/ru/docs/Learn/Server-side/First_steps/Website_security">Защищённость веб-сайтов</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details open>
        <summary>Веб-фреймворк Django (Python)</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Server-side/Django">Веб-фреймворк Django (Python)</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Introduction">Вступление</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/development_environment">Установка среды разработки</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Tutorial_local_library_website">Руководство: Сайт местной библиотеки</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/skeleton_website">Руководство часть 2: Создаём набросок сайта</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Models">Руководство часть 3: Использование моделей</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Admin_site">Руководство часть 4: Django панель администратора</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Home_page">Руководство часть 5: Создание нашей домашней страницы</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Generic_views">Руководство часть 6: Списки и представления</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Sessions">Руководство часть 7: Сессии</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Authentication">Руководство часть 8: Аутенфикация и разрешения пользователей</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Forms">Руководство часть 9: Работа с формами</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Testing">Руководство часть 10: Тестирование веб-приложения на Django</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Deployment">Руководство часть 11: Разворачивание Django на продакшн сервере</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/web_application_security">Защищённость веб-приложения</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/django_assessment_blog">Задание: создание мини блога</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Express Web Framework (node.js/JavaScript)</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs">Express Web Framework (Node.js/JavaScript) overview</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/Introduction">Express/Node introduction</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/development_environment">Setting up a Node (Express) development environment</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/Tutorial_local_library_website">Express tutorial: The Local Library website</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/skeleton_website">Express Tutorial Part 2: Creating a skeleton website</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/mongoose">Express Tutorial Part 3: Using a database (with Mongoose)</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/routes">Express Tutorial Part 4: Routes and controllers</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/Displaying_data">Express Tutorial Part 5: Displaying library data</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/forms">Express Tutorial Part 6: Working with forms</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/deployment">Express Tutorial Part 7: Deploying to production</a></li>
        </ol>
    </details>
  </li>
  <li><a href="#"><strong>Дальнейшее чтение</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Общие вопросы</summary>
        <ol>
          <li><a href="/ru/docs/Learn/HTML/Howto">Вопросы по HTML</a></li>
          <li><a href="/ru/docs/Learn/CSS/Howto">Вопросы по CSS</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Howto">JavaScript questions</a></li>
          <li><a href="/ru/docs/Learn/Common_questions#How_the_Web_works">Как работает Веб</a></li>
          <li><a href="/ru/docs/Learn/Common_questions#Tools_and_setup">Инструменты и установка</a></li>
          <li><a href="/ru/docs/Learn/Common_questions#Design_and_accessibility">Дизайн и доступность</a></li>
        </ol>
    </details>
  </li>
  <li data-default-state="closed"><a href="/ru/docs/Learn/How_to_contribute">Как помочь?</a></li>
</ol>

</section></div>

<div><div class="prevnext">
  <a href="/ru/docs/Learn/Server-side/Django/authentication_and_sessions" class="button"><i class="icon-arrow-left"></i><span class="label"> Назад </span></a><a href="/ru/docs/Learn/Server-side/Django" class="button"><i class="icon-arrow-up"></i> Обзор: Django</a><a href="/ru/docs/Learn/Server-side/Django/Testing" class="button"><span class="label"> Далее  </span><i class="icon-arrow-right"></i></a>
</div></div>

<p class="summary">На этом уроке мы покажем вам процесс работы с HTML-формами в Django. В частности, продемонстрируем самый простой способ построения формы для создания, обновления и удаления экземпляров модели. При этом мы расширим сайт  <a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Tutorial_local_library_website">местной библиотеки</a>, чтобы библиотекари могли обновлять книги, создавать, обновлять и удалять авторов, используя наши собственные формы (а не возможности приложения администратора).</p>

<table class="learn-box standard-table">
 <tbody>
  <tr>
   <th scope="row">Необходимые условия:</th>
   <td>Завершите все предыдущие учебные темы, в том числе <a href="/en-US/docs/Learn/Server-side/Django/authentication_and_sessions">Django руководство часть 8: Аутентификация пользователя и права доступа</a>.</td>
  </tr>
  <tr>
   <th scope="row">Цель:</th>
   <td>Научиться понимать, как создавать формы, чтобы получать информацию от пользователей и обновлять базу данных. Узнать, как обобщенные классы отображения форм могут значительно упростить процесс создания форм при работе с одной моделью.</td>
  </tr>
 </tbody>
</table>

<h2 id="Обзор">Обзор</h2>

<p><a href="/en-US/docs/Web/Guide/HTML/Forms">HTML форма </a>- это группа из одного или нескольких полей/виджетов на веб-странице, которая используется для сбора информации от пользователей для последующей отправки на сервер. Формы являются гибким механизмом сбора пользовательских данных, поскольку имеют целый набор виджетов для ввода различных типов данных, как то: текстовые поля, флажки, переключатели, установщики дат и т. д. Формы являются относительно безопасным способом взаимодействия пользовательского клиента и сервера, поскольку они позволяют отправлять данные в POST-запросах, применяя защиту от <a href="https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D0%B6%D1%81%D0%B0%D0%B9%D1%82%D0%BE%D0%B2%D0%B0%D1%8F_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D0%BB%D0%BA%D0%B0_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0">Межсайтовой подделки запроса</a> (<em><span lang="en">Сross Site Request Forgery - CSRF</span></em>)</p>

<p>Пока что мы не создавали каких-либо форм в этом учебнике, но мы встречались с ними в административной панели Django —  например, снимок экрана ниже показывает форму для редактирования одной из наших моделей книг (<a href="/en-US/docs/Learn/Server-side/Django/Models">Book</a>), состоящую из нескольких списков выбора и текстовых редакторов. </p>

<p><img alt="Admin Site - Book Add" src="https://mdn.mozillademos.org/files/13979/admin_book_add.png" style="border-style: solid; border-width: 1px; display: block; margin: 0px auto;"></p>

<p>Работа с формами может быть достаточно сложной! Разработчикам надо описать форму на HTML, проверить ее валидность, а также, на стороне сервера, проверять введенные пользователем данные (а возможно и на стороне клиента), далее, в случае возникновения ошибок необходимо опять показать пользователю форму и, при этом, указать на то, что пошло не так, в случае же успеха проделать с данными необходимые операции и каким-то образом проинформировать об этом пользователя. Django, при работе с формами, берет большую часть, описанной выше работы, на себя. Он предоставляет фреймворк, который позволяет вам определять форму и ее поля программно, а затем использовать эти объекты и для генерации непосредственно кода HTML-формы, и для контроля за процессом валидации и других пользовательский взаимодействий с формой.</p>

<p>В данной части руководства мы покажем вам несколько способов создания и работы с формами и, в частности, как применение обобщенных классов работы с формой могут значительно уменьшить необходимый объем работы. Кроме того, мы расширим возможности нашего сайта <em>LocalLibrary,</em> путем добавления функционала для библиотекарей, который будет позволять им обновлять информацию - добавим страницы для создания, редактирования, удаления книг и авторов (воспроизведем и расширим стандартные возможности административной части сайта).</p>

<h2 id="Формы_HTML">Формы HTML</h2>

<p>Начнем мы с краткого обзора <a href="/en-US/docs/Web/Guide/HTML/Forms">Форм HTML</a>. Рассмотрим простую форму HTML, имеющую поле для ввода имени некоторой &quot;команды&quot; (&quot;team&quot;), и, связанную с данным полем, текстовой меткой:</p>

<p><img alt="Simple name field example in HTML form" src="https://mdn.mozillademos.org/files/14117/form_example_name_field.png" style="border-style: solid; border-width: 1px; display: block; height: 44px; margin: 0px auto; width: 399px;"></p>

<p>Форма описывается на языке HTML как набор элементов, расположенных внутри парных тэгов <code>&lt;form&gt;...&lt;/form&gt;</code>. Любая форма содержит как минимум одно поле-тэг <code>input</code> типа <code>type=&quot;submit&quot;</code>.</p>

<pre class="brush: html notranslate">&lt;form action=&quot;/team_name_url/&quot; method=&quot;post&quot;&gt;
    &lt;label for=&quot;team_name&quot;&gt;Enter name: &lt;/label&gt;
    &lt;input id=&quot;team_name&quot; type=&quot;text&quot; name=&quot;name_field&quot; value=&quot;Default name for team.&quot;&gt;
    &lt;input type=&quot;submit&quot; value=&quot;OK&quot;&gt;
&lt;/form&gt;</pre>

<p>Здесь у нас только одно поле для ввода имени команды, но форма <em>может</em> иметь любое количество элементов ввода и, связанных с ними, текстовых меток. Атрибут элемента <code>type</code> определяет какого типа виджет будет показан в данной строке. Атрибуты <code>name</code> и  <code>id</code> используются для однозначной идентификации данного поля в JavaScript/CSS/HTML, в то время как <code>value</code> содержит значение для поля (когда оно показывается в первый раз). Текстовая метка добавляется при помощи тэга <code style="font-style: normal; font-weight: normal;">label</code> (смотрите &quot;Enter name&quot;, в предыдущем фрагменте) и имеет атрибут <code style="font-style: normal; font-weight: normal;">for</code> со значением идентификатора <code style="font-style: normal; font-weight: normal;">id</code>, того поля, с которым данная текстовая метка связана.</p>

<p>Элемент <code>input</code>  с  <code>type=&quot;submit&quot;</code> будет показана как кнопка (по умолчанию), нажав на которую, пользователь отправляет введенные им данные на сервер (в данном случае только значение поля с идентификатором <code>team_name</code>). Атрибуты формы определяют каким методом будут отправлены данные на сервер (атрибут <code>method</code>) и куда  (атрибут <code>action</code>):</p>

<ul>
 <li><code>action</code>: Это ресурс/URL-адрес куда будут отправлены данные для обработки. Если значение не установлено (то есть, значением поля является пустая строка), тогда данные будут отправлены в отображение (функцию, или класс), которое сформировало текущую страницу.</li>
 <li><code>method</code>: HTTP-метод, используемый для отправки данных: <em>post</em>, или <em>get</em>.
  <ul>
   <li>Метод <code>POST</code> должен всегда использоваться если отправка данных приведет к внесению изменений в базе данных на сервере. Применение данного метода должно повысить уровень защиты от CSRF.</li>
   <li>Метод <code>GET</code> должен применяться только для форм, действия с которыми не приводят к изменению базы данных (например для поисковых запросов). Кроме того, данный метод рекомендуется применять для создания внешних ссылок на ресурсы сайта.</li>
  </ul>
 </li>
</ul>

<p>Ролью сервера в первую очередь является отрисовка начального состояния формы — либо содержащей пустые поля, либо с установленными начальными значениями. После того как пользователь нажмет на кнопку,  сервер получит все данные формы, а затем должен провести их валидацию. В том случае, если форма содержит неверные данные, сервер должен снова отрисовать форму, показав при этом поля с правильными данными, а также сообщения, описывающие &quot;что именно пошло не так&quot;. В тот момент, когда сервер получит запрос с &quot;правильными&quot; данными он должен выполнить все необходимые действия (например, сохранение данных, возврат результата поиска, загрузка файла и тому подобное), а затем, в случае необходимости, проинформировать пользователя.</p>

<p>Как вы видите, создание HTML-формы, валидация и возврат данных, переотрисовка введенных значений, при необходимости, а также выполнение желаемых действий с &quot;правильными данными&quot;, в целом, может потребовать довольно больших усилий для того, чтобы все &quot;заработало&quot;. Django делает этот процесс намного проще, беря на себя некоторые &quot;тяжелые&quot; и повторяющиеся участки кода!</p>

<h2 id="Процесс_управления_формой_в_Django_2"><a id="Процесс_управления_формой_в_Django" name="Процесс_управления_формой_в_Django">Процесс управления формой в Django</a></h2>

<p>Управление формами в Django использует те же самые техники, которые мы изучали в предыдущих частях руководства (при показе информации из наших моделей): отображение получает запрос, выполняет необходимые действия, включающие в себя чтение данных из моделей, генерацию и возврат страницы HTML (из шаблона, в который передается <em>контекст,</em> содержащий данные, которые и будут показаны). Что делает данный процесс более сложным, так это то, что серверной части надо дополнительно обработать данные, предоставленные пользователем и, в случае возникновения ошибок, снова перерисовать страницу.</p>

<p>Диаграмма, представленная ниже, демонстрирует процесс работы с формой в Django, начиная с запроса страницы, содержащей форму (выделено зеленым цветом).</p>

<p><img alt="Updated form handling process doc." src="https://mdn.mozillademos.org/files/14205/Form%20Handling%20-%20Standard.png" style="display: block; height: 569px; margin: 0px auto; width: 800px;"></p>

<p>В соответствии с данной диаграммой, главными моментами, которые берут на себя формы Django являются:</p>

<ol>
 <li>Показ формы по умолчанию при первом запросе со стороны пользователя.
  <ul>
   <li>Форма может содержать пустые поля (например, если вы создаете новую запись в базе данных), или они (поля) могут иметь начальные значения (например, если вы изменяете запись, или хотите заполнить ее каким-либо начальным значением).</li>
   <li>Форма в данный момент является <em>несвязанной</em>, потому что она не ассоциируется с какими-либо введенными пользователем данными (хотя и может иметь начальные значения).</li>
  </ul>
 </li>
 <li>Получение данных из формы (из HTML-формы) со стороны клиента и связывание их с формой (классом формы) на стороне сервера.
  <ul>
   <li>Связывание данных с формой означает, что данные, введенные пользователем, а также возможные ошибки, при переотрисовке в дальнейшем, будут относиться именно к данной форме, а не к какой-либо еще.</li>
  </ul>
 </li>
 <li>Очистка и валидация данных.
  <ul>
   <li>Очистка данных  - это их проверка на наличие возможных значений, или вставок в поля ввода (то есть очистка - это удаление неправильных символов, которые потенциально могут использоваться для отправки вредоносного содержимого на сервер), с последующей конвертацией очищеных данных в подходящие типы данных Python.</li>
   <li>Валидация проверяет, значения полей (например, правильность введенных дат, их диапазон и так далее)</li>
  </ul>
 </li>
 <li>Если какие-либо данные являются неверными, то выполнение перерисовки формы, но на этот раз, с уже введенными пользователем данными и сообщениями об ошибках, описывающих возникшие проблемы.</li>
 <li>Если все данные верны, то исполнение необходимых действий (например, сохранение данных, отправка писем, возврат результата поиска, загрузка файла и так далее)</li>
 <li>Когда все действия были успешно завершены, то перенаправление пользователя на другую страницу.</li>
</ol>

<p>Django предоставляет несколько инстументов и приемов, которые помогают вам во время выполнения задач, описанных выше. Наиболее фундаметальным из них является класс <code>Form</code>, который упрощает генерацию HTML-формы и очистку/валидацию ее данных. В следующем разделе мы опишем процесс работы с формами при помощи практического примера по созданию страницы, которая позволит библиотекарям обновлять информацию о книгах.</p>

<div class="note notecard">
<p><strong>Примечание:</strong> Понимание того, как используется класс <code>Form</code> поможет вам когда мы будем рассматривать классы фреймворка Django, для работы с формами более &quot;высокого уровня&quot;.</p>
</div>

<h2 id="HTML-форма_обновления_книги._Класс_Form_и_функция_отображения">HTML-форма обновления книги. Класс Form и функция отображения</h2>

<p>Данная глава будет посвещена процессу создания страницы, которая позволит библиотекарям обновлять информацию о книгах (в частности, вводить дату возврата книги). Для того, чтобы сделать это мы создадим форму, которая позволит пользователям вводить значение дат. Мы проинициализируем поле датой, равной 3 неделям, начиная с текущего дня, и, для того, чтобы библотекарь не имел возможность ввести &quot;неправильную&quot; дату, мы добавим валидацию введенных значений, которая будет проверять, чтобы введенная дата не относилась к прошлому, или к слишком далекому будущему. Когда будет получена &quot;правильная&quot; дата мы запишем ее значение в поле  <code>BookInstance.due_back</code>.</p>

<p>Данный пример будет использовать отображение на основе функции, а также продемонстрирует работу с классом <code>Form</code>. Следующие разделы покажут изменения, которые вам надо сделать, чтобы продемонстрировать работу форм в проекте <em>LocalLibrary</em>.</p>

<h3 id="Класс_Form">Класс Form</h3>

<p>Класс <code>Form</code> является сердцем системы Django при работе с формами. Он определяет поля формы, их расположение, показ виджетов, текстовых меток, начальных значений, валидацию значений и сообщения об ошибках для &quot;неправильных&quot; полей (если таковые имеются). Данный класс, кроме того, предоставляет методы для отрисовки самого себя в шаблоне при помощи предопределенных форматов (таблицы, списки и так далее), или для получения значения любого элемента (позволяя выполнять более точную отрисовку).</p>

<h4 id="Объявление_класса_формы_Form">Объявление класса формы Form</h4>

<p>Синтаксис объявления для класса формы <code>Form</code> очень похож на объявление класса модели <code>Model</code>, он даже использует те же типы полей (и некоторые похожие параметры). Это существенный момент, поскольку в обоих случаях нам надо убедиться, что каждое поле управляет правильным типом данных, соответствует нужному диапазону (или другому критерию) и имеет необходимое описание для показа/документации.</p>

<p>Для того, чтобы создать класс с функционалом базового класса <code>Form</code> мы должны импорировать библиотеку <code>forms</code>, наследовать наш класс от класса <code>Form</code>, а затем объявить поля формы. Таким образом, самый простой класс формы в нашем случае будет иметь вид, показанный ниже:</p>

<pre class="brush: python notranslate">from django import forms

class RenewBookForm(forms.Form):
    renewal_date = forms.DateField(help_text=&quot;Enter a date between now and 4 weeks (default 3).&quot;)
</pre>

<h4 id="Поля_формы">Поля формы</h4>

<p>В  нашем случае мы имеем одно поле типа <code><a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#datefield">DateField</a></code>, которое служит для ввода обновленной даты возврата книги, которое будет отрендерено в HTML с пустым значением и текстовой меткой &quot;<em>Renewal date:</em>&quot;, а также текстовым описанием: &quot;<em>Enter a date between now and 4 weeks (default 3 weeks).</em>&quot; Так как никаких дополнительных опций мы не определяем, то поле будет &quot;получать&quot; даты в следующем формате <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#django.forms.DateField.input_formats">input_formats</a>: YYYY-MM-DD (2016-11-06), MM/DD/YYYY (02/26/2016), MM/DD/YY (10/25/16), а для отрисовки по умолчанию, будет использовать <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#widget">виджет</a>: <a href="https://docs.djangoproject.com/en/1.10/ref/forms/widgets/#django.forms.DateInput">DateInput</a>.</p>

<p>Существует множество других типов полей для класса формы, которые по своему функционалу подобны соответствующим им эквивалентам типов полей для классов моделей: <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#booleanfield"><code>BooleanField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#charfield"><code>CharField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#choicefield"><code>ChoiceField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#typedchoicefield"><code>TypedChoiceField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#datefield"><code>DateField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#datetimefield"><code>DateTimeField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#decimalfield"><code>DecimalField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#durationfield"><code>DurationField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#emailfield"><code>EmailField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#filefield"><code>FileField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#filepathfield"><code>FilePathField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#floatfield"><code>FloatField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#imagefield"><code>ImageField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#integerfield"><code>IntegerField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#genericipaddressfield"><code>GenericIPAddressField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#multiplechoicefield"><code>MultipleChoiceField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#typedmultiplechoicefield"><code>TypedMultipleChoiceField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#nullbooleanfield"><code>NullBooleanField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#regexfield"><code>RegexField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#slugfield"><code>SlugField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#timefield"><code>TimeField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#urlfield"><code>URLField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#uuidfield"><code>UUIDField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#combofield"><code>ComboField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#multivaluefield"><code>MultiValueField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#splitdatetimefield"><code>SplitDateTimeField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#modelmultiplechoicefield"><code>ModelMultipleChoiceField</code></a>, <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#modelchoicefield"><code>ModelChoiceField</code></a>​​​​.</p>

<p>Общие аргументы для большинства полей перечислены ниже:</p>

<ul>
 <li><a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#required">required</a>: Если <code>True</code>, то данное поле не может быть пустым, или иметь значение<code>None</code>. Данное значение установлено по умолчанию.</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#label">label</a>: Тектовая метка, используемая для рендеринга поля в HTML-код. Если <a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#label">label</a> не определена, то Django попытается создать ее значение при помощи имени поля, переводя первый символ в верхний регистр, а также заменяя символы подчеркивания пробелами (например, для переменной с именем renewal_date, будет создан следующий текст метки: <em>Renewal date</em>).</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#label-suffix">label_suffix</a>: По умолчанию показывает двоеточие после текста метки (например, Renewal date<strong>:</strong>). Данный параметр позволяет вам указать любой суффикс по вашему желанию.</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#initial">initial</a>: Начальное значение для поля при показе формы.</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#widget">widget</a>: Применяемый виджет для поля.</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#help-text">help_text</a> (как показано в примере выше): Дополнительный текст, который может быть показан на форме, для описания того, как использовать поле.</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#error-messages">error_messages</a>: Список сообщений об ошибках для данного поля. Вы можете переопределить его своими сообщениями, при необходимости.</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#validators">validators</a>: Список функций, которые будут вызваны для валидации, введенного в поле значения.</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#localize">localize</a>: Позволяет осуществить локализацию данных поля формы (например, формат ввода числовых значений, или дат).</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/#disabled">disabled</a>: Если установлено в <code>True</code>, то поле показывается, но его значение изменить нельзя. По умолчанию равно <code>False</code>.</li>
</ul>

<h4 id="Валидация">Валидация</h4>

<p>Django предоставляет несколько мест где вы можете осуществить валидацию ваших данных. Простейшим способом проверки значения одиночного поля является переопределение метода<code>clean_<strong>&lt;fieldname&gt;</strong>()</code> (здесь, <code><strong>&lt;fieldname&gt;</strong></code> это имя поля, которое вы хотите проверить). Например, мы хотим проверить, что введенное значение <code>renewal_date</code> находится между текущей датой и  4 неделями в будущем. Для этого мы создаем метод <code>clean_<strong>renewal_date</strong>()</code>, как показано ниже:</p>

<pre class="brush: python notranslate">from django import forms

<strong>from django.core.exceptions import ValidationError
from django.utils.translation import ugettext_lazy as _
import datetime #for checking renewal date range.
</strong>
class RenewBookForm(forms.Form):
    renewal_date = forms.DateField(help_text=&quot;Enter a date between now and 4 weeks (default 3).&quot;)

<strong>    def clean_renewal_date(self):
        data = self.cleaned_data[&apos;renewal_date&apos;]

        #Проверка того, что дата не выходит за &quot;нижнюю&quot; границу (не в прошлом).
        if data &lt; datetime.date.today():
            raise ValidationError(_(&apos;Invalid date - renewal in past&apos;))

        #Проверка того, то дата не выходит за &quot;верхнюю&quot; границу (+4 недели).
        if data &gt; datetime.date.today() + datetime.timedelta(weeks=4):
            raise ValidationError(_(&apos;Invalid date - renewal more than 4 weeks ahead&apos;))

        # Помните, что всегда надо возвращать &quot;очищенные&quot; данные.
        return data</strong></pre>

<p>Необходимо отметить два важных момента. Первый это то, что мы получаем наши данные при помощи словаря <code>self.cleaned_data[&apos;renewal_date&apos;]</code>, а затем в конце возвращаем полученное значение, для проведения необходимых проверок. Данный шаг позволяет нам, при помощи валидаторов, получить &quot;очищенные&quot;, проверенные, а затем, приведенные к стандартным типам, данные (в нашем случае к типу Python <code>datetime.datetime</code>).</p>

<p>Второй момент касается того случая, когда наше значение &quot;выпадает за рамки&quot; и мы &quot;выкидываем&quot; исключение <code>ValidationError</code>, в котором указываем текст, который мы хотим показать на форме, для случая когда были введены неправильные данные. Пример, показанный выше, оборачивает данный текст при помощи <a href="https://docs.djangoproject.com/en/1.10/topics/i18n/translation/">функции перевода Django</a> <code>ugettext_lazy()</code> (импортирумую через <code>_()</code>), которая может вам пригодиться, если вы планируете перевести ваш сайт в будущем.</p>

<div class="note notecard">
<p><strong>Примечание:</strong> Существует множество других методов и примеров валидации различных форм, которые можно найти в <a href="https://docs.djangoproject.com/en/1.10/ref/forms/validation/">Формы и валидация поля</a> (Django docs). Например, в случае, если у вас имеется много полей, которые зависят один от другого, вы можете переопределить функцию <a href="https://docs.djangoproject.com/en/1.10/ref/forms/api/#django.forms.Form.clean">Form.clean()</a> и, при необходимости, &quot;выкинуть&quot; <code>ValidationError</code>.</p>
</div>

<p>В целом, это все, что нам понадобится для создания формы в данном примере!</p>

<h4 id="Копирование_класса_формы">Копирование класса формы</h4>

<p>Создайте и откройте файл <strong>locallibrary/catalog/forms.py</strong>, а затем скопируйте в него весь код, указанный в предыдущем фрагменте.</p>

<h3 id="Конфигурация_URL-адресов">Конфигурация URL-адресов</h3>

<p>Перед созданием отображения давайте добавим соответствующую конфигурацию URL-адреса для страницы обновления книг. Скопируйте следующий фрагмент в нижнюю часть файла<strong> locallibrary/catalog/urls.py</strong>.</p>

<pre class="brush: python notranslate">urlpatterns += [
    url(r&apos;^book/(?P&lt;pk&gt;[-\w]+)/renew/$&apos;, views.renew_book_librarian, name=&apos;renew-book-librarian&apos;),
]</pre>

<p>Данная конфигурация перенаправит запросы с адресов формата <strong>/catalog/book/<em>&lt;bookinstance id&gt;</em>/renew/</strong> в функции с именем <code>renew_book_librarian()</code> в <strong>views.py</strong>, туда же передаст идентификатор id записи <code>BookInstance</code> в качестве параметра с именем <code>pk</code>. Шаблон соответствует только если <strong>pk </strong>это правильно отформатированный <strong>uiid.</strong></p>

<div class="note notecard">
<p><strong>Примечание</strong>: Вместо имени &quot;pk&quot; мы можем использовать любое другое, по нашему желанию, потому что мы имеем полный контроль над функцией отображения (которого у нас нет в случае использования встроенного обобщенного класса отображения, который ожидает параметр с определенным именем). Тем не менее имя <code>pk</code> является понятным сокращением от &quot;primary key&quot;, поэтому мы его тут и используем!</p>
</div>

<h3 id="Отображение">Отображение</h3>

<p>Как было отмечено в разделе <a href="#Процесс_управления_формой_в_Django">Процесс управление формой в Django</a>, отображение должно отрендерить форму по умолчанию, когда она вызывается в первый раз и, затем, перерендерить ее, в том случае, если возникли какие-либо ошибки при работе с ее полями. В случае же успеха, после обработки &quot;правильных&quot; данных отображение перенаправляет пользователя на новую (другую) страницу. Для того чтобы выполнить все эти действия, отображение должно знать вызвано ли оно в первый раз для отрисовки формы по умолчанию, а если это не так, то провести валидацию полученных данных.</p>

<p>Для форм, которые используют <code>POST</code>-запрос при отправке информации на сервер, наиболее общей схемой проверки данного факта является следующая строка кода <code>if request.method == &apos;POST&apos;:</code>. <code>GET</code>-запросу, а также первому запросу формы, в таком случае соответствует блок <code>else</code>. Если вы хотите отправлять свои данные в виде <code>GET</code>-запроса, то в таком случае приемом проверки того факта, что данный запрос первый (или последующий), является получение значения какого-либо поля формы (например, если значение скрытого поля формы пустое, то данный вызов является первым).</p>

<p>Процесс обновления книги приводит к изменению информации в базе данных, таким образом, в соответствии с нашими соглашениями, в таком случае мы должны применять запрос типа <code>POST</code>. Фрагмент кода, представленный ниже, показывает (наиболее общую) схему работы для таких запросов. </p>

<pre class="brush: python notranslate">from django.shortcuts import get_object_or_404
from django.http import HttpResponseRedirect
from django.urls import reverse
import datetime

from .forms import RenewBookForm

def renew_book_librarian(request, pk):
    book_inst = get_object_or_404(BookInstance, pk=pk)

    # Если данный запрос типа POST, тогда
<strong>    if request.method == &apos;POST&apos;:</strong>

        # Создаем экземпляр формы и заполняем данными из запроса (связывание, binding):
        form = RenewBookForm(request.POST)

        # Проверка валидности данных формы:
        <strong>if form.is_valid():</strong>
            # Обработка данных из form.cleaned_data
            #(здесь мы просто присваиваем их полю due_back)
            book_inst.due_back = form.cleaned_data[&apos;renewal_date&apos;]
            book_inst.save()

            # Переход по адресу &apos;all-borrowed&apos;:
            return HttpResponseRedirect(reverse(&apos;all-borrowed&apos;) )

    # Если это GET (или какой-либо еще), создать форму по умолчанию.
<strong>    else:</strong>
        proposed_renewal_date = datetime.date.today() + datetime.timedelta(weeks=3)
        form = RenewBookForm(initial={&apos;renewal_date&apos;: proposed_renewal_date,})

    return render(request, &apos;catalog/book_renew_librarian.html&apos;, {&apos;form&apos;: form, &apos;bookinst&apos;:book_inst})</pre>

<p>В первую очередь мы импортируем наш класс формы (<code>RenewBookForm</code>), а также другие необходимые объекты и методы:</p>

<ul>
 <li><code><a href="https://docs.djangoproject.com/en/1.10/topics/http/shortcuts/#get-object-or-404">get_object_or_404()</a></code>: Возвращает определенный объект из модели в зависимости от значения его первичного ключа, или выбрасывает исключение <code>Http404</code>, если данной записи не существует. </li>
 <li><code><a href="https://docs.djangoproject.com/en/1.10/ref/request-response/#django.http.HttpResponseRedirect">HttpResponseRedirect</a></code>: Данный класс перенаправляет на другой адрес (HTTP код статуса 302). </li>
 <li><code><a href="https://docs.djangoproject.com/en/1.10/ref/urlresolvers/#django.urls.reverse">reverse()</a></code>: Данная функция генерирует URL-адрес при помощи соответствующего имени URL конфигурации/преобразования и дополнительных аргументов. Это эквивалент Python тэгу <code>url</code>, которые мы использовали в наших шаблонах.</li>
 <li><code><a href="https://docs.python.org/3/library/datetime.html">datetime</a></code>: Библиотека Python для работы с датами и временим. </li>
</ul>

<p>В отображении аргумент <code>pk</code> мы используем в функции<code>get_object_or_404()</code> для получения текущего объекта типа <code>BookInstance</code> (если его не существует, то функция, а следом и наше отображение прервут свое выполнение, а на странице пользователя отобразится сообщение об ошибке: &quot;объект не найден&quot;). Если запрос вызова отображения <em>не является</em> <code>POST</code>-запросом, то мы переходим к условному блоку <code>else</code>, в котором мы создаем форму по умолчанию и передаем ей начальное значения<code>initial</code> для поля <code>renewal_date</code> (выделено жирным ниже, - 3 недели, начиная с текущей даты). </p>

<pre class="brush: python notranslate">    book_inst = get_object_or_404(BookInstance, pk=pk)

    # Если это GET (или другой метод), тогда создаем форму по умолчанию
    <strong>else:</strong>
        proposed_renewal_date = datetime.date.today() + datetime.timedelta(<strong>weeks=3</strong>)
        <strong>form = RenewBookForm(initial={&apos;</strong>renewal_date<strong>&apos;: </strong>proposed_renewal_date<strong>,})</strong>

    return render(request, &apos;catalog/book_renew_librarian.html&apos;, {&apos;form&apos;: form, &apos;bookinst&apos;:book_inst})</pre>

<p>После создания формы мы вызываем функцию <code>render()</code>, чтобы создать HTML страницу; передаем ей в качестве параметров шаблон и контекст, который содержит объект формы. Кроме того, контекст содержит объект типа <code>BookInstance</code>, который мы будем использовать в шаблоне, для получения информации об обновляемой книге.</p>

<p>Если все таки у нас <code>POST</code>-запрос, тогда мы создаем объект с  именем <code>form</code> и заполняем его данными, полученными из запроса. Данный процесс называется связыванием (или, биндингом, от англ. &quot;binding&quot;) и позволяет нам провести валидацию данных. Далее осуществляется валидация формы, при этом проверяются все поля формы — для этого используются как код обобщенного класса, так и пользовательских функций, в частности нашей функции проверки введенных дат <code>clean_renewal_date()</code>. </p>

<pre class="brush: python notranslate">    book_inst = get_object_or_404(BookInstance, pk=pk)

    # Если данный запрос типа POST, тогда
    if request.method == &apos;POST&apos;:

        # Создаем экземпляр формы и заполняем данными из запроса (связывание, binding):
<strong>        form = RenewBookForm(request.POST)</strong>

        # Проверка валидности формы:
        if form.is_valid():
            # process the data in form.cleaned_data as required (here we just write it to the model due_back field)
            book_inst.due_back = form.cleaned_data[&apos;renewal_date&apos;]
            book_inst.save()

            # redirect to a new URL:
            return HttpResponseRedirect(reverse(&apos;all-borrowed&apos;) )

    return render(request, &apos;catalog/book_renew_librarian.html&apos;, {&apos;form&apos;: form, &apos;bookinst&apos;:book_inst})</pre>

<p>Если формы не прошла валидацию, то мы снова вызываем функцию <code>render()</code>, но на этот раз форма будет содержать сообщения об ошибках. </p>

<p>Если форма прошла валидацию, тогда мы можем начать использовать данные, получая их из атрибута формы <code>form.cleaned_data</code>  (то есть, <code>data = form.cleaned_data[&apos;renewal_date&apos;]</code>). Здесь мы просто сохраняем данные в поле <code>due_back</code> , соответствующего объекта<code> BookInstance</code>.</p>

<div class="warning notecard">
<p><strong>Важно</strong>: Хотя вы также можете получить доступ к данным формы непосредственно через запрос (например <code>request.POST[&apos;renewal_date&apos;],</code> или <code>request.GET[&apos;renewal_date&apos;]</code> (в случае GET-запроса), это НЕ рекомендуется. Очищенные данные проверены на вредоносность и преобразованы в типы, совместимые с Python.</p>
</div>

<p>Последним шагом в части обработки формы представления является перенаправление на другую страницу, обычно страницу «Успех». В нашем случае мы используем объект класса <code>HttpResponseRedirect</code> и функцию <code>reverse()</code> для перехода к отображению с именем <code>&apos;all-borrowed&apos;</code> (это было домашним заданием в <a href="/en-US/docs/Learn/Server-side/Django/authentication_and_sessions#Challenge_yourself">Руководство часть 8: Аутентификация и разграничение доступа</a>). Если вы не создали данную страницу, то просто укажите переход на домашнюю страницу сайта по адресу &apos;/&apos;).</p>

<p>Все это необходимо для управления формой как таковой, но нам нужно как-то ограничить доступ к отображению (открыть доступ только библиотекарям). Мы могли бы создать новое разрешение (permission) в классе <code>BookInstance</code> (&quot;<code>can_renew</code>&quot;), но мы пойдем простым путем и воспользуемся функцией-декоратором <code>@permission_required</code>  вместе с нашим существующим разрешением<code>can_mark_returned</code>.</p>

<p>Окончательный вид отображения показан ниже. Пожалуйста, скопируйте данный текст в нижнюю часть файла <strong>locallibrary/catalog/views.py</strong>.</p>

<pre class="notranslate"><strong>from django.contrib.auth.decorators import permission_required</strong>

from django.shortcuts import get_object_or_404
from django.http import HttpResponseRedirect
from django.urls import reverse
import datetime

from .forms import RenewBookForm

<strong>@permission_required(&apos;catalog.<code>can_mark_returned</code>&apos;)</strong>
def renew_book_librarian(request, pk):
    &quot;&quot;&quot;
    View function for renewing a specific BookInstance by librarian
    &quot;&quot;&quot;
    book_inst = get_object_or_404(BookInstance, pk=pk)

    # If this is a POST request then process the Form data
    if request.method == &apos;POST&apos;:

        # Create a form instance and populate it with data from the request (binding):
        form = RenewBookForm(request.POST)

        # Check if the form is valid:
        if form.is_valid():
            # process the data in form.cleaned_data as required (here we just write it to the model due_back field)
            book_inst.due_back = form.cleaned_data[&apos;renewal_date&apos;]
            book_inst.save()

            # redirect to a new URL:
            return HttpResponseRedirect(reverse(&apos;all-borrowed&apos;) )

    # If this is a GET (or any other method) create the default form.
    else:
        proposed_renewal_date = datetime.date.today() + datetime.timedelta(weeks=3)
        form = RenewBookForm(initial={&apos;renewal_date&apos;: proposed_renewal_date,})

    return render(request, &apos;catalog/book_renew_librarian.html&apos;, {&apos;form&apos;: form, &apos;bookinst&apos;:book_inst})
</pre>

<h3 id="Шаблон">Шаблон</h3>

<p>Создайте шаблон, на который ссылается наше отображение (<strong>/catalog/templates/catalog/book_renew_librarian.html</strong>) и скопируйте в него код, указаный ниже:</p>

<pre class="brush: html notranslate">{% extends &quot;base_generic.html&quot; %}
{% block content %}

    &lt;h1&gt;Renew: {{bookinst.book.title}}&lt;/h1&gt;
    &lt;p&gt;Borrower: {{bookinst.borrower}}&lt;/p&gt;
    &lt;p{% if bookinst.is_overdue %} class=&quot;text-danger&quot;{% endif %}&gt;Due date: {{bookinst.due_back}}&lt;/p&gt;

<strong>    &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;
        {% csrf_token %}
        &lt;table&gt;
        {{ form }}
        &lt;/table&gt;
        &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;
    &lt;/form&gt;</strong>

{% endblock %}</pre>

<p>Большая его часть вам знакома из предыдущих частей руководства. Мы расширяем базовый шаблон, а затем замещаем блок содержимого <code>content</code>. У нас имеется возможность ссылаться на переменную <code>{{bookinst}}</code> (и ее поля) поскольку мы передали ее в объект контекста при вызове функции <code>render()</code>. Здесь мы используем данный объект для вывода заголовка книги, дат ее получения и возврата.</p>

<p>Код формы относительно прост. В первую очередь мы объявляем тэг<code>form</code>, затем определяем куда будут отправлены данные (<code>action</code>) и каким способом (<code>method</code>, в данном случае &quot;HTTP POST&quot;) — если обратитесь к обзору раздела <a href="#HTML_forms">Формы HTML</a> в верхней части данной страницы, то найдете там замечение, что пустое значние атрибута <code>action</code>, означает, что данные из формы будут переданы обратно по текущему URL-адресу данной страницы  (чего мы и хотим!). Внутри тэга формы мы объявляем кнопку <code>submit</code> при помощи которой мы можем отправить наши данные. Блок <code>{% csrf_token %}</code>, добавленный первой строкой внутри блока формы, является частью фреймворка Django и служит для борьбы с CSRF.</p>

<div class="note notecard">
<p><strong>Примечание:</strong> Добавляйте <code>{% csrf_token %}</code> в каждый шаблон Django, в котором вы создаете форму для отправки данных методом <code>POST</code>. Это поможет уменьшить вероятность взлома вашего сайта злоумышленниками.</p>
</div>

<p>Все что осталось, это указать переменную <code>{{form}}</code>, которую мы передали в шаблон в словаре контекста. Возможно это вас не удивит, но таким образом мы предоставим возможность форме отрендерить свои поля с их метками, виджетами и дополнительными текстами, и в результате мы получим следующее:</p>

<pre class="brush: html notranslate">&lt;tr&gt;
  &lt;th&gt;&lt;label for=&quot;id_renewal_date&quot;&gt;Renewal date:&lt;/label&gt;&lt;/th&gt;
  &lt;td&gt;
    &lt;input id=&quot;id_renewal_date&quot; name=&quot;renewal_date&quot; type=&quot;text&quot; value=&quot;2016-11-08&quot; required /&gt;
    &lt;br /&gt;
    &lt;span class=&quot;helptext&quot;&gt;Enter date between now and 4 weeks (default 3 weeks).&lt;/span&gt;
  &lt;/td&gt;
&lt;/tr&gt;
</pre>

<div class="note notecard">
<p><strong>Примечание:</strong> Возможно это не очевидно, поскольку наша форма содержит только одно поле, но по умолчанию каждое поле формы помещается в ее собственную строку таблицы (поэтому переменная <code>{{form}}</code> находится внутри тэга <code>table </code>.​​​​​​ Тот же результат можно получить, если воспользоваться следующим вызовом <code>{{ form.as_table }}</code>.</p>
</div>

<p>Если вы ввели неправильную дату, то на странице вы должны получить список сообщений об ошибках (показано жирным ниже).</p>

<pre class="brush: html notranslate">&lt;tr&gt;
  &lt;th&gt;&lt;label for=&quot;id_renewal_date&quot;&gt;Renewal date:&lt;/label&gt;&lt;/th&gt;
   &lt;td&gt;
<strong>      &lt;ul class=&quot;errorlist&quot;&gt;
        &lt;li&gt;Invalid date - renewal in past&lt;/li&gt;
      &lt;/ul&gt;</strong>
      &lt;input id=&quot;id_renewal_date&quot; name=&quot;renewal_date&quot; type=&quot;text&quot; value=&quot;2015-11-08&quot; required /&gt;
      &lt;br /&gt;
      &lt;span class=&quot;helptext&quot;&gt;Enter date between now and 4 weeks (default 3 weeks).&lt;/span&gt;
    &lt;/td&gt;
&lt;/tr&gt;</pre>

<h4 id="Другие_варианты_применения_переменной_шаблона_form">Другие варианты применения переменной шаблона form</h4>

<p>В простом случае применения <code>{{form}}</code> как показано выше, каждое поле рендерится  в виде отдельной строки таблицы. Кроме того, вы можете отрендерить каждое поле как список элементов (<code>{{form.as_ul}}</code> ), или как параграф (<code>{{form.as_p}}</code>).</p>

<p>Что еще больше вдохновляет, так это то, что вы можете полностью контролировать процесс рендеринга любой части формы, используя для этого дот-нотацию (точку). Например, мы можем получить доступ к следующим полям поля формы <code>renewal_date</code>:</p>

<ul>
 <li><code>{{form.renewal_date}}:</code> само поле.</li>
 <li><code>{{form.renewal_date.errors}}</code>: Список ошибок.</li>
 <li><code>{{form.renewal_date.id_for_label}}</code>: Идентификатор текстовой метки.</li>
 <li><code>{{form.renewal_date.help_text}}</code>: Дополнительный текст.</li>
 <li>и так далее!</li>
</ul>

<p>Примеры того как вручную отрендерить формы в шаблонах, а также пробежать циклом по шаблонным полям, смотрите <a href="https://docs.djangoproject.com/en/1.10/topics/forms/#rendering-fields-manually">Работы с формами &gt; Ручная работа с формами</a> (Django docs).</p>

<h3 id="Тестирование_страницы">Тестирование страницы</h3>

<p>Если вы выполнили задание в <a href="/en-US/docs/Learn/Server-side/Django/authentication_and_sessions#Challenge_yourself">Django руководство часть 8: Аутентификация и разрешение доступа</a>, то у вас должна быть страница со списком всех книг в наличии библиотеки и данный список (страница) должен быть доступен только ее сотрудникам. На данной странице в каждом пункте (для каждой книги) мы можем добавить ссылку на нашу новую страницу обновления книги.</p>

<pre class="brush: html notranslate">{% if perms.catalog.can_mark_returned %}- &lt;a href=&quot;{% url &apos;renew-book-librarian&apos; bookinst.id %}&quot;&gt;Renew&lt;/a&gt;  {% endif %}</pre>

<div class="note notecard">
<p><strong>Примечание</strong>: Помните что, для того чтобы перейти на страницу обновления книги, ваш тестовый логин должен иметь разрешение доступа типа &quot;<code>catalog.can_mark_returned</code>&quot;(возможно надо воспользоваться вашим аккаунтом для суперпользователя).</p>
</div>

<p>Вы можете попробовать вручную создать URL-адрес для тестирования, например — <a href="http://127.0.0.1:8000/catalog/book/&lt;bookinstance id&gt;/renew/">http://127.0.0.1:8000/catalog/book/<em>&lt;bookinstance_id&gt;</em>/renew/</a> (правильный идентификатор записи id для bookinstance можно получить, если перейти на страницу детальной информации книги и скопировать поле <code>id</code>).</p>

<h3 id="Как_теперь_все_это_выглядит">Как теперь все это выглядит?</h3>

<p>Если все получилось как надо, то форма по умолчанию должна выглядеть следующим образом:</p>

<p><img alt src="https://mdn.mozillademos.org/files/14209/forms_example_renew_default.png" style="border-style: solid; border-width: 1px; display: block; height: 292px; margin: 0px auto; width: 680px;"></p>

<p>А такой наша форма будет в случае ввода неправильной даты:</p>

<p><img alt src="https://mdn.mozillademos.org/files/14211/forms_example_renew_invalid.png" style="border-style: solid; border-width: 1px; display: block; height: 290px; margin: 0px auto; width: 658px;"></p>

<p>Список всех книг с ссылками на странцу обновления данных:</p>

<p><img alt src="https://mdn.mozillademos.org/files/14207/forms_example_renew_allbooks.png" style="border-style: solid; border-width: 1px; display: block; height: 256px; margin: 0px auto; width: 613px;"></p>

<h2 id="Класс_ModelForm">Класс ModelForm</h2>

<p>Создание класса формы <code>Form</code> при помощи примера, описанного выше, является довольно гибким способом, позволяющим вам создавать формы любой структуры которую вы пожелаете, в связке с любой моделью, или моделями.</p>

<p>Тем не менее, если вам просто нужна форма для отображения полей одиночной модели, тогда эта самая модель уже содержит большую часть информации, которая вам нужна для построения формы: сами поля, текстовые метки, дополнительный текст и так далее. И чтобы не воспроизводить информацию из модели для вашей формы, проще воспользоваться классом <a href="https://docs.djangoproject.com/en/1.10/topics/forms/modelforms/">ModelForm</a>, который помогает созадавать формы непосредственно из модели. Класс <code>ModelForm</code> может применяться в ваших отображениях точно таким же образом как и &quot;классический&quot; класс формы <code>Form</code>.</p>

<p>Базовая реализация <code>ModelForm</code> содержит тоже поле как и ваш предыдущий класс формы  <code>RenewBookForm</code>, что и показано ниже. Все что вам необходимо сделать, - внутри вашего нового класса добавить класс <code>Meta</code> и связать его с моделью <code>model</code> (<code>BookInstance</code>), а затем перечислить поля модели в поле <code>fields</code> которые должны быть включены в форму (вы можете включить все поля при помощи <code>fields = &apos;__all__&apos;</code>, или можно вопользоваться полем <code>exclude</code> (вместо <code>fields</code>), чтобы определить поля модели, которые <em>не</em> нужно включать).</p>

<pre class="brush: python notranslate">from django.forms import ModelForm
from .models import BookInstance

class RenewBookModelForm(ModelForm):
<strong>    class Meta:
        model = BookInstance
        fields = [&apos;due_back&apos;,]</strong>
</pre>

<div class="note notecard">
<p><strong>Примечание</strong>: Это не выглядит сильно проще, чем просто использовать класс <code>Form</code> (и это действительно так, поскольку мы используем только одно поле). Тем не менее, если вы хотите иметь много полей, то такой способ построения формы может значительно уменьшить количество кода и ускорить разработку!</p>
</div>

<p>Оставшаяся часть информации касается объявления полей модели (то есть, текстовых меток, виджетов, текстов, сообщений об ошибках). Если они недостаточно &quot;правильные&quot;, то тогда мы можем переопределить их в нашем классе <code>Meta</code> при помощи словаря, содержащего поле, которое надо изменить и его новое значение. Например, в нашей форме мы могли бы поменять текст метки для поля &quot;<em>Renewal date</em>&quot; (вместо того, чтобы оставить текст по умолчанию: <em>Due date</em>), а кроме того мы хотим написать другой вспомогательный текст. Класс <code>Meta</code>, представленный ниже, показывает вам, как переопределить данные поля. Кроме того, при необходимости, вы можете установить значения для виджетов <code>widgets</code> и сообщений об ошибках <code>error_messages</code>.</p>

<pre class="brush: python notranslate">class Meta:
    model = BookInstance
    fields = [&apos;due_back&apos;,]
<strong>    labels = { &apos;due_back&apos;: _(&apos;Renewal date&apos;), }
    help_texts = { &apos;due_back&apos;: _(&apos;Enter a date between now and 4 weeks (default 3).&apos;), } </strong>
</pre>

<p>Чтобы добавить валидацию, вы можете использовать тот же способ как и для класса <code>Form</code> — вы определяете функцию с именем  <code>clean_<em>field_name</em>()</code> из которой выбрасываете исключение <code>ValidationError</code>, если это необходимо. Единственным отличием от нашей оригинальной формы будет являться то, что поле модели имеет имя <code>due_back</code>, а не &quot;<code>renewal_date</code>&quot;.</p>

<pre class="brush: python notranslate">from django.forms import ModelForm
from .models import BookInstance

class RenewBookModelForm(ModelForm):
<strong>    def clean_due_back(self):
       data = self.cleaned_data[&apos;due_back&apos;]

       #Проверка того, что дата не в прошлом
       if data &lt; datetime.date.today():
           raise ValidationError(_(&apos;Invalid date - renewal in past&apos;))

       #Check date is in range librarian allowed to change (+4 weeks)
       if data &gt; datetime.date.today() + datetime.timedelta(weeks=4):
           raise ValidationError(_(&apos;Invalid date - renewal more than 4 weeks ahead&apos;))

       # Не забывайте всегда возвращать очищенные данные
       return data
</strong>
    class Meta:
        model = BookInstance
        fields = [&apos;due_back&apos;,]
        labels = { &apos;due_back&apos;: _(&apos;Renewal date&apos;), }
        help_texts = { &apos;due_back&apos;: _(&apos;Enter a date between now and 4 weeks (default 3).&apos;), }
</pre>

<p>Теперь класс <code>RenewBookModelForm</code> является функциональным эквивалентом нашему предыдущему классу <code>RenewBookForm</code>. Вы можете импортировать и использовать его в тех же местах, где и <code>RenewBookForm</code>.</p>

<h2 id="Обобщенные_классы_отображения_для_редактирования">Обобщенные классы отображения для редактирования</h2>

<p>Алгоритм управления формой, который мы использовали в нашей функции отображения, является примером достаточно общего подхода к работе с формой. Django старается абстрагировать и упростить бульшую часть данной работы, путем широкого применения <a href="https://docs.djangoproject.com/en/1.10/ref/class-based-views/generic-editing/">обобщенных классов отображений</a>, которые служат для создания, редактирования и удаления отображений на основе моделей. Они не только управляют поведением отображения, но, кроме того, они из вашей модели автоматически создают класс формы  (<code>ModelForm</code>).</p>

<div class="note notecard">
<p><strong>Примечание: </strong>В дополнение к отображениям для реактирования, описываемых здесь, существует также класс <a href="https://docs.djangoproject.com/en/1.10/ref/class-based-views/generic-editing/#formview">FormView</a>, который по своему предназначению находится где-то между &quot;простой&quot; функцией отображения и другими обобщенными отображенями, то есть в каком-то смысле, в диапазоне: &quot;гибкость&quot; против &quot;усилия при программировании&quot;. Применяя <code>FormView,</code> вы все еще нуждаетесь в создании класса <code>Form</code>, но вам не нужно реализовавыть весь &quot;стандартный&quot; функционал работы с формой. Вместо этого, вы должны просто реализовать функцию, которая будет вызвана в тот момент, когда станет понятно, что получаемые из формы данные, &quot;правильные&quot; (валидны).</p>
</div>

<p>В данном разделе мы собираемся  использовать обобщенные классы для редактирования, для того, чтобы создать страницы, который добавляют функционал создания, редактирования и удаления записей типа <code>Author</code> из нашей библиотеки — предоставляя базовый функционал некоторых частей административной части сайта (это может быть полезно для случаев, когда вам нужно создать административную часть сайта, которая, в отличие от стандартной, была бы более гибкой).</p>

<h3 id="Отображения">Отображения</h3>

<p>Откройте файл отображений (<strong>locallibrary/catalog/views.py</strong>) и добавьте следующий код в его нижнюю часть:</p>

<pre class="brush: python notranslate">from django.views.generic.edit import CreateView, UpdateView, DeleteView
from django.urls import reverse_lazy
from .models import Author

class AuthorCreate(CreateView):
    model = Author
    fields = &apos;__all__&apos;
    initial={&apos;date_of_death&apos;:&apos;12/10/2016&apos;,}

class AuthorUpdate(UpdateView):
    model = Author
    fields = [&apos;first_name&apos;,&apos;last_name&apos;,&apos;date_of_birth&apos;,&apos;date_of_death&apos;]

class AuthorDelete(DeleteView):
    model = Author
    success_url = reverse_lazy(&apos;authors&apos;)</pre>

<p>Как вы видите, для создания отображений вам надо наследоваться от следующих классов<code>CreateView</code>, <code>UpdateView</code> и <code>DeleteView</code> (соответственно), а затем связать их с соответствующей моделью.</p>

<p>Для случаев &quot;создать&quot; и &quot;обновить&quot; вам также понадобится определить поля для показа на форме (применяя тот же синтаксис, что и для <code>ModelForm</code>). В этом случае мы демонстриурем синтаксис и для показаза &quot;всех&quot; полей, и перечисление их по отдельности. Также вы можете указать начальные значения для каждого поля, применяя словарь пар <em>имя_поля</em>/<em>значение</em> (в целях демонстрации, в нашем примере мы явно указываем дату смерти — если хотите, то вы можете удалить это поле). По умолчанию отображения перенаправляют пользователя на страницу &quot;успеха&quot;, показывая только что созданные/отредатированные данные (записи в модели). В нашем случае это, созданная в предыдущей части руководства, подробная информация об авторе. Вы можете указать альтернативное перенаправление при помощи параметра <code>success_url</code> (как в примере с классом <code>AuthorDelete</code>).</p>

<p>Классу <code>AuthorDelete</code> не нужно показывать каких либо полей, таким образом их не нужно и декларировать. Тем не менее, вам нужно указать <code>success_url</code>, потому что, в данном случае, для Django не очевидно что делать после успешного выполнения операции удаления записи. Мы используем функцию <code><a href="https://docs.djangoproject.com/en/1.10/ref/urlresolvers/#reverse-lazy">reverse_lazy()</a></code> для перехода на страницу списка авторов после удаления одного из них — <code>reverse_lazy()</code> это более &quot;ленивая&quot; версия <code>reverse().</code></p>

<h3 id="Шаблоны">Шаблоны</h3>

<p>Отображения  &quot;создать&quot; и &quot;обновить&quot; используют  шаблоны с именем <em>model_name</em><strong>_form.html,</strong> по умолчанию: (вы можете поменять суффикс на что-нибудь другое, при помощи поля <code>template_name_suffix</code> в вашем отображении, например, <code>template_name_suffix = &apos;_other_suffix&apos;</code>)</p>

<p>Создайте файл шаблона <strong>locallibrary/catalog/templates/catalog/author_form.html</strong>  и скопируйте в него следующий текст.</p>

<pre class="brush: html notranslate">{% extends &quot;base_generic.html&quot; %}

{% block content %}

&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;
    {% csrf_token %}
    &lt;table&gt;
    {{ form.as_table }}
    &lt;/table&gt;
    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;

&lt;/form&gt;
{% endblock %}</pre>

<p>Это напоминает наши предыдущие формы и рендер полей при помощи таблицы. Заметьте, что мы снова используем<code>{% csrf_token %}</code>.</p>

<p>Отображения &quot;удалить&quot; ожидает &quot;найти&quot; шаблон с именем формата <em>model_name</em><strong>_confirm_delete.html</strong> (и снова, вы можете изменить суффикс при помощи поля отображения<code>template_name_suffix</code>). Создайте файл шаблона <strong>locallibrary/catalog/templates/catalog/author_confirm_delete</strong><strong>.html</strong> и скопируйте в него текст, указанный ниже.</p>

<pre class="brush: html notranslate">{% extends &quot;base_generic.html&quot; %}

{% block content %}

&lt;h1&gt;Delete Author&lt;/h1&gt;

&lt;p&gt;Are you sure you want to delete the author: {{ author }}?&lt;/p&gt;

&lt;form action=&quot;&quot; method=&quot;POST&quot;&gt;
  {% csrf_token %}
  &lt;input type=&quot;submit&quot; value=&quot;Yes, delete.&quot; /&gt;
&lt;/form&gt;

{% endblock %}
</pre>

<h3 id="Настройки_URL-адресов">Настройки URL-адресов</h3>

<p>Откройте файл конфигураций URL-адресов (<strong>locallibrary/catalog/urls.py</strong>) и добавьте в его нижнюю часть следующие настройки:</p>

<pre class="brush: python notranslate">urlpatterns += [
    url(r&apos;^author/create/$&apos;, views.AuthorCreate.as_view(), name=&apos;author_create&apos;),
    url(r&apos;^author/(?P&lt;pk&gt;\d+)/update/$&apos;, views.AuthorUpdate.as_view(), name=&apos;author_update&apos;),
    url(r&apos;^author/(?P&lt;pk&gt;\d+)/delete/$&apos;, views.AuthorDelete.as_view(), name=&apos;author_delete&apos;),
]</pre>

<p>Здесь нет ничего нового! Как вы видите отображения являются классами и следовательно должны вызываться через метод <code>.as_view()</code>. Паттерны URL-адресов для каждого случая должны быть вам понятны. Мы обязаны использовать <code>pk</code> как имя для &quot;захваченного&quot; значения первичного ключа, так как параметр именно с таким именем ожидается классами отображения.</p>

<p>Страницы создания, обновления и удаления автора теперь готовы к тестированию (мы не будем создавать на них ссылки в отдельном меню, но вы, если хотите, можете их сделать).</p>

<div class="note notecard">
<p><strong>Примечание</strong>: Наблюдательные пользователи могли заметить, что мы ничего не делаем, чтобы предотвратить несанкционированный доступ к страницам! Мы оставили это в качестве упражнения для вас (подсказка: вы можете использовать <code>PermissionRequiredMixin</code> и, либо создать новое разрешение, или воспользоваться нашим прежним <code>can_mark_returned</code>).</p>
</div>

<h3 id="Тестирование_страницы_2">Тестирование страницы</h3>

<p>Залогиньтесь на сайте с аккаунтом, который позволит вам получить доступ к страницам редактирования данных (и записей) автора.</p>

<p>Затем перейдите на страницу создания новой записи автора: <a href="http://127.0.0.1:8000/catalog/author/create/">http://127.0.0.1:8000/catalog/author/create/</a>, которая должна быть похожей на следующий скриншот.</p>

<p><img alt="Form Example: Create Author" src="https://mdn.mozillademos.org/files/14223/forms_example_create_author.png" style="border-style: solid; border-width: 1px; display: block; height: 184px; margin: 0px auto; width: 645px;"></p>

<p>Введите в поля значения и нажмите на кнопку <strong>Submit</strong>, чтобы сохранить новую запись об авторе. После этого, вы должны были перейти на страницу редактирования только что созданного автора, имеющий адрес, похожий на следующий <em>http://127.0.0.1:8000/catalog/author/10</em>.</p>

<p>У вас есть возможность редактирования записей при помощи добавления<em> /update/</em> в конец адреса подробной информации (то есть, <em>http://127.0.0.1:8000/catalog/author/10/update/</em>) — мы не показываем скриншот, потому что он выглядит в точности также как  страница &quot;создать&quot;!</p>

<p>И последнее, мы можем удалить страницу, добавляя строку <em>/delete/</em> в конец адреса подробной информации автора (то есть, <em>http://127.0.0.1:8000/catalog/author/10/delete/</em>). Django должен показать страницу, которая похожа на представленную ниже. Нажмите <strong>Yes, delete.</strong>, чтобы удалить запись и перейти на страницу со списком авторов.</p>

<p><img alt src="https://mdn.mozillademos.org/files/14221/forms_example_delete_author.png" style="border-style: solid; border-width: 1px; display: block; height: 194px; margin: 0px auto; width: 561px;"></p>

<h2 id="Проверьте_себя">Проверьте себя</h2>

<p>Создайте несколько форм создания, редактирования и удаления записей в модели <code>Book</code>. При желании, вы можете использовать теже структуры как и в случае с моделью <code>Authors</code>. Если ваш шаблон <strong>book_form.html</strong> является просто копией шаблона <strong>author_form.html</strong>, тогда новая страница &quot;create book&quot; будет выглядеть как на следующем скриншоте:</p>

<p><img alt src="https://mdn.mozillademos.org/files/14225/forms_example_create_book.png" style="border-style: solid; border-width: 1px; display: block; height: 521px; margin: 0px auto; width: 595px;"></p>

<ul>
</ul>

<h2 id="Итоги">Итоги</h2>

<p>Создание и управление формами может быть достаточно сложным! Django делает этот процесс намного проще, предоставляя прикладные механизмы объявления, рендеринга и проверки форм. Более того, Django предоставляет обобщенные классы  редактирования форм, которые могут выполнять <em>практически любую</em> работу по созданию, редактированию и удалению записей, связанных с одиночной моделью.</p>

<p>Существует много чего еще, что можно делать с формами (ознакомьтесь со списком ниже), но теперь вы должны понимать как добавлять базовые формы и создавать код управления формой на вашем сайте.  </p>

<h2 id="Смотрите_также">Смотрите также</h2>

<ul>
 <li><a href="https://docs.djangoproject.com/en/1.10/topics/forms/">Работа с формами</a> (Django docs)</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/intro/tutorial04/#write-a-simple-form">Создание вашего первого приложения, часть 4 &gt; Создание простой формы </a>(Django docs)</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/ref/forms/api/">Forms API</a> (Django docs)</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/ref/forms/fields/">Поля класса Form</a> (Django docs) </li>
 <li><a href="https://docs.djangoproject.com/en/1.10/ref/forms/validation/">Класс Form и валидация поля</a> (Django docs)</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/topics/class-based-views/generic-editing/">Управление классом Form из классов отображений</a> (Django docs)</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/topics/forms/modelforms/">Создание форм из моделей</a> (Django docs)</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/ref/class-based-views/generic-editing/">Обобщенные отображения для редактирования</a> (Django docs)</li>
</ul>

<div class="prevnext">
  <a href="/ru/docs/Learn/Server-side/Django/authentication_and_sessions" class="button"><i class="icon-arrow-left"></i><span class="label"> Назад </span></a><a href="/ru/docs/Learn/Server-side/Django" class="button"><i class="icon-arrow-up"></i> Обзор: Django</a><a href="/ru/docs/Learn/Server-side/Django/Testing" class="button"><span class="label"> Далее  </span><i class="icon-arrow-right"></i></a>
</div>
