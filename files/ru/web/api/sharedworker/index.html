---
title: SharedWorker
slug: Web/API/SharedWorker
translation_of: Web/API/SharedWorker
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/ru/docs/Web/API/Web_Workers_API">Web Workers API</a></strong></li><li><strong><a href="/ru/docs/Web/API/SharedWorker"><code>SharedWorker</code></a></strong></li><li class="toggle"><details open><summary>Конструктор</summary><ol><li><a href="/ru/docs/Web/API/SharedWorker/SharedWorker"><code>SharedWorker()</code></a> <a style="opacity: 0.5;" href="/ru/docs/Web/API/SharedWorker/SharedWorker$translate">[Перевести]</a></li></ol></details></li><li class="toggle"><details open><summary>Свойства</summary><ol><li><a href="/ru/docs/Web/API/AbstractWorker/onerror"><code>onerror</code></a> <a style="opacity: 0.5;" href="/ru/docs/Web/API/AbstractWorker/onerror$translate">[Перевести]</a></li><li><a href="/ru/docs/Web/API/SharedWorker/port"><code>port</code></a> <a style="opacity: 0.5;" href="/ru/docs/Web/API/SharedWorker/port$translate">[Перевести]</a></li></ol></details></li><li class="toggle"><details open><summary>Наследование:</summary><ol><li><a href="/ru/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li><li class="toggle"><details open><summary>Похожие страницы для Web Workers API</summary><ol><li><a href="/ru/docs/Web/API/AbstractWorker"><code>AbstractWorker</code></a></li><li><a href="/ru/docs/Web/API/ChromeWorker"><code>ChromeWorker</code></a></li><li><a href="/ru/docs/Web/API/DedicatedWorkerGlobalScope"><code>DedicatedWorkerGlobalScope</code></a></li><li><a href="/ru/docs/Web/API/ServiceWorker"><code>ServiceWorker</code></a></li><li><a href="/ru/docs/Web/API/SharedWorkerGlobalScope"><code>SharedWorkerGlobalScope</code></a></li><li><a href="/ru/docs/Web/API/Worker"><code>Worker</code></a></li><li><a href="/ru/docs/Web/API/WorkerGlobalScope"><code>WorkerGlobalScope</code></a></li><li><a href="/ru/docs/Web/API/WorkerLocation"><code>WorkerLocation</code></a></li><li><a href="/ru/docs/Web/API/WorkerNavigator"><code>WorkerNavigator</code></a></li></ol></details></li></ol></section></div>

<p><code><font face="Open Sans, arial, x-locale-body, sans-serif"><span style="background-color: #ffffff;">Интерфейс </span></font><strong>SharedWorker </strong>(разделяемый воркер)</code> является особым видом воркеров к которому можно получить доступ из нескольких контекстов браузера, например, из нескольких окон, iframe, или других воркеров. Этот интерфейс реализован иначе, чем dedicated воркеры и имеют иной глобальный контекст, <a href="/ru/docs/Web/API/SharedWorkerGlobalScope" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>SharedWorkerGlobalScope</code></a>.</p>

<div class="note">
<p><strong>Замечание:</strong> Если SharedWorker может быть доступен из нескольких контекстов браузера, все они должны разделять одинаковое расположение (идентичные протокол, хост и порт).</p>
</div>

<div class="note">
<p><strong>Замечание</strong>: В Firefox, разделяемые воркеры не могут взаимодействовать между private (например, просматриваемыми в приватном режиме) и non-private документами (см. <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1177621" title="FIXED: Do not share a SharedWorker between a private and a non-private document">баг 1177621</a>.)</p>
</div>

<h2 id="Свойства">Свойства</h2>

<p><em>Наследует свойства родителя, <a href="/ru/docs/Web/API/EventTarget" title="EventTarget - это интерфейс, реализуемый объектами, которые могут генерировать события и могут иметь подписчиков на эти события."><code>EventTarget</code></a>, и реализует свойства <a href="/ru/docs/Web/API/AbstractWorker" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>AbstractWorker</code></a>.</em></p>

<dl>
 <dt><a href="/ru/docs/Web/API/AbstractWorker/onerror" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>AbstractWorker.onerror</code></a></dt>
 <dd><a href="/ru/docs/Web/API/EventListener" title="Интерфейс EventListener представляет собой объект, который может обработать событие, отправленное объектом EventTarget."><code>EventListener</code></a> который вызывается всегда, когда <a href="/ru/docs/Web/API/ErrorEvent" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>ErrorEvent</code></a> типа <code>error</code> всплывает через воркер.</dd>
 <dt><a href="/ru/docs/Web/API/SharedWorker/port" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>SharedWorker.port</code></a> <span class="readOnly readOnlyInline notecard inline" title="Это значение изменять нельзя.">Только для чтения </span></dt>
 <dd>Возвращает объект <a href="/ru/docs/Web/API/MessagePort" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>MessagePort</code></a>, используемый для коммуникации и контроля разделяемого воркера.</dd>
</dl>

<h2 id="Constructors">Constructors</h2>

<dl>
 <dt><a href="/ru/docs/Web/API/SharedWorker/SharedWorker" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>SharedWorker()</code></a></dt>
 <dd>Создает разделяемый веб воркер, который выполняет скрипт по указанному URL.</dd>
</dl>

<h2 id="Методы">Методы</h2>

<p><em>Наследует методы родительского класса, <a href="/ru/docs/Web/API/EventTarget" title="EventTarget - это интерфейс, реализуемый объектами, которые могут генерировать события и могут иметь подписчиков на эти события."><code>EventTarget</code></a>, и реализует свойства <a href="/ru/docs/Web/API/AbstractWorker" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>AbstractWorker</code></a>.</em></p>

<h2 id="Пример">Пример</h2>

<p>В нашем <a href="https://github.com/mdn/simple-shared-worker" class="external external-icon">Базовом примере разделяемого воркера</a> (<a href="http://mdn.github.io/simple-shared-worker/" class="external external-icon">запустить</a>), имеются две HTML страницы, каждая из которых использует JavaScript для простых вычислений. Разные скрипты используют один и тот же воркер, чтобы выполнить умножение двух чисел - они оба имеют доступ к нему, даже если их страницы запущены в разных окнах.</p>

<p>Следующий пример кода демонстрирует создание объекта <code>SharedWorker</code> с использованием конструктора <a href="/ru/docs/Web/API/SharedWorker/SharedWorker" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>SharedWorker()</code></a>. Оба скрипта содержат:</p>

<pre class="brush: js">var myWorker = new SharedWorker(&quot;worker.js&quot;);
</pre>

<p>далее скрипты получают доступ к воркеру через объект <a href="/ru/docs/Web/API/MessagePort" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>MessagePort</code></a>, находящийся в свойстве <a href="/ru/docs/Web/API/SharedWorker/port" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>SharedWorker.port</code></a>. Если устанавливается хэндлер события onmessage, port самостоятельно начинает работу, вызывая собственный метод <code>start(), </code>если же принимать события с помощью слушателя события  &quot;message&quot; через addEventListener, необходимо вызвать метод <code>start()</code> самостоятельно:</p>

<pre class="brush: js">myWorker.port.start();</pre>

<p>После того, как порт запущен, оба скрипта отправляют сообщения воркеру и принимают их от него, используя <code>port.postMessage()</code> и <code>port.onmessage</code>, соответственно:</p>

<pre class="brush: js">first.onchange = function() {
    myWorker.port.postMessage([first.value,second.value]);
    console.log(&apos;Message posted to worker&apos;);
  }

  second.onchange = function() {
    myWorker.port.postMessage([first.value,second.value]);
    console.log(&apos;Message posted to worker&apos;);
  }

  myWorker.port.onmessage = function(e) {
    result1.textContent = e.data;
    console.log(&apos;Message received from worker&apos;);
  }</pre>

<p>Внутри воркера используется хэндлер <a href="/ru/docs/Web/API/SharedWorkerGlobalScope/onconnect" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>SharedWorkerGlobalScope.onconnect</code></a> для соединения к тому же порту, как обсуждалось ранее. Порты, связанные с данным воркером доступны в свойстве ports события <code><a href="/ru/docs/Web/Reference/Events/connect" title="/ru/docs/Web/Reference/Events/connect">connect</a></code>. Далее вызывается метод <a href="/ru/docs/Web/API/MessagePort" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>MessagePort</code></a> <code>start()</code> для запуска порта, и устанавливается хэндлер <code>onmessage</code> для обработки сообщений, присылаемых от обоих потоков.</p>

<pre class="brush: js">onconnect = function(e) {
    var port = e.ports[0];
    // or port = e.source

    port.addEventListener(&apos;message&apos;, function(e) {
      var workerResult = &apos;Result: &apos; + (e.data[0] * e.data[1]);
      port.postMessage(workerResult);
    });

    port.start(); // обязательно при использовании addEventListener. Иначе вызывается неявно после установки хэндлера onmessage.
}</pre>

<h3 id="Пример_с_несколькими_страницами">Пример с несколькими страницами</h3>

<h4 id="sect1"> </h4>

<pre><strong>test.js
</strong>
let connected = false;
self.addEventListener(&quot;connect&quot;, e =&gt; {
  e.source.addEventListener(&quot;message&quot;, ev =&gt; {
    if (ev.data === &quot;start&quot;) {
      if (connected === false) {
        e.source.postMessage(&apos;worker init&apos;);
        connected = true;
      } else {
        e.source.postMessage(&apos;worker already inited&apos;);
      }
    }
  }, false);
  e.source.start();
}, false);


<strong>На странице 1 получаем сообщение &apos;</strong>worker init<strong>&apos; в консоли.

index1.html
...</strong>
&lt;script&gt;
    let worker = new SharedWorker(&apos;test.js&apos;);
    worker.port.addEventListener(&quot;message&quot;, e =&gt; {
      console.log(e.data);
    }, false);
    worker.port.start();
    worker.port.postMessage(&quot;start&quot;);
&lt;/script&gt;
<strong>...

На странице 2 в консоль выводится &apos;worker already inited&apos;, так как страница 1 уже запустила наш воркер;

</strong>index2.html
...
&lt;script&gt;
    let worker = new SharedWorker(&apos;test.js&apos;);
    worker.port.addEventListener(&quot;message&quot;, e =&gt; {
      console.log(e.data);
    }, false);
    worker.port.start();
    worker.port.postMessage(&quot;start&quot;);
&lt;/script&gt;
...</pre>

<p> </p>

<p> </p>

<p> </p>

<h2 id="sect2"> </h2>

<h2 id="Спецификации">Спецификации</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a lang="en" href="https://html.spec.whatwg.org/multipage/#sharedworker" class="external" hreflang="en">HTML Living Standard<br><small lang="ru">Определение &apos;SharedWorker&apos; в этой спецификации.</small></a></td>
   <td><span class="spec-Living">Живой стандарт</span></td>
   <td>No change from <a lang="en" class="external" hreflang="en">Unknown</a>.</td>
  </tr>
 </tbody>
</table>

<h2 id="Совместимость_браузеров">Совместимость браузеров</h2>

<p></p><div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/ru/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Настольные</a></li>
        <li><a>Мобильные</a></li>
    </ul>
</div><p></p>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari</th>
  </tr>
  <tr>
   <td>Поддержка</td>
   <td>4</td>
   <td><a href="/en-US/Firefox/Releases/29">29.0</a> (29.0)</td>
   <td><span style="color: #f00;">Нет</span></td>
   <td>10.60</td>
   <td>5<br>
    <span style="color: #f00;">Нет</span> 6.1</td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Chrome for Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS (Gecko)</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Поддержка</td>
   <td><span style="color: #f00;">Нет</span></td>
   <td><span style="color: #f00;">Нет</span></td>
   <td>33.0 (33.0)</td>
   <td>2.1</td>
   <td><span style="color: #f00;">Нет</span></td>
   <td>11.5</td>
   <td>5.1<br>
    <span style="color: #f00;">Нет</span> 7.1</td>
  </tr>
 </tbody>
</table>
</div>

<h2 id="See_also">See also</h2>

<ul>
 <li><a href="/ru/docs/Web/API/Worker"><code>Worker</code></a></li>
 <li><a href="/en-US/docs/Web/Guide/Performance/Using_web_workers" class="internal">Использование веб воркеров</a></li>
</ul>
