---
title: Cache.put()
slug: Web/API/Cache/put
translation_of: Web/API/Cache/put
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/ru/docs/Web/API/Service_Worker_API">Service Worker API</a></strong></li><li><strong><a href="/ru/docs/Web/API/Cache"><code>Cache</code></a></strong></li><li class="toggle"><details open><summary>Методы</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="Это экспериментальное API, которое не должно использоваться в рабочем коде."><i class="icon-beaker"> </i></span></span><a href="/ru/docs/Web/API/Cache/add"><code>add()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Это экспериментальное API, которое не должно использоваться в рабочем коде."><i class="icon-beaker"> </i></span></span><a href="/ru/docs/Web/API/Cache/addAll"><code>addAll()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Это экспериментальное API, которое не должно использоваться в рабочем коде."><i class="icon-beaker"> </i></span></span><a href="/ru/docs/Web/API/Cache/delete"><code>delete()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Это экспериментальное API, которое не должно использоваться в рабочем коде."><i class="icon-beaker"> </i></span></span><a href="/ru/docs/Web/API/Cache/keys"><code>keys()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Это экспериментальное API, которое не должно использоваться в рабочем коде."><i class="icon-beaker"> </i></span></span><a href="/ru/docs/Web/API/Cache/match"><code>match()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Это экспериментальное API, которое не должно использоваться в рабочем коде."><i class="icon-beaker"> </i></span></span><a href="/ru/docs/Web/API/Cache/matchAll"><code>matchAll()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Это экспериментальное API, которое не должно использоваться в рабочем коде."><i class="icon-beaker"> </i></span></span><em><code>put()</code></em></li></ol></details></li><li class="toggle"><details open><summary>Похожие страницы для Service Workers API</summary><ol><li><a href="/ru/docs/Web/API/CacheStorage"><code>CacheStorage</code></a></li><li><a href="/ru/docs/Web/API/Client"><code>Client</code></a></li><li><a href="/ru/docs/Web/API/Clients"><code>Clients</code></a></li><li><a href="/ru/docs/Web/API/ExtendableEvent"><code>ExtendableEvent</code></a></li><li><a href="/ru/docs/Web/API/FetchEvent"><code>FetchEvent</code></a></li><li><a href="/ru/docs/Web/API/InstallEvent"><code>InstallEvent</code></a></li><li><a href="/ru/docs/Web/API/Navigator/serviceWorker"><code>Navigator.serviceWorker</code></a></li><li><a href="/ru/docs/Web/API/NotificationEvent"><code>NotificationEvent</code></a></li><li><a href="/ru/docs/Web/API/PeriodicSyncEvent"><code>PeriodicSyncEvent</code></a></li><li><a href="/ru/docs/Web/API/PeriodicSyncManager"><code>PeriodicSyncManager</code></a></li><li><a href="/ru/docs/Web/API/PeriodicSyncRegistration"><code>PeriodicSyncRegistration</code></a></li><li><a href="/ru/docs/Web/API/ServiceWorker"><code>ServiceWorker</code></a></li><li><a href="/ru/docs/Web/API/ServiceWorkerContainer"><code>ServiceWorkerContainer</code></a></li><li><a href="/ru/docs/Web/API/ServiceWorkerGlobalScope"><code>ServiceWorkerGlobalScope</code></a></li><li><a href="/ru/docs/Web/API/ServiceWorkerRegistration"><code>ServiceWorkerRegistration</code></a></li><li><a href="/ru/docs/Web/API/SyncEvent"><code>SyncEvent</code></a></li><li><a href="/ru/docs/Web/API/SyncManager"><code>SyncManager</code></a></li><li><a href="/ru/docs/Web/API/SyncRegistration"><code>SyncRegistration</code></a></li><li><a href="/ru/docs/Web/API/WindowClient"><code>WindowClient</code></a></li></ol></details></li></ol></section><div class="experimental indicator-warning notecard">
    <p><strong>Это экспериментальная технология</strong><br>Так как спецификация этой технологии ещё не стабилизировалась, смотрите <a href="#Browser_compatibility">таблицу совместимости</a> по поводу использования в различных браузерах. Также заметьте, что синтаксис и поведение экспериментальной технологии может измениться в будущих версиях браузеров, вслед за изменениями спецификации.</p>
</div>

<p><span class="seoSummary">Метод <strong><code>put()</code></strong> интерфейса <a href="/ru/docs/Web/API/Cache"><code>Cache</code></a> позволяет добавлять пары ключ/значение в текущий объект <a href="/ru/docs/Web/API/Cache"><code>Cache</code></a>.</span></p>

<p>Often, you will just want to <a href="/ru/docs/Web/API/WindowOrWorkerGlobalScope/fetch"><code>fetch()</code></a> one or more requests, then add the result straight to your cache. In such cases you are better off using <a href="/ru/docs/Web/API/Cache/add"><code>Cache.add()</code></a>/<a href="/ru/docs/Web/API/Cache/addAll"><code>Cache.addAll()</code></a>, as they are shorthand functions for one or more of these operations.</p>

<pre class="brush: js notranslate">fetch(url).then(function(response) {
  if (!response.ok) {
    throw new TypeError(&apos;Bad response status&apos;);
  }
  return cache.put(url, response);
})

</pre>

<div class="note notecard">
<p><strong>Note</strong>: <code>put()</code> will overwrite any key/value pair previously stored in the cache that matches the request.</p>
</div>

<div class="note notecard">
<p><strong>Note</strong>: <a href="/ru/docs/Web/API/Cache/add"><code>Cache.add</code></a>/<a href="/ru/docs/Web/API/Cache/addAll"><code>Cache.addAll</code></a> do not cache responses with <code>Response.status</code> values that are not in the 200 range, whereas <a href="/ru/docs/Web/API/Cache/put"><code>Cache.put</code></a> lets you store any request/response pair. As a result, <a href="/ru/docs/Web/API/Cache/add"><code>Cache.add</code></a>/<a href="/ru/docs/Web/API/Cache/addAll"><code>Cache.addAll</code></a> can&apos;t be used to store opaque responses, whereas <a href="/ru/docs/Web/API/Cache/put"><code>Cache.put</code></a> can.</p>
</div>

<div class="note notecard">
<p><strong>Note</strong>: Initial Cache implementations (in both Blink and Gecko) resolve <a href="/ru/docs/Web/API/Cache/add"><code>Cache.add</code></a>, <a href="/ru/docs/Web/API/Cache/addAll"><code>Cache.addAll</code></a>, and <a href="/ru/docs/Web/API/Cache/put"><code>Cache.put</code></a> promises when the response body is fully written to the disk.  More recent spec versions state that the browser can resolve the promise as soon as the entry is recorded in the database even if the response body is still streaming in.</p>
</div>

<h2 id="Syntax">Syntax</h2>

<pre class="brush: js notranslate">cache.put(request, response).then(function() {
  // request/response pair has been added to the cache
});
</pre>

<h3 id="Parameters">Parameters</h3>

<dl>
 <dt>request</dt>
 <dd>The <a href="/ru/docs/Web/API/Request"><code>Request</code></a> you want to add to the cache.</dd>
 <dt>response</dt>
 <dd>The <a href="/ru/docs/Web/API/Response"><code>Response</code></a> you want to match up to the request.</dd>
</dl>

<h3 id="Return_value">Return value</h3>

<p>A <a href="/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that resolves with void.</p>

<div class="note notecard">
<p><strong>Note</strong>: The promise will reject with a <code>TypeError</code> if the URL scheme is not <code>http</code> or <code>https</code>.</p>
</div>

<h2 id="Examples" style="line-height: 30px; font-size: 2.14285714285714rem;">Examples</h2>

<p>This example is from the MDN <a href="https://github.com/mdn/sw-test/">sw-test example</a> (see <a href="https://mdn.github.io/sw-test/">sw-test running live</a>). Here we wait for a <a href="/ru/docs/Web/API/FetchEvent"><code>FetchEvent</code></a> to fire. We construct a custom response like so:</p>

<ol>
 <li>Check whether a match for the request is found in the <a href="/ru/docs/Web/API/CacheStorage"><code>CacheStorage</code></a> using <a href="/ru/docs/Web/API/CacheStorage/match"><code>CacheStorage.match()</code></a>. If so, serve that.</li>
 <li>If not, open the <code>v1</code> cache using <code>open()</code>, put the default network request in the cache using <a href="/ru/docs/Web/API/Cache/put"><code>Cache.put()</code></a> and return a clone of the default network request using <code>return response.clone()</code>. Clone is needed because <code>put()</code> consumes the response body.</li>
 <li>If this fails (e.g., because the network is down), return a fallback response.</li>
</ol>

<pre class="brush: js notranslate">var response;
var cachedResponse = caches.match(event.request).catch(function() {
  return fetch(event.request);
}).then(function(r) {
  response = r;
  caches.open(&apos;v1&apos;).then(function(cache) {
    cache.put(event.request, response);
  });
  return response.clone();
}).catch(function() {
  return caches.match(&apos;/sw-test/gallery/myLittleVader.jpg&apos;);
});</pre>

<h2 id="Specifications">Specifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://w3c.github.io/ServiceWorker/#dom-cache-put" hreflang="en" lang="en">Service Workers<br><small lang="ru">Определение &apos;Cache: put&apos; в этой спецификации.</small></a></td>
   <td><span class="spec-WD">Рабочий черновик</span></td>
   <td>Initial definition.</td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<div class="hidden">The compatibility table on this page is generated from structured data. If you&apos;d like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</div>

<div class="bc-data" id="bcd:api.Cache.put"></div>

<h2 id="See_also">See also</h2>

<ul>
 <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorker_API/Using_Service_Workers">Using Service Workers</a></li>
 <li><a href="/ru/docs/Web/API/Cache"><code>Cache</code></a></li>
 <li><a href="/ru/docs/Web/API/WorkerGlobalScope/caches"><code>WorkerGlobalScope.caches</code></a></li>
</ul>
