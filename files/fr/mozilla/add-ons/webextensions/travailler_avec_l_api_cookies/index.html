---
title: Travailler avec l'API Cookies
slug: Mozilla/Add-ons/WebExtensions/travailler_avec_l_API_cookies
tags:
  - Add-ons
  - Comment
  - Cookies
  - Débutant
  - Extensions
  - How-to
  - WebExtensions
translation_of: Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API
---
<section class="Quick_links" id="Quick_Links">
  <ol>
    <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions"><strong>WebExtensions</strong></a></li>
    <li class="toggle">
      <details>
        <summary>Démarrage</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions">Que sont les WebExtensions ?</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension">Votre première WebExtension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension">Votre deuxième WebExtension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension">Anatomie d'une WebExtension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Examples">Exemples de WebExtensions</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/What_next_">Que faire ensuite ?</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Concepts</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs">Utilisation des API JavaScript</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Content_scripts">Scripts de contenu</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Match_patterns">Motifs de correspondance (Match patterns)</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Working_with_files">Travailler avec les fichiers</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Internationalization">Internationalisation</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Security_best_practices">Sécurité : bonnes pratiques</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy">Politique de sécurité du contenu</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Native_messaging">Message natifs</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Interface Utilisateur</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface">Introduction</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Accessibility_guidelines">Accessibility guidelines</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action">Bouton de la barre d'outils</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions">Bouton de la barre d'adresse</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars">Barres latérales</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items">Éléments du menu contextuel</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages">Page d'options</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages">Pages pour l'extension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications">Notifications</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox">Suggestions de la barre d'adresse</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels">Panneaux d'outils de développement</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Mode d'emploi</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests">Intercepter les requêtes HTTP</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page">Modifier une page web</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page">Insérer un contenu externe</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar">Ajouter un bouton à la barre d'outils</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page">Mettre en place une page de paramètres</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API">Travailler avec l'API Tabs</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API">Travailler avec l'API Bookmarks</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API">Travailler avec l'API Cookies</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities">Travailler avec des identités contextuelles</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Build_a_cross_browser_extension">Build a cross-browser extension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/onboarding_upboarding_offboarding_best_practices">Onboard, upboard, and offboard users</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Portage</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators">Firefox differentiators</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Porting_a_Google_Chrome_extension">Porter une extension Google Chrome</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Porting_a_legacy_Firefox_add-on">Porter une ancienne extension Firefox</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Comparison_with_the_Add-on_SDK">Comparaison avec le SDK Add-on</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Comparison_with_XUL_XPCOM_extensions">Comparaison avec les extensions XUL/XPCOM</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Differences_between_API_implementations">Differences between API implementations</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities">Incompatibilités avec Chrome</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Differences_between_desktop_and_Android">Différence entre le bureau et Android</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Déroulement avec Firefox</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Development_Tools">Developer tools</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Choose_a_Firefox_version_for_web_extension_develop">Choose a Firefox version</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/User_experience_best_practices">Expérience utilisateur : bonnes pratiques</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Prompt_users_for_data_and_privacy_consents">Prompt users for data and privacy consents</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Temporary_Installation_in_Firefox">Installation temporaire dans Firefox</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Debugging">Débogage</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Testing_persistent_and_restart_features">Test des fonctionnalités persistantes et de redémarrage</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Test_permission_requests">Test permission requests</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Developing_WebExtensions_for_Firefox_for_Android">Écrire des extensions pour Firefox sur Android</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Getting_started_with_web-ext">Démarrer avec web-ext</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/web-ext_command_reference">Détail de la commande web-ext</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/WebExtensions_and_the_Add-on_ID">Les WebExtensions et l'ID Add-on</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Request_the_right_permissions">Demander les bonnes permissions</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Best_practices_for_updating_your_extension">Bonnes pratiques pour la mise à jour de votre extension</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Les API JavaScript</summary>
        <ol><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs">Browser support for JavaScript APIs</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/pkcs11">pkcs11</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/alarms">alarms</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks">bookmarks</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/browserAction">browserAction</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/browserSettings">browserSettings</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/browsingData">browsingData</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/clipboard">clipboard</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/commands">commands</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts">contentScripts</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/contextualIdentities">contextualIdentities</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/cookies">cookies</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/devtools.inspectedWindow">devtools.inspectedWindow</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/devtools.network">devtools.network</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/devtools.panels">devtools.panels</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/dns">dns</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/downloads">downloads</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/events">events</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/extension">extension</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/extensionTypes">extensionTypes</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/find">find</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/history">history</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/i18n">i18n</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/identity">identity</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/idle">idle</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/management">management</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/menus">menus</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/notifications">notifications</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/omnibox">omnibox</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/pageAction">pageAction</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/permissions">permissions</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/privacy">privacy</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/proxy">proxy</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/runtime">runtime</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/search">search</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/sessions">sessions</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/sidebarAction">sidebarAction</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/storage">storage</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs">tabs</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/theme">theme</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/topSites">topSites</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/types">types</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/webNavigation">webNavigation</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest">webRequest</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/windows">windows</a></li></ol>
      </details>
    </li>

    <li class="toggle">
      <details>
      <summary>Clés de manifeste</summary>
      <ol><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/auteur">author</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/arriere-plan">background</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action">browser_action</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings">browser_specific_settings</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_settings_overrides">chrome_settings_overrides</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_url_overrides">chrome_url_overrides</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands">commands</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts">content_scripts</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_security_policy">content_security_policy</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale">default_locale</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description">description</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer">developer</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/devtools_page">devtools_page</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/dictionaries">dictionaries</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url">homepage_url</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/icons">icons</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/incognito">incognito</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version">manifest_version</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name">name</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/offline_enabled">offline_enabled</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/omnibox">omnibox</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions">optional_permissions</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_page">options_page</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_ui">options_ui</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action">page_action</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">permissions</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/protocol_handlers">protocol_handlers</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name">short_name</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/sidebar_action">sidebar_action</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme">theme</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version">version</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version_name">version_name</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources">web_accessible_resources</a></li></ol>
      </details>
    </li>
    <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Distribution_options">Distribution Options</a></li>
    <li><a href="/fr/docs/Mozilla/Add-ons/Themes"><strong>Thèmes</strong></a></li>
    <li class="toggle">
      <details>
        <summary>Thème de navigateur</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/Themes/Theme_concepts">Concepts des thèmes</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/Themes/Using_the_AMO_theme_generator">Using the AMO theme generator</a></li>
        </ol>
      </details>
    </li>
    <li><a href="/fr/docs/Mozilla/Add-ons/Distribution"><strong>Publication et distribution</strong></a></li>
    <li class="toggle">
      <details>
        <summary>Publication de votre extension</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Developer_accounts">Developer accounts</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/Distribution">Signature et distribution de votre extension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Package_your_extension_">Zipper votre extension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/Distribution/Submitting_an_add-on">Soumettre une extension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/Source_Code_Submission">Soumission du code source</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/Distribution/Resources_for_publishers">Ressources pour les développeurs</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/Listing">Créer une page attrayante pour votre extension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/Distribution/Make_money_from_browser_extensions">Make money from browser extensions</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/Distribution/Promoting_your_extension_or_theme">Promoting your extension or theme</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/AMO/Policy/Reviews">Processus de revue</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/AMO/Policy/Agreement">Accord développeur</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/AMO/Policy/Featured">Extensions mises en avant</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/Distribution/Retiring_your_extension">Retrait de votre extension</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Distribuer votre module</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Sideloading_add-ons">Pour une installation manuelle</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Add-ons_for_desktop_apps">En tant qu'application de bureau</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Add-ons_in_the_enterprise">Dans un contexte d'entreprise</a></li>
        </ol>
      </details>
    </li>
    <li><a href="https://discourse.mozilla.org/c/add-ons"><strong>Communauté et Support</strong></a></li>
    <li class="toggle">
      <details>
        <summary>Canaux de discussions</summary>
        <ol>
          <li><a href="https://blog.mozilla.org/addons">Blog extensions</a></li>
          <li><a href="https://discourse.mozilla.org/c/add-ons">Forum extensions</a></li>
          <li><a href="https://stackoverflow.com/questions/tagged/firefox-addon">Stack Overflow</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/#Contact_us">Nous contacter</a></li>
        </ol>
      </details>
    </li>
  </ol>
</section>

<p>Avec l'API Cookies, vos extensions ont accès à des fonctionnalités similaires à celles utilisées par les sites Web pour stocker et lire les cookies. Les fonctionnalités de l'API permettent aux extensions de stocker des informations site par site. Ainsi, comme nous le verrons dans l'exemple, vous pouvez stocker des détails sur le choix de la couleur de fond d'un site pour un utilisateur. Ensuite, lorsque l'utilisateur revient sur le site, votre extension peut utiliser la capacité de l'API pour obtenir des détails sur les cookies et les lire pour récupérer le choix de l'utilisateur et l'appliquer au site Web.</p>

<div class="note">
<p>Le comportement des cookies peut être contrôlé à l'aide de la propriété <a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/privacy/websites" title="Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant !"><code>privacy.websites</code></a> <code>cookieConfig</code>. Cette propriété contrôle si et comment les cookies sont acceptés ou si tous les cookies sont traités comme des cookies de session.</p>
</div>

<h2 id="Permissions">Permissions</h2>

<p>Pour utiliser l'API Cookies, vous devez demander à la fois la permission <code>"cookies"</code> et les  <a href="/fr/Add-ons/WebExtensions/manifest.json/permissions#Host_permissions">permissions d'hôte</a> pour les protocoles, domaines, ou sites web auxquels vous souhaitez accéder ou utiliser <code>"&lt;all_urls&gt;"</code> pour accéder à tous les protocoles et domaines. La façon dont vous définissez votre chaîne de permission d'hôte affecte la capacité de votre extension à lire, écrire et supprimer les cookies.</p>

<div>
<table>
 <colgroup>
  <col>
  <col>
  <col>
  <col>
  <col>
 </colgroup>
 <tbody>
  <tr>
   <td rowspan="2">
    <p>Chaine de permission hôte</p>
   </td>
   <td colspan="2">
    <p>Lecture</p>
   </td>
   <td colspan="2">
    <p>Ecriture/Effacer</p>
   </td>
  </tr>
  <tr>
   <td>
    <p>Sécurisé</p>
   </td>
   <td>
    <p>Non-sécurisé</p>
   </td>
   <td>
    <p>Sécurisé</p>
   </td>
   <td>
    <p>Non-sécurisé</p>
   </td>
  </tr>
  <tr>
   <td>
    <p><code>"http://*.example.com/"</code></p>
   </td>
   <td>
    <p>Non</p>
   </td>
   <td>
    <p>Principaux et sous domaines, avec n'importe quel chemin</p>
   </td>
   <td>
    <p>Principaux et sous domaines, avec n'importe quel chemin</p>
   </td>
   <td>
    <p>Principaux et sous domaines, avec n'importe quel chemin</p>
   </td>
  </tr>
  <tr>
   <td>
    <p><code>"https://www.example.com/"</code></p>
   </td>
   <td>
    <p>www.example.com ou .example.com avec n'importe quel chemin, mais aucun sous domaine</p>
   </td>
   <td>
    <p>www.example.com ou .example.com avec n'importe quel chemin, mais aucun sous domaine</p>
   </td>
   <td>
    <p>www.example.com ou .example.com avec n'importe quel chemin, mais aucun sous domaine</p>
   </td>
   <td>
    <p>www.example.com ou .example.com avec n'importe quel chemin, mais aucun sous domaine</p>
   </td>
  </tr>
  <tr>
   <td>
    <p><code>"*://*.example.com/"</code></p>
   </td>
   <td>
    <p>Principaux et sous domaines, avec n'importe quel chemin</p>
   </td>
   <td>
    <p>Principaux et sous domaines, avec n'importe quel chemin</p>
   </td>
   <td>
    <p>Principaux et sous domaines, avec n'importe quel chemin</p>
   </td>
   <td>
    <p>Principaux et sous domaines, avec n'importe quel chemin</p>
   </td>
  </tr>
  <tr>
   <td>
    <p><code>"&lt;all_urls&gt;"</code></p>
   </td>
   <td>
    <p>Tout domaine avec un chemin</p>
   </td>
   <td>
    <p>Tout domaine avec un chemin</p>
   </td>
   <td>
    <p>Tout domaine avec un chemin</p>
   </td>
   <td>
    <p>Tout domaine avec un chemin</p>
   </td>
  </tr>
 </tbody>
</table>
</div>

<h2 id="Banque_de_cookies">Banque de cookies</h2>

<p>Firefox fournit trois types de banque de cookies :</p>

<ul>
 <li>La banque par défaut, qui stocke les cookies de la navigation normale.</li>
 <li>Le mode de navigation privée stocke les cookies créés lors d'une session de navigation privée. Ces banques et tous les cookies qu'ils contiennent sont supprimés lorsque la fenêtre de navigation privée associée se ferme.</li>
 <li>La banque de conteneur d'onglets, qui stocke les cookies pour chaque identité contextuelle dans Firefox. Les identités contextuelles permettent à un utilisateur de conserver plusieurs identités dans une fenêtre de navigateur. Ceci est utile si, par exemple, vous avez un compte de messagerie d'entreprise et personnel sur Gmail. Avec les identités contextuelles, vous pouvez ouvrir un onglet par rapport à une identité personnelle et un deuxième onglet par rapport à une identité d'entreprise. Chaque onglet peut ensuite se connecter à Google Mail avec un nom d'utilisateur différent, et les deux comptes peuvent être utilisés côte à côte. Pour plus d'informations, voir <a href="https://wiki.mozilla.org/Security/Contextual_Identity_Project/Containers">Sécurité/Projet d'identité contextuelle/Conteneurs</a> dans le wiki Mozilla.</li>
</ul>

<p>Vous pouvez trouver les banques de cookies disponibles en utilisant <a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/cookies/getAllCookieStores" title="La méthode getAllCookieStores() de l'API cookies retourne une liste de tous les cookies stores."><code>cookies.getAllCookieStores</code></a>, qui renvoie un objet contenant l'ID de chaque cookie et une liste des ID des onglets utilisant chaque banque de cookies.</p>

<h2 id="Exemple_de_procédure_pas_à_pas">Exemple de procédure pas à pas</h2>

<p>L'exemple d'extension <a href="https://github.com/mdn/webextensions-examples/tree/master/cookie-bg-picker">cookie-bg-picker</a> permet à l'utilisateur de choisir une couleur et une icône appliquées à l'arrière-plan des pages Web d'un site. Ces choix sont sauvegardés par site en utilisant <a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/cookies/set" title="La méthode set() de l'API cookies définit un cookie contenant des données précises de cookie. Cette méthode équivaut à l'émission d'un en-tête HTTP Set-Cookie lors d'une requête à une URL donnée."><code>cookies.set</code></a>. Lorsqu'une page du site est ouverte, <a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/cookies/get" title="La méthode get() de l'API cookies  récupère des informations sur un seul cookie, compte tenu de son nom et de son URL."><code>cookies.get</code></a> lit tout choix précédent, et l'extension l'applique à la page Web. Une option de réinitialisation supprime l'icône d'arrière-plan et la couleur du site ainsi que le cookie, en utilisant <a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/cookies/remove" title="La méthode remove() de l'API cookies supprime un cookie, compte tenu de son nom et de son URL."><code>cookies.remove</code></a>. Il utilise également <a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/cookies/onChanged" title="L'événement onChanged de l'API cookies est déclenché lorsqu'un cookie est défini ou supprimé."><code>cookies.onChanged</code></a> pour écouter les modifications apportées aux cookies, en envoyant les détails de la modification à la console.</p>

<p>Cette vidéo montre l'extension en action :</p>

<div class="intrinsic-wrapper"><div class="intrinsic-container "><iframe src="https://www.youtube.com/embed/_rlp3eYqEMA?rel=0&amp;html5=1"></iframe></div></div>

<p>Cet exemple utilise également les API Tabs et Runtime, mais nous ne discuterons de ces fonctionnalités qu'en passant.</p>

<h3 id="manifest.json">manifest.json</h3>

<p>The key feature of the <a href="https://github.com/mdn/webextensions-examples/blob/master/cookie-bg-picker/manifest.json">manifest.json</a> file relating to the use of the Cookies API is the permissions request:</p>

<pre class="brush: json">  "permissions": [
      "tabs",
      "cookies",
      "&lt;all_urls&gt;"
],</pre>

<p>Ici, l'extension demande l'autorisation d'utiliser l'API Cookies (<code>"cookies"</code>) avec tous les sites Web (<code>"&lt;all_urls&gt;"</code>). Cela permet à l'extension d'enregistrer le choix de l'icône de couleur d'arrière-plan pour n'importe quel site Web.</p>

<h3 id="Scripts—bgpicker.js">Scripts—bgpicker.js</h3>

<p>L'interface utilisateur de l'extension utilise un bouton de barre d'outils (<a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/browserAction" title="Ajoute un bouton à la barre d'outils du navigateur."><code>browserAction</code></a>) implémenté avec <a href="https://github.com/mdn/webextensions-examples/blob/master/cookie-bg-picker/popup/bgpicker.html">bgpicker.html</a> qui appelle <a href="https://github.com/mdn/webextensions-examples/blob/master/cookie-bg-picker/popup/bgpicker.js">bgpicker.js</a>. Ensemble, ils permettent à l'utilisateur de sélectionner l'icône et d'entrer la couleur à appliquer en arrière-plan. Ils offrent également la possibilité d'effacer ces paramètres.</p>

<p><a href="https://github.com/mdn/webextensions-examples/blob/master/cookie-bg-picker/popup/bgpicker.js">bgpicker.js</a> gère la sélection de l'icône ou l'entrée d'une couleur pour l'arrière-plan dans des fonctions séparées.</p>

<p>Pour gérer les boutons d'icônes, le script rassemble d'abord tous les noms de classe utilisés pour les boutons dans le fichier HTML :</p>

<pre class="brush: js">var bgBtns = document.querySelectorAll('.bg-container button');</pre>

<p>Il boucle ensuite à travers tous les boutons en leur assignant leur image et en créant un écouteur onclick pour chaque bouton :</p>

<pre class="brush: js">for(var i = 0; i &lt; bgBtns.length; i++) {
  var imgName = bgBtns[i].getAttribute('class');
  var bgImg = 'url(\'images/' + imgName + '.png\')';
  bgBtns[i].style.backgroundImage = bgImg;

  bgBtns[i].onclick = function(e) {</pre>

<p>Quand un bouton est cliqué, sa fonction d'écouteur correspondante obtient le nom de classe de bouton et ensuite le chemin d'icône qu'il passe au script de contenu de la page (<a href="https://github.com/mdn/webextensions-examples/blob/master/cookie-bg-picker/content_scripts/updatebg.js">updatebg.js</a>) en utilisant un message. Le script de contenu applique ensuite l'icône à l'arrière-plan de la page Web. Pendant ce temps, <a href="https://github.com/mdn/webextensions-examples/blob/master/cookie-bg-picker/popup/bgpicker.js">bgpicker.js</a> stocke les détails de l'icône appliquée à l'arrière-plan dans un cookie :</p>

<pre class="brush: js">    cookieVal.image = fullURL;
    browser.cookies.set({
    url: tabs[0].url,
    name: "bgpicker",
    value: JSON.stringify(cookieVal)
  })</pre>

<p>Le paramètre de couleur est traité de la même manière, déclenché par un écouteur dans le champ de saisie de couleur. Lorsqu'une couleur est entrée, l'onglet actif est découvert et les détails de sélection de couleur envoyés, à l'aide d'un message, au script de contenu de la page à appliquer à l'arrière-plan de la page Web. Ensuite, la sélection de couleur est ajoutée au cookie :</p>

<pre class="brush: js">    cookieVal.color = currColor;
    browser.cookies.set({
    url: tabs[0].url,
    name: "bgpicker",
    value: JSON.stringify(cookieVal)</pre>

<p>Lorsque l'utilisateur clique sur le bouton de réinitialisation qui a été affecté à la réinitialisation de la variable :</p>

<pre class="brush: js">var reset = document.querySelector('.color-reset button');</pre>

<p><code>reset.onclick</code> trouve d'abord l'onglet actif. Ensuite, en utilisant l'ID de l'onglet, il transmet un message au script de contenu de la page (<a href="https://github.com/mdn/webextensions-examples/blob/master/cookie-bg-picker/content_scripts/updatebg.js">updatebg.js</a>) pour qu'il supprime l'icône et la couleur de la page. La fonction efface ensuite les valeurs de cookie (de sorte que les anciennes valeurs ne sont pas reportées et écrites sur un cookie créé pour une nouvelle icône ou sélection de couleur sur la même page) avant de supprimer le cookie :</p>

<pre class="brush: js">    cookieVal = { image : '',
                  color : '' };
    browser.cookies.remove({
    url: tabs[0].url,
    name: "bgpicker"</pre>

<p>Aussi, afin que vous puissiez voir ce qui se passe avec les cookies, le script rend compte de toutes les modifications apportées aux cookies dans la console :</p>

<pre class="brush: js">browser.cookies.onChanged.addListener((changeInfo) =&gt; {
  console.log(`Cookie changed:\n
    * Cookie: ${JSON.stringify(changeInfo.cookie)}\n
    * Cause: ${changeInfo.cause}\n
    * Removed: ${changeInfo.removed}`);
  });</pre>

<h3 id="Scripts—background.js">Scripts—background.js</h3>

<p>Un script d'arrière-plan (<a href="https://github.com/mdn/webextensions-examples/blob/master/cookie-bg-picker/background_scripts/background.js">background.js</a>) permet à l'utilisateur de choisir une icône d'arrière-plan et une couleur pour le site Web dans une session antérieure. Le script est à l'écoute des changements dans l'onglet actif, que ce soit l'utilisateur qui passe d'un onglet à l'autre ou modifie l'URL de la page affichée dans l'onglet. Lorsque l'un de ces événements se produit, <code>cookieUpdate()</code> est appelée.  <code>cookieUpdate()</code> utilise à son tour <code>getActiveTab()</code> pour obtenir l'ID de l'onglet actif. La fonction peut ensuite vérifier si un cookie existe pour l'extension, en utilisant l'URL de l'onglet :</p>

<pre class="brush: js">    var gettingCookies = browser.cookies.get({
      url: tabs[0].url,
      name: "bgpicker"
    });</pre>

<p>Si le cookie <code>"bgpicker"</code> existe pour le site Web, les détails de l'icône et de la couleur sélectionnés précédemment sont récupérés et transmis au script de contenu <a href="https://github.com/mdn/webextensions-examples/blob/master/cookie-bg-picker/content_scripts/updatebg.js">updatebg.js</a> à l'aide de messages :</p>

<pre class="brush: js">    gettingCookies.then((cookie) =&gt; {
      if (cookie) {
        var cookieVal = JSON.parse(cookie.value);
        browser.tabs.sendMessage(tabs[0].id, {image: cookieVal.image});
        browser.tabs.sendMessage(tabs[0].id, {color: cookieVal.color});
      }
    });</pre>

<h2 id="Autres_caractéristiques">Autres caractéristiques</h2>

<p>En plus des API mentionnées jusqu'à présent, l'API Cookies propose également <a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/cookies/getAll" title="La méthode getAll() de l'API cookies récupère tous les cookies d'un seul cookie store qui correspondent aux informations fournies."><code>cookies.getAll</code></a>. Cette fonction prend l'objet details pour spécifier des filtres pour les cookies sélectionnés et retourne un tableau d'objets <a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/cookies/Cookie" title="Le type Cookie de l'API cookies représente des informations sur un cookie HTTP."><code>cookies.Cookie</code></a> qui correspondent aux critères de filtrage.</p>

<h2 id="Apprendre_encore_plus">Apprendre encore plus</h2>

<p>Si vous voulez en savoir plus sur l'API Cookies, consultez :</p>

<ul>
 <li><a href="/fr/Add-ons/WebExtensions/API/cookies">Cookies API reference</a>.</li>
 <li><a href="https://github.com/mdn/webextensions-examples/tree/master/list-cookies">List-cookies</a> exemple.</li>
</ul>
