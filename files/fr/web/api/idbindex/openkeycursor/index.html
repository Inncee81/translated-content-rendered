---
title: IDBIndex.openKeyCursor()
slug: Web/API/IDBIndex/openKeyCursor
tags:
  - API
  - IDBIndex
  - IndexedDB
  - Méthode
  - Reference
  - openKeyCursor
translation_of: Web/API/IDBIndex/openKeyCursor
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/fr/docs/Web/API/IndexedDB_API">IndexedDB API</a></strong></li><li><strong><a href="/fr/docs/Web/API/IDBIndex"><code>IDBIndex</code></a></strong></li><li class="toggle"><details open><summary>Propriétés</summary><ol><li><span class="sidebar-icon"><span title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/fr/docs/Web/API/IDBIndex/isAutoLocale"><code>isAutoLocale</code></a></li><li><a href="/fr/docs/Web/API/IDBIndex/keyPath"><code>keyPath</code></a></li><li><span class="sidebar-icon"><span title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/fr/docs/Web/API/IDBIndex/locale"><code>locale</code></a></li><li><a href="/fr/docs/Web/API/IDBIndex/multiEntry"><code>multiEntry</code></a></li><li><a href="/fr/docs/Web/API/IDBIndex/name"><code>name</code></a></li><li><a href="/fr/docs/Web/API/IDBIndex/objectStore"><code>objectStore</code></a></li><li><a href="/fr/docs/Web/API/IDBIndex/unique"><code>unique</code></a></li></ol></details></li><li class="toggle"><details open><summary>Méthodes</summary><ol><li><a href="/fr/docs/Web/API/IDBIndex/count"><code>count()</code></a></li><li><a href="/fr/docs/Web/API/IDBIndex/get"><code>get()</code></a></li><li><a href="/fr/docs/Web/API/IDBIndex/getAll"><code>getAll()</code></a></li><li><a href="/fr/docs/Web/API/IDBIndex/getAllKeys"><code>getAllKeys()</code></a></li><li><a href="/fr/docs/Web/API/IDBIndex/getKey"><code>getKey()</code></a></li><li><a href="/fr/docs/Web/API/IDBIndex/openCursor"><code>openCursor()</code></a></li><li><em><code>openKeyCursor()</code></em></li></ol></details></li><li class="toggle"><details open><summary>Événements</summary><ol><li><a href="/fr/docs/Web/Events/upgradeneeded"><code>upgradeneeded</code></a></li><li><a href="/fr/docs/Web/Events/complete"><code>complete</code></a></li><li><a href="/fr/docs/Web/Events/abort"><code>abort</code></a></li><li><a href="/fr/docs/Web/Events/success"><code>success</code></a></li><li><a href="/fr/docs/Web/Events/error"><code>error</code></a></li><li><a href="/fr/docs/Web/Events/blocked"><code>blocked</code></a></li><li><a href="/fr/docs/Web/Events/versionchange"><code>versionchange</code></a></li><li><a href="/fr/docs/Web/Events/close"><code>close</code></a></li></ol></details></li><li class="toggle"><details open><summary>Pages liées à IndexedDB</summary><ol><li><a href="/fr/docs/Web/API/IDBCursor"><code>IDBCursor</code></a></li><li><a href="/fr/docs/Web/API/IDBCursorSync"><code>IDBCursorSync</code></a></li><li><a href="/fr/docs/Web/API/IDBCursorWithValue"><code>IDBCursorWithValue</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabase"><code>IDBDatabase</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabaseException"><code>IDBDatabaseException</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabaseSync"><code>IDBDatabaseSync</code></a></li><li><a href="/fr/docs/Web/API/IDBEnvironment"><code>IDBEnvironment</code></a></li><li><a href="/fr/docs/Web/API/IDBEnvironmentSync"><code>IDBEnvironmentSync</code></a></li><li><a href="/fr/docs/Web/API/IDBFactory"><code>IDBFactory</code></a></li><li><a href="/fr/docs/Web/API/IDBFactorySync"><code>IDBFactorySync</code></a></li><li><a href="/fr/docs/Web/API/IDBIndexSync"><code>IDBIndexSync</code></a></li><li><a href="/fr/docs/Web/API/IDBKeyRange"><code>IDBKeyRange</code></a></li><li><a href="/fr/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a></li><li><a href="/fr/docs/Web/API/IDBObjectStoreSync"><code>IDBObjectStoreSync</code></a></li><li><a href="/fr/docs/Web/API/IDBOpenDBRequest"><code>IDBOpenDBRequest</code></a></li><li><a href="/fr/docs/Web/API/IDBRequest"><code>IDBRequest</code></a></li><li><a href="/fr/docs/Web/API/IDBTransaction"><code>IDBTransaction</code></a></li><li><a href="/fr/docs/Web/API/IDBTransactionSync"><code>IDBTransactionSync</code></a></li><li><a href="/fr/docs/Web/API/IDBVersionChangeEvent"><code>IDBVersionChangeEvent</code></a></li><li><a href="/fr/docs/Web/API/IDBVersionChangeRequest"><code>IDBVersionChangeRequest</code></a></li></ol></details></li></ol></section></div>

<p>La méthode <strong><code>openKeyCursor()</code></strong> de <a href="/fr/docs/Web/API/IDBIndex" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>IDBIndex</code></a> renvoie un objet <a href="/fr/docs/Web/API/IDBRequest" title="L&apos;interface IDBRequest de l&apos;API IndexedDB donne accès par ses gestionnaires d&apos;événements aux résultats des requêtes asynchrones sur la base de données, les magasins d&apos;objets ou les index. Chaque opération d&apos;écriture ou lecture sur la base de données utilise une requête."><code>IDBRequest</code></a> et, dans un <em>thread</em> séparé, crée un curseur sur l&apos;intervalle de clé passé en argument pour l&apos;index courant.</p>

<p>Cette méthode positionne le curseur sur la clé appropriée, dans la direction indiquée :</p>

<ul>
 <li>si l&apos;intervalle de clé n&apos;est pas défini ou s&apos;il est nul, l&apos;intervalle englobera l&apos;ensemble des clés</li>
 <li>si au moins une clé correspond à l&apos;intervalle de clés, un évènement <code>success</code> est déclenché pour la requête qui est renvoyée. La propriété <code>result</code> de cet évènement contiendra un objet <a href="/fr/docs/Web/API/IDBCursor" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>IDBCursor</code></a> dont la propriété <code>value</code> correspond à l&apos;enregistrement qui a été traduit.</li>
 <li>Si aucun intervalle ne correspond à l&apos;intervalle indiqué, un évènement <code>error</code> est déclenché pour la requête.</li>
</ul>

<p></p><div class="note notecard"><strong>Note :</strong> Cette fonctionnalité est disponible via les <a href="/fr/docs/Web/API/Web_Workers_API">Web Workers</a>.</div><p></p>

<h2 id="Syntaxe">Syntaxe</h2>

<pre class="syntaxbox">var monIndex = objectStore.index(&quot;index&quot;);
var request = monIndex.openKeyCursor(keyRange,direction);</pre>

<h3 id="Paramètres">Paramètres</h3>

<dl>
 <dt><code>keyRange</code> <span class="optional optionalInline notecard inline">Facultatif</span></dt>
 <dd>L&apos;<a href="/fr/docs/Web/API/IDBKeyRange" title="L&apos;interface IDBKeyRange de l&apos;API IndexedDB représente un intervalle continue sur un type de donnée utilisé pour représenter des clés. Les enregistrements peuvent être récupérés depuis des objets IDBObjectStore et IDBIndex grâce à des clés ou à des intervalles de clé. Il est possible de préciser les bornes inférieure et supérieure de l&apos;intervalle. Si les clés sont des chaînes de caractères, on pourrait ainsi parcourir l&apos;ensemble des valeurs pour l&apos;intervalle A–Z."><code>intervalle de clé</code></a> sur lequel se déplace le curseur. On peut passer un clé seule qui sera alors considéré comme une <a href="/fr/docs/Web/API/IDBKeyRange/only" title="La méthode only(), rattachée à l&apos;interface IDBKeyRange, permet de créer un nouvel intervalle de clé qui ne contient qu&apos;une valeur."><code>intervalle seule</code></a>. Par défaut le curseur se déplace sur l&apos;ensemble des clés de l&apos;index.</dd>
 <dt><code>direction</code> <span class="optional optionalInline notecard inline">Facultatif</span></dt>
 <dd>La <a href="/fr/docs/Web/API/IDBCursor/direction" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>direction</code></a> du <a href="/fr/docs/Web/API/IDBCursor" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>curseur</code></a> qui défini le sens d&apos;itération. par défaut &quot;next&quot;.</dd>
</dl>

<h3 id="Valeur_de_retour">Valeur de retour</h3>

<p>Un objet <a href="/fr/docs/Web/API/IDBRequest" title="L&apos;interface IDBRequest de l&apos;API IndexedDB donne accès par ses gestionnaires d&apos;événements aux résultats des requêtes asynchrones sur la base de données, les magasins d&apos;objets ou les index. Chaque opération d&apos;écriture ou lecture sur la base de données utilise une requête."><code>IDBRequest</code></a> sur lequel on peut écouter les évènements associés à l&apos;opération lancée par la méthode.</p>

<h3 id="Exceptions">Exceptions</h3>

<p>Cette méthode peut lever une exception :</p>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">Type d&apos;exception</th>
   <th scope="col">Description</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>TransactionInactiveError</td>
   <td>La transaction pour cet index <a href="/fr/docs/Web/API/IDBIndex" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>IDBIndex</code></a> est inactive.</td>
  </tr>
  <tr>
   <td><code>TypeError</code></td>
   <td>La valeur du paramètre pour la direction est invalide.</td>
  </tr>
  <tr>
   <td><code>DataError</code></td>
   <td>
    <p>La clé ou l&apos;intervalle de clé fourni contient une clé invalide.</p>
   </td>
  </tr>
  <tr>
   <td><code>InvalidStateError</code></td>
   <td>L&apos;index <a href="/fr/docs/Web/API/IDBIndex" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>IDBIndex</code></a> a été supprimé ou déplacé.</td>
  </tr>
 </tbody>
</table>

<h2 id="Exemple">Exemple</h2>

<p>Dans l&apos;exemple suivant on ouvre une transaction puis un magasin d&apos;objet et enfin l&apos;index <code>lName</code>.</p>

<p>Ensuite, on itère sur l&apos;ensemble des enregistrements pour en insérer leur clé dans un tableau HTML. En utilisant la méthode <a href="/fr/docs/Web/API/IDBIndex/openKeyCursor" title="La méthode openKeyCursor() de IDBIndex renvoie un objet IDBRequest et, dans un thread séparé, crée un curseur sur l&apos;intervalle de clé passé en argument pour l&apos;index courant."><code>IDBIndex.openKeyCursor</code></a> qui travaille de la même façon que la méthode <a href="/fr/docs/Web/API/IDBObjectStore/openKeyCursor" title="La méthode openKeyCursor(), rattachée à l&apos;interface IDBObjectStore, renvoie un objet IDBRequest dont le résultat sera un curseur (IDBCursor) qui pourra être utilisé afin de parcourir les enregistrements correspondants. Cette méthode est utilisée afin de parcourir les clés d&apos;un magasin d&apos;objets grâce à un curseur."><code>IDBObjectStore.openKeyCursor</code></a> de l&apos;<a href="/fr/docs/Web/API/IDBObjectStore" title="L&apos;interface IDBObjectStore de l&apos;API IndexedDB est un accès aux magasins d&apos;objet de la base de données."><code>accès</code></a> au magasin d&apos;objet sauf que les enregistrements sont renvoyés dans l&apos;ordre de l&apos;index et non celui du magasin d&apos;objet.</p>

<pre class="brush:js">function displayDataByIndex() {
  tableEntry.innerHTML = &apos;&apos;;

  //ouvre un transaction
  var transaction = db.transaction([&apos;contactsList&apos;], &apos;readonly&apos;);
  //accés au magasin d&apos;objet
  var objectStore = transaction.objectStore(&apos;contactsList&apos;);

  //on récupère l&apos;index
  var myIndex = objectStore.index(&apos;lName&apos;);

  //un curseur qui itère sur l&apos;index
  var request = myIndex.openCursor();
  request.onsuccess = function(event) {
    var cursor = request.result;
    if(cursor) {


      // cursor.key la clé de l&apos;enregistrement à la position du curseur
      // il n&apos;y as pas de cursor.value contrairement à openCursor()

      var tableRow = document.createElement(&apos;tr&apos;);
      tableRow.innerHTML =   &apos;&lt;td&gt;&apos; + cursor.key + &apos;&lt;/td&gt;&apos;
      tableEntry.appendChild(tableRow);

      //on relance la requête pour la position suivante du curseur
      cursor.continue();
    } else {
      console.log(&apos;Toutes les clé ont été affichés.&apos;);
    }
  };
};</pre>

<p class="note"><strong>Note :</strong> pour un exemple fonctionnel complet, voir notre <a href="https://github.com/mdn/to-do-notifications/">application To-do</a> (<a href="https://mdn.github.io/to-do-notifications/">exemple</a>).</p>

<h2 id="Spécifications">Spécifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Spécification</th>
   <th scope="col">État</th>
   <th scope="col">Commentaires</th>
  </tr>
  <tr>
   <td><a lang="en" href="https://www.w3.org/TR/IndexedDB/#widl-IDBIndex-openKeyCursor-IDBRequest-any-range-IDBCursorDirection-direction" class="external" hreflang="en">Indexed Database API<br><small lang="fr">La définition de &apos;openKeyCursor()&apos; dans cette spécification.</small></a></td>
   <td><span class="spec-REC">Recommendation</span></td>
   <td> </td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<div><div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">Nous convertissons les données de compatibilité dans un format JSON</a></strong>.
            Ce tableau de compatibilité utilise encore l&apos;ancien format
            car nous n&apos;avons pas encore converti les données qu&apos;il contient.
            <strong><a href="/fr/docs/MDN/Contribute/Structures/Compatibility_tables">Vous pouvez nous aider en contribuant !</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Ordinateur</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div></div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Fonctionnalité</th>
   <th>Chrome</th>
   <th>Edge</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>Support simple</td>
   <td>23<span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/fr/docs/Web/Guide/Prefixes" title="Le nom de cette fonctionnalité est préfixé par &apos;webkit&apos; car ce navigateur la considère expérimentale">webkit</a></span><br>
    24</td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td>10 <span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/fr/docs/Web/Guide/Prefixes" title="Le nom de cette fonctionnalité est préfixé par &apos;moz&apos; car ce navigateur la considère expérimentale">moz</a></span><br>
    <a href="/en-US/Firefox/Releases/16" title="Sorti le 2012-10-09.">16.0</a> (16.0)</td>
   <td>10, partial</td>
   <td>15</td>
   <td>7.1</td>
  </tr>
  <tr>
   <td>Disponible pour les <em>web workers</em></td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td>37.0 (37.0)</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Webview Android</th>
   <th>Edge</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS</th>
   <th>IE Phone</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
   <th>Chrome pour Android</th>
  </tr>
  <tr>
   <td>Support simple</td>
   <td>4.4</td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td>22.0 (22.0)</td>
   <td>1.0.1</td>
   <td>10</td>
   <td>22</td>
   <td>8</td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
  </tr>
  <tr>
   <td>Disponible pour les <em>web workers</em></td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td>37.0 (37.0)</td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
  </tr>
 </tbody>
</table>
</div>

<h2 id="Voir_aussi">Voir aussi</h2>

<ul>
 <li><a href="/fr/docs/Web/API/API_IndexedDB/Using_IndexedDB">Utiliser IndexedDB</a></li>
 <li>Initier une connexion : <a href="/fr/docs/Web/API/IDBDatabase" title="L&apos;interface IDBDatabase de l&apos;API IndexedDB fournit une connexion à la base de données. On peut utiliser un objet IDBDatabase pour ouvrir une transaction sur la base de données puis ajouter, éditer ou supprimer des enregistrements de cette base de données. Cette interface constitue le seul moyen d&apos;accéder et de gérer les versions de la base de données."><code>IDBDatabase</code></a></li>
 <li>Utiliser les transactions : <a href="/fr/docs/Web/API/IDBTransaction" title="L&apos;interface IDBTransaction de l&apos;API IndexedDB fournit une transaction statique asynchrone vers une base de données grâce à des attributs de gestion d&apos;évènementns. Toutes les opérations de lecture et d&apos;écriture de données sont effectuées au sein de transaction. Il est possible d&apos;utiliser IDBDatabase afin d&apos;initier des transactions puis IDBTransaction afin de paramétrer le mode de la transaction (c&apos;est-à-dire s&apos;il est en lecture seule ou en lecture/écriture) et d&apos;accéder à un objet IDBObjectStore pour réaliser une requête. On peut également utiliser IDBTransaction pour interrompre une requête."><code>IDBTransaction</code></a></li>
 <li>Définir un intervalle de clés : <a href="/fr/docs/Web/API/IDBKeyRange" title="L&apos;interface IDBKeyRange de l&apos;API IndexedDB représente un intervalle continue sur un type de donnée utilisé pour représenter des clés. Les enregistrements peuvent être récupérés depuis des objets IDBObjectStore et IDBIndex grâce à des clés ou à des intervalles de clé. Il est possible de préciser les bornes inférieure et supérieure de l&apos;intervalle. Si les clés sont des chaînes de caractères, on pourrait ainsi parcourir l&apos;ensemble des valeurs pour l&apos;intervalle A–Z."><code>IDBKeyRange</code></a></li>
 <li>Récupérer et modifier les données : <a href="/fr/docs/Web/API/IDBObjectStore" title="L&apos;interface IDBObjectStore de l&apos;API IndexedDB est un accès aux magasins d&apos;objet de la base de données."><code>IDBObjectStore</code></a></li>
 <li>Utiliser les curseurs <a href="/fr/docs/Web/API/IDBCursor" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>IDBCursor</code></a></li>
</ul>
