---
title: Utiliser des fichiers à partir d'applications web
slug: Web/API/File/Using_files_from_web_applications
tags:
  - Files
  - HTML5
  - Téléchargement
  - ajax upload
translation_of: Web/API/File/Using_files_from_web_applications
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/fr/docs/Web/API/File"><code>File</code></a></strong></li><li class="toggle"><details open><summary>Constructeur</summary><ol><li><a href="/fr/docs/Web/API/File/File"><code>File()</code></a> <a href="/fr/docs/Web/API/File/File$translate" style="opacity: 0.5;">[Traduire]</a></li></ol></details></li><li class="toggle"><details open><summary>Propriétés</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API n&apos;a pas été standardisée."><i class="icon-warning-sign"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/fr/docs/Web/API/File/fileName"><code>fileName</code></a></s></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API n&apos;a pas été standardisée."><i class="icon-warning-sign"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/fr/docs/Web/API/File/fileSize"><code>fileSize</code></a></s></li><li><a href="/fr/docs/Web/API/File/lastModified"><code>lastModified</code></a> <a href="/fr/docs/Web/API/File/lastModified$translate" style="opacity: 0.5;">[Traduire]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API obsolète ne doit plus être utilisée, mais elle peut continuer à fonctionner."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/fr/docs/Web/API/File/lastModifiedDate"><code>lastModifiedDate</code></a> <a href="/fr/docs/Web/API/File/lastModifiedDate$translate" style="opacity: 0.5;">[Traduire]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API n&apos;a pas été standardisée."><i class="icon-warning-sign"> </i></span></span><a href="/fr/docs/Web/API/File/mozFullPath"><code>mozFullPath</code></a> <a href="/fr/docs/Web/API/File/mozFullPath$translate" style="opacity: 0.5;">[Traduire]</a></li><li><a href="/fr/docs/Web/API/File/name"><code>name</code></a> <a href="/fr/docs/Web/API/File/name$translate" style="opacity: 0.5;">[Traduire]</a></li><li><a href="/fr/docs/Web/API/File/type"><code>type</code></a> <a href="/fr/docs/Web/API/File/type$translate" style="opacity: 0.5;">[Traduire]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API n&apos;a pas été standardisée."><i class="icon-warning-sign"> </i></span></span><a href="/fr/docs/Web/API/File/webkitRelativePath"><code>webkitRelativePath</code></a> <a href="/fr/docs/Web/API/File/webkitRelativePath$translate" style="opacity: 0.5;">[Traduire]</a></li></ol></details></li><li class="toggle"><details open><summary>Méthodes</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API n&apos;a pas été standardisée."><i class="icon-warning-sign"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/fr/docs/Web/API/File/getAsBinary"><code>getAsBinary()</code></a> <a href="/fr/docs/Web/API/File/getAsBinary$translate" style="opacity: 0.5;">[Traduire]</a></s></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API n&apos;a pas été standardisée."><i class="icon-warning-sign"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/fr/docs/Web/API/File/getAsDataURL"><code>getAsDataURL()</code></a> <a href="/fr/docs/Web/API/File/getAsDataURL$translate" style="opacity: 0.5;">[Traduire]</a></s></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API n&apos;a pas été standardisée."><i class="icon-warning-sign"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/fr/docs/Web/API/File/getAsText"><code>getAsText()</code></a> <a href="/fr/docs/Web/API/File/getAsText$translate" style="opacity: 0.5;">[Traduire]</a></s></li></ol></details></li><li class="toggle"><details open><summary>Héritage :</summary><ol><li><a href="/fr/docs/Web/API/Blob"><code>Blob</code></a></li></ol></details></li><li class="toggle"><details open><summary>Pages liées à File API</summary><ol><li><a href="/fr/docs/Web/API/Blob"><code>Blob</code></a></li><li><a href="/fr/docs/Web/API/FileList"><code>FileList</code></a></li><li><a href="/fr/docs/Web/API/FileReader"><code>FileReader</code></a></li><li><a href="/fr/docs/Web/API/FileReaderSync"><code>FileReaderSync</code></a></li></ol></details></li></ol></section><div class="draft notecard">
    <p><strong>Brouillon</strong><br>
    Cette page n&apos;est pas terminée.</p>

</div>

<p>Grâce à l&apos;API File ajoutée au DOM avec HTML5, il est maintenant possible depuis une page web de proposer à l&apos;utilisateur de sélectionner des fichiers locaux, puis d&apos;en lire le contenu. Cette sélection est possible en utilisant un élément HTML <a href="/fr/docs/Web/HTML/Element/input" title="L&apos;élément HTML &lt;input&gt; est utilisé pour créer un contrôle interactif dans un formulaire web qui permet à l&apos;utilisateur de saisir des données. Les saisies possibles et le comportement de l&apos;élément &lt;input&gt; dépend fortement de la valeur indiquée dans son attribut type."><code>&lt;input&gt;</code></a> ou par glisser-déposer.</p>

<p>Vous pouvez utiliser si vous le souhaitez l&apos;API DOM File depuis du code chrome d&apos;extensions ou d&apos;un autre navigateur ; notez cependant qu&apos;il existe des fonctionnalités additionnelles auxquelles il vous faudra être attentif. Reportez-vous à <a href="/en/Extensions/Using_the_DOM_File_API_in_chrome_code" title="en/Extensions/Using the DOM File API in chrome code">Using the DOM File API in chrome code</a> pour plus de détails.</p>

<h2 id="Accéder_au(x)_fichier(s)_sélectionné(s)">Accéder au(x) fichier(s) sélectionné(s)</h2>

<p>Examinez ce code HTML :</p>

<pre class="brush: html">&lt;input type=&quot;file&quot; id=&quot;input&quot;&gt;</pre>

<p>L&apos;API File permet d&apos;accèder à la <a href="/fr/docs/Web/API/FileList" title="Un objet de ce type est retourné par la propriété files, ce qui vous permet d&apos;accéder à la liste des fichiers sélectionnés avec l&apos;élément &lt;input type=&quot;file&quot;&gt;.ou en utilisant l&apos;API de glisser-déposer ; voir l&apos;objet DataTransfer pour plus de détails sur cette utilisation."><code>FileList</code></a> contenant les objets <a href="/fr/docs/Web/API/File" title="L’interface File fournit des informations sur des fichiers et permet au code JavaScript d’une une page web d’accéder à leurs contenus."><code>File</code></a> qui correspondent aux fichiers selectionnés par l&apos;utilisateur.</p>

<p>Si l&apos;utilisateur ne sélectionne qu&apos;un seul fichier, on ne prendra en compte que le premier élément de la <a href="/fr/docs/Web/API/FileList" title="Un objet de ce type est retourné par la propriété files, ce qui vous permet d&apos;accéder à la liste des fichiers sélectionnés avec l&apos;élément &lt;input type=&quot;file&quot;&gt;.ou en utilisant l&apos;API de glisser-déposer ; voir l&apos;objet DataTransfer pour plus de détails sur cette utilisation."><code>FileList</code></a>.</p>

<p>Pour accéder à un fichier sélectionné en utilisant un sélecteur DOM classique :</p>

<pre class="brush: js">var fichierSelectionne = document.getElementById(&apos;input&apos;).files[0];</pre>

<p>Pour accèder à un fichier sélectionné en utilisant un sélecteur <a href="http://jquery.com/" title="http://jquery.com/">jQuery</a> :</p>

<pre class="brush: js"><code>var </code>fichierSelectionne <code>= $(&apos;#input&apos;).get(0).files[0];

var </code>fichierSelectionne <code>= $(&apos;#input&apos;)[0].files[0];</code></pre>

<div class="note">
<p>Si vous rencontrez une erreur &quot;<code>files is undefined</code>&quot; : vous n&apos;avez pas sélectionné le bon élément HTML, en oubliant qu&apos;un sélecteur jQuery renvoie une liste d&apos;éléments DOM correspondants. Récupérez l&apos;élément DOM pour appeler sa méthode &quot;<code>files</code>&quot;.</p>
</div>

<h2 id="Accéder_au(x)_fichier(s)_sélectionné(s)_sur_un_événement_change">Accéder au(x) fichier(s) sélectionné(s) sur un événement <em>change</em></h2>

<p>Il est en outre possible (mais pas obligatoire) d&apos;accéder à la <a href="/fr/docs/Web/API/FileList" title="Un objet de ce type est retourné par la propriété files, ce qui vous permet d&apos;accéder à la liste des fichiers sélectionnés avec l&apos;élément &lt;input type=&quot;file&quot;&gt;.ou en utilisant l&apos;API de glisser-déposer ; voir l&apos;objet DataTransfer pour plus de détails sur cette utilisation."><code>FileList</code></a> via l&apos;événement <code>change</code> :</p>

<pre class="brush: html">&lt;input type=&quot;file&quot; id=&quot;input&quot; onchange=&quot;handleFiles(this.files)&quot;&gt;</pre>

<p>La fonction <code>handleFiles()</code> est appelée avec un objet <a href="/fr/docs/Web/API/FileList" title="Un objet de ce type est retourné par la propriété files, ce qui vous permet d&apos;accéder à la liste des fichiers sélectionnés avec l&apos;élément &lt;input type=&quot;file&quot;&gt;.ou en utilisant l&apos;API de glisser-déposer ; voir l&apos;objet DataTransfer pour plus de détails sur cette utilisation."><code>FileList</code></a> contenant des objets <a href="/fr/docs/Web/API/File" title="L’interface File fournit des informations sur des fichiers et permet au code JavaScript d’une une page web d’accéder à leurs contenus."><code>File</code></a> représentant les fichiers sélectionnés par l&apos;utilisateur.</p>

<p>Si vous souhaitez permettre à l&apos;utilisateur de sélectionner plusieurs fichiers simmultanément, utilisez simplement l&apos;attribut <code>multiple</code> de l&apos;élément <code>input</code> :</p>

<pre class="brush: html">&lt;input type=&quot;file&quot; id=&quot;input&quot; <strong>multiple</strong> onchange=&quot;handleFiles(this.files)&quot;&gt;</pre>

<p>La liste de fichiers passée à la fonction <code>handleFiles()</code> contient dans ce cas un seul objet <a href="/fr/docs/Web/API/File" title="L’interface File fournit des informations sur des fichiers et permet au code JavaScript d’une une page web d’accéder à leurs contenus."><code>File</code></a> pour chaque fichier sélectionné par l&apos;utilisateur.</p>

<h3 id="Ajouter_dynamiquement_un_gestionnaire_d&apos;événement_change">Ajouter dynamiquement un gestionnaire d&apos;événement <em>change</em></h3>

<p>Dans le cas où votre champ input a été créé à l&apos;aide d&apos;une bibliothèque JavaScript comme <a class="external" href="http://www.jquery.com/" title="http://www.jquery.com/">jQuery</a>, il vous faudra utiliser la méthode <a href="/fr/docs/Web/API/EventTarget/addEventListener" title="La méthode addEventListener() d&apos;EventTarget met en place une fonction à appeler chaque fois que l&apos;événement spécifié est remis à la cible. Les cibles courantes sont un Element, le Document lui-même et une Window, mais elle peut être tout objet prenant en charge les évènements (comme XMLHttpRequest)."><code>EventTarget.addEventListener()</code></a> pour ajouter le gestionnaire d&apos;événement <code>change</code>, comme cela :</p>

<pre class="brush: js">var inputElement = document.getElementById(&quot;inputField&quot;);
inputElement.addEventListener(&quot;change&quot;, handleFiles, false);
function handleFiles() {
  var fileList = this.files; /* Vous pouvez maintenant manipuler la liste de fichiers */
}</pre>

<p>Notez que dans ce cas la fonction <code>handleFiles()</code> est elle-même le gestionnaire d&apos;événement, contrairement à l&apos;exemple précédent où un gestionnaire d&apos;événement l&apos;appelle en lui passant un paramètre.</p>

<h2 id="Obtenir_des_informations_sur_le(s)_fichier(s)_sélectionné(s)">Obtenir des informations sur le(s) fichier(s) sélectionné(s)</h2>

<p>L&apos;objet <a href="/fr/docs/Web/API/FileList" title="Un objet de ce type est retourné par la propriété files, ce qui vous permet d&apos;accéder à la liste des fichiers sélectionnés avec l&apos;élément &lt;input type=&quot;file&quot;&gt;.ou en utilisant l&apos;API de glisser-déposer ; voir l&apos;objet DataTransfer pour plus de détails sur cette utilisation."><code>FileList</code></a> exposé par le DOM fournit la liste de tous les fichiers sélectionnés par l&apos;utilisateur, chaque fichier étant identifié par un objet <a href="/fr/docs/Web/API/File" title="L’interface File fournit des informations sur des fichiers et permet au code JavaScript d’une une page web d’accéder à leurs contenus."><code>File</code></a>. Vous pouvez en déterminer le nombre en récupérant la valeur de l&apos;attribut <code>length</code> de la liste de fichiers :</p>

<pre class="brush: js"><code>var numFiles = files.length;</code></pre>

<p>Chaque objet <a href="/fr/docs/Web/API/File" title="L’interface File fournit des informations sur des fichiers et permet au code JavaScript d’une une page web d’accéder à leurs contenus."><code>File</code></a> peut être simplement récupéré en accédant à la liste comme vous le feriez pour un tableau :</p>

<pre class="brush: js">for (var i = 0, numFiles = files.length; i &lt; numFiles; i++) {
  var file = files[i];
  ..
}
</pre>

<p>La boucle parcourt l&apos;ensemble des fichiers de la liste.</p>

<p>L&apos;objet <a href="/fr/docs/Web/API/File" title="L’interface File fournit des informations sur des fichiers et permet au code JavaScript d’une une page web d’accéder à leurs contenus."><code>File</code></a> expose trois attributs accessibles en lecture seulement et contenant des informations utiles sur le fichier.</p>

<dl>
 <dt><code>name</code></dt>
 <dd>Une chaîne de caractères contenant le nom du fichier uniquement, sans aucune information relative au chemin d&apos;accès.</dd>
 <dt><code>size</code></dt>
 <dd>La taille du fichier exprimée en octets, sous la forme d&apos;un entier de 64 bits.</dd>
 <dt><code>type</code></dt>
 <dd>Le type MIME du fichier sous la forme d&apos;une chaîne de caractères, ou bien une chaîne vide <code>&quot;&quot;</code> si le type ne peut pas être déterminé.</dd>
</dl>

<h3 id="Exemple_Afficher_la_taille_d&apos;un_ou_plusieurs_fichiers">Exemple : Afficher la taille d&apos;un ou plusieurs fichiers</h3>

<p>L&apos;exemple suivant montre une utilisation possible de la propriété <code>size</code> :</p>

<pre class="brush: html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=&quot;UTF-8&quot;&gt;
&lt;title&gt;File(s) size&lt;/title&gt;
&lt;script&gt;
function updateSize() {
  var nBytes = 0,
      oFiles = document.getElementById(&quot;uploadInput&quot;).files,
      nFiles = oFiles.length;
  for (var nFileId = 0; nFileId &lt; nFiles; nFileId++) {
    nBytes += oFiles[nFileId].size;
  }
  var sOutput = nBytes + &quot; bytes&quot;;
  // partie de code facultative pour l&apos;approximation des multiples
  for (var aMultiples = [&quot;KiB&quot;, &quot;MiB&quot;, &quot;GiB&quot;, &quot;TiB&quot;, &quot;PiB&quot;, &quot;EiB&quot;, &quot;ZiB&quot;, &quot;YiB&quot;], nMultiple = 0, nApprox = nBytes / 1024; nApprox &gt; 1; nApprox /= 1024, nMultiple++) {
    sOutput = nApprox.toFixed(3) + &quot; &quot; + aMultiples[nMultiple] + &quot; (&quot; + nBytes + &quot; bytes)&quot;;
  }
  // fin de la partie de code facultative
  document.getElementById(&quot;fileNum&quot;).innerHTML = nFiles;
  document.getElementById(&quot;fileSize&quot;).innerHTML = sOutput;
}
&lt;/script&gt;
&lt;/head&gt;

&lt;body onload=&quot;updateSize();&quot;&gt;
&lt;form name=&quot;uploadForm&quot;&gt;
&lt;p&gt;&lt;input id=&quot;uploadInput&quot; type=&quot;file&quot; name=&quot;myFiles&quot; onchange=&quot;updateSize();&quot; multiple&gt; selected files: &lt;span id=&quot;fileNum&quot;&gt;0&lt;/span&gt;; total size: &lt;span id=&quot;fileSize&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;Send file&quot;&gt;&lt;/p&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<h2 id="Utiliser_des_éléments_input_masqués_de_type_file_avec_l&apos;événement_click">Utiliser des éléments <em>input </em>masqués de type <em>file </em>avec l&apos;événement <code>click</code></h2>

<p>Il est possible depuis Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1) de masquer l&apos;élément <a href="/fr/docs/Web/HTML/Element/input" title="L&apos;élément HTML &lt;input&gt; est utilisé pour créer un contrôle interactif dans un formulaire web qui permet à l&apos;utilisateur de saisir des données. Les saisies possibles et le comportement de l&apos;élément &lt;input&gt; dépend fortement de la valeur indiquée dans son attribut type."><code>&lt;input&gt;</code></a> de type file, généralement considéré comme laid, et de présenter votre propre interface pour l&apos;ouverture du sélecteur de fichiers et l&apos;affichage du ou des fichiers sélectionnés par l&apos;utilisateur. Vous devez pour cela attribuer à votre élément <code>input</code> un style incluant <code>display:none</code> et gérer l&apos;événement <code>click</code> sur votre élément <a href="/fr/docs/Web/HTML/Element/input" title="L&apos;élément HTML &lt;input&gt; est utilisé pour créer un contrôle interactif dans un formulaire web qui permet à l&apos;utilisateur de saisir des données. Les saisies possibles et le comportement de l&apos;élément &lt;input&gt; dépend fortement de la valeur indiquée dans son attribut type."><code>&lt;input&gt;</code></a>.</p>

<p>Examinez cet extrait de code HTML :</p>

<pre class="brush: html">&lt;input type=&quot;file&quot; id=&quot;fileElem&quot; multiple accept=&quot;image/*&quot; style=&quot;display:none&quot; onchange=&quot;handleFiles(this.files)&quot;&gt;
&lt;a href=&quot;#&quot; id=&quot;fileSelect&quot;&gt;Select some files&lt;/a&gt;</pre>

<p>Le code gérant l&apos;événement <code>click</code> peut être écrit de cette façon :</p>

<pre class="brush: js">var fileSelect = document.getElementById(&quot;fileSelect&quot;),
  fileElem = document.getElementById(&quot;fileElem&quot;);

fileSelect.addEventListener(&quot;click&quot;, function (e) {
  if (fileElem) {
    fileElem.click();
  }
  e.preventDefault(); // empêche la navigation vers &quot;#&quot;
}, false);
</pre>

<p>Vous pouvez bien sûr appliquer le style de votre choix au nouveau bouton d&apos;ouverture du sélecteur de fichiers.</p>

<h2 id="Utiliser_un_élément_label_pour_activer_un_élément_input_masqué_de_type_file">Utiliser un élément <em>label </em>pour activer un élément <em>input </em>masqué de type <em>file</em></h2>

<p>Un élément <a href="/fr/docs/Web/HTML/Element/label" title="L&apos;élément HTML &lt;label&gt; représente une légende pour un objet d&apos;une interface utilisateur. Il peut être associé à un contrôle en utilisant l&apos;attribut for ou en plaçant l&apos;élément du contrôle à l&apos;intérieur de l&apos;élément &lt;label&gt;. Un tel contrôle est appelé contrôle étiqueté par l&apos;élément &lt;label&gt;."><code>&lt;label&gt;</code></a> peut être utilisé pour ouvrir le sélecteur de fichiers sans l&apos;aide de JavaScript (méthode <code>click()</code>).</p>

<p>Examinez ce morceau de code HTML :</p>

<pre class="brush: html">&lt;input type=&quot;file&quot; id=&quot;fileElem&quot; multiple accept=&quot;image/*&quot; style=&quot;display:none&quot; onchange=&quot;handleFiles(this.files)&quot;&gt; &lt;label for=&quot;fileElem&quot;&gt;Select some files&lt;/label&gt;</pre>

<p>Il n&apos;y a pas besoin d&apos;ajouter du code JavaScript pour l&apos;appel à <code>fileElem.click()</code>. Vous pouvez dans ce cas aussi appliquer le style de votre choix à l&apos;élément <code>label</code>.</p>

<h2 id="Sélectionner_des_fichiers_en_utilisant_drag_and_drop">Sélectionner des fichiers en utilisant <em>drag and drop</em></h2>

<p>Vous pouvez aussi autoriser l&apos;utilisateur à glisser-déposer (<em>drag and drop</em>) des fichiers dans votre application web.</p>

<p>La première étape consiste définir une zone de dépôt. La délimitation exacte de la partie de votre page qui acceptera des dépôts dépend de la conception de votre application, mais il est facile d&apos;autoriser un élément à capter des événements <code>drop</code> :</p>

<pre class="brush: js">var dropbox;

dropbox = document.getElementById(&quot;dropbox&quot;);
dropbox.addEventListener(&quot;dragenter&quot;, dragenter, false);
dropbox.addEventListener(&quot;dragover&quot;, dragover, false);
dropbox.addEventListener(&quot;drop&quot;, drop, false);
</pre>

<p>Dans cet exemple, l&apos;élément portant l&apos;ID <code>dropbox</code> devient notre zone de dépôt en y ajoutant les gestionnaires d&apos;écoute des événements <code><a href="/fr/docs/Web/Reference/Events/dragenter" title="/fr/docs/Web/Reference/Events/dragenter">dragenter</a></code>, <code><a href="/fr/docs/Web/Reference/Events/dragover" title="/fr/docs/Web/Reference/Events/dragover">dragover</a></code>, et <code><a href="/fr/docs/Web/Reference/Events/drop" title="/fr/docs/Web/Reference/Events/drop">drop</a></code>.</p>

<p>Nous n&apos;avons pas vraiment besoin dans notre cas de gérer les événements <code>dragenter</code> et <code>dragover</code>. Les deux fonctions associées restent donc assez simples, elle ne servent qu&apos;à stopper la propagation de l&apos;événement et empêcher le déclenchement de l&apos;action par défaut :</p>

<pre class="brush: js">function dragenter(e) {
  e.stopPropagation();
  e.preventDefault();
}

function dragover(e) {
  e.stopPropagation();
  e.preventDefault();
}
</pre>

<p>La vraie magie est dans la fonction <code>drop()</code> :</p>

<pre class="brush: js">function drop(e) {
  e.stopPropagation();
  e.preventDefault();

  var dt = e.dataTransfer;
  var files = dt.files;

  handleFiles(files);
}</pre>

<p>Nous récupérons ici le champ <code>dataTransfer</code> de l&apos;événement puis nous en extrayons la liste des fichiers que nous passons à <code>handleFiles()</code>. À partir de ce point les fichiers se manipulent de la même façon, que l&apos;utilisateur ait employé l&apos;élément <code>input</code> ou le glisser-déposer.</p>

<h2 id="Exemple_Afficher_les_miniatures_d&apos;images_sélectionnées_par_l&apos;utilisateur">Exemple : Afficher les miniatures d&apos;images sélectionnées par l&apos;utilisateur</h2>

<p>Admettons que vous développiez actuellement le prochain site génial de partage de photos, et que vous souhaitiez utiliser HTML5 pour afficher une prévisualisation miniature des images avant que l&apos;utilisateur ne les télécharge vraiment sur le serveur. Vous pouvez définir votre élément <code>input</code> ou votre zone de dépôt comme étudié précédemment et les faire appeler une fonction telle que la fonction <code>handleFiles()</code> montrée ci-dessous :</p>

<pre class="brush: js">function handleFiles(files) {
  for (var i = 0; i &lt; files.length; i++) {
    var file = files[i];
    var imageType = /^image\//;

    if (!imageType.test(file.type)) {
      continue;
    }

    var img = document.createElement(&quot;img&quot;);
    img.classList.add(&quot;obj&quot;);
    img.file = file;
    preview.appendChild(img); // En admettant que &quot;preview&quot; est l&apos;élément div qui contiendra le contenu affiché.

    var reader = new FileReader();
    reader.onload = (function(aImg) { return function(e) { aImg.src = e.target.result; }; })(img);
    reader.readAsDataURL(file);
  }
}
</pre>

<p>La boucle qui manipule dans notre cas les fichiers sélectionnés par l&apos;utilisateur examine l&apos;attribut type de chaque fichier et contrôle qu&apos;il s&apos;agit bien d&apos;une image (en utilisant une expression régulière pour vérifier la correspondance du type MIME avec la chaîne &quot;<code>image/*</code>&quot;). Nous créons un nouvel élément img pour chaque fichier image. Vous pouvez utiliser du CSS pour définir d&apos;agréables bordures ou effets d&apos;ombres ou encore pour préciser la taille de l&apos;image [de l&apos;élément <code>img</code>, NDT], même si cela n&apos;est pas nécessaire ici.</p>

<p>La classe CSS ob<code>j</code> est ajoutée à chaque élément image afin de faciliter sa recherche dans l&apos;arbre du DOM, ainsi qu&apos;un attribut <code>file</code> spécifiant le <a href="/fr/docs/Web/API/File" title="L’interface File fournit des informations sur des fichiers et permet au code JavaScript d’une une page web d’accéder à leurs contenus."><code>File</code></a> correspondant et qui nous permettra de récupérer les fichiers images lors du téléchargement effectif vers le serveur. Nous utilisons <a href="/fr/docs/Web/API/Node/appendChild" title="La méthode Node.appendChild() ajoute un nœud à la fin de la liste des enfants d&apos;un nœud parent spécifié. Si l&apos;enfant donné est une référence à un nœud existant dans le document, appendChild() le déplace  de sa position actuelle vers une nouvelle position (il n&apos;est pas nécessaire de supprimer le noeud sur son noeud parent avant de l&apos;ajouter à un autre)."><code>Node.appendChild()</code></a> pour ajouter la nouvelle miniature à la zone de prévisualisation de notre document.</p>

<p>Nous définissons ensuite le <a href="/fr/docs/Web/API/FileReader" title="L&apos;objet FileReader permet à des applications web de lire le contenu de fichiers (ou de tampons de mémoire brute) de façon asynchrone. On peut ainsi lire le contenu des objets File ou Blob (qui représentent respectivement un fichier ou des données)."><code>FileReader</code></a> qui gérera le chargement asynchrone de l&apos;image et son lien à l&apos;élément <code>img</code>. Après avoir créé le nouvel objet <code>FileReader</code>, nous définissons sa fonction <code>onload</code> pouis nous appelons <code>readAsDataURL()</code> pour démarrer l&apos;opération de lecture en tâche de fond. Lorsque le chargement du fichier image est complètement terminé, son contenu est converti en <code>data</code> : c&apos;est l&apos;URL transmise à la fonction de rappel <code>onload</code>. Notre implémentation de cette procédure définit l&apos;image chargée comme valeur de l&apos;attribut <code>src</code> de l&apos;élement <code>img</code>, faisant ainsi apparaître l&apos;image dans la miniature à l&apos;écran.</p>

<h2 id="Utiliser_un_objet_URLs">Utiliser un objet URLs</h2>

<p>Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1) introduit la prise en charge des méthodes du DOM <a href="/fr/docs/Web/API/Window/URL/createObjectURL" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>window.URL.createObjectURL()</code></a> et <a href="/fr/docs/Web/API/Window/URL/revokeObjectURL" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>window.URL.revokeObjectURL()</code></a>. Elles vous permettent de créer des chaînes d&apos;URL simples qui peuvent être utilisées pour repérer n&apos;importe quelle donnée pouvant être référencée à l&apos;aide d&apos;un objet DOM <a href="/fr/docs/Web/API/File" title="L’interface File fournit des informations sur des fichiers et permet au code JavaScript d’une une page web d’accéder à leurs contenus."><code>File</code></a>, y compris des fichiers locaux sur l&apos;ordinateur de l&apos;utilisateur.</p>

<p>Vous pouvez procéder ainsi pour créer un objet URL lorsque vous souhaitez référencer un objet <a href="/fr/docs/Web/API/File" title="L’interface File fournit des informations sur des fichiers et permet au code JavaScript d’une une page web d’accéder à leurs contenus."><code>File</code></a> par URL depuis HTML :</p>

<pre class="brush: js"><code>var objectURL = window.URL.createObjectURL(fileObj);</code></pre>

<p>L&apos;objet URL est une chaîne identifiant l&apos;objet <a href="/fr/docs/Web/API/File" title="L’interface File fournit des informations sur des fichiers et permet au code JavaScript d’une une page web d’accéder à leurs contenus."><code>File</code></a>. Un objet URL unique est créé à chaque fois que vous appelez <a href="/fr/docs/Web/API/Window/URL/createObjectURL" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>window.URL.createObjectURL()</code></a>, même si vous avez déjà créé un objet URL pour ce fichier. Chacun d&apos;eux doit être libéré ; bien qu&apos;ils soient automatiquement libérés lorsque le document est déchargé, vous devez explicitement les libérer en appelant <a href="/fr/docs/Web/API/Window/URL/revokeObjectURL" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>window.URL.revokeObjectURL()</code></a>  si votre page les utilise de manière dynamique :</p>

<pre class="brush: js"><code>window.URL.revokeObjectURL(objectURL);</code></pre>

<h2 id="Exemple_Utilisation_de_l&apos;objet_URLs_pour_afficher_des_images">Exemple : Utilisation de l&apos;objet URLs pour afficher des images</h2>

<p>Cet exemple utilise des objets URLs pour afficher des vignettes d&apos;image. Il affiche en outre d&apos;autres informations, dont leurs noms et leurs tailles.</p>

<p>Le code HTML qui présente l&apos;interface ressemble à ceci:</p>

<pre class="brush: html"><code>&lt;input type=&quot;file&quot; id=&quot;fileElem&quot; multiple accept=&quot;image/*&quot; style=&quot;display:none&quot; onchange=&quot;handleFiles(this.files)&quot;&gt;
&lt;a href=&quot;#&quot; id=&quot;fileSelect&quot;&gt;Sélectionnez des fichiers&lt;/a&gt;
&lt;div id=&quot;fileList&quot;&gt;
  &lt;p&gt;Aucun fichier sélectionné !&lt;/p&gt;
&lt;/div&gt;</code></pre>

<p>Ce code définit notre élément fichier <a href="/fr/docs/Web/HTML/Element/input" title="L&apos;élément HTML &lt;input&gt; est utilisé pour créer un contrôle interactif dans un formulaire web qui permet à l&apos;utilisateur de saisir des données. Les saisies possibles et le comportement de l&apos;élément &lt;input&gt; dépend fortement de la valeur indiquée dans son attribut type."><code>&lt;input&gt;</code></a>, ainsi qu&apos;un lien qui appelle le sélecteur de fichiers (l&apos;élément <code>input</code> étant masqué pour éviter l&apos;affichage de la si peu séduisante interface utilisateur). Vous pouvez vous reporter à la section <a href="#Using_hidden_file_input_elements_using_the_click()_method">Using hidden file input elements using the click() method</a> pour des explications détaillées sur cette partie de code ainsi que sur la méthode appelant le sélecteur de fichiers.</p>

<p>Voici la méthode <code>handleFiles()</code> :</p>

<pre class="brush: js"><code>window.URL = window.URL || window.webkitURL;

var fileSelect = document.getElementById(&quot;fileSelect&quot;),
    fileElem = document.getElementById(&quot;fileElem&quot;),
    fileList = document.getElementById(&quot;fileList&quot;);

fileSelect.addEventListener(&quot;click&quot;, function (e) {
  if (fileElem) {
    fileElem.click();
  }
  e.preventDefault(); // empêche la navigation vers &quot;#&quot;
}, false);

function handleFiles(files) {
  if (!files.length) {
    fileList.innerHTML = &quot;&lt;p&gt;Aucun fichier sélectionné !&lt;/p&gt;&quot;;
  } else {
    fileList.innerHTML = &quot;&quot;;
    var list = document.createElement(&quot;ul&quot;);
    fileList.appendChild(list);
    for (var i = 0; i &lt; files.length; i++) {
      var li = document.createElement(&quot;li&quot;);
      list.appendChild(li);

      var img = document.createElement(&quot;img&quot;);
      img.src = window.URL.createObjectURL(files[i]);
      img.height = 60;
      img.onload = function() {
        window.URL.revokeObjectURL(this.src);
      }
      li.appendChild(img);
      var info = document.createElement(&quot;span&quot;);
      info.innerHTML = files[i].name + &quot;: &quot; + files[i].size + &quot; bytes&quot;;
      li.appendChild(info);
    }
  }
}</code></pre>

<p>Nous commençons par la recherche de l&apos;URL du <a href="/fr/docs/Web/HTML/Element/div" title="L&apos;élément HTML &lt;div&gt; (qui signifie division du document) est un conteneur générique qui permet d&apos;organiser le contenu sans représenter rien de particulier. Il peut être utilisé afin de grouper d&apos;autres éléments pour leur appliquer un style (en utilisant les attributs class ou id) ou parce qu&apos;ils partagent des attributs aux valeurs communes, tel que lang. Il doit uniquement être utilisé lorsqu&apos;aucun autre élément sémantique (par exemple &lt;article&gt; ou &lt;nav&gt;) n&apos;est approprié."><code>&lt;div&gt;</code></a> dont l&apos;ID est <code>fileList</code>, qui est le bloc dans lequel nous inérerons notre liste de fichiers, ainsi que les miniatures..</p>

<p>Si l&apos;objet <a href="/fr/docs/Web/API/FileList" title="Un objet de ce type est retourné par la propriété files, ce qui vous permet d&apos;accéder à la liste des fichiers sélectionnés avec l&apos;élément &lt;input type=&quot;file&quot;&gt;.ou en utilisant l&apos;API de glisser-déposer ; voir l&apos;objet DataTransfer pour plus de détails sur cette utilisation."><code>FileList</code></a> passé à <code>handleFiles()</code> est <code>null</code>, nous définissons simplement le contenu HTML du bloc pour pour afficher &quot;Aucun fichier sélectionné ! &quot;. Nous commençons dans le cas contraire à construire notre liste de fichiers, comme ceci :</p>

<ol>
 <li>Une nouvelle liste non ordonnée (<a href="/fr/docs/Web/HTML/Element/ul" title="L&apos;élément HTML &lt;ul&gt; représente une liste d&apos;éléments sans ordre particulier. Il est souvent représenté par une liste à puces."><code>&lt;ul&gt;</code></a>) est créée.</li>
 <li>L&apos;élement de la liste nouvellement créée est ajoutée dans le bloc <a href="/fr/docs/Web/HTML/Element/div" title="L&apos;élément HTML &lt;div&gt; (qui signifie division du document) est un conteneur générique qui permet d&apos;organiser le contenu sans représenter rien de particulier. Il peut être utilisé afin de grouper d&apos;autres éléments pour leur appliquer un style (en utilisant les attributs class ou id) ou parce qu&apos;ils partagent des attributs aux valeurs communes, tel que lang. Il doit uniquement être utilisé lorsqu&apos;aucun autre élément sémantique (par exemple &lt;article&gt; ou &lt;nav&gt;) n&apos;est approprié."><code>&lt;div&gt;</code></a> en appelant sa méthode <a href="/fr/docs/Web/API/Node/appendChild" title="La méthode Node.appendChild() ajoute un nœud à la fin de la liste des enfants d&apos;un nœud parent spécifié. Si l&apos;enfant donné est une référence à un nœud existant dans le document, appendChild() le déplace  de sa position actuelle vers une nouvelle position (il n&apos;est pas nécessaire de supprimer le noeud sur son noeud parent avant de l&apos;ajouter à un autre)."><code>Node.appendChild()</code></a>.</li>
 <li>Pour chaque <a href="/fr/docs/Web/API/File" title="L’interface File fournit des informations sur des fichiers et permet au code JavaScript d’une une page web d’accéder à leurs contenus."><code>File</code></a> dans le <a href="/fr/docs/Web/API/FileList" title="Un objet de ce type est retourné par la propriété files, ce qui vous permet d&apos;accéder à la liste des fichiers sélectionnés avec l&apos;élément &lt;input type=&quot;file&quot;&gt;.ou en utilisant l&apos;API de glisser-déposer ; voir l&apos;objet DataTransfer pour plus de détails sur cette utilisation."><code>FileList</code></a> représenté par <code>files</code> :
  <ol>
   <li>Création et ajout à la liste d&apos;un nouvel élément de liste <a href="/fr/docs/Web/HTML/Element/li" title="L&apos;élément HTML &lt;li&gt; est utilisé pour représenter un élément dans une liste. Il doit être contenu dans un élément parent : une liste ordonnée (&lt;ol&gt;), une liste non ordonnée (&lt;ul&gt;) ou un menu (&lt;menu&gt;). Dans les menus et les listes non ordonnées, les éléments de liste sont habituellement affichés en utilisant des puces. Dans les listes ordonnées, ils sont habituellement affichés avec compteur croissant à gauche, tel qu&apos;un nombre ou une lettre."><code>&lt;li&gt;</code></a>.</li>
   <li>Création d&apos;un nouvel élément image <a href="/fr/docs/Web/HTML/Element/img" title="L&apos;élément HTML &lt;img&gt; permet de représenter une image dans un document. Cet élément est un élément remplacé."><code>&lt;img&gt;</code></a>.</li>
   <li>Définition d&apos;un nouvel objet URL représentant le fichier comme source de l&apos;image, en utilisant <a href="/fr/docs/Web/API/Window/URL/createObjectURL" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>window.URL.createObjectURL()</code></a> pour la création de l&apos;URL du Blob.</li>
   <li>Définition de la hauteur de l&apos;image à 60 pixels.</li>
   <li>Définition du gestionnaire pour l&apos;événement <code>load</code> de l&apos;image afin de libérer l&apos;objet URL, devenu inutile une fois l&apos;image chargée. La libération est effectuée en appelant la méthode <a href="/fr/docs/Web/API/Window/URL/revokeObjectURL" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>window.URL.revokeObjectURL()</code></a> avec en paramètre la chaîne de l&apos;objet URL de l&apos;attribut <code>img.src</code>.</li>
   <li>Ajout du nouvel élément à la liste.</li>
  </ol>
 </li>
</ol>

<h2 id="Exemple_Télécharger_sur_le_serveur_un_fichier_sélectionné_par_l&apos;utilisateur">Exemple : Télécharger sur le serveur un fichier sélectionné par l&apos;utilisateur</h2>

<p>Vous pourriez en outre vouloir autoriser l&apos;utilisateur à télécharger sur un serveur (<em>upload</em>) un ou plusieurs fichiers sélectionnés (tels que les images sélectionnées en suivant l&apos;exemple précedent). Cette opération peut être très facilement effectuée de manière asynchrone.</p>

<h3 id="Créer_les_tâches_de_téléchargement">Créer les tâches de téléchargement</h3>

<p>En poursuivant avec le code générant des miniatures de l&apos;exemple précédent, rappelez-vous que chaque image de miniature s&apos;est vue ajouter la classe CSS <code>obj</code>, ainsi que le <a href="/fr/docs/Web/API/File" title="L’interface File fournit des informations sur des fichiers et permet au code JavaScript d’une une page web d’accéder à leurs contenus."><code>File</code></a> correspondant stocké dans l&apos;attribut <code>file</code>. Cela nous permet de sélectionner très facilement toutes les images choisies par l&apos;utilisateur pour le téléchargement à l&apos;aide de <a href="/fr/docs/Web/API/Document/querySelectorAll" title="La méthode querySelectorAll()  de Element renvoie une NodeList statique représentant une liste des éléments du document qui correspondent au groupe de sélecteurs spécifiés."><code>Document.querySelectorAll()</code></a>, comme cela :</p>

<pre class="brush: js">function sendFiles() {
  var imgs = document.querySelectorAll(&quot;.obj&quot;);

  for (var i = 0; i &lt; imgs.length; i++) {
    new FileUpload(imgs[i], imgs[i].file);
  }
}
</pre>

<p>La ligne 2 crée un tableau, nommé <code>imgs</code>, de tous les éléments de la classe CSS <code>obj</code> dans le document ; s&apos;agit dans notre cas de toutes les miniatures d&apos;images. Une fois la liste établie, c&apos;est un jeu d&apos;enfant de la parcourir et de créer une nouvelle instance de <code>FileUpload</code> pour chacun de ses éléments. Chacune de ces instances gère le téléchargement du fichier correspondant vers le serveur.</p>

<h3 id="Manipuler_le_processus_de_téléchargement_pour_un_fichier">Manipuler le processus de téléchargement pour un fichier</h3>

<p>La fonction <code>FileUpload</code> accepte deux arguments : un élement image et un fichier à partir duquel les données de l&apos;image sont lues.</p>

<pre class="brush: js">function FileUpload(img, file) {
  var reader = new FileReader();
  this.ctrl = createThrobber(img);
  var xhr = new XMLHttpRequest();
  this.xhr = xhr;

  var self = this;
  this.xhr.upload.addEventListener(&quot;progress&quot;, function(e) {
        if (e.lengthComputable) {
          var percentage = Math.round((e.loaded * 100) / e.total);
          self.ctrl.update(percentage);
        }
      }, false);

  xhr.upload.addEventListener(&quot;load&quot;, function(e){
          self.ctrl.update(100);
          var canvas = self.ctrl.ctx.canvas;
          canvas.parentNode.removeChild(canvas);
      }, false);
  xhr.open(&quot;POST&quot;, &quot;http://demos.hacks.mozilla.org/paul/demos/resources/webservices/devnull.php&quot;);
  xhr.overrideMimeType(&apos;text/plain; charset=x-user-defined-binary&apos;);
  reader.onload = function(evt) {
    xhr.sendAsBinary(evt.target.result);
  };
  reader.readAsBinaryString(file);
}
</pre>

<p>La fonction <code>FileUpload()</code> montrée ci-dessus crée un indicateur d&apos;activité (<em>throbber</em>) pour l&apos;affichage de la progression, ainsi qu&apos;un <a href="/fr/docs/Web/API/XMLHttpRequest" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>XMLHttpRequest</code></a> pour gérer le téléchargement des données.</p>

<p>Il est nécessaire de prévoir quelques étapes préparatoires avant le téléchargement effectif des données :</p>

<ol>
 <li>Le processus d&apos;écoute de l&apos;événement <code>progress</code> du XMLHttpRequest est écrit de telle façon que l&apos;indicateur d&apos;activité affiche l&apos;information de progression du téléchargement la plus récente. </li>
 <li>Le gestionnaire de l&apos;événement <code>load</code> du XMLHttpRequest est écrit pour que l&apos;indicateur d&apos;activité affiche 100% afin d&apos;être sûr atteigne effectivement les 100%, même en cas granularité anormale lors du processus. Le gestionnaire supprime ensuite l&apos;indicateur devenu inutile, entraînant sa disparition à la fin normale du téléchargement.</li>
 <li>La requête de téléchargement de l&apos;image est ouverte par l&apos;appel à la méthode <code>open()</code> du XMLHttpRequest, démarrant la création d&apos;une requête POST.</li>
 <li>Le type MIME pour le téléchargement est défini en appelant la fonction <code>overrideMimeType()</code> du <code>XMLHttpRequest</code>. Nous utilisons ici un type MIME générique ; vous pouvez selon les cas définir ou ne définir aucun type MIME.</li>
 <li>L&apos;objet <code>FileReader</code> est utilisé pour la conversion du fichier en chaîne binaire.</li>
 <li>La fonction <code>send()</code> du  XMLHttpRequest est appelée en dernier pour télécharger le contenu du fichier complètement chargé.</li>
</ol>

<div class="note">
<p><strong>Note :</strong> la méthode non standard <code>sendAsBinary</code> utilisée dans l&apos;exemple ci-dessus est obsolète depuis Gecko 31 (Firefox 31 / Thunderbird 31 / SeaMonkey 2.28) ; utilisez plutôt la méthode standard <code>send(Blob data)</code>. </p>
</div>

<h3 id="Gérer_le_processus_de_téléchargement_d&apos;un_fichier_de_manière_asynchrone">Gérer le processus de téléchargement d&apos;un fichier de manière asynchrone</h3>

<pre class="brush: html">&lt;?php
if (isset($_FILES[&apos;myFile&apos;])) {
    // Exemple:
    move_uploaded_file($_FILES[&apos;myFile&apos;][&apos;tmp_name&apos;], &quot;uploads/&quot; . $_FILES[&apos;myFile&apos;][&apos;name&apos;]);
    exit;
}
?&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;dnd binary upload&lt;/title&gt;
    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        function sendFile(file) {
            var uri = &quot;/index.php&quot;;
            var xhr = new XMLHttpRequest();
            var fd = new FormData();

            xhr.open(&quot;POST&quot;, uri, true);
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) {
                    // Handle response.
                    alert(xhr.responseText); // handle response.
                }
            };
            fd.append(&apos;myFile&apos;, file);
            // Initiate a multipart/form-data upload
            xhr.send(fd);
        }

        window.onload = function() {
            var dropzone = document.getElementById(&quot;dropzone&quot;);
            dropzone.ondragover = dropzone.ondragenter = function(event) {
                event.stopPropagation();
                event.preventDefault();
            }

            dropzone.ondrop = function(event) {
                event.stopPropagation();
                event.preventDefault();

                var filesArray = event.dataTransfer.files;
                for (var i=0; i&lt;filesArray.length; i++) {
                    sendFile(filesArray[i]);
                }
            }
         }
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div&gt;
        &lt;div id=&quot;dropzone&quot; style=&quot;margin:30px; width:500px; height:300px; border:1px dotted grey;&quot;&gt;Drag &amp; drop your file here...&lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<h2 id="Exemple_Utiliser_un_objet_URLs_pour_afficher_un_PDF">Exemple : Utiliser un objet URLs pour afficher un PDF</h2>

<p>Vous pouvez utiliser un objet URLs pour d&apos;autres choses que les images ! Ils peuvent être utilisés pour afficher des fichiers PDF incorporés ou toutes autres ressources affichables par le navigateur.</p>

<p>Sous Firefox, la constante de configuration <code>pdfjs.disabled</code> doit être définie à <code>false</code> <span class="icon-only-inline" title="Cette API n&apos;a pas été standardisée."><i class="icon-warning-sign"> </i></span> pour afficher les PDF encapsulés dans dans un <a href="/fr/docs/Web/HTML/Element/iframe" title="Le code source de cet exemple interactif est disponible dans un dépôt GitHub. Si vous souhaitez contribuez à ces exemples, n&apos;hésitez pas à cloner https://github.com/mdn/interactive-examples et à envoyer une pull request !"><code>&lt;iframe&gt;</code></a> plutôt que de s&apos;en voir proposer le téléchargement sur le PC local.</p>

<pre class="brush: html line-numbers  language-html"><code class="language-html"><span class="tag token"><span class="tag token"><span class="punctuation token">&lt;</span>iframe</span> <span class="attr-name token">id</span><span class="attr-value token"><span class="punctuation token">=</span><span class="punctuation token">&quot;</span>viewer<span class="punctuation token">&quot;</span></span><span class="punctuation token">&gt;</span></span></code></pre>

<p>Et voici comment modifier la valeur de l&apos;attribut <code>src</code> :</p>

<pre class="brush: js line-numbers  language-js"><code class="language-js"><span class="keyword token">var</span> obj_url <span class="operator token">=</span> window<span class="punctuation token">.</span>URL<span class="punctuation token">.</span><span class="function token">createObjectURL</span><span class="punctuation token">(</span>blob<span class="punctuation token">)</span><span class="punctuation token">;</span>
<span class="keyword token">var</span> iframe <span class="operator token">=</span> document<span class="punctuation token">.</span><span class="function token">getElementById</span><span class="punctuation token">(</span><span class="string token">&apos;viewer&apos;</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
iframe<span class="punctuation token">.</span><span class="function token">setAttribute</span><span class="punctuation token">(</span><span class="string token">&apos;src&apos;</span><span class="punctuation token">,</span> obj_url<span class="punctuation token">)</span><span class="punctuation token">;</span>
window<span class="punctuation token">.</span>URL<span class="punctuation token">.</span><span class="function token">revokeObjectURL</span><span class="punctuation token">(</span>obj_url<span class="punctuation token">)</span><span class="punctuation token">;</span></code></pre>

<h2 id="Exemple_Utiliser_un_objet_URLs_avec_d&apos;autres_types_de_fichiers">Exemple : Utiliser un objet URLs avec d&apos;autres types de fichiers</h2>

<p>Vous pouvez manipuler de la même façon des fichiers d&apos;autres formats. Voici comment prévisualiser une vidéo téléchargée sur le serveur :</p>

<pre class="brush: js line-numbers  language-js"><code class="language-js"><span class="keyword token">var</span> video <span class="operator token">=</span> document<span class="punctuation token">.</span><span class="function token">getElementById</span><span class="punctuation token">(</span><span class="string token">&apos;video&apos;</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
<span class="keyword token">var</span> obj_url <span class="operator token">=</span> window<span class="punctuation token">.</span>URL<span class="punctuation token">.</span><span class="function token">createObjectURL</span><span class="punctuation token">(</span>blob<span class="punctuation token">)</span><span class="punctuation token">;</span>
video<span class="punctuation token">.</span>src <span class="operator token">=</span> obj_url<span class="punctuation token">;</span>
video<span class="punctuation token">.</span><span class="function token">play</span><span class="punctuation token">(</span><span class="punctuation token">)</span>
window<span class="punctuation token">.</span>URL<span class="punctuation token">.</span><span class="function token">revokeObjectURL</span><span class="punctuation token">(</span>obj_url<span class="punctuation token">)</span><span class="punctuation token">;</span></code></pre>

<h2 id="Specification" name="Specification">Spécifications</h2>

<ul>
 <li><a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#file-upload-state-%28type=file%29">File upload state</a> (HTML 5 working draft)</li>
 <li><a href="http://www.w3.org/TR/FileAPI/">File API</a></li>
</ul>

<h2 id="Voir_aussi">Voir aussi</h2>

<ul>
 <li><a href="/fr/docs/Web/API/File"><code>File</code></a></li>
 <li><a href="/fr/docs/Web/API/FileList"><code>FileList</code></a></li>
 <li><a href="/fr/docs/Web/API/FileReader"><code>FileReader</code></a></li>
 <li><a href="/Web/API/XMLHttpRequest/Utiliser_XMLHttpRequest">Utiliser XMLHttpRequest</a></li>
 <li><a href="/en/Extensions/Using_the_DOM_File_API_in_chrome_code">Using the DOM File API in chrome code</a></li>
 <li><a href="/fr/docs/Web/API/XMLHttpRequest"><code>XMLHttpRequest</code></a></li>
 <li><a class="external" href="http://www.jquery.com/">jQuery</a> JavaScript library</li>
</ul>
