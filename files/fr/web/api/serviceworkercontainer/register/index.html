---
title: ServiceWorkerContainer.register()
slug: Web/API/ServiceWorkerContainer/register
tags:
  - API
  - Méthode
  - Reference
  - Service Workers
  - Service worker API
  - ServiceWorker
  - ServicerWorkerContainer
  - register
translation_of: Web/API/ServiceWorkerContainer/register
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/fr/docs/Web/API/Service_Worker_API">Service Worker API</a></strong></li><li><strong><a href="/fr/docs/Web/API/ServiceWorkerContainer"><code>ServiceWorkerContainer</code></a></strong></li><li class="toggle"><details open><summary>Propriétés</summary><ol><li><a href="/fr/docs/Web/API/ServiceWorkerContainer/controller"><code>controller</code></a> <a href="/fr/docs/Web/API/ServiceWorkerContainer/controller$translate" style="opacity: 0.5;">[Traduire]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/fr/docs/Web/API/ServiceWorkerContainer/oncontrollerchange"><code>oncontrollerchange</code></a> <a href="/fr/docs/Web/API/ServiceWorkerContainer/oncontrollerchange$translate" style="opacity: 0.5;">[Traduire]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/fr/docs/Web/API/ServiceWorkerContainer/onerror"><code>onerror</code></a> <a href="/fr/docs/Web/API/ServiceWorkerContainer/onerror$translate" style="opacity: 0.5;">[Traduire]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/fr/docs/Web/API/ServiceWorkerContainer/onmessage"><code>onmessage</code></a> <a href="/fr/docs/Web/API/ServiceWorkerContainer/onmessage$translate" style="opacity: 0.5;">[Traduire]</a></li><li><a href="/fr/docs/Web/API/ServiceWorkerContainer/ready"><code>ready</code></a> <a href="/fr/docs/Web/API/ServiceWorkerContainer/ready$translate" style="opacity: 0.5;">[Traduire]</a></li></ol></details></li><li class="toggle"><details open><summary>Méthodes</summary><ol><li><a href="/fr/docs/Web/API/ServiceWorkerContainer/getRegistration"><code>getRegistration()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/fr/docs/Web/API/ServiceWorkerContainer/getRegistrations"><code>getRegistrations()</code></a> <a href="/fr/docs/Web/API/ServiceWorkerContainer/getRegistrations$translate" style="opacity: 0.5;">[Traduire]</a></li><li><em><code>register()</code></em></li></ol></details></li><li class="toggle"><details open><summary>Événements</summary><ol><li><a href="/fr/docs/Web/API/ServiceWorkerContainer/message_event"><code>message</code></a> <a href="/fr/docs/Web/API/ServiceWorkerContainer/message_event$translate" style="opacity: 0.5;">[Traduire]</a></li></ol></details></li><li class="toggle"><details open><summary>Héritage :</summary><ol><li><a href="/fr/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li><li class="toggle"><details open><summary>Pages liées à Service Workers API</summary><ol><li><a href="/fr/docs/Web/API/Cache"><code>Cache</code></a></li><li><a href="/fr/docs/Web/API/CacheStorage"><code>CacheStorage</code></a></li><li><a href="/fr/docs/Web/API/Client"><code>Client</code></a></li><li><a href="/fr/docs/Web/API/Clients"><code>Clients</code></a></li><li><a href="/fr/docs/Web/API/ExtendableEvent"><code>ExtendableEvent</code></a></li><li><a href="/fr/docs/Web/API/FetchEvent"><code>FetchEvent</code></a></li><li><a href="/fr/docs/Web/API/InstallEvent"><code>InstallEvent</code></a></li><li><a href="/fr/docs/Web/API/Navigator/serviceWorker"><code>Navigator.serviceWorker</code></a></li><li><a href="/fr/docs/Web/API/NotificationEvent"><code>NotificationEvent</code></a></li><li><a href="/fr/docs/Web/API/PeriodicSyncEvent"><code>PeriodicSyncEvent</code></a></li><li><a href="/fr/docs/Web/API/PeriodicSyncManager"><code>PeriodicSyncManager</code></a></li><li><a href="/fr/docs/Web/API/PeriodicSyncRegistration"><code>PeriodicSyncRegistration</code></a></li><li><a href="/fr/docs/Web/API/ServiceWorker"><code>ServiceWorker</code></a></li><li><a href="/fr/docs/Web/API/ServiceWorkerGlobalScope"><code>ServiceWorkerGlobalScope</code></a></li><li><a href="/fr/docs/Web/API/ServiceWorkerRegistration"><code>ServiceWorkerRegistration</code></a></li><li><a href="/fr/docs/Web/API/SyncEvent"><code>SyncEvent</code></a></li><li><a href="/fr/docs/Web/API/SyncManager"><code>SyncManager</code></a></li><li><a href="/fr/docs/Web/API/SyncRegistration"><code>SyncRegistration</code></a></li><li><a href="/fr/docs/Web/API/WindowClient"><code>WindowClient</code></a></li></ol></details></li></ol></section></div>

<p><span class="seoSummary">La méthode <strong><code>register()</code></strong> de l&apos;interface <a href="/fr/docs/Web/API/ServiceWorkerContainer"><code>ServiceWorkerContainer</code></a> crée ou met à jour un <a href="/fr/docs/Web/API/ServiceWorkerRegistration"><code>ServiceWorkerRegistration</code></a> pour la <code>scriptURL</code> donnée.</span></p>

<p>En cas de succès, un <code>ServiceWorkerRegistration</code> attache la <code>scriptURL</code> fournie à une portée, qui sera utilisé ensuite pour la correspondance de navigation. Vous pouvez appeler cette méthode en toutes circonstances depuis la page contrôlée. C&apos;est-à-dire, vous <span class="tlid-translation translation" lang="fr"><span title>n&apos;avez pas besoin de vérifier </span></span><span class="tlid-translation translation" lang="fr"><span title>si </span></span>un enregistrement existe déjà.</p>

<p>Il y a une confusion fréquente autour de la signification et de l&apos;utilisation de la portée. Puisque qu&apos;un <code>ServiceWorker</code> ne peut pas avoir une portée plus large que son propre emplacement, utilisez uniquement l&apos;option de la portée lorsque vous avez besoin d&apos;une portée plus étroite que la valeur par défaut.</p>

<h2 id="Syntaxe">Syntaxe</h2>

<pre class="syntaxbox notranslate"><em>serviceWorkerContainer</em>.register(<em>scriptURL</em>, <em>options</em>)
  .then(function(<em>serviceWorkerRegistration</em>) { ... })</pre>

<h3 id="Paramètres">Paramètres</h3>

<dl>
 <dt><code>scriptURL</code></dt>
 <dd>L&apos; URL du script contenant le <code>ServiceWorker</code>. Le fichier qui a enregistré le <code>ServiceWorker</code> doit avoir un <a href="/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types#JavaScript_types">JavaScript MIME type</a> valide.</dd>
 <dt><code>options</code> <span class="optional optionalInline notecard inline">Facultatif</span></dt>
 <dd>Un objet contenant les options d&apos;<span class="tlid-translation translation" lang="fr"><span title>enregistrement</span></span>. Les options sont:
 <ul>
  <li><code>scope</code>: Un <a href="/fr/docs/Web/API/USVString"><code>USVString</code></a> représentant une URL qui définit la portée d&apos;enregistrement d&apos;un <code>ServiceWorker</code>; <span class="tlid-translation translation" lang="fr"><span title>c&apos;est-à-dire quelle plage d&apos;URL</span></span> un <code>ServiceWorker</code> <span class="tlid-translation translation" lang="fr"><span title>peut contrôler</span></span>. Il s&apos;agit généralement d&apos;une URL relative. Elle est relative à l&apos;URL de base de l&apos;application. Par défaut, la valeur de la portée de l&apos;<span class="tlid-translation translation" lang="fr"><span title>enregistrement</span></span> d&apos;un <code>ServiceWorker</code> est limité au répertoire qui contient le script du <code>ServiceWorker</code>. Consultez la section <a href="#Exemples">Exemples</a> pour plus d&apos;informations sur son fonctionnement.</li>
  <li><span class="icon-only-inline" title="Cette API n&apos;a pas été standardisée."><i class="icon-warning-sign"> </i></span> <code>type</code>: Un <a href="/fr/docs/Web/API/WorkerType"><code>WorkerType</code></a>, il prend les valeurs &quot;classic&quot; ou &quot;module&quot;. Par défaut, la valeur est fixé à &quot;classic&quot;.</li>
  <li><span class="icon-only-inline" title="Cette API n&apos;a pas été standardisée."><i class="icon-warning-sign"> </i></span> <code>updateViaCache</code>: Un <a href="/fr/docs/Web/API/ServiceWorkerUpdateViaCache"><code>ServiceWorkerUpdateViaCache</code></a>, il prend les valeurs &quot;imports&quot; ou &quot;all&quot; ou &quot;none&quot;. Par défaut, la valeur est fixé à &quot;imports&quot;.</li>
 </ul>
 </dd>
</dl>

<h3 id="Valeur_de_retour">Valeur de retour</h3>

<p>Une <a href="/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise"><code>Promise</code></a> <span class="tlid-translation translation" lang="fr"><span title> qui se résout avec un objet</span></span> <a href="/fr/docs/Web/API/ServiceWorkerRegistration"><code>ServiceWorkerRegistration</code></a>.</p>

<h2 id="Exemples">Exemples</h2>

<p>Les exemples décrits ici doivent être pris ensemble pour obtenir une meilleure compréhension de comment la portée des <code>ServiceWorker</code> s&apos;applique à une page.</p>

<p>L&apos;exemple suivant utilise la valeur par défaut de la portée (en l&apos;omettant). Le code du <code>ServiceWorker</code> dans ce cas, s&apos;il est inclus dans <code>example.com/index.html</code>, contrôlera <code>example.com/index.html</code>, ainsi que les pages en dessous, comme <code>example.com/product/description.html</code>.</p>

<pre class="brush: js notranslate">if (&apos;serviceWorker&apos; in navigator) {
  // Register a service worker hosted at the root of the
  // site using the default scope.
  navigator.serviceWorker.register(&apos;/sw.js&apos;).then(
    (registration) =&gt; {
      console.log(&apos;Service worker registration succeeded:&apos;, registration)
    },
    /*catch*/ (error) =&gt; {
      console.log(&apos;Service worker registration failed:&apos;, error)
    }
  )
} else {
  console.log(&apos;Service workers are not supported.&apos;)
}</pre>

<p>Le code suivant, s&apos;il est inclus dans <code>example.com/index.html</code>, à la racine d&apos;un site, s&apos;appliquerait exactement aux mêmes pages que l&apos;exemple ci-dessus. N&apos;oubliez pas que la portée, lorsqu&apos;elle est incluse, utilise l&apos;emplacement de la page comme base.</p>

<p>Sinon, si ce code était inclus dans une page à <code>example.com/product/description.html</code>, avec le fichier Javascript résidant à <code>example.com/product/sw.js</code>, alors le service worker ne s&apos;appliquerait qu&apos;aux ressources sous <code>example.com /product</code>.</p>

<pre class="brush: js notranslate">if (&apos;serviceWorker&apos; in navigator) {
  // declaring scope manually
  navigator.serviceWorker.register(&apos;/sw.js&apos;, { scope: &apos;./&apos; }).then(
    (registration) =&gt; {
      console.log(&apos;Service worker registration succeeded:&apos;, registration)
    },
    /*catch*/ (error) =&gt; {
      console.log(&apos;Service worker registration failed:&apos;, error)
    }
  )
} else {
  console.log(&apos;Service workers are not supported.&apos;)
}
</pre>

<p>Il y a une confusion fréquente autour de la signification et de l&apos;utilisation de la portée. Puisque qu&apos;un <code>ServiceWorker</code> ne peut pas avoir une portée plus large que son propre emplacement, utilisez uniquement l&apos;option de la portée lorsque vous avez besoin d&apos;une portée plus étroite que la valeur par défaut.</p>

<p>Le code suivant, s&apos;il est inclus dans <code>example.com/index.html</code>, à la racine d&apos;un site, ne s&apos;appliquerait qu&apos;aux ressources sous <code>example.com/product</code>.</p>

<pre class="brush: js notranslate">if (&apos;serviceWorker&apos; in navigator) {
  // declaring scope manually
  navigator.serviceWorker.register(&apos;/sw.js&apos;, { scope: &apos;/product/&apos; }).then(
    (registration) =&gt; {
      console.log(&apos;Service worker registration succeeded:&apos;, registration)
    },
    /*catch*/ (error) =&gt; {
      console.log(&apos;Service worker registration failed:&apos;, error)
    }
  )
} else {
  console.log(&apos;Service workers are not supported.&apos;)
}</pre>

<p>Toutefois, les serveurs peuvent supprimer cette restriction en définissant un en-tête <a href="https://w3c.github.io/ServiceWorker/#service-worker-allowed" id="ref-for-service-worker-allowed">Service-Worker-Allowed</a> sur le script du <code>ServiceWorker</code>, et alors vous pouvez spécifier une portée maximale pour ce <code>ServiceWorker</code> au-dessus de l&apos;emplacement du <code>ServiceWorker</code>.</p>

<h2 id="Spécifications">Spécifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://w3c.github.io/ServiceWorker/#dom-serviceworkercontainer-register" hreflang="en" lang="en">Service Workers<br><small lang="fr">La définition de &apos;ServiceWorkerContainer: register&apos; dans cette spécification.</small></a></td>
   <td><span class="spec-WD">Version de travail</span></td>
   <td>Définition initiale.</td>
  </tr>
 </tbody>
</table>

<h2 id="Compatibilité_des_navigateurs">Compatibilité des navigateurs</h2>

<div class="hidden">Le tableau de compatibilité de cette page est généré à partir de données structurées. Si vous souhaitez contribuer aux données, veuillez consulter <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> et nous envoyer une pull request.</div>

<div class="bc-data" id="bcd:api.ServiceWorkerContainer.register"></div>

<h2 id="Voir_également">Voir également</h2>

<ul>
 <li><a href="https://www.w3.org/TR/service-workers/#navigator-service-worker-register">W3.org ServiceWorker Register</a></li>
 <li><a href="https://w3c.github.io/ServiceWorker/#dom-serviceworkercontainer-register">W3c.github.io ServiceWorker Register</a></li>
 <li><a href="https://www.w3.org/TR/service-workers/#enumdef-serviceworkerupdateviacache">W3.org option update via cache</a></li>
 <li><a href="https://html.spec.whatwg.org/multipage/workers.html#workertype">WHATWG.org Worker Type</a></li>
</ul>
