---
title: IDBDatabase.onversionchange
slug: Web/API/IDBDatabase/onversionchange
tags:
  - API
  - IndexedDB
  - Propriété
  - Reference
translation_of: Web/API/IDBDatabase/onversionchange
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/fr/docs/Web/API/IndexedDB_API">IndexedDB API</a></strong></li><li><strong><a href="/fr/docs/Web/API/IDBDatabase"><code>IDBDatabase</code></a></strong></li><li class="toggle"><details open><summary>Propriétés</summary><ol><li><a href="/fr/docs/Web/API/IDBDatabase/name"><code>name</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabase/objectStoreNames"><code>objectStoreNames</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabase/onabort"><code>onabort</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabase/onclose"><code>onclose</code></a> <a style="opacity: 0.5;" href="/fr/docs/Web/API/IDBDatabase/onclose$translate">[Traduire]</a></li><li><a href="/fr/docs/Web/API/IDBDatabase/onerror"><code>onerror</code></a></li><li><em><code>onversionchange</code></em></li><li><a href="/fr/docs/Web/API/IDBDatabase/version"><code>version</code></a></li></ol></details></li><li class="toggle"><details open><summary>Méthodes</summary><ol><li><a href="/fr/docs/Web/API/IDBDatabase/close"><code>close()</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabase/createObjectStore"><code>createObjectStore()</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabase/deleteObjectStore"><code>deleteObjectStore()</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabase/transaction"><code>transaction()</code></a></li></ol></details></li><li class="toggle"><details open><summary>Héritage :</summary><ol><li><a href="/fr/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li><li class="toggle"><details open><summary>Événements</summary><ol><li><a href="/fr/docs/Web/Events/upgradeneeded"><code>upgradeneeded</code></a></li><li><a href="/fr/docs/Web/Events/complete"><code>complete</code></a></li><li><a href="/fr/docs/Web/Events/abort"><code>abort</code></a></li><li><a href="/fr/docs/Web/Events/success"><code>success</code></a></li><li><a href="/fr/docs/Web/Events/error"><code>error</code></a></li><li><a href="/fr/docs/Web/Events/blocked"><code>blocked</code></a></li><li><a href="/fr/docs/Web/Events/versionchange"><code>versionchange</code></a></li><li><a href="/fr/docs/Web/Events/close"><code>close</code></a></li></ol></details></li><li class="toggle"><details open><summary>Pages liées à IndexedDB</summary><ol><li><a href="/fr/docs/Web/API/IDBCursor"><code>IDBCursor</code></a></li><li><a href="/fr/docs/Web/API/IDBCursorSync"><code>IDBCursorSync</code></a></li><li><a href="/fr/docs/Web/API/IDBCursorWithValue"><code>IDBCursorWithValue</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabaseException"><code>IDBDatabaseException</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabaseSync"><code>IDBDatabaseSync</code></a></li><li><a href="/fr/docs/Web/API/IDBEnvironment"><code>IDBEnvironment</code></a></li><li><a href="/fr/docs/Web/API/IDBEnvironmentSync"><code>IDBEnvironmentSync</code></a></li><li><a href="/fr/docs/Web/API/IDBFactory"><code>IDBFactory</code></a></li><li><a href="/fr/docs/Web/API/IDBFactorySync"><code>IDBFactorySync</code></a></li><li><a href="/fr/docs/Web/API/IDBIndex"><code>IDBIndex</code></a></li><li><a href="/fr/docs/Web/API/IDBIndexSync"><code>IDBIndexSync</code></a></li><li><a href="/fr/docs/Web/API/IDBKeyRange"><code>IDBKeyRange</code></a></li><li><a href="/fr/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a></li><li><a href="/fr/docs/Web/API/IDBObjectStoreSync"><code>IDBObjectStoreSync</code></a></li><li><a href="/fr/docs/Web/API/IDBOpenDBRequest"><code>IDBOpenDBRequest</code></a></li><li><a href="/fr/docs/Web/API/IDBRequest"><code>IDBRequest</code></a></li><li><a href="/fr/docs/Web/API/IDBTransaction"><code>IDBTransaction</code></a></li><li><a href="/fr/docs/Web/API/IDBTransactionSync"><code>IDBTransactionSync</code></a></li><li><a href="/fr/docs/Web/API/IDBVersionChangeEvent"><code>IDBVersionChangeEvent</code></a></li><li><a href="/fr/docs/Web/API/IDBVersionChangeRequest"><code>IDBVersionChangeRequest</code></a></li></ol></details></li></ol></section></div>

<p>Le gestionnaire d&apos;événement <strong><code>onversionchange</code></strong>, rattaché à l&apos;interface <a href="/fr/docs/Web/API/IDBDatabase" title="L&apos;interface IDBDatabase de l&apos;API IndexedDB fournit une connexion à la base de données. On peut utiliser un objet IDBDatabase pour ouvrir une transaction sur la base de données puis ajouter, éditer ou supprimer des enregistrements de cette base de données. Cette interface constitue le seul moyen d&apos;accéder et de gérer les versions de la base de données."><code>IDBDatabase</code></a>, s’exécute au déclenchement de l&apos;événement <code>versionchange</code> qui se produit lorsque la structure de la base de donnée change (l&apos;événement <a href="/fr/docs/Web/API/IDBOpenDBRequest/onupgradeneeded" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>IDBOpenDBRequest.onupgradeneeded</code></a> ou <a href="/fr/docs/Web/API/IDBFactory/deleteDatabase" title="La méthode deleteDatabase(), rattachée à l&apos;interface IDBFactory, permet de demander la suppression d&apos;une base de données. La méthode renvoie immédiatement un objet IDBOpenDBRequest puis effectue l&apos;opération de suppression de façon asynchrone."><code>IDBFactory.deleteDatabase</code></a> a été demandé par ailleurs (probablement dans une autre fenêtre ou onglet sur le même ordinateur)).</p>

<p>Cela n&apos;est pas la même chose qu&apos;une transaction <code>versionchange</code> (bien que les concepts soient apparentés).</p>

<p></p><div class="note notecard"><strong>Note :</strong> Cette fonctionnalité est disponible via les <a href="/fr/docs/Web/API/Web_Workers_API">Web Workers</a>.</div><p></p>

<h2 id="Syntaxe">Syntaxe</h2>

<pre class="brush: js">db.onversionchange = function() { ... }</pre>

<h2 id="Exemple">Exemple</h2>

<p>Cette exemple illustre un gestionnaire d&apos;événement <a href="/fr/docs/Web/API/IDBOpenDBRequest/onupgradeneeded" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>IDBOpenDBRequest.onupgradeneeded</code></a> dans lequel on ajoute un magasin d&apos;objets. Les deux gestionnaires d&apos;événements <code>onerror</code> et <code>onabort</code> sont utilisés pour les cas d&apos;échec. Le gestionnaire d&apos;événement <code>onversionchange</code> est utilisé afin d&apos;indiquer que la structure de la base de données a été modifiée.</p>

<pre class="brush: js">DBOpenRequest.onupgradeneeded = function(event) {
  var db = event.target.result;

  db.onerror = function() {
    note.innerHTML += &apos;&lt;li&gt;Erreur du chargement de la base de données.&lt;/li&gt;&apos;;
  };

  db.onabort = function() {
    note.innerHTML += &apos;&lt;li&gt;L\&apos;ouverture de la connexion à été annulée !&lt;/li&gt;&apos;;
  };

  // Ajoute un magasin d&apos;objets à la base de données

  var objectStore = db.createObjectStore(&quot;toDoList&quot;, { keyPath: &quot;taskTitle&quot; });

  // Définition des index

  objectStore.createIndex(&quot;hours&quot;, &quot;hours&quot;, { unique: false });
  objectStore.createIndex(&quot;minutes&quot;, &quot;minutes&quot;, { unique: false });
  objectStore.createIndex(&quot;day&quot;, &quot;day&quot;, { unique: false });
  objectStore.createIndex(&quot;month&quot;, &quot;month&quot;, { unique: false });
  objectStore.createIndex(&quot;year&quot;, &quot;year&quot;, { unique: false });

  objectStore.createIndex(&quot;notified&quot;, &quot;notified&quot;, { unique: false });

  note.innerHTML += &apos;&lt;li&gt;Le magasin d\&apos;objet à été ajouté.&lt;/li&gt;&apos;;

  db.onversionchange = function(event) {
    note.innerHTML += &apos;&lt;li&gt;Des changements ont été appliqués sur la base de données. Vous devez réactualiser cette page ou la fermer et utiliser l\&apos;autre version de cette application qui est ouverte.&lt;/li&gt;&apos;;
  };
};</pre>

<h2 id="Spécifications">Spécifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Spécification</th>
   <th scope="col">État</th>
   <th scope="col">Commentaires</th>
  </tr>
  <tr>
   <td><a lang="en" href="https://www.w3.org/TR/IndexedDB/#widl-IDBDatabase-onversionchange" class="external" hreflang="en">Indexed Database API<br><small lang="fr">La définition de &apos;onversionchange&apos; dans cette spécification.</small></a></td>
   <td><span class="spec-REC">Recommendation</span></td>
   <td> </td>
  </tr>
 </tbody>
</table>

<h2 id="Compatibilité_des_navigateurs">Compatibilité des navigateurs</h2>

<div><div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">Nous convertissons les données de compatibilité dans un format JSON</a></strong>.
            Ce tableau de compatibilité utilise encore l&apos;ancien format
            car nous n&apos;avons pas encore converti les données qu&apos;il contient.
            <strong><a href="/fr/docs/MDN/Contribute/Structures/Compatibility_tables">Vous pouvez nous aider en contribuant !</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Ordinateur</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div></div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Fonctionnalité</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>Support simple</td>
   <td>23<span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/fr/docs/Web/Guide/Prefixes">webkit</a></span><br>
    24</td>
   <td>10 <span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/fr/docs/Web/Guide/Prefixes">moz</a></span><br>
    <a href="/en-US/Firefox/Releases/16">16.0</a> (16.0)</td>
   <td>10, partial</td>
   <td>15</td>
   <td>7.1</td>
  </tr>
  <tr>
   <td>Disponible via les web workers</td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td>37.0 (37.0)</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Fonctionnalité</th>
   <th>Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS</th>
   <th>IE Phone</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Support basique</td>
   <td>4.4</td>
   <td>22.0 (22.0)</td>
   <td>1.0.1</td>
   <td>10</td>
   <td>22</td>
   <td>8</td>
  </tr>
  <tr>
   <td>Disponible via les web workers</td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td>37.0 (37.0)</td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
  </tr>
 </tbody>
</table>
</div>

<h2 id="Voir_aussi">Voir aussi</h2>

<ul>
 <li><a href="/fr/docs/Web/API/API_IndexedDB/Using_IndexedDB">Manipuler IndexedDB</a></li>
 <li>Démarrer des transactions : <a href="/fr/docs/Web/API/IDBDatabase"><code>IDBDatabase</code></a></li>
 <li>Manipuler des transactions : <a href="/fr/docs/Web/API/IDBTransaction"><code>IDBTransaction</code></a></li>
 <li>Définir un intervalle de clés : <a href="/fr/docs/Web/API/IDBKeyRange"><code>IDBKeyRange</code></a></li>
 <li>Récupérer des données et les modifier : <a href="/fr/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a></li>
 <li>Manipuler des curseurs : <a href="/fr/docs/Web/API/IDBCursor"><code>IDBCursor</code></a></li>
 <li>Exemple de référence pour IndexedDB : <a href="https://github.com/mdn/to-do-notifications/tree/gh-pages">To-do Notifications</a></li>
</ul>
