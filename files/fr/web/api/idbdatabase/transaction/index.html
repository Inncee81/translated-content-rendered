---
title: IDBDatabase.transaction()
slug: Web/API/IDBDatabase/transaction
translation_of: Web/API/IDBDatabase/transaction
---
<p></p><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/fr/docs/Web/API/IndexedDB_API">IndexedDB API</a></strong></li><li><strong><a href="/fr/docs/Web/API/IDBDatabase"><code>IDBDatabase</code></a></strong></li><li class="toggle"><details open><summary>Propriétés</summary><ol><li><a href="/fr/docs/Web/API/IDBDatabase/name"><code>name</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabase/objectStoreNames"><code>objectStoreNames</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabase/onabort"><code>onabort</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabase/onclose"><code>onclose</code></a> <a style="opacity: 0.5;" href="/fr/docs/Web/API/IDBDatabase/onclose$translate">[Traduire]</a></li><li><a href="/fr/docs/Web/API/IDBDatabase/onerror"><code>onerror</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabase/onversionchange"><code>onversionchange</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabase/version"><code>version</code></a></li></ol></details></li><li class="toggle"><details open><summary>Méthodes</summary><ol><li><a href="/fr/docs/Web/API/IDBDatabase/close"><code>close()</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabase/createObjectStore"><code>createObjectStore()</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabase/deleteObjectStore"><code>deleteObjectStore()</code></a></li><li><em><code>transaction()</code></em></li></ol></details></li><li class="toggle"><details open><summary>Héritage :</summary><ol><li><a href="/fr/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li><li class="toggle"><details open><summary>Événements</summary><ol><li><a href="/fr/docs/Web/Events/upgradeneeded"><code>upgradeneeded</code></a></li><li><a href="/fr/docs/Web/Events/complete"><code>complete</code></a></li><li><a href="/fr/docs/Web/Events/abort"><code>abort</code></a></li><li><a href="/fr/docs/Web/Events/success"><code>success</code></a></li><li><a href="/fr/docs/Web/Events/error"><code>error</code></a></li><li><a href="/fr/docs/Web/Events/blocked"><code>blocked</code></a></li><li><a href="/fr/docs/Web/Events/versionchange"><code>versionchange</code></a></li><li><a href="/fr/docs/Web/Events/close"><code>close</code></a></li></ol></details></li><li class="toggle"><details open><summary>Pages liées à IndexedDB</summary><ol><li><a href="/fr/docs/Web/API/IDBCursor"><code>IDBCursor</code></a></li><li><a href="/fr/docs/Web/API/IDBCursorSync"><code>IDBCursorSync</code></a></li><li><a href="/fr/docs/Web/API/IDBCursorWithValue"><code>IDBCursorWithValue</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabaseException"><code>IDBDatabaseException</code></a></li><li><a href="/fr/docs/Web/API/IDBDatabaseSync"><code>IDBDatabaseSync</code></a></li><li><a href="/fr/docs/Web/API/IDBEnvironment"><code>IDBEnvironment</code></a></li><li><a href="/fr/docs/Web/API/IDBEnvironmentSync"><code>IDBEnvironmentSync</code></a></li><li><a href="/fr/docs/Web/API/IDBFactory"><code>IDBFactory</code></a></li><li><a href="/fr/docs/Web/API/IDBFactorySync"><code>IDBFactorySync</code></a></li><li><a href="/fr/docs/Web/API/IDBIndex"><code>IDBIndex</code></a></li><li><a href="/fr/docs/Web/API/IDBIndexSync"><code>IDBIndexSync</code></a></li><li><a href="/fr/docs/Web/API/IDBKeyRange"><code>IDBKeyRange</code></a></li><li><a href="/fr/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a></li><li><a href="/fr/docs/Web/API/IDBObjectStoreSync"><code>IDBObjectStoreSync</code></a></li><li><a href="/fr/docs/Web/API/IDBOpenDBRequest"><code>IDBOpenDBRequest</code></a></li><li><a href="/fr/docs/Web/API/IDBRequest"><code>IDBRequest</code></a></li><li><a href="/fr/docs/Web/API/IDBTransaction"><code>IDBTransaction</code></a></li><li><a href="/fr/docs/Web/API/IDBTransactionSync"><code>IDBTransactionSync</code></a></li><li><a href="/fr/docs/Web/API/IDBVersionChangeEvent"><code>IDBVersionChangeEvent</code></a></li><li><a href="/fr/docs/Web/API/IDBVersionChangeRequest"><code>IDBVersionChangeRequest</code></a></li></ol></details></li></ol></section><p></p>

<div>
<p>La méthode <strong><code>transaction</code></strong> de l&apos;interface <a href="/fr/docs/Web/API/IDBDatabase" title="L&apos;interface IDBDatabase de l&apos;API IndexedDB fournit une connexion à la base de données. On peut utiliser un objet IDBDatabase pour ouvrir une transaction sur la base de données puis ajouter, éditer ou supprimer des enregistrements de cette base de données. Cette interface constitue le seul moyen d&apos;accéder et de gérer les versions de la base de données."><code>IDBDatabase</code></a> renvoie une <a href="/fr/docs/Web/API/IDBTransaction" title="L&apos;interface IDBTransaction de l&apos;API IndexedDB fournit une transaction statique asynchrone vers une base de données grâce à des attributs de gestion d&apos;évènementns. Toutes les opérations de lecture et d&apos;écriture de données sont effectuées au sein de transaction. Il est possible d&apos;utiliser IDBDatabase afin d&apos;initier des transactions puis IDBTransaction afin de paramétrer le mode de la transaction (c&apos;est-à-dire s&apos;il est en lecture seule ou en lecture/écriture) et d&apos;accéder à un objet IDBObjectStore pour réaliser une requête. On peut également utiliser IDBTransaction pour interrompre une requête."><code>transaction</code></a> sur laquelle on peut appeler la méthode <a href="/fr/docs/Web/API/IDBTransaction/objectStore" title="La méthode objectStore(), rattachée à l&apos;interface IDBTransaction, renvoie l&apos;accès à un des magasins d&apos;objets liés à la transation sous la forme d&apos;un objet IDBObjectStore."><code>IDBTransaction.objectStore</code></a> pour accéder aux magasins d&apos;objets de la base de donnée.</p>
</div>

<p></p><div class="note notecard"><strong>Note :</strong> Cette fonctionnalité est disponible via les <a href="/fr/docs/Web/API/Web_Workers_API">Web Workers</a>.</div><p></p>

<h2 id="Syntaxe">Syntaxe</h2>

<pre class="brush: js">var transaction = db.transaction(storeNames, mode);</pre>

<h2 id="Paramètres">Paramètres</h2>

<dl>
 <dt>storeNames</dt>
 <dd>un tableau de noms de magasins d&apos;objets entrant dans le cadre de cette transaction. Indique seulement les magasins d&apos;objets dont on a besoin.<br>
 Si l’on n’a besoin que d’un seul magasin d&apos;objet, on peut simplement passer son nom. Les lignes suivantes sont équivalentes :
 <pre class="brush: js">var transaction = db.transaction([&apos;my-store-name&apos;]);
var transaction = db.transaction(&apos;my-store-name&apos;);</pre>
 Pour utiliser tous les magasins d&apos;objets de la base de donnée, on peut appeler la methode <a href="/fr/docs/Web/API/IDBDatabase/objectStoreNames" title="La propriété objectStoreNames, rattachée à l&apos;interface IDBDatabase, est une liste de chaînes de caractères  (DOMStringList) qui sont les noms des magasins d&apos;objets (IDBObjectStore) connectés à la base de données."><code>IDBDatabase.objectStoreNames</code></a>:

 <pre class="brush:js;">var transaction = db.transaction(db.objectStoreNames);</pre>
 Passer un tableau vide lèvera une exception.</dd>
 <dt>mode <span class="optional optionalInline notecard inline">Facultatif</span></dt>
 <dd>
 <p>Le <a href="/fr/docs/Web/API/IDBTransactionMode" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>mode</code></a> d’<a href="/fr/docs/Web/API/IDBObjectStore" title="L&apos;interface IDBObjectStore de l&apos;API IndexedDB est un accès aux magasins d&apos;objet de la base de données."><code>accès aux magasins d&apos;objets</code></a> à la base de données (par default <code>readonly</code>):</p>

 <table class="standard-table">
  <thead>
   <tr>
    <th scope="col">Valeur</th>
    <th scope="col">Explication</th>
   </tr>
  </thead>
  <tbody>
   <tr>
    <td id="readonly"><code>readonly</code></td>
    <td>permet de prendre des objets dans les magasins d&apos;objets, de lire les index et de faire des curseurs.</td>
   </tr>
   <tr>
    <td id="readwrite"><code>readwrite</code></td>
    <td>Permet en plus de que l&apos;on peut faire en readonly, d’ajouter et mettre à jour des objets dans les magasins d&apos;objets.</td>
   </tr>
   <tr id="versionchange">
    <td><code>versionchange</code></td>
    <td>Permet toute les opérations, y compris celles qui suppriment ou ajoutent des <a href="/fr/docs/Web/API/IDBOjectStore"><code>magasins d&apos;objets</code></a> ou des <a href="/fr/docs/Web/API/IDBIndex"><code>index</code></a>. Ce mode met à jour le numéro de version de la base de données, il se sert au début de <a href="/fr/docs/Web/API/IDBDatabase/setVersion"><code>IDBDatabase.setVersion</code></a>. Les <a href="/fr/docs/Web/API/IDBTransaction"><code>transactions</code></a> dans ce mode ne peuvent pas fonctionner en même temps que d&apos;autres.</td>
   </tr>
   <tr>
    <td id="readwriteflush "><code>readwriteflush</code></td>
    <td>
     <p>Si vous devez vous assurer de l&apos;efficacité d&apos;une transaction pour une raison quelconque (par exemple, vous stockez des données critiques qui ne peuvent être recalculées plus tard), vous pouvez forcer l’enregistrement complet sur disque avant de déclencher l’événement <code>complete</code> en utilisant le mode <code>readwriteflush</code> (non standard) expérimental ( voir <a href="/fr/docs/Web/API/IDBDatabase/transaction"><code>IDBDatabase.transaction</code></a> ). C&apos;est expérimental, et ne peut être utilisé que si le <code> dom.indexedDB.experimental </code> pref est réglé sur <code> true </code> dans <code> about:config.</code></p>

     <p class="note">Depuis Firefox 40, les transactions IndexedDB diminuent en efficacité pour gagner en efficience (voir <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1112702">bug 1112702</a>.) Auparavant, dans une transaction en <code><a href="#const_read_write">readwrite</a></code> l&apos;événement complete était déclanché seulement lorsque toutes les données étaient écrites sur le disque. Maintenant l&apos;événement <code>complete</code> est déclenché après que l&apos;OS ai envoyé l&apos;ordre d&apos;écrire les données, mais potentiellement avant qu&apos;elles aient été écrites sur le disque. L&apos;événement <code>complete</code> peut ainsi se déclancher plus rapidement qu&apos;auparavant, cependant, il existe une chance infime pour que l&apos;ensemble de la transaction soit perdue si le système d&apos;exploitation plante ou s&apos;il y a une perte de courant avant que les données aient été écites sur le disque. Étant donné que ces événements catastrophiques sont rares la plupart des utilisateurs ne devraient pas avoir à s&apos;en préoccuper davantage.</p>
    </td>
   </tr>
  </tbody>
 </table>
 <div class="note notecard"><strong>Note :</strong> Pour éviter des pertes de performance, n’utilisez le mode <code>readwrite</code> que si vous avez effectivement besoin d’écrire ou de mettre à jour des données sur la base.</div> Si on a besoin d’accéder à un magasin d&apos;objets pour écrire ou mettre à jour des enregistrement, on utilise la sytaxe:

 <pre class="brush:js">var transaction = db.transaction(&apos;monMagasin&apos;,&apos;readwrite&apos;);</pre>
 </dd>
 <dd> </dd>
</dl>

<h2 id="Renvoie">Renvoie</h2>

<p>Une <a href="/fr/docs/Web/API/IDBTransaction" title="L&apos;interface IDBTransaction de l&apos;API IndexedDB fournit une transaction statique asynchrone vers une base de données grâce à des attributs de gestion d&apos;évènementns. Toutes les opérations de lecture et d&apos;écriture de données sont effectuées au sein de transaction. Il est possible d&apos;utiliser IDBDatabase afin d&apos;initier des transactions puis IDBTransaction afin de paramétrer le mode de la transaction (c&apos;est-à-dire s&apos;il est en lecture seule ou en lecture/écriture) et d&apos;accéder à un objet IDBObjectStore pour réaliser une requête. On peut également utiliser IDBTransaction pour interrompre une requête."><code>transaction</code></a>.</p>

<h2 id="Exceptions">Exceptions</h2>

<dl>
 <dt><code>InvalidStateError</code></dt>
 <dd>Cette <a href="/fr/docs/Web/API/DOMException" title="L&apos;interface DOMException représente un évènement anormal (appelé exception) qui appraît suite à l&apos;appel d&apos;une méthode ou à l&apos;accès à une propriété d&apos;une API web. C&apos;est essentiellement lié à la façon dont les conditions d&apos;erreur sont décrites dans les API web."><code>exception</code></a> est levée si la méthode <code>close()</code> a été appelée sur cette connexion à la base de donnée.</dd>
 <dt><code>NotFoundError</code></dt>
 <dd>Cette <a href="/fr/docs/Web/API/DOMException" title="L&apos;interface DOMException représente un évènement anormal (appelé exception) qui appraît suite à l&apos;appel d&apos;une méthode ou à l&apos;accès à une propriété d&apos;une API web. C&apos;est essentiellement lié à la façon dont les conditions d&apos;erreur sont décrites dans les API web."><code>exception</code></a> est levée si un magasin d&apos;objets indiqué dans le paramètre <code>storeNames</code> n&apos;existe pas ou plus.</dd>
 <dt><code>TypeError</code></dt>
 <dd>Cette <a href="/fr/docs/Web/API/DOMException" title="L&apos;interface DOMException représente un évènement anormal (appelé exception) qui appraît suite à l&apos;appel d&apos;une méthode ou à l&apos;accès à une propriété d&apos;une API web. C&apos;est essentiellement lié à la façon dont les conditions d&apos;erreur sont décrites dans les API web."><code>exception</code></a> est levée si la valeur du paramètre <code>mode</code> n&apos;est pas valide.</dd>
 <dt><code>InvalidAccessError</code></dt>
 <dd>Cette <a href="/fr/docs/Web/API/DOMException" title="L&apos;interface DOMException représente un évènement anormal (appelé exception) qui appraît suite à l&apos;appel d&apos;une méthode ou à l&apos;accès à une propriété d&apos;une API web. C&apos;est essentiellement lié à la façon dont les conditions d&apos;erreur sont décrites dans les API web."><code>exception</code></a> est levée si la liste passée à <code>storeNames</code> est vide</dd>
</dl>

<h2 id="Exemple">Exemple</h2>

<p>Dans cet exemple, on ouvre simplement une connexion à la base de donnée puis une transaction sur cette connexion.</p>

<pre class="brush: js">var db;

// Connexion à la base de donnée
var DBOpenRequest = window.indexedDB.open(&quot;toDoList&quot;, 4);

DBOpenRequest.onsuccess = function(event) {
  note.innerHTML += &apos;&lt;li&gt;Base de donnée initialisée.&lt;/li&gt;&apos;;

  // affecte la connexion à la variable db
  db = DBOpenRequest.result;

  // exécute la fonction displayData() qui affiche la liste des taches présentes dans la base de donnée
  displayData();

};

// ouvre une transaction en lecture/écriture prête pour l&apos;ajout d&apos;enregistrement.
var transaction = db.transaction([&quot;toDoList&quot;], &quot;readwrite&quot;);

// affiche le succès de l&apos;ouverture de la transaction
transaction.oncomplete = function(event) {
  note.innerHTML += &apos;&lt;li&gt;Fin de transaction: les modifications sur la base de donnée sont terminées.&lt;/li&gt;&apos;;
};

transaction.onerror = function(event) {
  note.innerHTML += &apos;&lt;li&gt;La transaction n&apos;a pas pu être initiée.&lt;/li&gt;&apos;;
};

// On peut maintenant accéder au magasin d&apos;objet
var objectStore = transaction.objectStore(&quot;toDoList&quot;);
// etc.</pre>

<p class="note">Pour un exemple de travail complet, voir notre <a href="https://github.com/mdn/to-do-notifications/">To-do Notifications</a> app (<a href="http://mdn.github.io/to-do-notifications/">view example live</a>).</p>

<h2 id="Spécification">Spécification</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Spécification</th>
   <th scope="col">Statut</th>
   <th scope="col">Commentaire</th>
  </tr>
  <tr>
   <td><a lang="en" href="https://www.w3.org/TR/IndexedDB/#widl-IDBDatabase-transaction-IDBTransaction-DOMString-sequence-DOMString--storeNames-IDBTransactionMode-mode" class="external" hreflang="en">Indexed Database API<br><small lang="fr">La définition de &apos;transaction()&apos; dans cette spécification.</small></a></td>
   <td><span class="spec-REC">Recommendation</span></td>
   <td> </td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility" name="Browser_compatibility">Compatibilité avec les navigateurs</h2>

<div><div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">Nous convertissons les données de compatibilité dans un format JSON</a></strong>.
            Ce tableau de compatibilité utilise encore l&apos;ancien format
            car nous n&apos;avons pas encore converti les données qu&apos;il contient.
            <strong><a href="/fr/docs/MDN/Contribute/Structures/Compatibility_tables">Vous pouvez nous aider en contribuant !</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Ordinateur</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div></div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Fonctionnalité</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>Support basique</td>
   <td>23<span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/fr/docs/Web/Guide/Prefixes">webkit</a></span><br>
    24</td>
   <td>10 <span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/fr/docs/Web/Guide/Prefixes">moz</a></span><br>
    <a href="/en-US/Firefox/Releases/16">16.0</a> (16.0)</td>
   <td>10, en partie</td>
   <td>15</td>
   <td>7.1</td>
  </tr>
  <tr>
   <td>Disponible dans workers</td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td>37.0 (37.0)</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Fonctionnalité</th>
   <th>Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS</th>
   <th>IE Phone</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Support basique</td>
   <td>4.4</td>
   <td>22.0 (22.0)</td>
   <td>1.0.1</td>
   <td>10</td>
   <td>22</td>
   <td>8</td>
  </tr>
  <tr>
   <td>Disponible dans workers</td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td>37.0 (37.0)</td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
  </tr>
 </tbody>
</table>
</div>

<h2 id="Voir_aussi">Voir aussi</h2>

<ul>
 <li><a href="/fr/docs/Web/API/IndexedDB_API/Using_IndexedDB"><code>Utiliser IndexedDB</code></a></li>
 <li><a href="/fr/docs/Web/API/IDBDatabase"><code>Débuter une connexion</code></a></li>
 <li><a href="/fr/docs/Web/API/IDBTransaction"><code>Utilisé les transactions</code></a></li>
 <li><a href="/fr/docs/Web/API/IDBKeyRange"><code>Définir l&apos;intervalle des clés</code></a></li>
 <li><a href="/fr/docs/Web/API/IDBObjectStore"><code>Accès aux magasins d&apos;objets</code></a></li>
 <li><a href="/fr/docs/Web/API/IDBCursor"><code>Utiliser les curseur</code></a></li>
 <li>Exemple de référence: <a href="https://github.com/mdn/to-do-notifications/tree/gh-pages" class="external">To-do Notifications</a> (<a href="http://mdn.github.io/to-do-notifications/" class="external">view example live</a>.)</li>
</ul>
