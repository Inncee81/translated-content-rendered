---
title: ShadowRoot
slug: Web/API/ShadowRoot
tags:
  - API
  - Interface
  - Reference
  - ShadowRoot
  - Web Components
translation_of: Web/API/ShadowRoot
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/fr/docs/Web/API/ShadowRoot"><code>ShadowRoot</code></a></strong></li><li class="toggle"><details open><summary>Propriétés</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="Cette API n&apos;a pas été standardisée."><i class="icon-warning-sign"> </i></span></span><a href="/fr/docs/Web/API/ShadowRoot/delegatesFocus"><code>delegatesFocus</code></a></li><li><a href="/fr/docs/Web/API/ShadowRoot/host"><code>host</code></a></li><li><a href="/fr/docs/Web/API/ShadowRoot/innerHTML"><code>innerHTML</code></a></li><li><a href="/fr/docs/Web/API/ShadowRoot/mode"><code>mode</code></a></li></ol></details></li><li class="toggle"><details open><summary>Héritage :</summary><ol><li><a href="/fr/docs/Web/API/DocumentFragment"><code>DocumentFragment</code></a></li><li><a href="/fr/docs/Web/API/Node"><code>Node</code></a></li><li><a href="/fr/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li></ol></section></div>

<p>L&apos;interface <code><strong>ShadowRoot</strong></code>, relative à l&apos;API <em>Shadow DOM</em>, représente la racine d&apos;un sous-arbre du DOM dont le rendu est effectué séparément de celui du DOM de l&apos;arbre principal.</p>

<p>Il est possible de récupérer une référence à la racine <em>shadow</em> d&apos;un élément via la propriété <a href="/fr/docs/Web/API/Element/shadowRoot"><code>Element.shadowRoot</code></a> si la racine a été créée avec la méthode <a href="/fr/docs/Web/API/Element/attachShadow"><code>Element.attachShadow()</code></a> et l&apos;option <code>mode</code> qui valait <code>open</code>.</p>

<h2 id="Propriétés">Propriétés</h2>

<dl>
 <dt><a href="/fr/docs/Web/API/ShadowRoot/delegatesFocus"><code>ShadowRoot.delegatesFocus</code></a> <span class="readOnly readOnlyInline notecard inline" title="Cette valeur ne peut pas être changée.">Lecture seule </span> <span class="icon-only-inline" title="Cette API n&apos;a pas été standardisée."><i class="icon-warning-sign"> </i></span></dt>
 <dd>Cette propriété renvoie un booléen qui indique si l&apos;option <code>delegatesFocus</code> a été activée lors de la liaison avec la racine <em>shadow</em> (cf. <a href="/fr/docs/Web/API/Element/attachShadow"><code>Element.attachShadow()</code></a>).</dd>
 <dt><a href="/fr/docs/Web/API/ShadowRoot/host"><code>ShadowRoot.host</code></a> <span class="readOnly readOnlyInline notecard inline" title="Cette valeur ne peut pas être changée.">Lecture seule </span></dt>
 <dd>Cette propriété renvoie une référence à l&apos;élément DOM auquel la racine <code>ShadowRoot</code> est attachée.</dd>
 <dt><a href="/fr/docs/Web/API/ShadowRoot/innerHTML"><code>ShadowRoot.innerHTML</code></a> <span class="icon-only-inline" title="Cette API n&apos;a pas été standardisée."><i class="icon-warning-sign"> </i></span></dt>
 <dd>Cette propriété permet de définir ou de récupérer le sous-arbre DOM contenu à l&apos;intérieur de la racine <code>ShadowRoot</code>.</dd>
 <dt><a href="/fr/docs/Web/API/ShadowRoot/mode"><code>ShadowRoot.mode</code></a> <span class="readOnly readOnlyInline notecard inline" title="Cette valeur ne peut pas être changée.">Lecture seule </span></dt>
 <dd>Cette propriété renvoie le mode utilisé pour la racine <code>ShadowRoot</code> : <code>open</code> ou <code>closed</code>. Cette valeur indique si les fonctionnalités internes à la racine sont accessibles depuis JavaScript.</dd>
</dl>

<h3 id="Propriétés_incluses_via_DocumentOrShadowRoot">Propriétés incluses via <code>DocumentOrShadowRoot</code></h3>

<p><em>L&apos;interface <code>ShadowRoot</code> inclut les propriétés suivantes grâce au </em>mixin<em> <a href="/fr/docs/Web/API/DocumentOrShadowRoot"><code>DocumentOrShadowRoot</code></a>. Attention, ceci n&apos;est actuellement (11/2019) implémenté qu&apos;avec Chrome et les autres navigateurs continuent d&apos;implémenter l&apos;interface <a href="/fr/docs/Web/API/Document"><code>Document</code></a>.</em></p>

<dl>
 <dt><a href="/fr/docs/Web/API/DocumentOrShadowRoot/activeElement"><code>DocumentOrShadowRoot.activeElement</code></a> <span class="readOnly readOnlyInline notecard inline" title="Cette valeur ne peut pas être changée.">Lecture seule </span></dt>
 <dd>L&apos;élément (<a href="/fr/docs/Web/API/Element"><code>Element</code></a>) au sein du sous-arbre <em>shadow</em> qui a le focus.</dd>
 <dt><a href="/fr/docs/Web/API/DocumentOrShadowRoot/styleSheets"><code>DocumentOrShadowRoot.styleSheets</code></a> <span class="readOnly readOnlyInline notecard inline" title="Cette valeur ne peut pas être changée.">Lecture seule </span></dt>
 <dd>Une liste <a href="/fr/docs/Web/API/StyleSheetList"><code>StyleSheetList</code></a> d&apos;objets <a href="/fr/docs/Web/API/CSSStyleSheet"><code>CSSStyleSheet</code></a> qui référencent les feuilles de styles liées explicitement ou embarquées dans le document.</dd>
</dl>

<h2 id="Méthodes">Méthodes</h2>

<p><em>L&apos;interface <code>ShadowRoot</code> inclut les méthodes suivantes qui proviennent du </em>mixin<em> <a href="/fr/docs/Web/API/DocumentOrShadowRoot"><code>DocumentOrShadowRoot</code></a>. Attention, ceci n&apos;est actuellement (11/2019) implémenté qu&apos;avec Chrome et les autres navigateurs continuent d&apos;implémenter l&apos;interface <a href="/fr/docs/Web/API/Document"><code>Document</code></a>.</em></p>

<dl>
 <dt><a href="/fr/docs/Web/API/DocumentOrShadowRoot/getSelection"><code>DocumentOrShadowRoot.getSelection()</code></a></dt>
 <dd>Cette méthode renvoie un objet <a href="/fr/docs/Web/API/Selection"><code>Selection</code></a> représentant le fragment de texte sélectionné par l&apos;utilisateur ou la position courante du curseur.</dd>
 <dt><a href="/fr/docs/Web/API/DocumentOrShadowRoot/elementFromPoint"><code>DocumentOrShadowRoot.elementFromPoint()</code></a></dt>
 <dd>Cette méthode renvoie l&apos;élément le plus haut situé aux coordonnées passées en arguments.</dd>
 <dt><a href="/fr/docs/Web/API/DocumentOrShadowRoot/elementsFromPoint"><code>DocumentOrShadowRoot.elementsFromPoint()</code></a></dt>
 <dd>Cette méthode renvoie un tableau de tous les éléments situés aux coordonnées passées en arguments.</dd>
 <dt><a href="/fr/docs/Web/API/DocumentOrShadowRoot/caretPositionFromPoint"><code>DocumentOrShadowRoot.caretPositionFromPoint()</code></a></dt>
 <dd>Cette méthode renvoie un objet <a href="/fr/docs/Web/API/CaretPosition"><code>CaretPosition</code></a> contenant le nœud DOM sur lequel est le curseur ainsi que la position du curseur sur ce nœud.</dd>
</dl>

<h2 id="Exemples">Exemples</h2>

<p>Les fragments de code suivants sont extraits de l&apos;exemple <a href="https://github.com/mdn/web-components-examples/tree/master/life-cycle-callbacks">life-cycle-callbacks</a> (<a href="https://mdn.github.io/web-components-examples/life-cycle-callbacks">voir le résultat en <em>live</em></a>) qui crée un élément affichant un carré avec une taille et une couleur fournies par les attributs de l&apos;élément.</p>

<p>Dans la définition de la classe pour l&apos;élément <code>&lt;custom-square&gt;</code>, on ajoute certains <em>callbacks</em> permettant de gérer le cycle de vie de l&apos;élément avec un appel à une fonction externe <code>updateStyle()</code> qui applique la taille et la couleur à l&apos;élément. On lui passe l&apos;argument <code>this</code> (c&apos;est-à-dire l&apos;élément lui-même).</p>

<pre class="brush: js notranslate">connectedCallback() {
  console.log(&quot;Le carré personnalisé a été ajouté à la page.&quot;);
  updateStyle(this);
}

attributeChangedCallback(nom, ancienneValeur, nouvelleValeur) {
  console.log(&quot;Les attributs du carré ont changé.&quot;);
  updateStyle(this);
}</pre>

<p>Quant à la fonction <code>updateStyle()</code>, voyons ici son fonctionnement. On récupère une référence au <em>shadow DOM</em> avec <a href="/fr/docs/Web/API/Element/shadowRoot"><code>Element.shadowRoot</code></a>. Ensuite, on utilise un parcours pour le sous-arbre afin de trouver l&apos;élément <a href="/fr/docs/Web/HTML/Element/style" title="L&apos;élément HTML &lt;style&gt; contient des informations de mise en forme pour un document ou une partie d&apos;un document. Par défaut, les instructions de mise en forme écrites dans cet élément sont écrites en CSS."><code>&lt;style&gt;</code></a> présent dans le <em>shadow DOM</em> et on met à jour le CSS pour cet élément :</p>

<pre class="brush: js notranslate">function updateStyle(elem) {
  var shadow = elem.shadowRoot;
  var childNodes = shadow.childNodes;
  for(var i = 0; i &lt; childNodes.length; i++) {
    if(childNodes[i].nodeName === &apos;STYLE&apos;) {
      childNodes[i].textContent =
        &apos;div {&apos; +
          &apos;width: &apos; + elem.getAttribute(&apos;l&apos;) + &apos;px;&apos; +
          &apos;height: &apos; + elem.getAttribute(&apos;l&apos;) + &apos;px;&apos; +
          &apos;background-color: &apos; + elem.getAttribute(&apos;c&apos;) + &apos;;&apos; +
        &apos;}&apos;;
    }
  }
}</pre>

<h2 id="Spécifications">Spécifications</h2>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">Spécification</th>
   <th scope="col">État</th>
   <th scope="col">Commentaires</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><a class="external" href="https://dom.spec.whatwg.org/#interface-shadowroot" hreflang="en" lang="en">DOM<br><small lang="fr">La définition de &apos;Interface ShadowRoot&apos; dans cette spécification.</small></a></td>
   <td><span class="spec-Living">Standard évolutif</span></td>
   <td></td>
  </tr>
 </tbody>
</table>

<h2 id="Compatibilité_des_navigateurs">Compatibilité des navigateurs</h2>

<div class="hidden">Le tableau de compatibilité de cette page a été généré à partir de données structurées. Si vous souhaitez contribuer à ces données, n&apos;hésitez pas à consulter <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> et à nous envoyer une <em>pull request</em>.</div>

<div class="bc-data" id="bcd:api.ShadowRoot"></div>
