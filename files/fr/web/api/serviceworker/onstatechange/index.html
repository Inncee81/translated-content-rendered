---
title: ServiceWorker.onstatechange
slug: Web/API/ServiceWorker/onstatechange
tags:
  - API
  - Propriété
  - Reference
translation_of: Web/API/ServiceWorker/onstatechange
---
<div><div class="experimental indicator-warning notecard">
    <p><span title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span> <strong>Cette fonction est expérimentale</strong><br>Puisque cette fonction est toujours en développement dans certains navigateurs, veuillez consulter le <a href="#Compatibilité_des_navigateurs">tableau de compatibilité</a> pour les préfixes à utiliser selon les navigateurs.<br>Il convient de noter qu&apos;une fonctionnalité expérimentale peut voir sa syntaxe ou son comportement modifié dans le futur en fonction des évolutions de la spécification.</p>
</div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/fr/docs/Web/API/Service_Worker_API">Service Worker API</a></strong></li><li><strong><a href="/fr/docs/Web/API/ServiceWorker"><code>ServiceWorker</code></a></strong></li><li class="toggle"><details open><summary>Propriétés</summary><ol><li><a href="/fr/docs/Web/API/AbstractWorker/onerror"><code>onerror</code></a></li><li><em><code>onstatechange</code></em></li><li><a href="/fr/docs/Web/API/ServiceWorker/scriptURL"><code>scriptURL</code></a> <a style="opacity: 0.5;" href="/fr/docs/Web/API/ServiceWorker/scriptURL$translate">[Traduire]</a></li><li><a href="/fr/docs/Web/API/ServiceWorker/state"><code>state</code></a> <a style="opacity: 0.5;" href="/fr/docs/Web/API/ServiceWorker/state$translate">[Traduire]</a></li></ol></details></li><li class="toggle"><details open><summary>Héritage :</summary><ol><li><a href="/fr/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li><li class="toggle"><details open><summary>Événements</summary><ol><li><a href="/fr/docs/Web/Events/statechange"><code>statechange</code></a></li><li><a href="/fr/docs/Web/Events/updatefound"><code>updatefound</code></a></li><li><a href="/fr/docs/Web/Events/controllerchange"><code>controllerchange</code></a></li><li><a href="/fr/docs/Web/Events/error"><code>error</code></a></li><li><a href="/fr/docs/Web/Events/message"><code>message</code></a></li><li><a href="/fr/docs/Web/Events/install"><code>install</code></a></li><li><a href="/fr/docs/Web/Events/activate"><code>activate</code></a></li><li><a href="/fr/docs/Web/Events/fetch"><code>fetch</code></a></li></ol></details></li><li class="toggle"><details open><summary>Pages liées à Service Workers API</summary><ol><li><a href="/fr/docs/Web/API/Cache"><code>Cache</code></a></li><li><a href="/fr/docs/Web/API/CacheStorage"><code>CacheStorage</code></a></li><li><a href="/fr/docs/Web/API/Client"><code>Client</code></a></li><li><a href="/fr/docs/Web/API/Clients"><code>Clients</code></a></li><li><a href="/fr/docs/Web/API/ExtendableEvent"><code>ExtendableEvent</code></a></li><li><a href="/fr/docs/Web/API/FetchEvent"><code>FetchEvent</code></a></li><li><a href="/fr/docs/Web/API/InstallEvent"><code>InstallEvent</code></a></li><li><a href="/fr/docs/Web/API/Navigator/serviceWorker"><code>Navigator.serviceWorker</code></a></li><li><a href="/fr/docs/Web/API/NotificationEvent"><code>NotificationEvent</code></a></li><li><a href="/fr/docs/Web/API/PeriodicSyncEvent"><code>PeriodicSyncEvent</code></a></li><li><a href="/fr/docs/Web/API/PeriodicSyncManager"><code>PeriodicSyncManager</code></a></li><li><a href="/fr/docs/Web/API/PeriodicSyncRegistration"><code>PeriodicSyncRegistration</code></a></li><li><a href="/fr/docs/Web/API/ServiceWorkerContainer"><code>ServiceWorkerContainer</code></a></li><li><a href="/fr/docs/Web/API/ServiceWorkerGlobalScope"><code>ServiceWorkerGlobalScope</code></a></li><li><a href="/fr/docs/Web/API/ServiceWorkerRegistration"><code>ServiceWorkerRegistration</code></a></li><li><a href="/fr/docs/Web/API/SyncEvent"><code>SyncEvent</code></a></li><li><a href="/fr/docs/Web/API/SyncManager"><code>SyncManager</code></a></li><li><a href="/fr/docs/Web/API/SyncRegistration"><code>SyncRegistration</code></a></li><li><a href="/fr/docs/Web/API/WindowClient"><code>WindowClient</code></a></li></ol></details></li></ol></section></div>

<p>Une propriété <a href="/fr/docs/Web/API/EventListener" title="L&apos;interface EventListener représente un objet qui peut gérer un évènement distribué par un objet EventTarget."><code>EventListener</code></a> appelée quand un évenement de type <code>statechange</code> est déclenché; c&apos;est le cas dès que le <a href="/fr/docs/Web/API/ServiceWorker/state" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>ServiceWorker.state</code></a> change.</p>

<h2 id="Syntax">Syntax</h2>

<pre class="syntaxbox">ServiceWorker.onstatechange = function(statechangeevent) { ... }
ServiceWorker.addEventListener(&apos;statechange&apos;, function(statechangeevent) { ... } )</pre>

<h2 id="Examples">Examples</h2>

<p>Ce fragment de code présente <a href="https://github.com/GoogleChrome/samples/blob/gh-pages/service-worker/registration-events/index.html">un exemple d&apos;enregistrement d&apos;évenements pour le service worker</a> (<a href="https://googlechrome.github.io/samples/service-worker/registration-events/">démo live</a>). Le code écoute pour tout changement du <a href="/fr/docs/Web/API/ServiceWorker/state" title="Cette documentation n&apos;a pas encore été rédigée, vous pouvez aider en contribuant !"><code>ServiceWorker.state</code></a> et retourne sa valeur.</p>

<pre class="brush: js">var serviceWorker;
if (registration.installing) {
  serviceWorker = registration.installing;
  document.querySelector(&apos;#kind&apos;).textContent = &apos;installé&apos;;
} else if (registration.waiting) {
  serviceWorker = registration.waiting;
  document.querySelector(&apos;#kind&apos;).textContent = &apos;en attente&apos;;
} else if (registration.active) {
  serviceWorker = registration.active;
  document.querySelector(&apos;#kind&apos;).textContent = &apos;actif&apos;;
}

if (serviceWorker) {
  logState(serviceWorker.state);
  serviceWorker.addEventListener(&apos;statechange&apos;, function(e) {
  logState(e.target.state);
  });
}</pre>

<p>Notez que quand l&apos;évenement <code>statechange</code> est déclenché, la référence du service worker peut avoir changée. Par exemple :</p>

<pre class="brush: js">navigator.serviceWorker.register(..).then(function(swr) {
  swr.installing.state == &quot;installé&quot;
  swr.installing.onstatechange = function() {
    swr.installing == null;
    // Ici, swr.waiting OU swr.active peuvent valoir true. Parce que l&apos;évènement
    // statechange est mis en queue, pendant que le worker sous jacent est peut être en
    // état d&apos;attente et sera immédiatement activé si possible.
  }
})</pre>

<h2 id="Specifications">Specifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Spécification</th>
   <th scope="col">État</th>
   <th scope="col">Commentaire</th>
  </tr>
  <tr>
   <td><a lang="en" href="https://w3c.github.io/ServiceWorker/#service-worker-onstatechange-attribute" class="external" hreflang="en">Service Workers<br><small lang="fr">La définition de &apos;ServiceWorker.onstatechange&apos; dans cette spécification.</small></a></td>
   <td><span class="spec-WD">Version de travail</span></td>
   <td>Définition intiale</td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<div><div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">Nous convertissons les données de compatibilité dans un format JSON</a></strong>.
            Ce tableau de compatibilité utilise encore l&apos;ancien format
            car nous n&apos;avons pas encore converti les données qu&apos;il contient.
            <strong><a href="/fr/docs/MDN/Contribute/Structures/Compatibility_tables">Vous pouvez nous aider en contribuant !</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Ordinateur</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div></div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Fonctionnalité</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>Support Basic</td>
   <td>40.0</td>
   <td><a href="/en-US/Firefox/Releases/44" title="Sorti le 2016-01-26.">44.0</a> (44.0)</td>
   <td><span style="color: #f00;">Pas de support</span></td>
   <td>24</td>
   <td><span style="color: #f00;">Pas de support</span></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Fonctionnalité</th>
   <th>Android</th>
   <th>Android Webview</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
   <th>Chrome for Android</th>
  </tr>
  <tr>
   <td>Support basic</td>
   <td><span style="color: #f00;">Pas de support</span></td>
   <td><span style="color: #f00;">Pas de support</span></td>
   <td>44.0 (44.0)</td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span></td>
   <td><span style="color: #f00;">Pas de support</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #f00;">Pas de support</span></td>
   <td>40.0</td>
  </tr>
 </tbody>
</table>
</div>
