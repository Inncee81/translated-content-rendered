---
title: Client.postMessage()
slug: Web/API/Client/postMessage
tags:
  - API
  - Client
  - Méthode
  - Reference
  - Service Worker
  - ServiceWorker
  - postMessage
translation_of: Web/API/Client/postMessage
---
<p></p><div class="experimental indicator-warning notecard">
    <p><span title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span> <strong>Cette fonction est expérimentale</strong><br>Puisque cette fonction est toujours en développement dans certains navigateurs, veuillez consulter le <a href="#Compatibilité_des_navigateurs">tableau de compatibilité</a> pour les préfixes à utiliser selon les navigateurs.<br>Il convient de noter qu&apos;une fonctionnalité expérimentale peut voir sa syntaxe ou son comportement modifié dans le futur en fonction des évolutions de la spécification.</p>
</div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/fr/docs/Web/API/Client"><code>Client</code></a></strong></li><li class="toggle"><details open><summary>Propriétés</summary><ol><li><span class="sidebar-icon"><span title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/fr/docs/Web/API/Client/frameType"><code>frameType</code></a></li><li><span class="sidebar-icon"><span title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/fr/docs/Web/API/Client/id"><code>id</code></a></li><li><a href="/fr/docs/Web/API/Client/type"><code>type</code></a> <a style="opacity: 0.5;" href="/fr/docs/Web/API/Client/type$translate">[Traduire]</a></li><li><span class="sidebar-icon"><span title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/fr/docs/Web/API/Client/url"><code>url</code></a></li></ol></details></li><li class="toggle"><details open><summary>Méthodes</summary><ol><li><span class="sidebar-icon"><span title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><em><code>postMessage()</code></em></li></ol></details></li></ol></section><p></p>

<p>La méthode <code><strong>postMessage() </strong></code>de l&apos;interface <a href="/fr/docs/Web/API/Client" title="L&apos;interface Client de l&apos;API ServiceWorker réprésente la portée d&apos;un client service worker. Un client est soit un document dans un contexte de navigation ou un SharedWorker, controllé par un worker actif. Un objet client agit comme une capture instantannée de la représentation de son client service worker associé dans la porté de ce service worker."><code>Client</code></a> permet à un service worker client d&apos;envoyer un message à un <a href="/fr/docs/Web/API/ServiceWorker" title="L&apos;interface ServiceWorker hérite des propriétés de son parent, le Worker."><code>ServiceWorker</code></a>.</p>

<h2 id="Syntaxe">Syntaxe</h2>

<pre class="brush: js">Client.postMessage(message[, transfer]);</pre>

<h3 id="Valeur_de_retour">Valeur de retour</h3>

<p>Void.</p>

<h3 id="Paramètres">Paramètres</h3>

<dl>
 <dt><code>message</code></dt>
 <dd>Le message à envoyer au service worker.</dd>
 <dt><code>transfer <span class="optional optionalInline notecard inline">Facultatif</span></code></dt>
 <dd>Un objet transferable, comme par exemple une référence à un port.</dd>
</dl>

<h2 id="Exemples">Exemples</h2>

<p>Ce fragment de code est tiré de l&apos;<a href="https://github.com/GoogleChrome/samples/blob/gh-pages/service-worker/post-message/index.html">exemple d&apos;envoi de message du service worker</a> exemple d&apos;envoi de message du service worker (voir <a href="https://googlechrome.github.io/samples/service-worker/post-message/">exemple en ligne</a>). Le code envoi un message et transfert le port vers le service worker qui pourra répondre via <a href="/fr/docs/Web/API/Client/postMessage" title="La méthode postMessage() de l&apos;interface Client permet à un service worker client d&apos;envoyer un message à un ServiceWorker."><code>Client.postMessage()</code></a>.</p>

<p>Ce message est contenu dans une promesse qui se résolvera si la réponse ne contient pas d&apos;erreur et qui échouera avec l&apos;erreur.</p>

<pre class="brush: js">function sendMessage(message) {
  return new Promise(function(resolve, reject) {
     var messageChannel = new MessageChannel();
     messageChannel.port1.onmessage = function(event) {
       if (event.data.error) {
         reject(event.data.error);
       } else {
         resolve(event.data);
       }
     };
    navigator.serviceWorker.controller.postMessage(message, [messageChannel.port2]);
  });
}</pre>

<h2 id="Spécifications">Spécifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Spécification</th>
   <th scope="col">Statut</th>
   <th scope="col">Commentaire</th>
  </tr>
  <tr>
   <td><a lang="en" href="https://w3c.github.io/ServiceWorker/#client-postmessage-method" class="external" hreflang="en">Service Workers<br><small lang="fr">La définition de &apos;postMessage()&apos; dans cette spécification.</small></a></td>
   <td><span class="spec-WD">Version de travail</span></td>
   <td>Définition initiale</td>
  </tr>
 </tbody>
</table>

<h2 id="Compatibilité_des_navigateurs">Compatibilité des navigateurs</h2>

<div><div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">Nous convertissons les données de compatibilité dans un format JSON</a></strong>.
            Ce tableau de compatibilité utilise encore l&apos;ancien format
            car nous n&apos;avons pas encore converti les données qu&apos;il contient.
            <strong><a href="/fr/docs/MDN/Contribute/Structures/Compatibility_tables">Vous pouvez nous aider en contribuant !</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Ordinateur</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div></div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Fonctionnalité</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>Support de base</td>
   <td>45.0 [1]</td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span><br>
    <a href="/en-US/Firefox/Releases/44">44.0</a> (44.0)</td>
   <td><span style="color: #f00;">Pas de support</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #f00;">Pas de support</span></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Fonctionnalité</th>
   <th>Android</th>
   <th>Android Webview</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
   <th>Chrome for Android</th>
  </tr>
  <tr>
   <td>Support de base</td>
   <td><span style="color: #f00;">Pas de support</span></td>
   <td><span style="color: #f00;">Pas de support</span></td>
   <td><span style="color: #888;" title="Veuillez mettre à jour avec la version minimale du support">(Oui)</span><br>
    44.0 (44.0)</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #f00;">Pas de support</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #f00;">Pas de support</span></td>
   <td>45.0 [1]</td>
  </tr>
 </tbody>
</table>
</div>

<ul>
 <li>[1] Derrière un flag de Chrome 40 à 44.</li>
</ul>
