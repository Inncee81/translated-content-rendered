---
title: Images avec le contrôle d'accès HTTP
slug: Web/HTML/Images_avec_le_contrôle_d_accès_HTTP
tags:
  - Avancé
  - CORS
  - Canvas
  - HTML
  - Reference
translation_of: Web/HTML/CORS_enabled_image
---
<div><section class="Quick_links" id="Quick_Links">
<ol><li><a href="/fr/docs/Web/HTML/Canvas">API canvas</a></li><li><a href="/fr/docs/Web/HTML/Appliquer_des_couleurs">Appliquer des couleurs sur des éléments HTML grâce à CSS</a></li><li><a href="/fr/docs/Web/HTML/Reglages_des_attributs_CORS">Attributs de réglage du CORS</a></li><li><a href="/fr/docs/Web/HTML/Contenu_editable">Contenu éditable</a></li><li><a href="/fr/docs/Web/HTML/Formats_date_heure_HTML">Formats de date et d'heure utilisés en HTML</a></li><li><a href="/fr/docs/Web/HTML/Formats_pour_audio_video">Formats pris en charge par &lt;audio&gt; et &lt;video&gt;</a></li><li><a href="/fr/docs/Web/HTML/Images_avec_le_contr%C3%B4le_d_acc%C3%A8s_HTTP">Images avec le contrôle d'accès HTTP</a></li><li><a href="/fr/docs/Web/HTML/Index">Index de la documentation HTML</a></li><li><a href="/fr/docs/Web/HTML/Introduction_to_HTML5">Introduction à HTML5</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels">Les attributs universels</a><ol><li><a href="/fr/docs/Web/HTML/Attributs_universels">Les attributs universels</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/accesskey">accesskey</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/autocapitalize">autocapitalize</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/class">class</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/contenteditable">contenteditable</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/contextmenu">contextmenu</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/data-*">data-*</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/dir">dir</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/draggable">draggable</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/dropzone">dropzone</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/hidden">hidden</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/id">id</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/inputmode">inputmode</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/is">is</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/itemid">itemid</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/itemprop">itemprop</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/itemref">itemref</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/itemscope">itemscope</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/itemtype">itemtype</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/lang">lang</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/slot">slot</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/spellcheck">spellcheck</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/style">style</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/tabindex">tabindex</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/title">title</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/translate">translate</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/x-ms-acceleratorkey">x-ms-acceleratorkey</a></li><li><a href="/fr/docs/Web/HTML/Attributs_universels/x-ms-format-detection">x-ms-format-detection</a></li></ol></li><li><a href="/fr/docs/Web/HTML/Attributs">Liste des attributs HTML</a><ol><li><a href="/fr/docs/Web/HTML/Attributs">Liste des attributs HTML</a></li><li><a href="/fr/docs/Web/HTML/Attributs/autocomplete">autocomplete</a></li></ol></li><li><a href="/fr/docs/Web/HTML/Microdonn%C3%A9es">Microdonnées</a></li><li><a href="/fr/docs/Web/HTML/Quirks_Mode_and_Standards_Mode">Mode quirks de Mozilla</a></li><li><a href="/fr/docs/Web/HTML/Optimizing_your_pages_for_speculative_parsing">Optimisation des pages pour l'analyse spéculative</a></li><li><a href="/fr/docs/Web/HTML/Pr%C3%A9charger_du_contenu">Précharger du contenu avec rel="preload"</a></li><li><a href="/fr/docs/Web/HTML/Reference">Référence HTML</a></li><li><a href="/fr/docs/Web/HTML/Element">Référence des éléments HTML</a><ol><li><a href="/fr/docs/Web/HTML/Element">Référence des éléments HTML</a></li><li><a href="/fr/docs/Web/HTML/Element/a">&lt;a&gt; : l'élément d'ancre</a></li><li><a href="/fr/docs/Web/HTML/Element/abbr">&lt;abbr&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/acronym">&lt;acronym&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/address">&lt;address&gt; : l'élément d'adresse de contact</a></li><li><a href="/fr/docs/Web/HTML/Element/applet">&lt;applet&gt; : l'élément d'applet Java embarqué</a></li><li><a href="/fr/docs/Web/HTML/Element/area">&lt;area&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/article">&lt;article&gt; : l'élément de contenu d'un article</a></li><li><a href="/fr/docs/Web/HTML/Element/aside">&lt;aside&gt; : l'élément Aparté</a></li><li><a href="/fr/docs/Web/HTML/Element/audio">&lt;audio&gt; : l'élément audio embarqué</a></li><li><a href="/fr/docs/Web/HTML/Element/b">&lt;b&gt; : l'élément portant à l'attention</a></li><li><a href="/fr/docs/Web/HTML/Element/base">&lt;base&gt; : l'élément pour l'URL de base du document</a></li><li><a href="/fr/docs/Web/HTML/Element/basefont">&lt;basefont&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/bdi">&lt;bdi&gt; : l'élément d'isolation bidirectionnelle</a></li><li><a href="/fr/docs/Web/HTML/Element/bdo">&lt;bdo&gt; : l'élément de surcharge bidirectionnelle</a></li><li><a href="/fr/docs/Web/HTML/Element/bgsound">&lt;bgsound&gt; : l'élément d'arrière-plan sonore (obsolète)</a></li><li><a href="/fr/docs/Web/HTML/Element/big">&lt;big&gt; : l'élément d'agrandissement de texte (obsolète)</a></li><li><a href="/fr/docs/Web/HTML/Element/blink">&lt;blink&gt; : l'élément de texte clignotant (obsolète)</a></li><li><a href="/fr/docs/Web/HTML/Element/blockquote">&lt;blockquote&gt; : l'élément de bloc de citation</a></li><li><a href="/fr/docs/Web/HTML/Element/body">&lt;body&gt; : l'élément pour le corps du document</a></li><li><a href="/fr/docs/Web/HTML/Element/br">&lt;br&gt; : l'élément de saut de ligne</a></li><li><a href="/fr/docs/Web/HTML/Element/Button">&lt;button&gt; : l'élément représentant un bouton</a></li><li><a href="/fr/docs/Web/HTML/Element/canvas">&lt;canvas&gt; : l'élément de canevas graphique</a></li><li><a href="/fr/docs/Web/HTML/Element/caption">&lt;caption&gt; : l'élément de légende d'un tableau</a></li><li><a href="/fr/docs/Web/HTML/Element/center">&lt;center&gt; : l'élément de texte centré</a></li><li><a href="/fr/docs/Web/HTML/Element/cite">&lt;cite&gt; : l'élément de citation</a></li><li><a href="/fr/docs/Web/HTML/Element/code">&lt;code&gt; : l'élément de code en incise</a></li><li><a href="/fr/docs/Web/HTML/Element/col">&lt;col&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/colgroup">&lt;colgroup&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/command">&lt;command&gt; : l'élément de commande</a></li><li><a href="/fr/docs/Web/HTML/Element/content">&lt;content&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/data">&lt;data&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/datalist">&lt;datalist&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/dd">&lt;dd&gt; : l'élément de détail d'une description</a></li><li><a href="/fr/docs/Web/HTML/Element/del">&lt;del&gt; : l'élément de texte supprimé</a></li><li><a href="/fr/docs/Web/HTML/Element/details">&lt;details&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/dfn">&lt;dfn&gt; : l'élément de définition</a></li><li><a href="/fr/docs/Web/HTML/Element/dialog">&lt;dialog&gt; : l'élément de boîte de dialogue</a></li><li><a href="/fr/docs/Web/HTML/Element/dir">&lt;dir&gt; : l'élément de répertoire (obsolète)</a></li><li><a href="/fr/docs/Web/HTML/Element/div">&lt;div&gt; : l'élément de division du contenu</a></li><li><a href="/fr/docs/Web/HTML/Element/dl">&lt;dl&gt; : l'élément de liste de descriptions</a></li><li><a href="/fr/docs/Web/HTML/Element/dt">&lt;dt&gt; : l'élément pour le terme d'une description</a></li><li><a href="/fr/docs/Web/HTML/Element/element">&lt;element&gt; : l'élément pour les éléments personnalisés (obsolète)</a></li><li><a href="/fr/docs/Web/HTML/Element/em">&lt;em&gt; : l'élément de mise en emphase</a></li><li><a href="/fr/docs/Web/HTML/Element/embed">&lt;embed&gt; : l'élément de contenu externe embarqué</a></li><li><a href="/fr/docs/Web/HTML/Element/Fieldset">&lt;fieldset&gt; : l'élément pour les ensembles de champs</a></li><li><a href="/fr/docs/Web/HTML/Element/figcaption">&lt;figcaption&gt; : l'élément de légende d'une figure</a></li><li><a href="/fr/docs/Web/HTML/Element/figure">&lt;figure&gt; : l'élément de figure</a></li><li><a href="/fr/docs/Web/HTML/Element/font">&lt;font&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/footer">&lt;footer&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/Form">&lt;form&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/frame">&lt;frame&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/frameset">&lt;frameset&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/Heading_Elements">&lt;h1&gt;-&lt;h6&gt; : les éléments de titre de section</a></li><li><a href="/fr/docs/Web/HTML/Element/head">&lt;head&gt; : l'élément de métadonnées (en-tête) du document</a></li><li><a href="/fr/docs/Web/HTML/Element/header">&lt;header&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/hgroup">&lt;hgroup&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/hr">&lt;hr&gt; : l'élément de rupture thématique (règle horizontale)</a></li><li><a href="/fr/docs/Web/HTML/Element/html">&lt;html&gt; : l'élément de racine du document HTML</a></li><li><a href="/fr/docs/Web/HTML/Element/i">&lt;i&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/iframe">&lt;iframe&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/image">&lt;image&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/Img">&lt;img&gt; : l'élément d'image embarquée</a></li><li><a href="/fr/docs/Web/HTML/Element/Input">&lt;input&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/ins">&lt;ins&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/isindex">&lt;isindex&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/kbd">&lt;kbd&gt; : l'élément de saisie clavier</a></li><li><a href="/fr/docs/Web/HTML/Element/Keygen">&lt;keygen&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/Label">&lt;label&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/Legend">&lt;legend&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/li">&lt;li&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/link">&lt;link&gt; : l'élément de lien vers des ressources externes</a></li><li><a href="/fr/docs/Web/HTML/Element/listing">&lt;listing&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/main">&lt;main&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/map">&lt;map&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/mark">&lt;mark&gt; : l'élément de marquage du texte</a></li><li><a href="/fr/docs/Web/HTML/Element/marquee">&lt;marquee&gt; : l'élément de fronton (obsolète)</a></li><li><a href="/fr/docs/Web/HTML/Element/menu">&lt;menu&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/menuitem">&lt;menuitem&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/meta">&lt;meta&gt; : l'élément de métadonnées du document</a></li><li><a href="/fr/docs/Web/HTML/Element/Meter">&lt;meter&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/multicol">&lt;multicol&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/nav">&lt;nav&gt; : l'élément de section de navigation</a></li><li><a href="/fr/docs/Web/HTML/Element/nextid">&lt;nextid&gt; : l'élément NeXT ID (Obsolète)</a></li><li><a href="/fr/docs/Web/HTML/Element/nobr">&lt;nobr&gt; : l'élément de non-rupture de texte (obsolète)</a></li><li><a href="/fr/docs/Web/HTML/Element/noembed">&lt;noembed&gt; : l'élément alternatif au contenu embarqué (obsolète)</a></li><li><a href="/fr/docs/Web/HTML/Element/noframes">&lt;noframes&gt; : l'élément alternatif aux frames (obsolete)</a></li><li><a href="/fr/docs/Web/HTML/Element/noscript">&lt;noscript&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/object">&lt;object&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/ol">&lt;ol&gt; : l'élément de liste ordonnée</a></li><li><a href="/fr/docs/Web/HTML/Element/Optgroup">&lt;optgroup&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/Option">&lt;option&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/output">&lt;output&gt; : l'élément de sortie</a></li><li><a href="/fr/docs/Web/HTML/Element/p">&lt;p&gt; : l'élément paragraphe</a></li><li><a href="/fr/docs/Web/HTML/Element/param">&lt;param&gt; : l'élément paramètre d'un objet</a></li><li><a href="/fr/docs/Web/HTML/Element/picture">&lt;picture&gt; : l'élément d'image adaptative</a></li><li><a href="/fr/docs/Web/HTML/Element/plaintext">&lt;plaintext&gt; : l'élément de texte brut (déprécié)</a></li><li><a href="/fr/docs/Web/HTML/Element/pre">&lt;pre&gt; : l'élément de texte préformaté</a></li><li><a href="/fr/docs/Web/HTML/Element/Progress">&lt;progress&gt; : l'élément d'indicateur de progression</a></li><li><a href="/fr/docs/Web/HTML/Element/q">&lt;q&gt; : l'élément de citation en incise</a></li><li><a href="/fr/docs/Web/HTML/Element/rb">&lt;rb&gt; : l'élément de base ruby</a></li><li><a href="/fr/docs/Web/HTML/Element/rp">&lt;rp&gt; : l'élément de parenthèses alternatif aux annotations Ruby</a></li><li><a href="/fr/docs/Web/HTML/Element/rt">&lt;rt&gt; : l'élément de texte Ruby</a></li><li><a href="/fr/docs/Web/HTML/Element/rtc">&lt;rtc&gt; : l'élément de conteneur de texte Ruby</a></li><li><a href="/fr/docs/Web/HTML/Element/ruby">&lt;ruby&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/s">&lt;s&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/samp">&lt;samp&gt; : l'élément d'échantillon produit</a></li><li><a href="/fr/docs/Web/HTML/Element/script">&lt;script&gt; : l'élément de script</a></li><li><a href="/fr/docs/Web/HTML/Element/section">&lt;section&gt; : l'élément de section générique</a></li><li><a href="/fr/docs/Web/HTML/Element/select">&lt;select&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/Shadow">&lt;shadow&gt; : l'élément obsolète pour la racine virtuelle</a></li><li><a href="/fr/docs/Web/HTML/Element/slot">&lt;slot&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/small">&lt;small&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/Source">&lt;source&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/spacer">&lt;spacer&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/span">&lt;span&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/strike">&lt;strike&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/strong">&lt;strong&gt; : l'élément de haute importance</a></li><li><a href="/fr/docs/Web/HTML/Element/style">&lt;style&gt; : l'élément d'information de style</a></li><li><a href="/fr/docs/Web/HTML/Element/sub">&lt;sub&gt; : l'élément de souscription</a></li><li><a href="/fr/docs/Web/HTML/Element/summary">&lt;summary&gt; : l'élément de révélation d'un résumé</a></li><li><a href="/fr/docs/Web/HTML/Element/sup">&lt;sup&gt; : l'élément de mise en exposant</a></li><li><a href="/fr/docs/Web/HTML/Element/table">&lt;table&gt; : l'élément de tableau</a></li><li><a href="/fr/docs/Web/HTML/Element/tbody">&lt;tbody&gt; : l'élément de corps d'un tableau</a></li><li><a href="/fr/docs/Web/HTML/Element/td">&lt;td&gt; : l'élément de cellule de tableau</a></li><li><a href="/fr/docs/Web/HTML/Element/template">&lt;template&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/Textarea">&lt;textarea&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/tfoot">&lt;tfoot&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/th">&lt;th&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/thead">&lt;thead&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/time">&lt;time&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/title">&lt;title&gt; : l'élément de titre du document</a></li><li><a href="/fr/docs/Web/HTML/Element/tr">&lt;tr&gt; : l'élément de ligne d'un tableau</a></li><li><a href="/fr/docs/Web/HTML/Element/track">&lt;track&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/tt">&lt;tt&gt; : l'élément de texte de téléscripteur (obsolète)</a></li><li><a href="/fr/docs/Web/HTML/Element/u">&lt;u&gt; : l'élément d'annotation non textuelle</a></li><li><a href="/fr/docs/Web/HTML/Element/ul">&lt;ul&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/var">&lt;var&gt; : l'élément de variable</a></li><li><a href="/fr/docs/Web/HTML/Element/Video">&lt;video&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/wbr">&lt;wbr&gt;</a></li><li><a href="/fr/docs/Web/HTML/Element/xmp">&lt;xmp&gt;</a></li></ol></li><li><a href="/fr/docs/Web/HTML/Sections_and_Outlines_of_an_HTML5_document">Structures et sections d'un document HTML5</a></li><li><a href="/fr/docs/Web/HTML/Types_de_lien">Types de lien</a></li><li><a href="/fr/docs/Web/HTML/Utilisation_d'audio_et_video_en_HTML5">Utilisation d'audio et video en HTML5</a></li><li><a href="/fr/docs/Web/HTML/Utiliser_Application_Cache">Utiliser Application Cache</a></li><li><a href="/fr/docs/Web/HTML/Utiliser_DASH_avec_les_vid%C3%A9os_en_HTML">Utiliser DASH avec les vidéos en HTML</a></li><li><a href="/fr/docs/Web/HTML/microformats">microformats</a></li><li><a href="/fr/docs/Web/HTML/%C3%89l%C3%A9ments_en_bloc">Éléments de bloc</a></li><li><a href="/fr/docs/Web/HTML/%C3%89l%C3%A9ments_en_ligne">Éléments en-ligne</a></li></ol>
</section></div>

<p><span class="seoSummary">HTML permet d'utiliser l'attribut <code><a href="/fr/docs/Web/HTML/Element/img#attr-crossorigin">crossorigin</a></code> sur les images. Utilisé avec un en-tête <a class="glossaryLink" href="/fr/docs/Glossaire/CORS" title="CORS : CORS (Partage de ressource cross-origin) est un mécanisme qui consiste à transmettre des entêtes HTTP qui déterminent s'il faut ou non bloquer les requêtes à des ressources restreintes sur une page web qui se trouve sur un domaine externe au domaine dont la ressource est originaire.">CORS</a> adéquat, les images définies par <a href="/fr/docs/Web/HTML/Element/img" title="L'élément HTML &lt;img> permet de représenter une image dans un document. Cet élément est un élément remplacé."><code>&lt;img&gt;</code></a> provenant d'origines étrangères pourront être utilisées au sein d'un élément <a href="/fr/docs/Web/HTML/Element/canvas" title="L'élément &lt;canvas> permet de modifier une zone graphique via un script (habituellement en JavaScript ou grâce à WebGL). Il peut par exemple être utilisé afin de dessiner des graphiques, manipuler des images ou jouer des animations."><code>&lt;canvas&gt;</code></a> comme si elles avaient été chargées depuis l'origine courante.</span></p>

<p>Pour plus de détails sur l'attribut <code>crossorigin</code>, voir <a href="/fr/docs/Web/HTML/Reglages_des_attributs_CORS">les attributs de paramétrage du CORS</a>.</p>

<h2 id="Canevas_corrompu_et_sécurité">Canevas corrompu et sécurité</h2>

<p>Les pixels composant un canevas pouvant venir de différentes sources, notamment d'images ou de vidéos récupérées depuis des hôtes tiers, il est nécessaire de se prémunir contre certains problèmes de sécurité.</p>

<p>Dès que des données sont chargées dans le canevas depuis une autre origine sans avoir été « approuvées » par le CORS, le canevas devient <strong>corrompu</strong> (<em>tainted</em>). Dès qu'un canevas est corrompu, il n'est plus considéré comme sécurisé et toute tentative de récupérer des données depuis les données de l'image résultera en une exception.</p>

<p>Si la source du contenu tiers est un élément HTML <a href="/fr/docs/Web/HTML/Element/img" title="L'élément HTML &lt;img> permet de représenter une image dans un document. Cet élément est un élément remplacé."><code>&lt;img&gt;</code></a> ou SVG <a href="/fr/docs/Web/SVG/Element/svg" title="L'élément svg peut être utilisé pour intégrer des fragments de code SVG à l'intérieur d'un document (par exemple, un document HTML). Ce fragment de code SVG dispose de ses propres viewport et système de coordonnée."><code>&lt;svg&gt;</code></a>, il n'est plus permis de récupérer le contenu du canevas.</p>

<p>Si la source du contenu tiers est une image obtenue à partir d'un <a href="/fr/docs/Web/API/HTMLCanvasElement" title="L'interface HTMLCanvasElement fournit un ensemble de propriétés et de méthodes pour manipuler la disposition et la représentation des éléments canvas. L'interface HTMLCanvasElement hérite également des propriétés et des méthodes de l'interface HTMLElement."><code>HTMLCanvasElement</code></a> ou d'une <a href="/fr/docs/Web/API/ImageBitMap" title="Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant !"><code>ImageBitMap</code></a> et que la source de l'image ne respecte pas les règles quant à l'unicité de l'origine, il ne sera pas possible de lire le contenu du canevas.</p>

<p>Appeler l'une des méthodes suivantes sur un canevas corrompu déclenchera une erreur :</p>

<ul>
 <li><a href="/fr/docs/Web/API/CanvasRenderingContext2D/getImageData" title="La méthode CanvasRenderingContext2D.getImageData() de l'API Canvas 2D retourne un  objet ImageData  représentant les données de pixels sous-jacentes pour la zone du canevas désigné par le rectangle qui commence aux positions (sx, sy)  et qui possède des attributs : largeur (sw) et hauteur (sh). Cette méthode n'est pas affectée par la matrice de transformation du canevas."><code>getImageData()</code></a> sur le contexte du canevas</li>
 <li><a href="/fr/docs/Web/API/HTMLCanvasElement/toBlob" title="Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant !"><code>toBlob()</code></a> sur l'élément <a href="/fr/docs/Web/HTML/Element/canvas" title="L'élément &lt;canvas> permet de modifier une zone graphique via un script (habituellement en JavaScript ou grâce à WebGL). Il peut par exemple être utilisé afin de dessiner des graphiques, manipuler des images ou jouer des animations."><code>&lt;canvas&gt;</code></a></li>
 <li><a href="/fr/docs/Web/API/HTMLCanvasElement/toDataURL" title="Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant !"><code>toDataURL()</code></a> sur le canevas</li>
</ul>

<p>L'exception levée par de tels appels sera une exception <code>SecurityError</code>. Cette mesure protège les utilisateurs contre l'exposition de données privées via des images provenant de sites tiers sans permission.</p>

<h2 id="Stocker_une_image_provenant_d'une_origine_tierce">Stocker une image provenant d'une origine tierce</h2>

<p>Dans cet exemple, on souhaite autoriser la récupération et l'enregistrement d'images provenant d'une autre origine. Pour parvenir à ce résultat, il faudra configurer le serveur et également écrire du code pour le site web.</p>

<h3 id="Configuration_serveur">Configuration serveur</h3>

<p>Pour commencer, configurons le serveur stockant les images avec un en-tête <a href="/fr/docs/Web/HTTP/Headers/Access-Control-Allow-Origin" title="L'entête Access-Control-Allow-Origin renvoie une réponse indiquant si les ressources peuvent être partagées avec une origine donnée."><code>Access-Control-Allow-Origin</code></a> qui permet un accès multi-origines aux fichiers images.</p>

<p>Dans la suite de cet exemple, on prendra le cas d'un site est servi via <a href="https://httpd.apache.org/">Apache</a>. On pourra utiliser le fragment <a href="https://github.com/h5bp/server-configs-apache/blob/master/src/cross-origin/images.conf">de configuration serveur Apache pour les images CORS</a> :</p>

<pre class="brush: xml">&lt;IfModule mod_setenvif.c&gt;
  &lt;IfModule mod_headers.c&gt;
    &lt;FilesMatch "\.(bmp|cur|gif|ico|jpe?g|png|svgz?|webp)$"&gt;
      SetEnvIf Origin ":" IS_CORS
      Header set Access-Control-Allow-Origin "*" env=IS_CORS
    &lt;/FilesMatch&gt;
  &lt;/IfModule&gt;
&lt;/IfModule&gt;</pre>

<p>Pour résumer, cela permet de configurer le serveur afin de pouvoir accéder aux fichiers graphiques (ceux avec les extensions ".bmp", ".cur", ".gif", ".ico", ".jpg", ".jpeg", ".png", ".svg", ".svgz", and ".webp") depuis d'autres origines, d'où qu'elles soient sur Internet.</p>

<h3 id="Implémenter_l'enregistrement">Implémenter l'enregistrement</h3>

<p>Maintenant que le serveur est configuré pour permettre la récupération d'image depuis plusieurs origines, on peut écrire le code qui permet à l'utilisateur d'enregistrer les images <a href="/fr/docs/Web/API/Web_Storage_API">en stockage local</a> comme si elles étaient servies depuis le même domaine que le code.</p>

<p>Pour cela, on utilise l'attribut <code><a href="/fr/docs/Web/HTML/Attributs_universels#attr-crossorigin">crossorigin</a></code> en définissant <a href="/fr/docs/Web/API/HTMLImageElement/crossOrigin" title="Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant !"><code>crossOrigin</code></a> sur l'élément <a href="/fr/docs/Web/API/HTMLImageElement" title="L'interface  HTMLImageElement fournit des propriétés et des méthodes spéciales pour manipuler la mise en page et la présentation des éléments &lt;img> ."><code>HTMLImageElement</code></a> sur lequel l'image sera chargée. Ainsi, on indique au navigateur de demander un accès multi-origine lors du téléchargement de l'image.</p>

<h4 id="Démarrer_le_téléchargement">Démarrer le téléchargement</h4>

<p>Voici le code qui démarre le téléchargement (déclenché par exemple lorsque l'utilisateur clique sur un bouton « Télécharger ») :</p>

<pre class="brush: js">function startDownload() {
  let imageURL = "https://cdn.glitch.com/4c9ebeb9-8b9a-4adc-ad0a-238d9ae00bb5%2Fmdn_logo-only_color.svg?1535749917189";

  downloadedImg = new Image;
  downloadedImg.crossOrigin = "Anonymous";
  downloadedImg.addEventListener("load", imageReceived, false);
  downloadedImg.src = imageURL;
}</pre>

<p>Ici, l'URL de l'image à télécharger est codée en dur mais cette valeur pourrait très bien provenir d'un argument passé à la fonction. Pour démarrer le téléchargement, on crée un nouvel objet <a href="/fr/docs/Web/API/HTMLImageElement" title="L'interface  HTMLImageElement fournit des propriétés et des méthodes spéciales pour manipuler la mise en page et la présentation des éléments &lt;img> ."><code>HTMLImageElement</code></a> grâce au constructeur <a href="/fr/docs/Web/API/HTMLImageElement/Image" title="Le constructeur Image() crée une nouvelle instance HTMLImageElement ."><code>Image()</code></a>. L'image est ensuite configurée afin de permettre un téléchargement multi-origine grâce à l'attribut <code>crossOrigin</code> paramétré avec <code>"Anonymous"</code> (qui permet le téléchargement, non-authentifié, d'une image multi-origine). Un gestionnaire d'évènement est ajouté afin de réagir à l'évènement <code><a href="/fr/docs/Web/Reference/Events/load" title="/fr/docs/Web/Reference/Events/load">load</a></code> lorsque l'image a été reçue.</p>

<p>Enfin, l'attribut <a href="/fr/docs/Web/API/HTMLImageElement/src" title="Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant !"><code>src</code></a> de l'image est défini avec l'URL de l'image à télécharger et le téléchargement démarre.</p>

<h4 id="Recevoir_et_enregistrer_l'image">Recevoir et enregistrer l'image</h4>

<p>Voici le fragment de code exécuté lorsque l'image a été téléchargée :</p>

<pre class="brush: js">function imageReceived() {
  let canvas = document.createElement("canvas");
  let context = canvas.getContext("2d");

  canvas.width = downloadedImg.width;
  canvas.height = downloadedImg.height;

  context.drawImage(downloadedImg, 0, 0);
  imageBox.appendChild(canvas);

  try {
    localStorage.setItem("saved-image-example", canvas.toDataURL("image/png"));
  }
  catch(err) {
    console.log("Error: " + err);
  }
}</pre>

<p><code>imageReceived()</code> est invoquée lorsque l'évènement <code>"load"</code> est déclenché sur l'élément <code>HTMLImageElement</code> qui reçoit l'image téléchargée. Cet évènement se produit lorsque l'ensemble des données téléchargées est disponible. Cette fonction commence par créer un nouvel élément <a href="/fr/docs/Web/HTML/Element/canvas" title="L'élément &lt;canvas> permet de modifier une zone graphique via un script (habituellement en JavaScript ou grâce à WebGL). Il peut par exemple être utilisé afin de dessiner des graphiques, manipuler des images ou jouer des animations."><code>&lt;canvas&gt;</code></a> qui sera utilisé afin de convertir l'image en une URL de donnée. On récupère également un accès au contexte du canevas pour dessiner en 2D (<a href="/fr/docs/Web/API/CanvasRenderingContext2D" title="L'interface CanvasRenderingContext2D est utilisée pour dessiner des rectangles, du texte, des images et d'autres objets sur l'élément canvas. Il fournit le contexte de rendu 2D pour la surface de dessin d'un élément &lt;canvas>."><code>CanvasRenderingContext2D</code></a>) dans la variable <code>context</code>.</p>

<p>La taille du canevas est ajustée afin que ses dimensions correspondent à celles de l'image. L'image est ensuite dessinée dans le canevas grâce à <a href="/fr/docs/Web/API/CanvasRenderingContext2D/drawImage" title="La méthode CanvasRenderingContext2D.drawImage() de l'API 2D des Canvas instaure différentes manières de dessiner des images dans les balises canvas."><code>drawImage()</code></a>. Le canevas est alors inséré dans le document et l'image y devient visible.</p>

<p>Enfin, on enregistre l'image dans le stockage local. Pour cela, on utilise les méthodes de l'API <em>Web Storage</em> en passant par la variable globale <a href="/fr/docs/Web/API/Window/localStorage" title="La propriété localStorage vous permet d'accéder à un objet local Storage. Le localStorage est similaire au sessionStorage. La seule différence : les données stockées dans le localStorage n'ont pas de délai d'expiration, alors que les données stockées dans le sessionStorage sont nettoyées quand la session navigateur prend fin — donc quand on ferme le navigateur."><code>localStorage</code></a>. La méthode <a href="/fr/docs/Web/API/HTMLCanvasElement/toDataURL" title="Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant !"><code>toDataURL()</code></a> est utilisée afin de convertir l'image en une URL de données représentant une image PNG qui est enregistrée dans l'espace local grâce à la méthode <a href="/fr/docs/Web/API/Storage/setItem" title="La méthode setItem() de l'interface Storage, lorsque lui sont passées le duo clé-valeur, les ajoute à l'emplacement de stockage, sinon elle met à jour la valeur si la clé existe déjà."><code>setItem()</code></a>.</p>

<p>Vous pouvez <a href="https://cors-image-example.glitch.me/">essayer</a> ou <a href="https://glitch.com/edit/#!/remix/cors-image-example">adapter</a> cet exemple sur Glitch.</p>

<h2 id="Voir_aussi">Voir aussi</h2>

<ul>
 <li><a class="external" href="https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-crossorigin">Spécification HTML : l'attribut <code>crossorigin</code></a></li>
 <li><a href="/fr/docs/Web/API/Web_Storage_API">L'API <em>Web Storage</em></a></li>
</ul>
