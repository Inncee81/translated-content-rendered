---
title: Express 教程 4： 路由和控制器
slug: learn/Server-side/Express_Nodejs/routes
tags:
  - Express
  - Node
  - nodejs
  - 初学者
  - 服务器端编程
  - 路由
translation_of: Learn/Server-side/Express_Nodejs/routes
---
<div><section class="Quick_links" id="Quick_Links">

<ol>
  <li data-default-state="closed"><a href="/zh-CN/docs/Learn/Getting_started_with_the_web"><strong>新手请从这开始！</strong></a></li>
  <li class="toggle">
      <details>
          <summary>Web 入门</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web">Web 概述</a></li>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web/Installing_basic_software">安装基本软件</a></li>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web/What_will_your_website_look_like">您的网站会是什么样？</a></li>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web/Dealing_with_files">处理文件</a></li>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web/HTML_basics">HTML 基础</a></li>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web/CSS_basics">CSS 基础</a></li>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web/JavaScript_basics">JavaScript 基础</a></li>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web/Publishing_your_website">发布您的网站</a></li>
            <li><a href="/zh-CN/docs/Learn/Getting_started_with_the_web/How_the_Web_works">Web 是如何运作的</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state="closed"><a href="/zh-CN/docs/Learn/HTML"><strong>HTML — 构建 Web</strong></a></li>
  <li class="toggle">
      <details>
          <summary>HTML 介绍</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML">HTML 概述</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/Getting_started">HTML 入门</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/The_head_metadata_in_HTML">脑袋里是什么？HTML 中的元数据</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/HTML_text_fundamentals">HTML 文字基础</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/Creating_hyperlinks">建立超链接</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/Advanced_text_formatting">高级文字格式</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/Document_and_website_structure">文档与网站架构</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/Debugging_HTML">HTML 除错</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/Marking_up_a_letter">作业：标记字母</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Introduction_to_HTML/Structuring_a_page_of_content">作业：构建出有内容的网页</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>多媒体与嵌入</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/HTML/Multimedia_and_embedding">多媒体与嵌入概述</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Images_in_HTML">HTML 中的图片</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Video_and_audio_content">视频和音频内容</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Other_embedding_technologies">从对象到 iframe — 其他嵌入技术</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Adding_vector_graphics_to_the_Web">为 Web 新增向量图</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images">自适应图片</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Mozilla_splash_page">作业：Mozilla 醒目页面</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>HTML 表格</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/HTML/Tables">HTML 表格概览</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Tables/Basics">HTML 表格基础</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Tables/Advanced">HTML 高级表格特性和可访问性</a></li>
            <li><a href="/zh-CN/docs/Learn/HTML/Tables/Structuring_planet_data">作业：构建行星数据</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state="closed"><a href="/zh-CN/docs/Learn/CSS"><strong>CSS — 设计 Web</strong></a></li>
  <li class="toggle">
      <details>
          <summary>CSS first steps</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/CSS/First_steps">CSS first steps overview</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/First_steps/What_is_CSS">What is CSS?</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/First_steps/Getting_started">Getting started with CSS</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/First_steps/How_CSS_is_structured">How CSS is structured</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/First_steps/How_CSS_works">How CSS works</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/First_steps/Using_your_new_knowledge">Using your new knowledge</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>CSS building blocks</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks">CSS building blocks overview</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Cascade_and_inheritance">Cascade and inheritance</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Selectors">CSS selectors</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/The_box_model">The box model</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Backgrounds_and_borders">Backgrounds and borders</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Handling_different_text_directions">Handling different text directions</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Overflowing_content">Overflowing content</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Values_and_units">Values and units</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Sizing_items_in_CSS">Sizing items in CSS</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Images_media_form_elements">Images, media, and form elements</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Styling_tables">Styling tables</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Debugging_CSS">Debugging CSS</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Building_blocks/Organizing">Organizing your CSS</a></li>
      </ol></details>
  </li>
  <li class="toggle">
      <details>
          <summary>样式化文字</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/CSS/Styling_text">样式化文字概述</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Styling_text/Fundamentals">基础文字与字体样式化</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Styling_text/Styling_lists">样式化列表</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Styling_text/Styling_links">样式化链接</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Styling_text/Web_fonts">Web 字体</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/Styling_text/Typesetting_a_homepage">作业：排版社区大学首页</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>CSS 排版概述</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout">CSS 版面配置概述</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Introduction">介绍</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Normal_Flow">Normal Flow</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Flexbox">弹性区块</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Grids">网格</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Floats">浮动</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Positioning">定位</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Multiple-column_Layout">Multiple-column Layout</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Responsive_Design">Responsive design</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Media_queries">Beginner&apos;s guide to media queries</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Legacy_Layout_Methods">Legacy Layout Methods</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Supporting_Older_Browsers">Supporting Older Browsers</a></li>
            <li><a href="/zh-CN/docs/Learn/CSS/CSS_layout/Fundamental_Layout_Comprehension">Fundamental Layout Comprehension</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state="closed"><a href="/zh-CN/docs/Learn/JavaScript"><strong>JavaScript — 用户端动态脚本</strong></a></li>
  <li class="toggle">
      <details>
          <summary>JavaScript 第一步</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps">JavaScript 第一步概述</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/What_is_JavaScript">什么是 JavaScript？</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/A_first_splash">初次接触 JavaScript</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/What_went_wrong">出现了什么问题？JavaScript 疑难解答</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/Variables">储存你所需的信息 — 变量</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/Math">JavaScript 基础概念 — 数字与运算符</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/Strings">处理文字 — JavaScript 中的字符串</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/Useful_string_methods">有用的字符串方法</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/Arrays">数组</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/First_steps/Silly_story_generator">作业：傻瓜故事产生器</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>JavaScript 基础要件</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Building_blocks">JavaScript 基础要件概述</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Building_blocks/conditionals">在代码中决策 — 条件</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Building_blocks/Looping_code">代码循环</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Building_blocks/Functions">函数 - 可重复利用的代码块</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Building_blocks/Build_your_own_function">建立自己的函数</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Building_blocks/Return_values">函数回传值</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Building_blocks/Events">事件介绍</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Building_blocks/Image_gallery">作业：图库</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>JavaScript 对象介绍</summary>
          <ol>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Objects">JavaScript 对象概述</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Objects/Basics">对象基础概念</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Objects/Object-oriented_JS">适合新手的面向对象 JavaScript</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Objects/Object_prototypes">对象原型</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Objects/Inheritance">JavaScript 中的继承</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Objects/JSON">使用 JSON 资料</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Objects/Object_building_practice">对象构建实践</a></li>
            <li><a href="/zh-CN/docs/Learn/JavaScript/Objects/Adding_bouncing_balls_features">作业：为弹跳球展示新增功能</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Asynchronous JavaScript</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous">Asynchronous JavaScript overview</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Concepts">General asynchronous programming concepts</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Introducing">Introducing asynchronous JavaScript</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Timeouts_and_intervals">Cooperative asynchronous Java​Script: Timeouts and intervals</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Promises">Graceful asynchronous programming with Promises</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Async_await">Making asynchronous programming easier with async and await</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Asynchronous/Choosing_the_right_approach">Choosing the right approach</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>客户端网页 API</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs">客户端网页 API</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs/Introduction">网页 API 介绍</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs/Manipulating_documents">操纵文档</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs/Fetching_data">从服务器获取数据</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs/Third_party_APIs">第三方 API</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs/Drawing_graphics">画图</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs/Video_and_audio_APIs">视频与音频 API</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs/Client-side_storage">客户端存储</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/zh-CN/docs/Learn/Forms"><strong>Web forms — Working with user data</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Core forms learning pathway</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Forms">Web forms overview</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Your_first_form">Your first form</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/How_to_structure_a_web_form">How to structure a web form</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Basic_native_form_controls">Basic native form controls</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/HTML5_input_types">The HTML5 input types</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Other_form_controls">Other form controls</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Styling_web_forms">Styling web forms</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Advanced_form_styling">Advanced form styling</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/UI_pseudo-classes">UI pseudo-classes</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Form_validation">Client-side form validation</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Sending_and_retrieving_form_data">Sending form data</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Advanced forms articles</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Forms/How_to_build_custom_form_controls">How to build custom form controls</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Sending_forms_through_JavaScript">Sending forms through JavaScript</a></li>
          <li><a href="/zh-CN/docs/Learn/Forms/Property_compatibility_table_for_form_controls">CSS property compatibility table for form controls</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/zh-CN/docs/Learn/Accessibility"><strong>可访问性 — 使每个人都能使用 Web</strong></a></li>
  <li class="toggle">
    <details>
        <summary>可访问性指南</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Accessibility">可访问性概览</a></li>
          <li><a href="/zh-CN/docs/Learn/Accessibility/What_is_accessibility">什么是可访问性</a></li>
          <li><a href="/zh-CN/docs/Learn/Accessibility/HTML">HTML: 可访问性的好基础</a></li>
          <li><a href="/zh-CN/docs/Learn/Accessibility/CSS_and_JavaScript">CSS 和 JavaScript 可访问性最佳实践</a></li>
          <li><a href="/zh-CN/docs/Learn/Accessibility/WAI-ARIA_basics">WAI-ARIA 基础</a></li>
          <li><a href="/zh-CN/docs/Learn/Accessibility/Multimedia">可访问性多媒体</a></li>
          <li><a href="/zh-CN/docs/Learn/Accessibility/Mobile">移动端可访问性</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>可访问性测评</summary>
        <ol>
            <li><a href="/zh-CN/docs/Learn/Accessibility/Accessibility_troubleshooting">作业：可访问性疑难解答</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/zh-CN/docs/Learn/Tools_and_testing"><strong>工具与测试</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Client-side web development tools</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Understanding_client-side_tools">Client-side web development tools index</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Overview">Client-side tooling overview</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Command_line">Command line crash course</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Package_management">Package management basics</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Introducing_complete_toolchain">Introducing a complete toolchain</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Deployment">Deploying our app</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Introduction to client-side frameworks</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Introduction">Client-side frameworks overview</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Main_features">Framework main features</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>React</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_getting_started">Getting started with React</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_todo_list_beginning">Beginning our React todo list</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_components">Componentizing our React app</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state">React interactivity: Events and state</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_filtering_conditional_rendering">React interactivity: Editing, filtering, conditional rendering</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_accessibility">Accessibility in React</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_resources">React resources</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Ember</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_getting_started">Getting started with Ember</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_structure_componentization">Ember app structure and componentization</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_interactivity_events_state">Ember interactivity: Events, classes and state</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_conditional_footer">Ember Interactivity: Footer functionality, conditional rendering</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_routing">Routing in Ember</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_resources">Ember resources and troubleshooting</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Vue</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_getting_started">Getting started with Vue</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_first_component">Creating our first Vue component</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_rendering_lists">Rendering a list of Vue components</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_methods_events_models">Adding a new todo form: Vue events, methods, and models</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_styling">Styling Vue components with CSS</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_computed_properties">Using Vue computed properties</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_conditional_rendering  ">Vue conditional rendering: editing existing todos</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_refs_focus_management">Focus management with Vue refs</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_resources">Vue resources</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Git and GitHub</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/GitHub">Git and GitHub overview</a></li>
          <li><a href="https://guides.github.com/activities/hello-world/">Hello World</a></li>
          <li><a href="https://guides.github.com/introduction/git-handbook/">Git Handbook</a></li>
          <li><a href="https://guides.github.com/activities/forking/">Forking Projects</a></li>
          <li><a href="https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests">About pull requests</a></li>
          <li><a href="https://guides.github.com/features/issues/">Mastering Issues</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>跨浏览器测试</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing">跨浏览器测试概述</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing/Introduction">跨浏览器测试介绍</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing/Testing_strategies">执行测试策略</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing/HTML_and_CSS">处理常见的 HTML 与 CSS 问题</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing/JavaScript">处理常见的 JavaScript 问题</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing/Accessibility">处理常见的可访问性问题</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing/Feature_detection">建置功能侦测</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing/Automated_testing">自动测试介绍</a></li>
          <li><a href="/zh-CN/docs/Learn/Tools_and_testing/Cross_browser_testing/Your_own_automation_environment">设置您的自动测试环境</a></li>
        </ol>
    </details>
  </li>
  <li data-default-state="closed"><a href="/zh-CN/docs/Learn/Server-side"><strong>服务端网页编程</strong></a></li>
  <li class="toggle">
    <details>
        <summary>第一步</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Server-side/First_steps">第一步概述</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/First_steps/Introduction">服务端介绍</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/First_steps/Client-Server_overview">用户端概述</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/First_steps/Web_frameworks">服务端网络框架</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/First_steps/Website_security">网站安全</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Django 网站框架 (Python)</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django">Django 网站框架 (Python) 概述</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Introduction">介绍</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/development_environment">搭建开发环境</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Tutorial_local_library_website">在线教学：本地图书馆网站</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/skeleton_website">在线教学 2：建立网站框架</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Models">在线教学 3：使用模型</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Admin_site">在线教学 4：Django 管理网站</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Home_page">在线教学 5：建立我们的首页</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Generic_views">在线教学 6：通用列表与细节检查</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Sessions">在线教学 7：会话框架</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Authentication">在线教学 8：用户授权与许可</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Forms">在线教学 9：搭配表单</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Testing">在线教学 10：测试 Django 的 Web 应用</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/Deployment">在线教学 11：部署 Django 至产品</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/web_application_security">Web 应用安全性</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Django/django_assessment_blog">作业：DIY 博客</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Express 网页框架 (node.js/JavaScript)</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs">Express 网页框架 (Node.js/JavaScript) 概览</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/Introduction">Express/Node 介绍</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/development_environment">架设 Node (Express) 开发环境</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/Tutorial_local_library_website">Express 教程： 本地图书馆网站</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/skeleton_website">Express 教程 2： 新建网站骨架</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/mongoose">Express 教程 3： 使用数据库 (Mongoose)</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/routes">Express 教程 4： 路由和控制器</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/Displaying_data">Express 教程 5： 呈现图书馆数据</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/forms">Express 教程 6： 使用表单</a></li>
          <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/deployment">Express 教程 7： 部署至生产环境</a></li>
        </ol>
    </details>
  </li>
  <li><a href="#"><strong>更多资源</strong></a></li>
  <li class="toggle">
    <details>
        <summary>常见问题</summary>
        <ol>
          <li><a href="/zh-CN/docs/Learn/HTML/Howto">HTML 问题</a></li>
          <li><a href="/zh-CN/docs/Learn/CSS/Howto">CSS 问题</a></li>
          <li><a href="/zh-CN/docs/Learn/JavaScript/Howto">JavaScript questions</a></li>
          <li><a href="/zh-CN/docs/Learn/Common_questions#How_the_Web_works">Web 是如何运作的</a></li>
          <li><a href="/zh-CN/docs/Learn/Common_questions#Tools_and_setup">工具与安装</a></li>
          <li><a href="/zh-CN/docs/Learn/Common_questions#Design_and_accessibility">设计与可访问性</a></li>
        </ol>
    </details>
  </li>
  <li data-default-state="closed"><a href="/zh-CN/docs/Learn/How_to_contribute">如何贡献</a></li>
</ol>

</section></div>

<div><div class="prevnext">
  <a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/mongoose" class="button"><i class="icon-arrow-left"></i><span class="label"> 上一页 </span></a><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs" class="button"><i class="icon-arrow-up"></i> Overview: Express Nodejs</a><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/Displaying_data" class="button"><span class="label"> 下一页  </span><i class="icon-arrow-right"></i></a>
</div></div>

<p class="summary">本节将为 <a href="https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/Express_Nodejs/Tutorial_local_library_website">LocalLibrary</a> 站点中所需的资源端点（Endpoint）配置路由。先用空的处理函数搭建起路由处理的模块结构（下节会将它们扩充为真实的处理函数）。并详细介绍了 Express 路由模块的创建方法。</p>

<table class="learn-box standard-table">
 <tbody>
  <tr>
   <th scope="row">预备知识：</th>
   <td>回顾 <a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/Introduction">Express/Node 入门</a>。 完成本教程之前小节（<a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/mongoose">Express 教程 3：使用数据库 (Mongoose)</a> 等）。了解服务器端编程，了解正则表达式。</td>
  </tr>
  <tr>
   <th scope="row">学习目标：</th>
   <td>理解简单路由的创建方法。设置示例中所有 URL 端点。</td>
  </tr>
 </tbody>
</table>

<h2 id="概览">概览</h2>

<p><a href="https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/Express_Nodejs/mongoose">上节</a> 定义了与数据库交互的 Mongoose 模型，使用一个（独立）脚本创建了一些初始记录。现在可以编写代码来向用户展示这些信息。首先要确定页面中应显示哪些信息，然后定义适当的 URL 来返回这些资源。随后应创建路由（URL 处理器）和视图（模板）来显示这些页面。</p>

<p>下图展示了 HTTP 请求/响应处理的主数据流和需要实现的行为。图中除视图（View）和路由（Route）外，还展示了控制器（Controller），它们是实际的请求处理函数，与路由请求代码是分开的。</p>

<p>模型已经创建，现在要创建的主要是：</p>

<ul>
 <li>路由：把需要支持的请求（以及请求 URL 中包含的任何信息）转发到适当的控制器函数。</li>
 <li>控制器：从模型中获取请求的数据，创建一个 HTML 页面显示出数据，并将页面返回给用户，以便在浏览器中查看。</li>
 <li>视图（模板）：供控制器用来渲染数据。</li>
</ul>

<p><img alt="Express HTTP 请求/响应 路径" src="https://mdn.mozillademos.org/files/16453/Express_MVC.png"></p>

<p>因此我们需要页面来显示藏书、藏书种类、作者、藏书副本的列表和详细信息，还需要页面来创建、更新和删除记录。这些内容对于本节来说不算少，因此本节将主要集中在路由和控制器设置。本节编写的这些函数都只有框架，后续章节再扩展控制器方法，以使用模型数据。</p>

<p>第一段提供了 Express 的 <a href="http://expressjs.com/en/4x/api.html#router">Router</a> 中间件的“入门”知识。后续设置 LocalLibrary 路由时将用到这些知识。</p>

<h2 id="路由入门">路由入门</h2>

<p>路由是一段 Express 代码，它将 HTTP 动词（<code>GET</code>、<code>POST</code>、<code>PUT</code>、<code>DELETE</code> 等）、URL 路径/模式和处理函数三者关联起来。</p>

<p>创建路由有几种方法。本教程将使 <code><a href="http://expressjs.com/en/guide/routing.html#express-router">express.Router</a></code> 中间件，因为使用它可以将站点特定部分的路由处理程序打包，并使用通用路由前缀访问它们。我们会将所有与图书馆有关的路由保存在 <code>catalog</code> 模块中，在添加处理帐户或其他功能的路由时，可以分开保存。</p>

<div class="note">
<p><strong>注：</strong><a href="https://developer.mozilla.org/zh-CN/docs/zh-CN/docs/Learn/Server-side/Express_Nodejs/Introduction#%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%88Route_handler%EF%BC%89">Express 简介 &gt; 创建路由处理程序</a> 简要讨论了 Express 应用的路由机制。使用 <code>Router</code> 可以保证更好的模块化（下文所述），且用法与直接在 Express 应用对象定义路由非常类似。</p>
</div>

<p>本段以下内容介绍使用 <code>Router</code> 定义路由的方法。</p>

<h3 id="定义和使用单独的路由模块">定义和使用单独的路由模块</h3>

<p>以下代码举例说明了如何创建路由模块，以及如何在 Express 应用中使用它。</p>

<p>首先，在 <strong>wiki.js </strong>模块中创建一个维基路由。代码一开始导入 Express 应用对象，用它取得一个 <code>Router</code> 对象，然后用 <code>get()</code> 方法向其添加两个具体的路由。模块的最后导出该 <code>Router</code> 对象。</p>

<pre class="brush: js notranslate">// wiki.js - 维基路由模块

const express = require(&apos;express&apos;);
const router = express.Router();

// 主页路由
router.get(&apos;/&apos;, (req, res) =&gt; {
  res.send(&apos;维基主页&apos;);
});

// “关于页面”路由
router.get(&apos;/about&apos;, (req, res) =&gt; {
  res.send(&apos;关于此维基&apos;);
});

module.exports = router;</pre>

<div class="note">
<p><strong>注：</strong>上面的路由处理回调直接定义在了路由函数中。LocalLibrary 的回调将定义在单独的控制器模块中。</p>
</div>

<p>要在主应用中使用该路由模块，首先应 <code>require</code> 它（<strong>wiki.js</strong>），然后对 Express 应用对象调用 <code>use()</code>（指定路径‘/wiki’），即可将其添加到中间件处理路径。</p>

<pre class="brush: js notranslate">const wiki = require(&apos;./wiki.js&apos;);
// ...
app.use(&apos;/wiki&apos;, wiki);</pre>

<p>这时 <code>wiki</code> 模块中定义的两个路由就可以从 <code>/wiki/</code> 和 <code>/wiki/about/</code> 访问了。</p>

<h3 id="路由函数">路由函数</h3>

<p>上述模块定义了两个典型的路由函数。<code>Router.get()</code> 方法定义的 “about” 路由（下方重现的）仅响应 HTTP GET 请求。第一个参数是 URL 路径，第二个参数是一个回调，在收到带有路径的HTTP GET 请求将调用之。</p>

<pre class="brush: js notranslate">router.get(&apos;/about&apos;, (req, res) =&gt; {
  res.send(&apos;关于此维基&apos;);
});
</pre>

<p>该回调有三个参数（通常命名为：<code>req</code>、<code>res</code>、<code>next</code>），分别是：HTTP 请求对象、HTTP 响应、中间件链中的下一个函数。</p>

<div class="note">
<p><strong>注：</strong>路由函数就是 <a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/Introduction#Using_middleware">Express 中间件</a>，这意味着它们必须（通过响应）结束请求，否则必须调用链中的 <code>next</code> 函数。上述示例使用<code>send()</code> 完成了请求，所以没有使用 <code>next</code> 参数（参数表中将其省略）。</p>

<p>上述路由函数只需要一个回调，可以根据需要指定任意数量的回调参数，或一个回调函数数组。每个函数都将加入中间件链，并且将按添加顺序调用（若有回调完成请求则中止当前周期）。</p>
</div>

<p>此处的回调对响应对象调用 <code><a href="https://expressjs.com/en/4x/api.html#res.send">send()</a></code>，当收到带有路径（&apos;<code>/about&apos;</code>）的 GET 请求时将返回字符串“关于此维基”。还有许多其它可以结束请求/响应周期 <a href="https://expressjs.com/en/guide/routing.html#response-methods">响应方法</a>，例如，可调用 <code><a href="https://expressjs.com/en/4x/api.html#res.json">res.json()</a></code> 来发送 JSON 响应，或调用 <code><a href="https://expressjs.com/en/4x/api.html#res.sendFile">res.sendFile()</a></code> 来发送文件。构建 LocalLibrary 最常使用的响应方法是 <code><a href="https://expressjs.com/en/4x/api.html#res.render">render()</a></code>，它使用模板和数据创建并返回 HTML 文件。后续章节进一步讨论。</p>

<h3 id="HTTP_动词">HTTP 动词</h3>

<p>上面的示例使用 <code>Router.get()</code> 方法来响应特定路径的 HTTP GET 请求。</p>

<p><code>Router</code> 还为所有其他 HTTP 动词提供路由方法，大都用法相同：<code>post()</code>, <code>put()</code>, <code>delete()</code>, <code>options()</code>, <code>trace()</code>, <code>copy()</code>, <code>lock()</code>, <code>mkcol()</code>, <code>move()</code>, <code>purge()</code>, <code>propfind()</code>, <code>proppatch()</code>, <code>unlock()</code>, <code>report()</code>, ​​​​​​ <code>mkactivity()</code>, <code>checkout()</code>, <code>merge()</code>, <code>m-</code><code>search()</code>, <code>notify()</code>, <code>subscribe()</code>, <code>unsubscribe()</code>, <code>patch()</code>, <code>search()</code>, 和 <code>connect()</code>。</p>

<p>比如下方代码与上方 <code>/about</code> 路由行为一致，但只响应 HTTP POST 请求。</p>

<pre class="brush: js notranslate">router.post(&apos;/about&apos;, (req, res) =&gt; {
  res.send(&apos;关于此维基&apos;);
});</pre>

<h3 id="路由路径">路由路径</h3>

<p>路由路径用于定义可请求的端点。之前示例中路径都是字符串，并且必须精确写为：&apos;/&apos;、&apos;/ about&apos;、&apos;/ book&apos;，等等。</p>

<p>路由路径也可以是字符串模式（String Pattern）。可用部分正则表达式语法来定义端点的模式。以下是所涉及的正则表达式（注意，连字符（ <code>-</code>）和点（<code>.</code>）在字符串路径中解释为字面量，不能做为正则表达式）：</p>

<ul>
 <li><code>?</code>：问号之前的一个字符只能出现零次或一次。例如，路由路径 <code>&apos;/ab?cd&apos;</code> 路径匹配端点 <code>acd</code> 或 <code>abcd</code>。</li>
 <li><code>+</code>：加号之前的一个字符至少出现一次。例如，路径路径 <code>&apos;/ab+cd&apos;</code> 匹配端点 <code>abcd</code>、<code>abbcd</code>、<code>abbbcd</code>，等。</li>
 <li><code>*</code>：星号可以替换为任意字符串。例如，路由路径 <code>&apos;ab\*cd&apos;</code> 匹配端点 <code>abcd</code>、<code>abXcd</code>、<code>abSOMErandomTEXTcd</code>，等。</li>
 <li><code>()</code>：将一个字符串视为一体以执行 <code>?</code>、<code>+</code>、<code>*</code> 操作。例如。 <code>&apos;/ab(cd)?e&apos;</code> 将对 <code>(cd)</code> 进行匹配，将匹配到 <code>abe</code> 和 <code>abcde</code>。</li>
</ul>

<p>路由路径也可以是 JavaScript <a href="/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions">正则表达式</a>。例如，下面的路由路径将匹配 <code>catfish</code> 和 <code>dogfish</code>，但不会匹配 <code>catflap</code>、<code>catfishhead</code> 等。注意，正则表达式路径不再用引号 <code>&quot;...&quot;</code> 括起来，而是正则表达式语法 <code>/.../</code>。</p>

<pre class="brush: js notranslate">app.get(/.*fish$/, (req, res) =&gt; {
  ...
});</pre>

<div class="note">
<p><strong>注：</strong>LocalLibrary 的大部分路由都只使用字符串，很少用字符串模式和正则表达式。接下来将讨论“路由参数”。</p>
</div>

<h3 id="路由参数">路由参数</h3>

<p>路径参数是命名的 URL 段，用于捕获在 URL 中的位置指定的值。命名段以冒号为前缀，然后是名称（例如 <code>/<strong>:</strong>your_parameter_name/</code>。捕获的值保存在 <code>req.params</code> 对象中，键即参数名（例如 <code>req.params.your_parameter_name</code>）。</p>

<p>举例说，一个包含用户和藏书信息的 URL：<code>http://localhost:3000/users/34/books/8989</code>，可以这样提取信息（使用 <code>userId</code> 和 <code>bookId</code> 路径参数）：</p>

<pre class="brush: js notranslate">app.get(&apos;/users/:userId/books/:bookId&apos;, (req, res) =&gt; {
  // 通过 req.params.userId 访问 userId
  // 通过 req.params.bookId 访问 bookId
  res.send(req.params);
});
</pre>

<p>路由参数名必须由“单词字符”（/<code>[A-Za-z0-9_]</code>/）组成。</p>

<div class="note">
<p><strong>注：</strong>URL <em><code>/book/create</code> 会匹配 </em><code>/book/:bookId</code> 这样的路由（将提取值为&apos;<code>create</code>&apos; 的 &apos;<code>bookId</code>&apos;）。第一个与传入 URL 相匹配的路由会被使用，因此 <code>/book/create</code> 的路由处理器必须定义在<em> </em><code>/book/:bookId</code> 路由之前，才能妥善处理。</p>
</div>

<p>以上就是使用路由所有的预备知识。Express 文档中还能找到更多信息：<a href="http://expressjs.com/en/starter/basic-routing.html">基础路由</a> 和 <a href="http://expressjs.com/en/guide/routing.html">路由指南</a>。以下是 LocalLibrary 路由和控制器的设置过程。</p>

<h2 id="LocalLibrary_所需路由">LocalLibrary 所需路由</h2>

<p>以下是站点页面的完整 URL 列表。<code>&lt;object&gt;</code> 是模型名称（<code>book</code>、<code>bookinstance</code>、<code>genre</code>、<code>author</code>），<code>&lt;objects&gt;</code> 是一组模型，<code>&lt;id&gt;</code> 是每个 Mongoose 模型实例默认的标识字段（<code>_id</code>）。</p>

<ul>
 <li><code>catalog/</code>：主页。</li>
 <li><code>catalog/&lt;objects&gt;/</code>：模型（藏书、藏书副本、藏书种类、作者）的完整列表（例如 /<code>catalog/books/</code>、/<code>catalog/genres/</code> 等）</li>
 <li><code>catalog/&lt;object&gt;/<em>&lt;id&gt;</em></code><em>：具有</em> <code><em>_id</em></code><em> </em>字段值的特定模型的详细信息页面（例如 <code>/catalog/book/584493c1f4887f06c0e67d37</code>）。</li>
 <li><code>catalog/&lt;object&gt;/create</code>：添加新模型的表单（例如 <code>/catalog/book/create</code>）。</li>
 <li><code>catalog/&lt;object&gt;/<em>&lt;id&gt;</em>/update</code>：更新具有 <code><em>_id</em></code><em> </em>字段值的特定模型的表单（例如 <code>/catalog/book/584493c1f4887f06c0e67d37/update</code>）。</li>
 <li><code>catalog/&lt;object&gt;/<em>&lt;id&gt;</em>/delete</code>：删除具有 <code><em>_id</em></code><em> </em>字段值的特定模型的表单（例如 <code>/catalog/book/584493c1f4887f06c0e67d37/delete</code>）。</li>
</ul>

<p>首页和列表页面没有包含任何额外信息。因此它们返回的结果只取决于模型类型和数据库内容，获取信息的查询操作是恒定不变的（类似地，创建对象的代码也没有较大改动）。</p>

<p>与之相反，其他 URL 是用于处理特定文档/模型实例的，它们会将项目的标识嵌入 URL（上文的 <code><em>&lt;id&gt;</em></code>）。可以用路径参数来提取嵌入的信息，并传递给路由处理器（后续章节中用于动态获取数据库中的信息）。通过在 URL 中嵌入信息，使得每种类型的所有资源只需要一个路由（例如，所有藏书副本的显示操作只需要一个路由）。</p>

<div class="note">
<p><strong>注：</strong>Express 可以通过任何方式构造 URL，可以在 URL 正文中嵌入信息（如上文），或使用 URL <code>GET</code> 参数（例如 <code>/book/?id=6</code>）。无论哪种方法，URL 都应保持整洁、合理且易读（另请参阅 <a href="https://www.w3.org/Provider/Style/URI">W3C 相关建议</a>）。</p>
</div>

<p>下面我们为上述所有 URL 创建路由处理器回调函数和路由代码。</p>

<h2 id="创建路由处理器回调函数">创建路由处理器回调函数</h2>

<p>定义路由之前应先使用单独的“控制器”模块创建回调的结构骨架。（文件/模块结构没有限制，但以下结构很适合当前项目的规模）。</p>

<p>首先在项目根目录新建一个存放控制器的文件夹（<strong>/controllers</strong>），然后为每个模型创建单独的控制器文件（模块）：</p>

<pre class="notranslate">/express-locallibrary-tutorial  // 项目根目录
  <strong>/controllers</strong>
    <strong>authorController.js</strong>
    <strong>bookController.js</strong>
    <strong>bookinstanceController.js</strong>
    <strong>genreController.js</strong></pre>

<div class="note notecard">
<p><strong>译注：</strong>上述四个文件可到 GitHub 下载 <a href="https://github.com/roy-tian/mdn-examples/blob/master/server/express-locallibrary-tutorial/controllers/dummyControllers.zip">dummyControllers.zip</a>。（链接已失效，请移步英文版查看具体代码）</p>
</div>

<h3 id="Author_控制器"><code>Author</code> 控制器</h3>

<p>以下是 <strong>/controllers/authorController.js</strong> 文件的内容：</p>

<pre class="brush: js notranslate">const Author = require(&apos;../models/author&apos;);

// 显示完整的作者列表
exports.author_list = (req, res) =&gt; { res.send(&apos;未实现：作者列表&apos;); };

// 为每位作者显示详细信息的页面
exports.author_detail = (req, res) =&gt; { res.send(&apos;未实现：作者详细信息：&apos; + req.params.id); };

// 由 GET 显示创建作者的表单
exports.author_create_get = (req, res) =&gt; { res.send(&apos;未实现：作者创建表单的 GET&apos;); };

// 由 POST 处理作者创建操作
exports.author_create_post = (req, res) =&gt; { res.send(&apos;未实现：创建作者的 POST&apos;); };

// 由 GET 显示删除作者的表单
exports.author_delete_get = (req, res) =&gt; { res.send(&apos;未实现：作者删除表单的 GET&apos;); };

// 由 POST 处理作者删除操作
exports.author_delete_post = (req, res) =&gt; { res.send(&apos;未实现：删除作者的 POST&apos;); };

// 由 GET 显示更新作者的表单
exports.author_update_get = (req, res) =&gt; { res.send(&apos;未实现：作者更新表单的 GET&apos;); };

// 由 POST 处理作者更新操作
exports.author_update_post = (req, res) =&gt; { res.send(&apos;未实现：更新作者的 POST&apos;); };
</pre>

<p>该模块首先导入了用于访问和更新数据的模型，然后为每个需要处理（添加、更新和删除表单，以及相应的 POST 请求，稍后在 <a href="/zh-CN/docs/learn/Server-side/Express_Nodejs/forms">使用表单</a> 一节中讲解）的 URL 导出一个函数。</p>

<p>所有函数都遵循 Express 中间件函数的标准形式，三个参数依次为：请求 <code>req</code>、响应 <code>res</code>、当前方法无法完成请求循环时（这里不存在这种情况）调用的 <code>next</code> 函数。上述方法只返回一个字符串，显示相关页面尚未创建。接收路径参数的控制器函数可将参数输出到消息字符串中（代码中出现的 <code>req.params.id</code> ）。</p>

<h3 id="BookInstance、Genre、Book_控制器"><code>BookInstance</code>、<code>Genre</code>、<code>Book</code> 控制器</h3>

<p>这三个控制器与 <code>Author</code> 的模式完全相同，只是 <code>Book</code> 有一个用于显示站点欢迎页面的 <code>index()</code> 函数：</p>

<pre class="brush: js notranslate">// /controllers/bookController.js

const Book = require(&apos;../models/book&apos;);

<strong>exports.index = (req, res) =&gt; { res.send(&apos;未实现：站点首页&apos;); };
</strong>
...
</pre>

<h2 id="创建藏书编目_catalog_路由模组">创建藏书编目 <code>catalog</code> 路由模组</h2>

<p>定义好控制器后，我们来为 LocalLibrary 网站创建完整的 URL 路由。</p>

<p>站点骨架中有一个 <strong>./routes</strong> 文件夹，其中包含两个路由文件：index 和 user，在这里新建一个 <strong>catalog.js</strong> 路由文件，如下所示：</p>

<pre class="notranslate">/express-locallibrary-tutorial   // 项目根目录
  /routes
    index.js
    users.js
    <strong>catalog.js</strong></pre>

<div class="note notecard">
<p><strong>译注：</strong>可到 GitHub 下载完整的 <a href="https://raw.githubusercontent.com/roy-tian/mdn-examples/master/server/express-locallibrary-tutorial/routes/catalog.js">catalog.js</a>。</p>
</div>

<p><strong>/routes/</strong><strong>catalog.js</strong> 中有以下代码：</p>

<pre class="brush: js notranslate">const express = require(&apos;express&apos;);
const router = express.Router();<strong>
</strong>
// 导入控制器模块
const book_controller = require(&apos;../controllers/bookController&apos;);
const author_controller = require(&apos;../controllers/authorController&apos;);
const genre_controller = require(&apos;../controllers/genreController&apos;);
const book_instance_controller = require(&apos;../controllers/bookinstanceController&apos;);

/// 藏书路由 ///

// GET 获取藏书编目主页
router.get(&apos;/&apos;, book_controller.index);

// GET 请求添加新的藏书。注意此项必须位于显示藏书的路由（使用了 id）之前。
router.get(&apos;/book/create&apos;, book_controller.book_create_get);

// POST 请求添加新的藏书
router.post(&apos;/book/create&apos;, book_controller.book_create_post);

// GET 请求删除藏书
router.get(&apos;/book/:id/delete&apos;, book_controller.book_delete_get);

// POST 请求删除藏书
router.post(&apos;/book/:id/delete&apos;, book_controller.book_delete_post);

// GET 请求更新藏书
router.get(&apos;/book/:id/update&apos;, book_controller.book_update_get);

// POST 请求更新藏书
router.post(&apos;/book/:id/update&apos;, book_controller.book_update_post);

// GET 请求藏书
router.get(&apos;/book/:id&apos;, book_controller.book_detail);

// GET 请求完整藏书列表
router.get(&apos;/books&apos;, book_controller.book_list);

/// 藏书副本、藏书种类、作者的路由与藏书路由结构基本一致，只是无需获取主页 ///

module.exports = router;
</pre>

<p>该模块导入了 <code>express</code> 并创建了一个 <code>Router</code> 对象 <code>router</code>。所有路由都设置在 <code>router</code> 上，最后将其导出。</p>

<p>对 <code>router</code> 对象调用 <code>.get()</code> 或<code>.post()</code> 函数即可定义路由。这里所有路径都使用字符串定义（而不用字符串模式或正则表达式）。某些特定资源（如藏书）的路由使用路径参数从 URL 中获取对象标识。</p>

<p>处理函数均导入自上文的控制器模块。</p>

<h3 id="更新_index_路由模块">更新 index 路由模块</h3>

<p>新路由已经设置完毕，还需要设置一下 <code>index</code> 模块。我们将网站的首页重定向（<code>redirect</code>）至刚创建的地址 &apos;<code>/catalog</code>&apos;。</p>

<p>将 <strong>/routes/index.js</strong> 中的中间件修改一下：</p>

<pre class="brush: js notranslate">// GET 请求主页
router.get(&apos;/&apos;, (req, res) =&gt; {
  res.redirect(&apos;/catalog&apos;);
});</pre>

<div class="note">
<p><strong>注：</strong>这是我们第一次使用 <a href="https://expressjs.com/en/4x/api.html#res.redirect">redirect()</a> 响应方法。它会使路由重定向到指定的页面，默认发送 HTTP 状态代码“302 Found”。可以根据需要更改返回的状态代码、设置绝对或相对路径。</p>
</div>

<h3 id="更新_app.js">更新 app.js</h3>

<p>最后一步是在 <code>app.js</code> 中将路由添加到中间件链。</p>

<p>打开 <strong>app.js</strong>，在 <code>index</code> 和 <code>users</code> 路由下方添加 <code>catalog</code> 路由：</p>

<pre class="brush: js notranslate">const indexRouter = require(&apos;./routes/index&apos;);
const usersRouter = require(&apos;./routes/users&apos;);
<strong>const catalogRouter = require(&apos;./routes/catalog&apos;);  // 导入 catalog 路由</strong></pre>

<p>然后在已定义的路由下方将目录路由添加进中间件栈：</p>

<pre class="brush: js notranslate">app.use(&apos;/&apos;, indexRouter);
app.use(&apos;/users&apos;, usersRouter);
<strong>app.use(&apos;/catalog&apos;, catalogRouter);  // 将 catalog 路由添加进中间件链</strong></pre>

<div class="note">
<p><strong>注：</strong>我们将图书编目模块添加到了 <code>&apos;/catalog&apos;</code> 路径，该路径是 catalog 模块中所有路径的前缀。例如，访问藏书列表 的URL 为：<code>/catalog/books/</code>。</p>
</div>

<p>大功告成。LocalLibrary 网站所需的所有 URL 的路由和框架函数都已准备完毕。</p>

<h3 id="测试路由">测试路由</h3>

<p>要测试路由，先要启动网站</p>

<ul>
 <li>默认方法
  <pre class="brush: bash notranslate"><code>$ DEBUG=express-locallibrary-tutorial:* npm start</code>
</pre>
 </li>
 <li>如果设置过 <a href="/en-US/docs/Learn/Server-side/Express_Nodejs/skeleton_website">nodemon</a>，则可以使用：
  <pre class="brush: bash notranslate">$ DEBUG=express-locallibrary-tutorial:* npm <strong style="font-family: inherit; font-size: 1rem;">run devstart</strong>
</pre>
 </li>
</ul>

<div class="note notecard">
<p><strong>译注：</strong>以上命令只对 bash 有效，要在 Windows 上使用 bash，最简单的方法就是安装 Git。（详情参见 <a href="zh-CN/docs/Learn/Server-side/Express_Nodejs/skeleton_website#使用应用生成器">教程 2 相关译注</a>）</p>
</div>

<p>接下来浏览上面一些 URL，确保不会收到错误页面（HTTP 404）。可以尝试以下示例：</p>

<ul>
 <li><a href="http://localhost:3000/">http://localhost:3000/</a></li>
 <li><a href="http://localhost:3000/catalog">http://localhost:3000/catalog</a></li>
 <li><a href="http://localhost:3000/catalog/books">http://localhost:3000/catalog/books</a></li>
 <li><a href="http://localhost:3000/catalog/bookinstances/">http://localhost:3000/catalog/bookinstances</a></li>
 <li><a href="http://localhost:3000/catalog/authors/">http://localhost:3000/catalog/authors</a></li>
 <li><a href="http://localhost:3000/catalog/genres/">http://localhost:3000/catalog/genres</a></li>
 <li><a href="http://localhost:3000/catalog/book/5846437593935e2f8c2aa226/">http://localhost:3000/catalog/book/5846437593935e2f8c2aa226</a></li>
 <li><a href="http://localhost:3000/catalog/book/create">http://localhost:3000/catalog/book/create</a></li>
</ul>

<h2 id="小结">小结</h2>

<p>网站的路由已创建完毕，接下来的教程将把完整的实现填入控制器框架中。藉此来学习 Express 路由的基础知识，以及组织路由和控制器的一些方式。</p>

<p>下一节将使用视图 (模板) 和模型里的信息创建一个欢迎页面。</p>

<h2 id="另请参阅">另请参阅</h2>

<ul>
 <li><a href="http://www.expressjs.com.cn/starter/basic-routing.html">路由基础</a> (Express 官方文档)</li>
 <li><a href="http://expressjs.com/en/guide/routing.html">路由简介</a> (Express 官方文档)</li>
</ul>

<div class="prevnext">
  <a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/mongoose" class="button"><i class="icon-arrow-left"></i><span class="label"> 上一页 </span></a><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs" class="button"><i class="icon-arrow-up"></i> Overview: Express Nodejs</a><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/Displaying_data" class="button"><span class="label"> 下一页  </span><i class="icon-arrow-right"></i></a>
</div>

<h2 id="本章目录">本章目录</h2>

<ul>
 <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/Introduction">Express/Node 入门</a></li>
 <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/development_environment">设置 Node（Express）开发环境</a></li>
 <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/Tutorial_local_library_website">Express 教程：本地图书馆网站</a></li>
 <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/skeleton_website">Express 教程 2：创建站点框架</a></li>
 <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/mongoose">Express 教程 3：使用数据库（Mongoose）</a></li>
 <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/routes">Express 教程 4：路由和控制器</a></li>
 <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/Displaying_data">Express 教程 5：显示图书馆数据</a></li>
 <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/forms">Express 教程 6：使用表单</a></li>
 <li><a href="/zh-CN/docs/Learn/Server-side/Express_Nodejs/deployment">Express 教程 7：部署至生产环境</a></li>
</ul>
