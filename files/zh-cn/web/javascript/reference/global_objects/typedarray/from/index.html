---
title: TypedArray.from()
slug: Web/JavaScript/Reference/Global_Objects/TypedArray/from
tags:
  - from
  - 类型数组
translation_of: Web/JavaScript/Reference/Global_Objects/TypedArray/from
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects">JavaScript 标准库</a></strong></li><li><strong><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"><code>TypedArray</code></a></strong></li><li data-default-state="open"><a href="#"><strong>属性</strong></a><ol><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/BYTES_PER_ELEMENT"><code>TypedArray.BYTES_PER_ELEMENT</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/name"><code>TypedArray.name</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/buffer"><code>TypedArray.prototype.buffer</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/byteLength"><code>TypedArray.prototype.byteLength</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/byteOffset"><code>TypedArray.prototype.byteOffset</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/length"><code>TypedArray.prototype.length</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/@@species"><code>get TypedArray[@@species]</code></a></li></ol></li><li data-default-state="open"><a href="#"><strong>方法</strong></a><ol><li><em><code>TypedArray.from()</code></em></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/of"><code>TypedArray.of()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/copyWithin"><code>TypedArray.prototype.copyWithin()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/entries"><code>TypedArray.prototype.entries()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/every"><code>TypedArray.prototype.every()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/fill"><code>TypedArray.prototype.fill()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/filter"><code>TypedArray.prototype.filter()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/find"><code>TypedArray.prototype.find()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/findIndex"><code>TypedArray.prototype.findIndex()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/forEach"><code>TypedArray.prototype.forEach()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/includes"><code>TypedArray.prototype.includes()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/indexOf"><code>TypedArray.prototype.indexOf()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/join"><code>TypedArray.prototype.join()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/keys"><code>TypedArray.prototype.keys()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/lastIndexOf"><code>TypedArray.prototype.lastIndexOf()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/map"><code>TypedArray.prototype.map()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/reduce"><code>TypedArray.prototype.reduce()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/reduceRight"><code>TypedArray.prototype.reduceRight()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/reverse"><code>TypedArray.prototype.reverse()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/set"><code>TypedArray.prototype.set()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/slice"><code>TypedArray.prototype.slice()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/some"><code>TypedArray.prototype.some()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/sort"><code>TypedArray.prototype.sort()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/subarray"><code>TypedArray.prototype.subarray()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/toLocaleString"><code>TypedArray.prototype.toLocaleString()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/toString"><code>TypedArray.prototype.toString()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/values"><code>TypedArray.prototype.values()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/@@iterator"><code>TypedArray.prototype[@@iterator]()</code></a></li></ol></li><li><strong>Related pages:</strong></li><li><strong><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Int8Array"><code>Int8Array</code></a></strong></li><li><strong><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array"><code>Uint8Array</code></a></strong></li><li><strong><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray"><code>Uint8ClampedArray</code></a></strong></li><li><strong><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Int16Array"><code>Int16Array</code></a></strong></li><li><strong><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array"><code>Uint16Array</code></a></strong></li><li><strong><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Int32Array"><code>Int32Array</code></a></strong></li><li><strong><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array"><code>Uint32Array</code></a></strong></li><li><strong><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Float32Array"><code>Float32Array</code></a></strong></li><li><strong><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Float64Array"><code>Float64Array</code></a></strong></li><li><strong><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/BigInt64Array"><code>BigInt64Array</code></a></strong></li><li><strong><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/BigUint64Array"><code>BigUint64Array</code></a></strong></li><li><strong>继承</strong></li><li><strong><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function"><code>Function</code></a></strong></li><li><a href="#"><strong>属性</strong></a><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/arguments"><code>Function.arguments</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/caller"><code>Function.caller</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/displayName"><code>Function.displayName</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/length"><code>Function.length</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/name"><code>Function.name</code></a></li></ol></li><li><a href="#"><strong>方法</strong></a><ol><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply"><code>Function.prototype.apply()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind"><code>Function.prototype.bind()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call"><code>Function.prototype.call()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/toSource"><code>Function.prototype.toSource()</code></a></s></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/toString"><code>Function.prototype.toString()</code></a></li></ol></li><li><strong><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object"><code>Object</code></a></strong></li><li><a href="#"><strong>属性</strong></a><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/proto"><code>Object.prototype.__proto__</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/constructor"><code>Object.prototype.constructor</code></a></li></ol></li><li><a href="#"><strong>方法</strong></a><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/__defineGetter__"><code>Object.prototype.__defineGetter__()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/__defineSetter__"><code>Object.prototype.__defineSetter__()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/__lookupGetter__"><code>Object.prototype.__lookupGetter__()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/__lookupSetter__"><code>Object.prototype.__lookupSetter__()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty"><code>Object.prototype.hasOwnProperty()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/isPrototypeOf"><code>Object.prototype.isPrototypeOf()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/propertyIsEnumerable"><code>Object.prototype.propertyIsEnumerable()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toLocaleString"><code>Object.prototype.toLocaleString()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toSource"><code>Object.prototype.toSource()</code></a></s></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toString"><code>Object.prototype.toString()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/valueOf"><code>Object.prototype.valueOf()</code></a></li><li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf"><code>Object.setPrototypeOf()</code></a></li></ol></li></ol></section></div>

<p><code><strong><em>TypedArray</em>.from()</strong></code> 方法 从一个类数组或者可迭代对象中创建一个新<a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray#TypedArray_objects">类型数组</a>。 这个方法和 <a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/from"><code>Array.from()</code></a> 类似。</p>

<h2 id="语法">语法</h2>

<pre class="brush: js notranslate"><code><em>TypedArray</em>.from(source[, mapFn[, thisArg]])</code>
</pre>

<p>上面代码中的 <code>TypedArray</code> 需要替换为下面的任何一个构造函数：</p>

<div class="threecolumns">
<ul>
 <li>
  <p><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Int8Array"><code>Int8Array</code></a></p>
 </li>
 <li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array"><code>Uint8Array</code></a></li>
 <li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray"><code>Uint8ClampedArray</code></a></li>
 <li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Int16Array"><code>Int16Array</code></a></li>
 <li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array"><code>Uint16Array</code></a></li>
 <li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Int32Array"><code>Int32Array</code></a></li>
 <li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array"><code>Uint32Array</code></a></li>
 <li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Float32Array"><code>Float32Array</code></a></li>
 <li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Float64Array"><code>Float64Array</code></a></li>
 <li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/BigInt64Array"><code>BigInt64Array</code></a></li>
 <li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/BigUint64Array"><code>BigUint64Array</code></a></li>
</ul>
</div>

<h3 id="参数">参数</h3>

<dl>
 <dt><em><code>source</code></em></dt>
 <dd>想要转换为类型数组的类数组或者可迭代对象。</dd>
 <dt><em><code>mapFn</code></em></dt>
 <dd>可选参数。如果指定了该参数，则最后生成的类型数组会经过该函数的加工处理后再返回。</dd>
 <dt><em><code>thisArg</code></em></dt>
 <dd>可选参数。执行 <code>mapFn</code> 函数时 <code>this</code> 的值。</dd>
</dl>

<h3 id="返回值">返回值</h3>

<p>一个新的 <a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"><code>TypedArray</code></a> 实例。</p>

<h2 id="描述"> 描述</h2>

<p><code><em>TypedArray</em>.from()</code> 允许你从下面两者来创建数组:</p>

<ul>
 <li>类数组对象（拥有一个 <code>length</code> 属性和若干索引属性的任意对象）</li>
 <li><a href="/zh-CN/docs/Web/JavaScript/Guide/iterable">可迭代对象</a>（你可以从它身上迭代出若干个元素的对象，比如有 <a href="/zh-CN/docs/Web/JavaScript/Reference/Map"><code>Map</code></a> 和 <a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Set"><code>Set</code></a> 等）。</li>
</ul>

<p><code><em>TypedArray</em>.from()</code> 方法有一个可选参数 <code>mapFn</code>, 让你可以在最后生成的类型数组上再执行一次 <a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map"><code>map</code></a> 方法后再返回。也就是说以下两种形式是等价的：</p>

<ul>
 <li><code><em>TypedArray</em>.from(obj, mapFn, thisArg)</code> </li>
 <li><code><em>TypedArray</em>.from(Array.prototype.map.call(obj, mapFn, thisArg))</code></li>
</ul>

<p> <code>from()</code> 的 <code>length</code> 属性值为 <code>1</code>。</p>

<p><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/from"><code>Array.from()</code></a> 和 <code><em>TypedArray</em>.from()</code> 之间有一些微妙的区别:</p>

<ul>
 <li>如果 <code>|this|</code> 的值传递给 <code><em>TypedArray</em>.from</code> 不是一个构造器, <code><em>TypedArray</em>.from</code> 将抛出{jsxref(&quot;TypeError&quot;)}}, 而 <code>Array.from</code> 默认将创建一个 <a href="/zh-CN/docs/Web/JavaScript/Reference/Array"><code>Array</code></a>.</li>
 <li><code><em>TypedArray</em>.from</code> 使用<code>[Put]</code> 而 <code>rray.from</code> 使用<code>[DefineProperty]]</code>. 因此, 当和 <a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy"><code>Proxy</code></a> 对象一起时, 它调用 <a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/set"><code>handler.set</code></a> 创建一个新的元素而非 <a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/defineProperty"><code>handler.defineProperty</code></a>.</li>
 <li>当 <code>from</code> 获得一个迭代器时, <code><em>TypedArray</em></code> 一开始收集迭代器中的所有值， 此时创建一个 <code>|this|</code> 的实例用于计数, 然后在实例中设置值。 <code>Array.from</code> 设置每个从迭代器其中获取的值，最后设置它的长度。</li>
 <li>当 <code>Array.from</code> 获得一个不可迭代的类数组时, it respects holes, 而 <code><em>TypedArray</em>.from</code> 将确保结果是 dense.</li>
</ul>

<h2 id="示例">示例</h2>

<pre class="brush: js notranslate">// 使用 Set (可迭代对象)
var s = new Set([1, 2, 3]);
Uint8Array.from(s);
// Uint8Array [ 1, 2, 3 ]


// 使用字符串
Int16Array.from(&apos;123&apos;);
// Int16Array [ 1, 2, 3 ]


// 使用箭头函数对数组元素进行映射
Float32Array.from([1, 2, 3], x =&gt; x + x);
// Float32Array [ 2, 4, 6 ]


// 生成一个数字序列
Uint8Array.from({length: 5}, (v, k) =&gt; k);
// Uint8Array [ 0, 1, 2, 3, 4 ]
</pre>

<h2 id="Polyfill">Polyfill </h2>

<p>在不支持 <code>from()</code> 的环境中，你可以在你代码的起始位置插入以下代码，来实现对其功能的大部分支持。</p>

<pre class="brush: js notranslate">if (!Int8Array.__proto__.from) {
    (function () {
        Int8Array.__proto__.from = function (obj, func, thisObj) {

            var typedArrayClass = Int8Array.__proto__;
            if(typeof this !== &apos;function&apos;) {
                throw new TypeError(&apos;# is not a constructor&apos;);
            }
            if (this.__proto__ !== typedArrayClass) {
                throw new TypeError(&apos;this is not a typed array.&apos;);
            }

            func = func || function (elem) {
                    return elem;
                };

            if (typeof func !== &apos;function&apos;) {
                throw new TypeError(&apos;specified argument is not a function&apos;);
            }

            obj = Object(obj);
            if (!obj[&apos;length&apos;]) {
                return new this(0);
            }
            var copy_data = [];
            for(var i = 0; i &lt; obj.length; i++) {
                copy_data.push(obj[i]);
            }

            copy_data = copy_data.map(func, thisObj);

            var typed_array = new this(copy_data.length);
            for(var i = 0; i &lt; typed_array.length; i++) {
                typed_array[i] = copy_data[i];
            }
            return typed_array;
        }
    })();
}</pre>

<h2 id="规范">规范</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://www.ecma-international.org/ecma-262/6.0/#sec-%typedarray%.from" hreflang="en" lang="en">ECMAScript 2015 (6th Edition, ECMA-262)<br><small lang="zh-CN">%TypedArray%.from</small></a></td>
   <td><span class="spec-Standard">Standard</span></td>
   <td>Initial definition.</td>
  </tr>
  <tr>
   <td><a class="external" href="https://tc39.es/ecma262/#sec-%typedarray%.from" hreflang="en" lang="en">ECMAScript (ECMA-262)<br><small lang="zh-CN">%TypedArray%.from</small></a></td>
   <td><span class="spec-Living">Living Standard</span></td>
   <td></td>
  </tr>
 </tbody>
</table>

<h2 id="浏览器兼容性">浏览器兼容性</h2>

<div>
<div class="hidden">The compatibility table on this page is generated from structured data. If you&apos;d like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</div>

<div class="bc-data" id="bcd:javascript.builtins.TypedArray.from"></div>
</div>

<h2 id="另见">另见</h2>

<ul>
 <li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/of"><code>TypedArray.of()</code></a></li>
 <li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/from"><code>Array.from()</code></a></li>
 <li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map"><code>Array.prototype.map()</code></a></li>
</ul>
