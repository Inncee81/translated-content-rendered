---
title: IDBOpenDBRequest
slug: Web/API/IDBOpenDBRequest
translation_of: Web/API/IDBOpenDBRequest
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/IndexedDB_API">IndexedDB API</a></strong></li><li><strong><a href="/zh-CN/docs/Web/API/IDBOpenDBRequest"><code>IDBOpenDBRequest</code></a></strong></li><li class="toggle"><details open><summary>属性</summary><ol><li><a href="/zh-CN/docs/Web/API/IDBOpenDBRequest/onblocked"><code>onblocked</code></a> <a href="/zh-CN/docs/Web/API/IDBOpenDBRequest/onblocked$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBOpenDBRequest/onupgradeneeded"><code>onupgradeneeded</code></a> <a href="/zh-CN/docs/Web/API/IDBOpenDBRequest/onupgradeneeded$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>Events</summary><ol><li><a href="/zh-CN/docs/Web/API/IDBOpenDBRequest/blocked_event"><code>blocked</code></a> <a href="/zh-CN/docs/Web/API/IDBOpenDBRequest/blocked_event$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBOpenDBRequest/upgradeneeded_event"><code>upgradeneeded</code></a> <a href="/zh-CN/docs/Web/API/IDBOpenDBRequest/upgradeneeded_event$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>继承</summary><ol><li><a href="/zh-CN/docs/Web/API/IDBRequest"><code>IDBRequest</code></a></li><li><a href="/zh-CN/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li><li class="toggle"><details open><summary>Related pages for IndexedDB</summary><ol><li><a href="/zh-CN/docs/Web/API/IDBCursor"><code>IDBCursor</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBCursorSync"><code>IDBCursorSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBCursorWithValue"><code>IDBCursorWithValue</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBDatabase"><code>IDBDatabase</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBDatabaseException"><code>IDBDatabaseException</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBDatabaseSync"><code>IDBDatabaseSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBEnvironment"><code>IDBEnvironment</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBEnvironmentSync"><code>IDBEnvironmentSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBFactory"><code>IDBFactory</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBFactorySync"><code>IDBFactorySync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBIndex"><code>IDBIndex</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBIndexSync"><code>IDBIndexSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBKeyRange"><code>IDBKeyRange</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStoreSync"><code>IDBObjectStoreSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBRequest"><code>IDBRequest</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBTransaction"><code>IDBTransaction</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBTransactionSync"><code>IDBTransactionSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBVersionChangeEvent"><code>IDBVersionChangeEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBVersionChangeRequest"><code>IDBVersionChangeRequest</code></a></li></ol></details></li></ol></section>

<div>
<p>IndexedDB API 的 <strong><code>IDBOpenDBRequest</code></strong> 接口提供了访问打开或删除数据库的请求的结果（通过调用 <a href="/zh-CN/docs/Web/API/IDBFactory/open"><code>IDBFactory.open</code></a> and <a href="/zh-CN/docs/Web/API/IDBFactory/deleteDatabase"><code>IDBFactory.deleteDatabase</code></a>），途径就是使用特殊的事件处理器属性。</p>
</div>

<div class="note notecard"><strong>Note:</strong> 此特性在 <a href="/zh-CN/docs/Web/API/Web_Workers_API">Web Worker</a> 中可用。</div>

<div class="hidden" id="inheritance_diagram">

<pre class="brush: html notranslate">  &lt;div id=&quot;interfaceDiagram&quot; style=&quot;display: inline-block; position: relative; width: 100%; padding-bottom: 11.666666666666666%; vertical-align: middle; overflow: hidden;&quot;&gt;&lt;svg style=&quot;display: inline-block; position: absolute; top: 0; left: 0;&quot; viewbox=&quot;-50 0 600 70&quot; preserveAspectRatio=&quot;xMinYMin meet&quot;&gt;&lt;a xlink:href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget&quot; target=&quot;_top&quot;&gt;&lt;rect x=&quot;1&quot; y=&quot;1&quot; width=&quot;110&quot; height=&quot;50&quot; fill=&quot;#fff&quot; stroke=&quot;#D4DDE4&quot; stroke-width=&quot;2px&quot; /&gt;&lt;text  x=&quot;56&quot; y=&quot;30&quot; font-size=&quot;12px&quot; font-family=&quot;Consolas,Monaco,Andale Mono,monospace&quot; fill=&quot;#4D4E53&quot; text-anchor=&quot;middle&quot; alignment-baseline=&quot;middle&quot;&gt;EventTarget&lt;/text&gt;&lt;/a&gt;&lt;polyline points=&quot;111,25  121,20  121,30  111,25&quot; stroke=&quot;#D4DDE4&quot; fill=&quot;none&quot;/&gt;&lt;line x1=&quot;121&quot; y1=&quot;25&quot; x2=&quot;151&quot; y2=&quot;25&quot; stroke=&quot;#D4DDE4&quot;/&gt;&lt;a xlink:href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/API/IDBRequest&quot; target=&quot;_top&quot;&gt;&lt;rect x=&quot;151&quot; y=&quot;1&quot; width=&quot;100&quot; height=&quot;50&quot; fill=&quot;#fff&quot; stroke=&quot;#D4DDE4&quot; stroke-width=&quot;2px&quot; /&gt;&lt;text  x=&quot;201&quot; y=&quot;30&quot; font-size=&quot;12px&quot; font-family=&quot;Consolas,Monaco,Andale Mono,monospace&quot; fill=&quot;#4D4E53&quot; text-anchor=&quot;middle&quot; alignment-baseline=&quot;middle&quot;&gt;IDBRequest&lt;/text&gt;&lt;/a&gt;&lt;polyline points=&quot;251,25  261,20  261,30  251,25&quot; stroke=&quot;#D4DDE4&quot; fill=&quot;none&quot;/&gt;&lt;line x1=&quot;261&quot; y1=&quot;25&quot; x2=&quot;291&quot; y2=&quot;25&quot; stroke=&quot;#D4DDE4&quot;/&gt;&lt;a xlink:href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/API/IDBOpenDBRequest&quot; target=&quot;_top&quot;&gt;&lt;rect x=&quot;291&quot; y=&quot;1&quot; width=&quot;160&quot; height=&quot;50&quot; fill=&quot;#F4F7F8&quot; stroke=&quot;#D4DDE4&quot; stroke-width=&quot;2px&quot; /&gt;&lt;text  x=&quot;371&quot; y=&quot;30&quot; font-size=&quot;12px&quot; font-family=&quot;Consolas,Monaco,Andale Mono,monospace&quot; fill=&quot;#4D4E53&quot; text-anchor=&quot;middle&quot; alignment-baseline=&quot;middle&quot;&gt;IDBOpenDBRequest&lt;/text&gt;&lt;/a&gt;&lt;/svg&gt;&lt;/div&gt;
</pre>

<pre class="brush: css notranslate">  a:hover text { fill: #0095DD; pointer-events: all;}
</pre>

</div>

<iframe class="live-sample-frame inheritance-diagram-frame" frameborder="0" height="70" id="frame_inheritance_diagram" src="https://mdn.mozillademos.org/zh-CN/docs/Web/API/IDBOpenDBRequest$samples/inheritance_diagram?revision=1480490" width="600"></iframe>

<h2 id="Properties">Properties</h2>

<p><em>Also inherits methods from its parents <a href="/zh-CN/docs/Web/API/IDBRequest"><code>IDBRequest</code></a> and <a href="/zh-CN/docs/Web/API/EventTarget"><code>EventTarget</code></a></em>.</p>

<h3 id="Events">Events</h3>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/IDBOpenDBRequest/onblocked"><code>IDBOpenDBRequest.onblocked</code></a></dt>
 <dd>The event handler for the blocked event. This event is triggered when the <code>upgradeneeded</code> event should be triggered because of a version change but the database is still in use (i.e. not closed) somewhere, even after the <code>versionchange</code> event was sent.</dd>
 <dt><a href="/zh-CN/docs/Web/API/IDBOpenDBRequest/onupgradeneeded"><code>IDBOpenDBRequest.onupgradeneeded</code></a></dt>
 <dd><code>upgradeneeded</code> 事件的事件处理器，会在当一个数据库的版本比已经存在的版本还高的时候触发。</dd>
 <dt>
 <h2 id="Methods">Methods</h2>

 <p><em>No methods, but inherits methods from its parents <a href="/zh-CN/docs/Web/API/IDBRequest"><code>IDBRequest</code></a> and <a href="/zh-CN/docs/Web/API/EventTarget"><code>EventTarget</code></a>.</em></p>
 </dt>
</dl>

<h2 id="Example">Example</h2>

<p>In the following example you can see the onupgradeneeded handler being used to update the database structure if a database with a higher version number is loaded. For a full working example, see our <a class="external" href="https://github.com/mdn/to-do-notifications/tree/gh-pages">To-do Notifications</a> app (<a class="external" href="http://mdn.github.io/to-do-notifications/">view example live</a>.)</p>

<pre class="brush: js; highlight:[16,28,29,31,32,33,34,35,36] notranslate">var db;

// Let us open our database
var DBOpenRequest = window.indexedDB.open(&quot;toDoList&quot;, 4);

// these event handlers act on the database being opened.
DBOpenRequest.onerror = function(event) {
  note.innerHTML += &apos;&lt;li&gt;Error loading database.&lt;/li&gt;&apos;;
};

DBOpenRequest.onsuccess = function(event) {
  note.innerHTML += &apos;&lt;li&gt;Database initialised.&lt;/li&gt;&apos;;

  // store the result of opening the database in the db
  // variable. This is used a lot below
  db = DBOpenRequest.result;

  // Run the displayData() function to populate the task
  // listwith all the to-do list data already in the IDB
  displayData();
};

// This event handles the event whereby a new version of
// the database needs to be created Either one has not
// been created before, or a new version number has been
// submitted via the window.indexedDB.open line above
// it is only implemented in recent browsers
DBOpenRequest.onupgradeneeded = function(event) {
  var db = this.result;

  db.onerror = function(event) {
    note.innerHTML += &apos;&lt;li&gt;Error loading database.&lt;/li&gt;&apos;;
  };

  // Create an objectStore for this database
  var objectStore = db.createObjectStore(&quot;toDoList&quot;, { keyPath: &quot;taskTitle&quot; });

  // define what data items the objectStore will contain

  objectStore.createIndex(&quot;hours&quot;, &quot;hours&quot;, { unique: false });
  objectStore.createIndex(&quot;minutes&quot;, &quot;minutes&quot;, { unique: false });
  objectStore.createIndex(&quot;day&quot;, &quot;day&quot;, { unique: false });
  objectStore.createIndex(&quot;month&quot;, &quot;month&quot;, { unique: false });
  objectStore.createIndex(&quot;year&quot;, &quot;year&quot;, { unique: false });
  objectStore.createIndex(&quot;notified&quot;, &quot;notified&quot;, { unique: false });
};</pre>

<h2 id="Specifications">Specifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://www.w3.org/TR/IndexedDB/#idl-def-IDBOpenDBRequest" hreflang="en" lang="en">Indexed Database API 2.0<br><small lang="zh-CN">IDBOpenDBRequest</small></a></td>
   <td><span class="spec-REC">Recommendation</span></td>
   <td>Initial definition</td>
  </tr>
  <tr>
   <td><a class="external" href="https://w3c.github.io/IndexedDB/#idbopendbrequest" hreflang="en" lang="en">Indexed Database API Draft<br><small lang="zh-CN">IDBOpenDBRequest</small></a></td>
   <td><span class="spec-REC">Recommendation</span></td>
   <td> </td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<div>
<div class="hidden">The compatibility table on this page is generated from structured data. If you&apos;d like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</div>

<div class="bc-data" id="bcd:api.IDBOpenDBRequest"></div>
</div>

<h2 id="See_also">See also</h2>

<ul>
 <li><a href="/en-US/docs/Web/API/IndexedDB_API/Using_IndexedDB">Using IndexedDB</a></li>
 <li>Starting transactions: <a href="/zh-CN/docs/Web/API/IDBDatabase"><code>IDBDatabase</code></a></li>
 <li>Using transactions: <a href="/zh-CN/docs/Web/API/IDBTransaction"><code>IDBTransaction</code></a></li>
 <li>Setting a range of keys: <a href="/zh-CN/docs/Web/API/IDBKeyRange"><code>IDBKeyRange</code></a></li>
 <li>Retrieving and making changes to your data: <a href="/zh-CN/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a></li>
 <li>Using cursors: <a href="/zh-CN/docs/Web/API/IDBCursor"><code>IDBCursor</code></a></li>
 <li>Reference example: <a class="external" href="https://github.com/mdn/to-do-notifications/tree/gh-pages">To-do Notifications</a> (<a class="external" href="http://mdn.github.io/to-do-notifications/">view example live</a>.)</li>
</ul>
