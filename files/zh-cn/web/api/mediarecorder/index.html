---
title: MediaRecorder
slug: Web/API/MediaRecorder
translation_of: Web/API/MediaRecorder
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/MediaRecorder"><code>MediaRecorder</code></a></strong></li><li class="toggle"><details open><summary>Constructor</summary><ol><li><a href="/zh-CN/docs/Web/API/MediaRecorder/MediaRecorder"><code>MediaRecorder()</code></a></li></ol></details></li><li class="toggle"><details open><summary>属性</summary><ol><li><a href="/zh-CN/docs/Web/API/MediaRecorder/audioBitsPerSecond"><code>audioBitsPerSecond</code></a></li><li><a href="/zh-CN/docs/Web/API/MediaRecorder/ignoreMutedMedia"><code>ignoreMutedMedia</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/ignoreMutedMedia$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/MediaRecorder/mimeType"><code>mimeType</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/mimeType$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/MediaRecorder/ondataavailable"><code>ondataavailable</code></a></li><li><a href="/zh-CN/docs/Web/API/MediaRecorder/onerror"><code>onerror</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/onerror$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/MediaRecorder/onpause"><code>onpause</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/onpause$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/MediaRecorder/onresume"><code>onresume</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/onresume$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/MediaRecorder/onstart"><code>onstart</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/onstart$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/MediaRecorder/onstop"><code>onstop</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/onstop$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/MediaRecorder/onwarning"><code>onwarning</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/onwarning$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/MediaRecorder/state"><code>state</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/state$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/MediaRecorder/stream"><code>stream</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/stream$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>方法</summary><ol><li><a href="/zh-CN/docs/Web/API/MediaRecorder/isTypeSupported"><code>isTypeSupported</code></a></li><li><a href="/zh-CN/docs/Web/API/MediaRecorder/pause"><code>pause()</code></a></li><li><a href="/zh-CN/docs/Web/API/MediaRecorder/requestData"><code>requestData()</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/requestData$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/MediaRecorder/resume"><code>resume()</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/resume$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/MediaRecorder/start"><code>start()</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/start$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/MediaRecorder/stop"><code>stop()</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/stop$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>Events</summary><ol><li><a href="/zh-CN/docs/Web/API/MediaRecorder/error_event"><code>error</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/error_event$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>继承</summary><ol><li><a href="/zh-CN/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li></ol></section></div>

<p><strong><code>MediaRecorder</code></strong> 是 <a href="/en-US/docs/Web/API/MediaStream_Recording_API">MediaStream Recording API</a> 提供的用来进行媒体轻松录制的接口, 他需要通过调用 <a href="/zh-CN/docs/Web/API/MediaRecorder/MediaRecorder"><code>MediaRecorder()</code></a> 构造方法进行实例化.</p>

<h2 id="构造函数">构造函数</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/MediaRecorder"><code>MediaRecorder.MediaRecorder()</code></a></dt>
 <dd>    创建一个新的<code>MediaRecorder</code>对象,对指定的<a href="/zh-CN/docs/Web/API/MediaStream"><code>MediaStream</code></a> 对象进行录制,支持的配置项包括设置容器的MIME 类型 (例如<code>&quot;video/webm&quot;</code> 或者 <code>&quot;video/mp4&quot;</code>)和音频及视频的码率或者二者同用一个码率</dd>
 <dd></dd>
</dl>

<h2 id="配置项">配置项</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/mimeType"><code>MediaRecorder.mimeType</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>    返回 <code>MediaRecorder</code> 对象创建时选择器选择的录制容器的 MIME type</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/state"><code>MediaRecorder.state</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>    返回录制对象<code>MediaRecorder</code>  的当前状态(闲置中,录制中或者暂停 ) (<code>inactive</code>, <code>recording</code>, or <code>paused</code>.)</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/stream"><code>MediaRecorder.stream</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>    返回录制器对象 <code>MediaRecorder </code>创建时构造函数传入的stream对象</dd>
 <dd></dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/ignoreMutedMedia"><code>MediaRecorder.ignoreMutedMedia</code></a></dt>
 <dd></dd>
 <dd>    用以指定 <code>MediaRecorder</code>是否录制无声的输入源. 如果这个属性是false. 录制器对象<code>MediaRecorder</code>  会录制无声的音频或者黑屏的视频, 默认值是false</dd>
 <dd></dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/videoBitsPerSecond"><code>MediaRecorder.videoBitsPerSecond</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>返回视频采用的编码比率. 它可能和构造函数的设置比率不同.  (if it was provided).</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/audioBitsPerSecond"><code>MediaRecorder.audioBitsPerSecond</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>返回音频采用的编码比率,它可能和构造函数中设置的比率不同. (if it was provided).</dd>
 <dd></dd>
</dl>

<h2 id="方法">方法</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/canRecordMimeType"><code>MediaRecorder.isTypeSupported()</code></a></dt>
 <dd>返回一个<a href="/zh-CN/docs/Web/API/Boolean"><code>Boolean</code></a> 值,来表示设置的MIME type 是否被当前用户的设备支持.</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/pause"><code>MediaRecorder.pause()</code></a></dt>
 <dd>暂停媒体录制</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/requestData"><code>MediaRecorder.requestData()</code></a></dt>
 <dd>请求一个从开始到当前接收到的,存储为<a href="/zh-CN/docs/Web/API/Blob"><code>Blob</code></a>类型的录制内容. (或者是返回从上一次调用<code>requestData()</code> 方法之后到现在的内容).  调用这个方法后,录制将会继续进行,但是会创建一个新的<code>Blob</code>对象</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/resume"><code>MediaRecorder.resume()</code></a></dt>
 <dd>继续录制之前被暂停的录制动作.</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/start"><code>MediaRecorder.start()</code></a></dt>
 <dd>开始录制媒体,这个方法调用时可以通过给<code>timeslice</code>参数设置一个毫秒值,如果设置这个毫秒值,那么录制的媒体会按照你设置的值进行分割成一个个单独的区块, 而不是以默认的方式录制一个非常大的整块内容.</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/stop"><code>MediaRecorder.stop()</code></a></dt>
 <dd>停止录制. 同时触发<code><a href="/zh-CN/docs/Web/Reference/Events/dataavailable" title="/zh-CN/docs/Web/Reference/Events/dataavailable">dataavailable</a></code>事件,返回一个存储<code>Blob</code>内容的录制数据.之后不再记录</dd>
 <dd></dd>
</dl>

<h2 id="静态方法">静态方法</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/isTypeSupported"><code>MediaRecorder.isTypeSupported()</code></a></dt>
 <dd>静态方法，判断给定的MIME类型是否支持。返回<a href="/zh-CN/docs/Web/API/Boolean"><code>Boolean</code></a>类型的值。</dd>
 <dt></dt>
</dl>

<h2 id="事件处理">事件处理</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/ondataavailable"><code>MediaRecorder.ondataavailable</code></a></dt>
 <dd>调用它用来处理 <code><a href="/zh-CN/docs/Web/Reference/Events/dataavailable" title="/zh-CN/docs/Web/Reference/Events/dataavailable">dataavailable</a></code> 事件, 该事件可用于获取录制的媒体资源 (在事件的 <code>data</code> 属性中会提供一个可用的 <a href="/zh-CN/docs/Web/API/Blob"><code>Blob</code></a> 对象.)</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/onerror"><code>MediaRecorder.onerror</code></a></dt>
 <dd>An <a href="/zh-CN/docs/Web/API/EventHandler"><code>EventHandler</code></a> called to handle the <code><a href="/zh-CN/docs/Web/Reference/Events/recordingerror" title="/zh-CN/docs/Web/Reference/Events/recordingerror">recordingerror</a></code> event, including reporting errors that arise with media recording. These are fatal errors that stop recording.</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/onpause"><code>MediaRecorder.onpause</code></a></dt>
 <dd>用来处理 <code><a href="/zh-CN/docs/Web/Reference/Events/pause" title="/zh-CN/docs/Web/Reference/Events/pause">pause</a></code> 事件, 该事件在媒体暂停录制时触发（<a href="/zh-CN/docs/Web/API/MediaRecorder/pause"><code>MediaRecorder.pause()</code></a>）.</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/onresume"><code>MediaRecorder.onresume</code></a></dt>
 <dd>用来处理 <code><a href="/zh-CN/docs/Web/Reference/Events/resume" title="/zh-CN/docs/Web/Reference/Events/resume">resume</a></code> 事件, 该事件在暂停后回复录制视频时触发（<a href="/zh-CN/docs/Web/API/MediaRecorder/resume"><code>MediaRecorder.resume()</code></a>）.</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/onstart"><code>MediaRecorder.onstart</code></a></dt>
 <dd>用来处理 <code><a href="/zh-CN/docs/Web/Reference/Events/start" title="/zh-CN/docs/Web/Reference/Events/start">start</a></code> 事件, 该事件在媒体开始录制时触发（<a href="/zh-CN/docs/Web/API/MediaRecorder/start"><code>MediaRecorder.start()</code></a>）.</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaRecorder/onstop"><code>MediaRecorder.onstop</code></a></dt>
 <dd>用来处理 <code><a href="/zh-CN/docs/Web/Reference/Events/stop" title="/zh-CN/docs/Web/Reference/Events/stop">stop</a></code> 事件, 该事件会在媒体录制结束时、媒体流（<a href="/zh-CN/docs/Web/API/MediaStream"><code>MediaStream</code></a>）结束时、或者调用<a href="/zh-CN/docs/Web/API/MediaRecorder/stop"><code>MediaRecorder.stop()</code></a> 方法后触发.</dd>
</dl>

<h2 id="事件">事件</h2>

<p>Listen to these events using <code>addEventListener()</code> or by assigning an event listener to the <code>on<em>eventname</em></code> property of this interface.</p>

<dl>
 <dt><code><a href="https://wiki.developer.mozilla.org/en-US/docs/Web/API/MediaRecorder/error_event">error</a></code></dt>
 <dd>Fired when an error occurs: for example because recording wasn&apos;t allowed or was attempted using an unsupported codec.<br>
 Also available via the <code><a href="https://wiki.developer.mozilla.org/en-US/docs/Web/API/MediaRecorder/onerror">onerror</a></code> property.</dd>
 <dt></dt>
</dl>

<h2 id="例子">例子</h2>

<pre>if (navigator.mediaDevices) {
  console.log(&apos;getUserMedia supported.&apos;);

  var constraints = { audio: true };
  var chunks = [];

  navigator.mediaDevices.getUserMedia(constraints)
  .then(function(stream) {

    var mediaRecorder = new MediaRecorder(stream);

    visualize(stream);

    record.onclick = function() {
      mediaRecorder.start();
      console.log(mediaRecorder.state);
      console.log(&quot;recorder started&quot;);
      record.style.background = &quot;red&quot;;
      record.style.color = &quot;black&quot;;
    }

    stop.onclick = function() {
      mediaRecorder.stop();
      console.log(mediaRecorder.state);
      console.log(&quot;recorder stopped&quot;);
      record.style.background = &quot;&quot;;
      record.style.color = &quot;&quot;;
    }

    mediaRecorder.onstop = function(e) {
      console.log(&quot;data available after MediaRecorder.stop() called.&quot;);

      var clipName = prompt(&apos;Enter a name for your sound clip&apos;);

      var clipContainer = document.createElement(&apos;article&apos;);
      var clipLabel = document.createElement(&apos;p&apos;);
      var audio = document.createElement(&apos;audio&apos;);
      var deleteButton = document.createElement(&apos;button&apos;);

      clipContainer.classList.add(&apos;clip&apos;);
      audio.setAttribute(&apos;controls&apos;, &apos;&apos;);
      deleteButton.innerHTML = &quot;Delete&quot;;
      clipLabel.innerHTML = clipName;

      clipContainer.appendChild(audio);
      clipContainer.appendChild(clipLabel);
      clipContainer.appendChild(deleteButton);
      soundClips.appendChild(clipContainer);

      audio.controls = true;
      var blob = new Blob(chunks, { &apos;type&apos; : &apos;audio/ogg; codecs=opus&apos; });
      chunks = [];
      var audioURL = URL.createObjectURL(blob);
      audio.src = audioURL;
      console.log(&quot;recorder stopped&quot;);

      deleteButton.onclick = function(e) {
        evtTgt = e.target;
        evtTgt.parentNode.parentNode.removeChild(evtTgt.parentNode);
      }
    }

    mediaRecorder.ondataavailable = function(e) {
      chunks.push(e.data);
    }
  })
  .catch(function(err) {
    console.log(&apos;The following error occured: &apos; + err);
  })
}

</pre>

<div class="note">
<p>This code sample is inspired by the Web Dictaphone demo. Some lines have been omitted for brevity; <a href="https://github.com/mdn/web-dictaphone/">refer to the source</a> for the complete code.</p>
</div>

<h2 id="Specifications">Specifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://w3c.github.io/mediacapture-record/#MediaRecorderAPI" hreflang="en" lang="en">MediaStream Recording</a></td>
   <td><span class="spec-WD">Working Draft</span></td>
   <td>Initial definition</td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/zh-CN/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Desktop</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>47.0</td>
   <td><a href="/en-US/Firefox/Releases/25">25.0</a> (25.0)</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android Webview</th>
   <th>Chrome for Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS</th>
   <th>IE Phone</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>47.0</td>
   <td>47.0</td>
   <td><a href="/en-US/Firefox/Releases/25">25.0</a> (25.0)</td>
   <td>1.3<sup>[1]</sup></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
 </tbody>
</table>
</div>

<ul>
 <li>[1] The initial Firefox OS implementation only supported audio recording.</li>
</ul>

<h2 id="See_also">See also</h2>

<ul>
 <li><a href="/en-US/docs/Web/API/MediaRecorder_API/Using_the_MediaRecorder_API">Using the MediaRecorder API</a></li>
 <li><a href="https://mdn.github.io/web-dictaphone/">Web Dictaphone</a>: MediaRecorder + getUserMedia + Web Audio API visualization demo, by <a href="https://twitter.com/chrisdavidmills">Chris Mills</a> (<a href="https://github.com/mdn/web-dictaphone/">source on Github</a>.)</li>
 <li><a href="/en-US/docs/Web/API/MediaStream_Recording_API/Recording_a_media_element">Recording a media element</a></li>
 <li><a href="https://simpl.info/mediarecorder/">simpl.info MediaStream Recording demo</a>, by <a href="https://twitter.com/sw12">Sam Dutton</a>.</li>
 <li><a href="/zh-CN/docs/Web/API/Navigator/mediaDevices/getUserMedia"><code>navigator.mediaDevices.getUserMedia</code></a></li>
 <li><a href="https://www.fingerspell.org/">FingerSpell</a>: Sign Language Fingerspelling practice using MediaDevices and the MediaStream Recording API to create and download recordings, MediaRecorder API supported desktop browsers only (<a href="https://github.com/chrisjohndigital/CameraCaptureJS">source on GitHub</a>)</li>
</ul>
