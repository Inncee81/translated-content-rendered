---
title: MediaRecorder.ondataavailable
slug: Web/API/MediaRecorder/ondataavailable
translation_of: Web/API/MediaRecorder/ondataavailable
---
<p><font><font></font></font></p><section class="Quick_links" id="Quick_Links"><ol><li><font><font><strong><a href="/zh-CN/docs/Web/API/MediaStream_Recording_API">MediaStream Recording API</a></strong></font></font></li><li><font><font><strong><a href="/zh-CN/docs/Web/API/MediaRecorder"><code>MediaRecorder</code></a></strong></font></font></li><li class="toggle"><details open><summary><font><font>Constructor</font></font></summary><ol><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/MediaRecorder"><code>MediaRecorder()</code></a></font></font></li></ol></details></li><li class="toggle"><details open><summary><font><font>属性</font></font></summary><ol><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/audioBitsPerSecond"><code>audioBitsPerSecond</code></a></font></font></li><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/ignoreMutedMedia"><code>ignoreMutedMedia</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/ignoreMutedMedia$translate" style="opacity: 0.5;">[我来译!]</a></font></font></li><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/mimeType"><code>mimeType</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/mimeType$translate" style="opacity: 0.5;">[我来译!]</a></font></font></li><li><font><font><em><code>ondataavailable</code></em></font></font></li><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/onerror"><code>onerror</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/onerror$translate" style="opacity: 0.5;">[我来译!]</a></font></font></li><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/onpause"><code>onpause</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/onpause$translate" style="opacity: 0.5;">[我来译!]</a></font></font></li><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/onresume"><code>onresume</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/onresume$translate" style="opacity: 0.5;">[我来译!]</a></font></font></li><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/onstart"><code>onstart</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/onstart$translate" style="opacity: 0.5;">[我来译!]</a></font></font></li><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/onstop"><code>onstop</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/onstop$translate" style="opacity: 0.5;">[我来译!]</a></font></font></li><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/onwarning"><code>onwarning</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/onwarning$translate" style="opacity: 0.5;">[我来译!]</a></font></font></li><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/state"><code>state</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/state$translate" style="opacity: 0.5;">[我来译!]</a></font></font></li><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/stream"><code>stream</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/stream$translate" style="opacity: 0.5;">[我来译!]</a></font></font></li></ol></details></li><li class="toggle"><details open><summary><font><font>方法</font></font></summary><ol><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/isTypeSupported"><code>isTypeSupported</code></a></font></font></li><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/pause"><code>pause()</code></a></font></font></li><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/requestData"><code>requestData()</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/requestData$translate" style="opacity: 0.5;">[我来译!]</a></font></font></li><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/resume"><code>resume()</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/resume$translate" style="opacity: 0.5;">[我来译!]</a></font></font></li><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/start"><code>start()</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/start$translate" style="opacity: 0.5;">[我来译!]</a></font></font></li><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/stop"><code>stop()</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/stop$translate" style="opacity: 0.5;">[我来译!]</a></font></font></li></ol></details></li><li class="toggle"><details open><summary><font><font>Events</font></font></summary><ol><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorder/error_event"><code>error</code></a> <a href="/zh-CN/docs/Web/API/MediaRecorder/error_event$translate" style="opacity: 0.5;">[我来译!]</a></font></font></li></ol></details></li><li class="toggle"><details open><summary><font><font>继承</font></font></summary><ol><li><font><font><a href="/zh-CN/docs/Web/API/EventTarget"><code>EventTarget</code></a></font></font></li></ol></details></li><li class="toggle"><details open><summary><font><font>Related pages for MediaStream Recording</font></font></summary><ol><li><font><font><a href="/zh-CN/docs/Web/API/BlobEvent"><code>BlobEvent</code></a></font></font></li><li><font><font><a href="/zh-CN/docs/Web/API/MediaRecorderErrorEvent"><code>MediaRecorderErrorEvent</code></a></font></font></li></ol></details></li></ol></section>

<p><strong><code>MediaRecorder.ondataavailable </code></strong><font><font>事件处理程序(</font></font>part of the <a href="/en-US/docs/Web/API/MediaStream_Recording_API"><font><font>MediaStream记录API</font></font></a><font><font>)处理{{</font></font>event(&quot;<font><font>dataavailable&quot;)}}事件，让您在响应运行代码<a href="/zh-CN/docs/Web/API/&lt;/font&gt;&lt;/font&gt;Blob&lt;font&gt;&lt;font&gt;"><code></code></a></font></font><a href="/zh-CN/docs/Web/API/&lt;/font&gt;&lt;/font&gt;Blob&lt;font&gt;&lt;font&gt;"><code>Blob<font><font></font></font></code></a><font><font>数据被提供使用。</font></font></p>

<p><code>dataavailable</code><font><font>当MediaRecorder将媒体数据传递到您的应用程序以供使用时，将触发</font><font>该</font><font>事件。</font><font>数据在包含数据的<a href="/zh-CN/docs/Web/API/Blob"><code>Blob</code></a>对象中提供。</font><font>这在四种情况下发生：</font></font></p>

<ul>
 <li><font><font>媒体流结束时，所有尚未传递到</font></font><code>ondataavailable</code><font><font>处理程序的</font><font>媒体数据都将在单个<a href="/zh-CN/docs/Web/API/Blob"><code>Blob</code></a>中传递。</font></font></li>
 <li><font><font>当调用<a href="/zh-CN/docs/Web/API/MediaRecorder/stop"><code>MediaRecorder.stop()</code></a>时，自记录开始或</font></font><code>dataavailable</code><font><font>事件</font><font>最后一次</font><font>发生</font><font>以来已捕获的所有媒体数据</font><font>都将传递到<a href="/zh-CN/docs/Web/API/Blob"><code>Blob</code></a>}中；</font><font>此后，捕获结束。</font></font></li>
 <li><font><font>调用<a href="/zh-CN/docs/Web/API/MediaRecorder/requestData"><code>MediaRecorder.requestData()</code></a> </font></font><code>dataavailable</code><font><font>时，将传递</font><font>自记录开始或</font><font>事件</font><font>最后一次</font><font>发生</font><font>以来捕获的所有媒体数据</font><font>；</font><font>然后</font></font><code>Blob</code><font><font>创建</font><font>一个新文件</font><font>，并将媒体捕获继续到该blob中。</font></font></li>
 <li><font><font>如果将</font></font><code>timeslice</code><font><font>属性传递到开始媒体捕获的<a href="/zh-CN/docs/Web/API/MediaRecorder/start"><code>MediaRecorder.start()</code></a>方法中，</font></font><code>dataavailable</code><font><font>则每</font></font><code>timeslice</code><font><font>毫秒</font><font>触发一次事件</font><font>。</font><font>这意味着每个Blob都有特定的持续时间（最后一个Blob除外，后者可能更短，因为它将是自上次事件以来剩下的所有东西）。</font><font>因此，如果该方法调用看起来像这样- </font></font><code>recorder.start(1000);</code><font><font>-的</font></font><code>dataavailable</code><font><font>事件将媒体捕捉的每一秒发生火灾后，我们的事件处理程序将被称为与媒体数据的BLOB每秒即坚持一个第二长。</font><font>您可以</font></font><code>timeslice</code><font><font>与<a href="/zh-CN/docs/Web/API/MediaRecorder/stop"><code>MediaRecorder.stop()</code></a>}和<a href="/zh-CN/docs/Web/API/MediaRecorder/requestData"><code>MediaRecorder.requestData()</code></a>}一起使用，以产生多个相同长度的Blob，以及其他较短的Blob。</font></font></li>
</ul>

<div class="note notecard">
<p><font><font>包含媒体数据的<a href="/zh-CN/docs/Web/API/Blob"><code>Blob</code></a>在<code><a href="/zh-CN/docs/Web/Reference/Events/dataavailable" title="/zh-CN/docs/Web/Reference/Events/dataavailable">dataavailable</a></code>事件的</font></font><code>data</code><font><font>属性中</font><font>可用</font><font>。</font></font></p>
</div>

<h2 id="句法"><font><font>句法</font></font></h2>

<pre class="notranslate"><em>MediaRecorder</em>.ondataavailable = function(event) { ... }
<em>MediaRecorder</em>.addEventListener(&apos;dataavailable&apos;, function(event) { ... })</pre>

<h2 id="例"><font><font>例</font></font></h2>

<pre id="line1">...
  var chunks = [];

  mediaRecorder.onstop = function(e) {
    console.log(&quot;data available after MediaRecorder.stop() called.&quot;);

    var audio = document.createElement(&apos;audio&apos;);
    audio.controls = true;
    var blob = new Blob(chunks, { &apos;type&apos; : &apos;audio/ogg; codecs=opus&apos; });
    var audioURL = window.URL.createObjectURL(blob);
    audio.src = audioURL;
    console.log(&quot;录像停止&quot;);
  }

  mediaRecorder.ondataavailable = function(e) {
    chunks.push(e.data);
  }

...</pre>

<h2 id="技术指标"><font><font>技术指标</font></font></h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col"><font><font>规范</font></font></th>
   <th scope="col"><font><font>状态</font></font></th>
   <th scope="col"><font><font>评论</font></font></th>
  </tr>
  <tr>
   <td><a class="external" href="https://w3c.github.io/mediacapture-record/#dom-mediarecorder-ondataavailable" hreflang="en" lang="en">MediaStream Recording<br><small lang="zh-CN">MediaRecorder.ondataavailable</small></a></td>
   <td><span class="spec-WD">Working Draft</span></td>
   <td><font><font>初始定义</font></font></td>
  </tr>
 </tbody>
</table>

<h2 id="浏览器兼容性"><font><font>浏览器兼容性</font></font></h2>

<div class="hidden"><font><font>此页面中的兼容性表是根据结构化数据生成的。</font><font>如果您想贡献数据，请查看</font></font><a href="https://github.com/mdn/browser-compat-data"><font><font>https://github.com/mdn/browser-compat-data</font></font></a><font><font>并向我们​​发送请求请求。</font></font></div>

<p><font><font></font></font></p><div class="bc-data" id="bcd:api.MediaRecorder.ondataavailable"></div>

<h2 id="也可以看看"><font><font>也可以看看</font></font></h2>

<ul>
 <li><a href="/en-US/docs/Web/API/MediaStream_Recording_API"><font><font>使用MediaStream录制API</font></font></a></li>
 <li><a href="http://mdn.github.io/web-dictaphone/"><font><font>Web</font></font></a><font><font> Dictaphone：</font></font><a href="https://twitter.com/chrisdavidmills"><font><font>Chris Mills提供的</font></font></a><font><font> MediaRecorder + getUserMedia + Web Audio API可视化演示(</font></font><font><font><a href="https://github.com/mdn/web-dictaphone/">在Github上提供</a>)</font></font><font><font>。</font></font></li>
 <li><a href="http://simpl.info/mediarecorder/"><font><font>simpl.info MediaStream录制演示</font></font></a><font><font>，作者</font></font><a href="https://twitter.com/sw12"><font><font>Sam Dutton</font></font></a><font><font>。</font></font></li>
 <li><font><font><a href="/zh-CN/docs/Web/API/Navigator/getUserMedia"><code>Navigator.getUserMedia</code></a></font></font></li>
</ul>
