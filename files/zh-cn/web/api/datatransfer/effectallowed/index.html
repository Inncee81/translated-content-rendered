---
title: DataTransfer.effectAllowed
slug: Web/API/DataTransfer/effectAllowed
translation_of: Web/API/DataTransfer/effectAllowed
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/HTML_Drag_and_Drop_API">HTML Drag and Drop API</a></strong></li><li><strong><a href="/zh-CN/docs/Web/API/DataTransfer"><code>DataTransfer</code></a></strong></li><li class="toggle"><details open><summary>Constructor</summary><ol><li><a href="/zh-CN/docs/Web/API/DataTransfer/DataTransfer"><code>DataTransfer()</code></a></li></ol></details></li><li class="toggle"><details open><summary>属性</summary><ol><li><a href="/zh-CN/docs/Web/API/DataTransfer/dropEffect"><code>dropEffect</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/DataTransfer/dropEffect$translate">[我来译!]</a></li><li><em><code>effectAllowed</code></em></li><li><a href="/zh-CN/docs/Web/API/DataTransfer/files"><code>files</code></a></li><li><a href="/zh-CN/docs/Web/API/DataTransfer/items"><code>items</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/DataTransfer/items$translate">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/mozCursor"><code>mozCursor</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/DataTransfer/mozCursor$translate">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/mozItemCount"><code>mozItemCount</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/DataTransfer/mozItemCount$translate">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/mozSourceNode"><code>mozSourceNode</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/DataTransfer/mozSourceNode$translate">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/mozUserCancelled"><code>mozUserCancelled</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/DataTransfer/mozUserCancelled$translate">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/DataTransfer/types"><code>types</code></a></li></ol></details></li><li class="toggle"><details open><summary>方法</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/addElement"><code>addElement()</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/DataTransfer/addElement$translate">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/DataTransfer/clearData"><code>clearData()</code></a></li><li><a href="/zh-CN/docs/Web/API/DataTransfer/getData"><code>getData()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/mozClearDataAt"><code>mozClearDataAt()</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/DataTransfer/mozClearDataAt$translate">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/mozGetDataAt"><code>mozGetDataAt()</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/DataTransfer/mozGetDataAt$translate">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/mozSetDataAt"><code>mozSetDataAt()</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/DataTransfer/mozSetDataAt$translate">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/mozTypesAt"><code>mozTypesAt()</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/DataTransfer/mozTypesAt$translate">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/DataTransfer/setData"><code>setData()</code></a></li><li><a href="/zh-CN/docs/Web/API/DataTransfer/setDragImage"><code>setDragImage()</code></a></li></ol></details></li><li class="toggle"><details open><summary>Events</summary><ol><li><a href="/zh-CN/docs/Web/Events/dragstart"><code>dragstart</code></a></li><li><a href="/zh-CN/docs/Web/Events/drag"><code>drag</code></a></li><li><a href="/zh-CN/docs/Web/Events/dragenter"><code>dragenter</code></a></li><li><a href="/zh-CN/docs/Web/Events/dragexit"><code>dragexit</code></a></li><li><a href="/zh-CN/docs/Web/Events/dragleave"><code>dragleave</code></a></li><li><a href="/zh-CN/docs/Web/Events/dragover"><code>dragover</code></a></li><li><a href="/zh-CN/docs/Web/Events/drop"><code>drop</code></a></li><li><a href="/zh-CN/docs/Web/Events/dragend"><code>dragend</code></a></li></ol></details></li><li class="toggle"><details open><summary>Related pages for HTML Drag and Drop API</summary><ol><li><a href="/zh-CN/docs/Web/API/DataTransferItem"><code>DataTransferItem</code></a></li><li><a href="/zh-CN/docs/Web/API/DataTransferItemList"><code>DataTransferItemList</code></a></li><li><a href="/zh-CN/docs/Web/API/DragEvent"><code>DragEvent</code></a></li></ol></details></li></ol></section></div>

<p><strong><code>DataTransfer.effectAllowed</code></strong> 属性指定拖放操作所允许的一个效果。<em>copy</em> 操作用于指示被拖动的数据将从当前位置复制到放置位置。<em>move操作用于指定被拖动的数据将被移动。 link</em>操作用于指示将在源和放置位置之间创建某种形式的关系或连接。</p>

<p>应该在<code><a href="/zh-CN/docs/Web/Reference/Events/dragstart" title="/zh-CN/docs/Web/Reference/Events/dragstart">dragstart</a></code>事件中设置此属性，以便为拖动源设置所需的拖动效果。在 <code><a href="/zh-CN/docs/Web/Reference/Events/dragenter" title="/zh-CN/docs/Web/Reference/Events/dragenter">dragenter</a></code> 和<code><a href="/zh-CN/docs/Web/Reference/Events/dragover" title="/zh-CN/docs/Web/Reference/Events/dragover">dragover</a></code> 事件处理程序中，该属性将设置为在<code><a href="/zh-CN/docs/Web/Reference/Events/dragstart" title="/zh-CN/docs/Web/Reference/Events/dragstart">dragstart</a></code> 事件期间分配的任何值，因此，可以使用<code>effectAllowed</code>来确定允许哪个效果。</p>

<p>给<code>effectAllowed</code>赋一个值，以使其在除<code><a href="/zh-CN/docs/Web/Reference/Events/dragstart" title="/zh-CN/docs/Web/Reference/Events/dragstart">dragstart</a></code> 之外的事件中无效。</p>

<h2 id="语法">语法</h2>

<pre class="syntaxbox"><var>dataTransfer</var>.effectAllowed;
</pre>

<h3 id="值">值</h3>

<p>表示允许的拖动操作<a href="/zh-CN/docs/Web/API/DOMString" title="DOMString 是一个UTF-16字符串。由于JavaScript已经使用了这样的字符串，所以DOMString 直接映射到 一个String。"><code>DOMString</code></a> 。这个可能值是：</p>

<dl>
 <dt>none</dt>
 <dd>此项表示不允许放下</dd>
 <dt>copy</dt>
 <dd>源项目的复制项可能会出现在新位置。</dd>
 <dt>copyLink</dt>
 <dd>允许 <em>copy</em> 或者 <em>link</em> 操作。</dd>
 <dt>copyMove</dt>
 <dd>允许 <em>copy</em> 或者 <em>move</em> 操作。</dd>
 <dt>link</dt>
 <dd>可以在新地方建立与源的链接。</dd>
 <dt>linkMove</dt>
 <dd>允许 <em>link</em> 或者 <em>move</em> 操作。</dd>
 <dt>move</dt>
 <dd>一个项目可能被移动到新位置。</dd>
 <dt>all</dt>
 <dd>允许所有的操作。</dd>
 <dt>uninitialized</dt>
 <dd>效果没有设置时的默认值，则等同于 <em>all</em>。</dd>
</dl>

<p>分配一个没有效果的其他值给 <code>effectAllowed</code>，则保留原值。</p>

<p>Internet Explorer 会将该值改为小写。因此，<code>linkMove</code>将会变为<code>linkmove</code> ，等等。</p>

<h2 id="举个例子">举个例子</h2>

<p>此例子展示 <code>effectAllowed</code> 用法 和 <a href="/zh-CN/docs/Web/API/DataTransfer/dropEffect" title="此页面仍未被本地化, 期待您的翻译!"><code>dropEffect</code></a> 属性</p>

<pre class="brush: js">&lt;!DOCTYPE html&gt;
&lt;html lang=en&gt;
&lt;title&gt;Examples of DataTransfer.{dropEffect,effectAllowed} properties&lt;/title&gt;
&lt;meta content=&quot;width=device-width&quot;&gt;
&lt;style&gt;
  div {
    margin: 0em;
    padding: 2em;
  }
  #source {
    color: blue;
    border: 1px solid black;
  }
  #target {
    border: 1px solid black;
  }
&lt;/style&gt;
&lt;script&gt;
function dragstart_handler(ev) {
 console.log(&quot;dragStart: dropEffect = &quot; + ev.dataTransfer.dropEffect + &quot; ; effectAllowed = &quot; + ev.dataTransfer.effectAllowed);
 <code>// 将这个元素的id添加到drag载荷中，
 // 以便drop事件知道将哪个元素添加到其树中。</code>
 ev.dataTransfer.setData(&quot;text&quot;, ev.target.id);
 ev.dataTransfer.effectAllowed = &quot;move&quot;;
}

function drop_handler(ev) {
 console.log(&quot;drop: dropEffect = &quot; + ev.dataTransfer.dropEffect + &quot; ; effectAllowed = &quot; + ev.dataTransfer.effectAllowed);
 ev.preventDefault();
 <code>// 得到目标的id并且将移动的元素添加到目标DOM中</code>
 var data = ev.dataTransfer.getData(&quot;text&quot;);
 ev.target.appendChild(document.getElementById(data));
}

function dragover_handler(ev) {
 console.log(&quot;dragOver: dropEffect = &quot; + ev.dataTransfer.dropEffect + &quot; ; effectAllowed = &quot; + ev.dataTransfer.effectAllowed);
 ev.preventDefault();
 // 设置 dropEffect 为 move
 ev.dataTransfer.dropEffect = &quot;move&quot;
}
&lt;/script&gt;
&lt;body&gt;
&lt;h1&gt;Examples &lt;code&gt;DataTransfer&lt;/code&gt;.{&lt;code&gt;dropEffect&lt;/code&gt;, &lt;code&gt;effectAllowed&lt;/code&gt;} properties&lt;/h1&gt;
 &lt;div&gt;
   &lt;p id=&quot;source&quot; ondragstart=&quot;dragstart_handler(event);&quot; draggable=&quot;true&quot;&gt;
     Select this element, drag it to the Drop Zone and then release the selection to move the element.&lt;/p&gt;
 &lt;/div&gt;
 &lt;div id=&quot;target&quot; ondrop=&quot;drop_handler(event);&quot; ondragover=&quot;dragover_handler(event);&quot;&gt;Drop Zone&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<h2 id="规范">规范</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a lang="en" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-effectallowed" class="external" hreflang="en">HTML Living Standard<br><small lang="zh-CN">effectAllowed</small></a></td>
   <td><span class="spec-Living">Living Standard</span></td>
   <td> </td>
  </tr>
  <tr>
   <td><a lang="en" href="https://www.w3.org/TR/html51/editing.html#dom-datatransfer-effectallowed" class="external" hreflang="en">HTML 5.1<br><small lang="zh-CN">effectAllowed</small></a></td>
   <td><span class="spec-REC">Recommendation</span></td>
   <td>Initial definition</td>
  </tr>
 </tbody>
</table>

<h2 id="浏览器兼容性">浏览器兼容性</h2>

<p></p><div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/zh-CN/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Desktop</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div><p></p>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Edge</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>4</td>
   <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
   <td>3.5</td>
   <td>10</td>
   <td>12</td>
   <td>3.1</td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Android Webview</th>
   <th>Chrome for Android</th>
   <th>Edge</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td>10</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
 </tbody>
</table>
</div>

<h2 id="参考链接">参考链接</h2>

<p></p><ul>
 <li><a href="/en-US/docs/Web/API/HTML_Drag_and_Drop_API">Drag and drop</a></li>
 <li><a href="/en-US/docs/Web/Guide/HTML/Drag_operations">Drag Operations</a></li>
 <li><a href="/en-US/docs/Web/Guide/HTML/Recommended_Drag_Types">Recommended Drag Types</a></li>
 <li><a href="/en-US/docs/Web/Guide/HTML/Dragging_and_Dropping_Multiple_Items">Dragging and Dropping Multiple Items</a></li>
 <li><a href="https://codepen.io/tech_query/pen/MqGgap">DataTransfer test - Paste or Drag</a></li>
</ul><p></p>
