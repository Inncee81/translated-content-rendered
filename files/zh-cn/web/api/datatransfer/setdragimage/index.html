---
title: DataTransfer.setDragImage()
slug: Web/API/DataTransfer/setDragImage
translation_of: Web/API/DataTransfer/setDragImage
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/HTML_Drag_and_Drop_API">HTML Drag and Drop API</a></strong></li><li><strong><a href="/zh-CN/docs/Web/API/DataTransfer"><code>DataTransfer</code></a></strong></li><li class="toggle"><details open><summary>Constructor</summary><ol><li><a href="/zh-CN/docs/Web/API/DataTransfer/DataTransfer"><code>DataTransfer()</code></a></li></ol></details></li><li class="toggle"><details open><summary>属性</summary><ol><li><a href="/zh-CN/docs/Web/API/DataTransfer/dropEffect"><code>dropEffect</code></a></li><li><a href="/zh-CN/docs/Web/API/DataTransfer/effectAllowed"><code>effectAllowed</code></a></li><li><a href="/zh-CN/docs/Web/API/DataTransfer/files"><code>files</code></a></li><li><a href="/zh-CN/docs/Web/API/DataTransfer/items"><code>items</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/mozCursor"><code>mozCursor</code></a> <a href="/zh-CN/docs/Web/API/DataTransfer/mozCursor$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/mozItemCount"><code>mozItemCount</code></a> <a href="/zh-CN/docs/Web/API/DataTransfer/mozItemCount$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/mozSourceNode"><code>mozSourceNode</code></a> <a href="/zh-CN/docs/Web/API/DataTransfer/mozSourceNode$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/mozUserCancelled"><code>mozUserCancelled</code></a> <a href="/zh-CN/docs/Web/API/DataTransfer/mozUserCancelled$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/DataTransfer/types"><code>types</code></a></li></ol></details></li><li class="toggle"><details open><summary>方法</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/addElement"><code>addElement()</code></a> <a href="/zh-CN/docs/Web/API/DataTransfer/addElement$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/DataTransfer/clearData"><code>clearData()</code></a></li><li><a href="/zh-CN/docs/Web/API/DataTransfer/getData"><code>getData()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/mozClearDataAt"><code>mozClearDataAt()</code></a> <a href="/zh-CN/docs/Web/API/DataTransfer/mozClearDataAt$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/mozGetDataAt"><code>mozGetDataAt()</code></a> <a href="/zh-CN/docs/Web/API/DataTransfer/mozGetDataAt$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/mozSetDataAt"><code>mozSetDataAt()</code></a> <a href="/zh-CN/docs/Web/API/DataTransfer/mozSetDataAt$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/DataTransfer/mozTypesAt"><code>mozTypesAt()</code></a> <a href="/zh-CN/docs/Web/API/DataTransfer/mozTypesAt$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/DataTransfer/setData"><code>setData()</code></a></li><li><em><code>setDragImage()</code></em></li></ol></details></li><li class="toggle"><details open><summary>Related pages for HTML Drag and Drop API</summary><ol><li><a href="/zh-CN/docs/Web/API/DataTransferItem"><code>DataTransferItem</code></a></li><li><a href="/zh-CN/docs/Web/API/DataTransferItemList"><code>DataTransferItemList</code></a></li><li><a href="/zh-CN/docs/Web/API/DragEvent"><code>DragEvent</code></a></li></ol></details></li></ol></section></div>

<div></div>

<p>发生拖动时，从拖动目标(<code><a href="/zh-CN/docs/Web/Reference/Events/dragstart" title="/zh-CN/docs/Web/Reference/Events/dragstart">dragstart</a></code>事件触发的元素)生成半透明图像，并在拖动过程中跟随鼠标指针。这个图片是自动创建的，你不需要自己去创建它。然而，如果想要设置为自定义图像，那么 <strong><code>DataTransfer.setDragImage()</code></strong> 方法就能派上用场。</p>

<p>图像通常是一个 <a href="/zh-CN/docs/Web/HTML/Element/image" title="HTML &lt;image&gt;元素曾经是一个试验性的元素，用来显示图片。它从未被实现过，请使用标准的&lt;img&gt;元素。"><code>&lt;image&gt;</code></a> 元素，但也可以是<a href="/zh-CN/docs/Web/HTML/Element/canvas" title="&lt;canvas&gt;元素可被用来通过JavaScript（Canvas API 或 WebGL API）绘制图形及图形动画。"><code>&lt;canvas&gt;</code></a> 或任何其他图像元素。该方法的x和y坐标是图像应该相对于鼠标指针出现的偏移量。</p>

<p>坐标指定鼠标指针相对于图片的偏移量。例如，要使图像居中，请使用图像宽度和高度的一半。</p>

<p>通常在  <code><a href="/zh-CN/docs/Web/Reference/Events/dragstart" title="/zh-CN/docs/Web/Reference/Events/dragstart">dragstart</a></code> 事件处理程序中调用此方法。</p>

<h2 id="Syntax" name="Syntax">语法</h2>

<pre class="syntaxbox notranslate">void <em>dataTransfer</em>.setDragImage(img, xOffset, yOffset);
</pre>

<h3 id="参数">  参数</h3>

<dl>
 <dt><em>img | </em>Element</dt>
 <dd>用于拖曳反馈图像的图像 <a href="/zh-CN/docs/Web/API/Element"><code>Element</code></a> 元素。</dd>
</dl>

<p>     如果Element是一个img元素，则将拖动位图设置为该元素的图像（保持大小）；否则，将拖动数位图设置为从给定元素所生成的图片（<a href="https://html.spec.whatwg.org/multipage/dnd.html#the-datatransfer-interface">当前尚未指定执行此操作的确切机制</a>）</p>

<dl>
 <dt><em>xOffset</em></dt>
 <dd>使用 <code>long</code> 指示相对于图片的横向偏移量</dd>
 <dt><em>yOffset</em></dt>
 <dd>使用 <code>long</code> 指示相对于图片的纵向偏移量

 </dd>
</dl>

<h3 id="Return_Value" name="Return_Value">返回值</h3>

<dl>
 <dt>void</dt>
 <dd></dd>
</dl>

<h2 id="举个例子">举个例子</h2>

<p> 这个例子展示如何使用 <code>setDragImage()</code> 方法。请注意，此例子引用了命名为 <code>example.gif</code> 的图片文件。如果此文件存在，它将被用作拖动图像，如果此文件不存在，浏览器会使用其默认的拖动图像。</p>

<pre class="brush: js notranslate">&lt;!DOCTYPE html&gt;
&lt;html lang=en&gt;
&lt;title&gt;Example of DataTransfer.setDragImage()&lt;/title&gt;
&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;&gt;
&lt;style&gt;
  div {
    margin: 0em;
    padding: 2em;
  }
  #source {
    color: blue;
    border: 1px solid black;
  }
  #target {
    border: 1px solid black;
  }
&lt;/style&gt;
&lt;script&gt;
function dragstart_handler(ev) {
 console.log(&quot;dragStart&quot;);
 // 设置拖动的格式和数据。使用事件目标的id作为数据
 ev.dataTransfer.setData(&quot;text/plain&quot;, ev.target.id);
 // 创建一个图像并且使用它作为拖动图像
 // 请注意： 改变 &quot;example.gif&quot; 为一个已经存在的图片
 // 或者，一个还没有创建出来的图片，那么浏览器将会使用默认的拖动图片
 // 译者注：默认的拖动图片与拖动对象没有联系。一般是一个小型文件图标
 var img = new Image();
 img.src = &apos;example.gif&apos;;
 ev.dataTransfer.setDragImage(img, 10, 10);
}

function dragover_handler(ev) {
 console.log(&quot;dragOver&quot;);
 ev.preventDefault();
}

function drop_handler(ev) {
 console.log(&quot;Drop&quot;);
 ev.preventDefault();
 // 获取拖放目标的id数据
 var data = ev.dataTransfer.getData(&quot;text&quot;);
 ev.target.appendChild(document.getElementById(data));
}
&lt;/script&gt;
&lt;body&gt;
&lt;h1&gt;Example of &lt;code&gt;DataTransfer.setDragImage()&lt;/code&gt;&lt;/h1&gt;
 &lt;div&gt;
   &lt;p id=&quot;source&quot; ondragstart=&quot;dragstart_handler(event);&quot; draggable=&quot;true&quot;&gt;
     Select this element, drag it to the Drop Zone and then release the selection to move the element.&lt;/p&gt;
 &lt;/div&gt;
 &lt;div id=&quot;target&quot; ondrop=&quot;drop_handler(event);&quot; ondragover=&quot;dragover_handler(event);&quot;&gt;Drop Zone&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<h2 id="规范">规范</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-setdragimage" hreflang="en" lang="en">HTML Living Standard<br><small lang="zh-CN">setDragImage()</small></a></td>
   <td><span class="spec-Living">Living Standard</span></td>
   <td></td>
  </tr>
  <tr>
   <td><a class="external" href="https://www.w3.org/TR/html51/editing.html#dom-datatransfer-setdragimage" hreflang="en" lang="en">HTML 5.1<br><small lang="zh-CN">setDragImage()</small></a></td>
   <td><span class="spec-REC">Recommendation</span></td>
   <td>Not included in W3C HTML5 <span class="spec-REC">Recommendation</span></td>
  </tr>
  <tr>
  </tr>
 </tbody>
</table>

<h2 id="浏览器兼容性">浏览器兼容性</h2>

<div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/zh-CN/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Desktop</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>4</td>
   <td>3.5</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td>12</td>
   <td>3.1</td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Android Webview</th>
   <th>Chrome for Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td>10</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
 </tbody>
</table>
</div>

<h2 id="See_also" name="See_also">参考链接</h2>

<ul>
 <li><a href="/en-US/docs/Web/API/HTML_Drag_and_Drop_API">Drag and drop</a></li>
 <li><a href="/en-US/docs/Web/Guide/HTML/Drag_operations">Drag Operations</a></li>
 <li><a href="/en-US/docs/Web/Guide/HTML/Recommended_Drag_Types">Recommended Drag Types</a></li>
 <li><a href="/en-US/docs/Web/Guide/HTML/Dragging_and_Dropping_Multiple_Items">Dragging and Dropping Multiple Items</a></li>
 <li><a href="https://codepen.io/tech_query/pen/MqGgap">DataTransfer test - Paste or Drag</a></li>
</ul>

<div id="gtx-trans" style="position: absolute; left: 543px; top: 687px;">
<div class="gtx-trans-icon"></div>
</div>
