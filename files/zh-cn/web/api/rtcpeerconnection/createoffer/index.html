---
title: RTCPeerConnection.createOffer()
slug: Web/API/RTCPeerConnection/createOffer
tags:
  - API
  - Media
  - RTCPeerConnection
  - Reference
  - SDP
  - WebRTC
  - createOffer
translation_of: Web/API/RTCPeerConnection/createOffer
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/WebRTC_API">WebRTC API</a></strong></li><li><strong><a href="/zh-CN/docs/Web/API/RTCPeerConnection"><code>RTCPeerConnection</code></a></strong></li><li class="toggle"><details open><summary>Constructor</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/RTCPeerConnection"><code>RTCPeerConnection()</code></a></li></ol></details></li><li class="toggle"><details open><summary>属性</summary><ol><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/canTrickleIceCandidates"><code>canTrickleIceCandidates</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/connectionState"><code>connectionState</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/currentLocalDescription"><code>currentLocalDescription</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/currentRemoteDescription"><code>currentRemoteDescription</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/currentRemoteDescription$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/getDefaultIceServers"><code>getDefaultIceServers()</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/iceConnectionState"><code>iceConnectionState</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/iceGatheringState"><code>iceGatheringState</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/localDescription"><code>localDescription</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/localDescription$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onaddstream"><code>onaddstream</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onconnectionstatechange"><code>onconnectionstatechange</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onconnectionstatechange$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/ondatachannel"><code>ondatachannel</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onicecandidate"><code>onicecandidate</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/oniceconnectionstatechange"><code>oniceconnectionstatechange</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/oniceconnectionstatechange$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onicegatheringstatechange"><code>onicegatheringstatechange</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onicegatheringstatechange$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onidentityresult"><code>onidentityresult</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onidentityresult$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onidpassertionerror"><code>onidpassertionerror</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onidpassertionerror$translate" style="opacity: 0.5;">[我来译!]</a></s></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onidpvalidationerror"><code>onidpvalidationerror</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onidpvalidationerror$translate" style="opacity: 0.5;">[我来译!]</a></s></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onnegotiationneeded"><code>onnegotiationneeded</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onnegotiationneeded$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onpeeridentity"><code>onpeeridentity</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onpeeridentity$translate" style="opacity: 0.5;">[我来译!]</a></s></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onremovestream"><code>onremovestream</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onremovestream$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onsignalingstatechange"><code>onsignalingstatechange</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onsignalingstatechange$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/ontrack"><code>ontrack</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/peerIdentity"><code>peerIdentity</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/pendingLocalDescription"><code>pendingLocalDescription</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/pendingLocalDescription$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/pendingRemoteDescription"><code>pendingRemoteDescription</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/pendingRemoteDescription$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/remoteDescription"><code>remoteDescription</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/sctp"><code>sctp</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/sctp$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/signalingState"><code>signalingState</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/signalingState$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>方法</summary><ol><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/addIceCandidate"><code>addIceCandidate()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/addStream"><code>addStream()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/addStream$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/addTrack"><code>addTrack()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/close"><code>close()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/close$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/createAnswer"><code>createAnswer()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/createAnswer$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/createDataChannel"><code>createDataChannel()</code></a></li><li><em><code>createOffer()</code></em></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/generateCertificate"><code>generateCertificate() static function</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/generateCertificate$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/getConfiguration"><code>getConfiguration()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/getConfiguration$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/getIdentityAssertion"><code>getIdentityAssertion()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/getIdentityAssertion$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/getReceivers"><code>getReceivers()</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/getSenders"><code>getSenders()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/getSenders$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/getStats"><code>getStats()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/getStats$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/getStreamById"><code>getStreamById()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/getStreamById$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/getTransceivers"><code>getTransceivers()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/getTransceivers$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/removeStream"><code>removeStream()</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/removeTrack"><code>removeTrack()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/removeTrack$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/restartIce"><code>restartIce()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/restartIce$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/setConfiguration"><code>setConfiguration()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/setIdentityProvider"><code>setIdentityProvider()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/setIdentityProvider$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/setLocalDescription"><code>setLocalDescription()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/setLocalDescription$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/setRemoteDescription"><code>setRemoteDescription()</code></a></li></ol></details></li><li class="toggle"><details open><summary>Events</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/API/RTCPeerConnection/addstream_event"><code>addstream</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/addstream_event$translate" style="opacity: 0.5;">[我来译!]</a></s></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/icecandidateerror_event"><code>icecandidateerror</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/icecandidateerror_event$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/API/RTCPeerConnection/identityresult_event"><code>identityresult</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/identityresult_event$translate" style="opacity: 0.5;">[我来译!]</a></s></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/negotiationneeded_event"><code>negotiationneeded</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/negotiationneeded_event$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/removestream_event"><code>removestream</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/removestream_event$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/signalingstatechange_event"><code>signalingstatechange</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/signalingstatechange_event$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>继承</summary><ol><li><a href="/zh-CN/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li><li class="toggle"><details open><summary>Related pages for WebRTC</summary><ol><li><a href="/zh-CN/docs/Web/API/MediaDevices/getUserMedia"><code>MediaDevices.getUserMedia()</code></a></li><li><a href="/zh-CN/docs/Web/API/Navigator/mediaDevices"><code>Navigator.mediaDevices</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCCertificate"><code>RTCCertificate</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCDTMFSender"><code>RTCDTMFSender</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCDTMFToneChangeEvent"><code>RTCDTMFToneChangeEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCDataChannel"><code>RTCDataChannel</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCDataChannelEvent"><code>RTCDataChannelEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCDtlsTransport"><code>RTCDtlsTransport</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCErrorEvent"><code>RTCErrorEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCIceCandidate"><code>RTCIceCandidate</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCIceTransport"><code>RTCIceTransport</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnectionIceErrorEvent"><code>RTCPeerConnectionIceErrorEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnectionIceEvent"><code>RTCPeerConnectionIceEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCRtpReceiver"><code>RTCRtpReceiver</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCRtpSender"><code>RTCRtpSender</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCRtpTransceiver"><code>RTCRtpTransceiver</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCSctpTransport"><code>RTCSctpTransport</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCSessionDescription"><code>RTCSessionDescription</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCStatsReport"><code>RTCStatsReport</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCTrackEvent"><code>RTCTrackEvent</code></a></li></ol></details></li></ol></section></div>

<div><a href="/zh-CN/docs/Web/API/RTCPeerConnection"><code>RTCPeerConnection</code></a>接口的createOffer（）方法启动创建一个<a href="/zh-CN/docs/Glossary/SDP">SDP</a> offer，目的是启动一个新的WebRTC去连接远程端点。SDP offer包含有关已附加到WebRTC会话，浏览器支持的编解码器和选项的所有<a href="/zh-CN/docs/Web/API/MediaStreamTrack"><code>MediaStreamTrack</code></a>s信息，以及<a href="/zh-CN/docs/Glossary/ICE">ICE</a> 代理，目的是通过信令信道发送给潜在远程端点，以请求连接或更新现有连接的配置。</div>

<div></div>

<div>返回值是一个<a href="/zh-CN/docs/Web/API/Promise"><code>Promise</code></a>，创建 offer 后，将使用包含新创建的要约的<a href="/zh-CN/docs/Web/API/RTCSessionDescription"><code>RTCSessionDescription</code></a>对象来解析该返回值。</div>

<h2 id="Syntax">Syntax</h2>

<pre class="syntaxbox notranslate"><em>aPromise</em> = <em>myPeerConnection</em>.createOffer([<em>options</em>]);

<em>myPeerConnection</em>.createOffer(<em>successCallback</em>, <em>failureCallback, </em>[<em>options</em>]) <span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span>
</pre>

<h3 id="Parameters">Parameters</h3>

<dl>
 <dt><font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);">选项</span></font> <span class="optional optionalInline notecard inline">可选</span></dt>
 <dd><code><a href="#RTCOfferOptions_dictionary">RTCOfferOptions</a></code> 词典提供要约所要求的选项。</dd>
</dl>

<h4 id="RTCOfferOptions_词典">RTCOfferOptions 词典</h4>

<p><code>RTCOfferOptions</code> 词典被用于自定义通过此方法创建offer。</p>

<dl>
 <dt><code><a href="/en-US/docs/Web/API/RTCOfferOptions/iceRestart">iceRestart</a></code> <span class="optional optionalInline notecard inline">可选</span></dt>
 <dd>要在活动连接上重新启动ICE，请将其设置为<code>true</code>。 这将导致返回的 offer 与已经存在的凭证不同。 如果您应用返回的offer，则ICE将重新启动。 指定<code>false</code>以保留相同的凭据，因此不重新启动ICE。 默认值为<code>false</code>。</dd>
 <dt><code>offerToReceiveAudio</code> <span class="optional optionalInline notecard inline">可选</span> (Legacy)</dt>
 <dd>
 <p>传统的布尔选项，用于控制是否向远程对等方提供尝试发送音频的机会。 如果该值为<code>false</code>，即使本地端将发送音频数据，也不会提供远程端点发送音频数据。 如果此值为<code>true</code>，即使本地端不会发送音频数据，也将向远程端点发送音频数据。 默认行为是仅在本地发送音频时才提供接收音频，否则不提供。</p>
 </dd>
 <dd>为了在现代实现中模拟此行为，该成员的值为false将设置所有现有音频收发器的方向以排除接收（即，设置为“仅发送”或“无效”）。</dd>
 <dd>在现代实现中，此成员的值为true的存在将确保至少有一个收发器集可以接收尚未停止的音频，如果没有，则将创建一个。</dd>
 <dd>
 <div class="note"><strong>笔记:</strong> 您不应该使用此旧版属性。取而代之, 用 <a href="/zh-CN/docs/Web/API/RTCRtpTransceiver"><code>RTCRtpTransceiver</code></a> 去控制是否接受传入的音频。</div>
 </dd>
 <dt><code>offerToReceiveVideo</code> <span class="optional optionalInline notecard inline">可选</span> (Legacy)</dt>
 <dd>传统的布尔选项，用于控制是否向远程对等方提供尝试发送视频的机会。 如果此值为<code>false</code>，即使本地端将发送视频数据，也不会提供远程端点发送视频数据。 如果此值为<code>true</code>，即使本地端将不发送视频数据，也将向远程端点发送视频数据。 默认行为是仅在本地端正在发送视频时才提供接收视频，否则不提供。</dd>
 <dd>为了在现代实现中模拟这种行为，该成员的值为<code>false</code>将设置所有现有视频收发器的方向以排除接收（即设置为“仅发送”或“无效”）。</dd>
 <dd>在现代实现中，该成员的值为true的存在将确保至少有一个收发器集可以接收尚未停止的视频，如果没有，则将创建一个。</dd>
 <dd>
 <div class="note"><strong>笔记:</strong> 您不应该使用此旧版属性。取而代之, 用 <a href="/zh-CN/docs/Web/API/RTCRtpTransceiver"><code>RTCRtpTransceiver</code></a> 去控制是否接受传入的视频。</div>
 </dd>
 <dt><code>voiceActivityDetection</code> <span class="optional optionalInline notecard inline">可选</span></dt>
 <dd>一些编解码器和硬件能够通过监视是否出现“静音”（或相对较低的声音水平）来检测音频何时开始和结束。 通过仅在实际有广播内容时发送音频数据，从而减少了用于音频的网络带宽。 但是，在某些情况下，这是不需要的。 例如，在音乐或其他非语音传输的情况下，这可能会导致重要的低音量声音丢失。 而且，紧急呼叫在安静时切勿切断音频。 此选项默认为<strong><code>true</code></strong>（启用语音活动检测）。</dd>
</dl>

<dl>
 <dt>
 <h3 id="不推荐使用的参数">不推荐使用的参数</h3>


 </dt>
 <dd>
 <p>在较早的代码和文档中，您可能会看到此函数的基于回调的版本。 不推荐使用并强烈建议不要使用它。 您应该更新任何现有代码，以使用基于 <a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>的<code>createOffer()</code>版本。 下面介绍了这种形式的<code>createOffer()</code>的参数，以帮助更新现有代码。</p>
 </dd>
</dl>

<dl>
 <dt><code>successCallback</code> <span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></dt>
 <dd><a href="/zh-CN/docs/Web/API/RTCSessionDescriptionCallback"><code>RTCSessionDescriptionCallback</code></a>将传递一个描述新创建的offer的<a href="/zh-CN/docs/Web/API/RTCSessionDescription"><code>RTCSessionDescription</code></a>对象。</dd>
 <dt><code>errorCallback</code> <span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></dt>
 <dd><a href="/zh-CN/docs/Web/API/RTCPeerConnectionErrorCallback"><code>RTCPeerConnectionErrorCallback</code></a>将会传递给一个<a href="/zh-CN/docs/Web/API/DOMException"><code>DOMException</code></a>对象，该对象说明了创建offer的请求失败的原因。</dd>
 <dt><code>options</code> <span class="optional optionalInline notecard inline">可选</span></dt>
 <dd>可选的<code><a href="#RTCOfferOptions_dictionary">RTCOfferOptions</a></code>词典，提供 offer所要求的选项。</dd>
</dl>

<h3 id="返回值">返回值</h3>

<p><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>的履行处理程序将接收符合<a href="/zh-CN/docs/Web/API/RTCSessionDescriptionInit"><code>RTCSessionDescriptionInit</code></a>字典的对象，该字典包含描述所生成 offer 的SDP。 收到的 offer 应通过信令服务器传递到。</p>

<h3 id="异常">异常</h3>

<p>通过拒绝返回的承诺返回这些异常。 您的拒绝处理程序应检查收到的异常，以确定发生了哪些异常。</p>

<dl>
 <dt><code>InvalidStateError</code></dt>
 <dd><code>RTCPeerConnection</code> 被关闭.</dd>
 <dt><code>NotReadableError</code></dt>
 <dd>没有提供用于保护连接的证书或一组证书，并且<code>createOffer()</code>无法创建新证书。 由于需要保护所有WebRTC连接，因此会导致错误。</dd>
 <dt><code>OperationError</code></dt>
 <dd>由于某些原因，检查系统状态以确定资源可用性以生成报价失败。</dd>
</dl>

<h2 id="举例">举例</h2>

<p>在这里，我们看到了<code><a href="/zh-CN/docs/Web/Reference/Events/negotiationneeded" title="/zh-CN/docs/Web/Reference/Events/negotiationneeded">negotiationneeded</a></code>事件的处理程序，该处理程序创建了要约，并通过信令通道将其发送到远程系统。</p>

<div class="note">
<p><strong>笔记:</strong> 请记住，这是信令过程的一部分，传输层的实现细节完全由您决定。 在这种情况下，<a href="/en-US/docs/Web/API/WebSocket_API">WebSocket</a>连接用于向其他端点发送带有值为“ video-offer”的类型字段的<a href="/zh-CN/docs/Glossary/JSON">JSON</a>消息。 传递给<code>sendToServer()</code>函数的对象的内容，以及承诺履行处理程序中的所有其他内容，完全取决于您的设计。</p>
</div>

<pre class="brush: js notranslate">  myPeerConnection.createOffer().then(function(offer) {
    return myPeerConnection.setLocalDescription(offer);
  })
  .then(function() {
    sendToServer({
      name: myUsername,
      target: targetUsername,
      type: &quot;video-offer&quot;,
      sdp: myPeerConnection.localDescription
    });
  })
  .catch(function(reason) {
    // An error occurred, so handle the failure to connect
  });</pre>

<p>在此代码中，创建了offer，一旦成功，就将<a href="/zh-CN/docs/Web/API/RTCPeerConnection"><code>RTCPeerConnection</code></a>的本地端配置为通过传递要约进行匹配（使用符合<a href="/zh-CN/docs/Web/API/RTCSessionDescriptionInit"><code>RTCSessionDescriptionInit</code></a>）放入<a href="/zh-CN/docs/Web/API/RTCPeerConnection/setLocalDescription"><code>setLocalDescription()</code></a>。 完成后，要约将通过信令通道发送到远程系统。 在这种情况下，使用名为<code>sendToServer()</code>的自定义函数。 信令服务器的实现独立于WebRTC规范，因此只要主叫方和潜在接收方都使用相同的offer，如何发送offer都无关紧要。</p>

<p>用 <a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch"><code>Promise.catch()</code></a> 来捕获和处理错误.</p>

<p>请参阅 <a href="/en-US/docs/Web/API/WebRTC_API/Signaling_and_video_calling">Signaling and video calling</a>，以获取此摘录的完整示例。 这将帮助您了解此处的信令代码如何工作。</p>

<h2 id="技术指标">技术指标</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://w3c.github.io/webrtc-pc/#dom-rtcpeerconnection-createoffer" hreflang="en" lang="en">WebRTC 1.0: Real-time Communication Between Browsers<br><small lang="zh-CN">createOffer()</small></a></td>
   <td><span class="spec-CR">Candidate Recommendation</span></td>
   <td>Initial definition.</td>
  </tr>
 </tbody>
</table>

<h2 id="浏览器兼容性">浏览器兼容性</h2>

<div>
<div class="hidden">The compatibility table on this page is generated from structured data. If you&apos;d like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</div>

<div class="bc-data" id="bcd:api.RTCPeerConnection.createOffer"></div>
</div>
