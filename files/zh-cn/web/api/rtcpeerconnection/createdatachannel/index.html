---
title: RTCPeerConnection.createDataChannel()
slug: Web/API/RTCPeerConnection/createDataChannel
translation_of: Web/API/RTCPeerConnection/createDataChannel
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/WebRTC_API">WebRTC API</a></strong></li><li><strong><a href="/zh-CN/docs/Web/API/RTCPeerConnection"><code>RTCPeerConnection</code></a></strong></li><li class="toggle"><details open><summary>Constructor</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/RTCPeerConnection"><code>RTCPeerConnection()</code></a></li></ol></details></li><li class="toggle"><details open><summary>属性</summary><ol><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/canTrickleIceCandidates"><code>canTrickleIceCandidates</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/connectionState"><code>connectionState</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/currentLocalDescription"><code>currentLocalDescription</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/currentRemoteDescription"><code>currentRemoteDescription</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/currentRemoteDescription$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/getDefaultIceServers"><code>getDefaultIceServers()</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/iceConnectionState"><code>iceConnectionState</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/iceGatheringState"><code>iceGatheringState</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/localDescription"><code>localDescription</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/localDescription$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onaddstream"><code>onaddstream</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onconnectionstatechange"><code>onconnectionstatechange</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onconnectionstatechange$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/ondatachannel"><code>ondatachannel</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onicecandidate"><code>onicecandidate</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/oniceconnectionstatechange"><code>oniceconnectionstatechange</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/oniceconnectionstatechange$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onicegatheringstatechange"><code>onicegatheringstatechange</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onicegatheringstatechange$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onidentityresult"><code>onidentityresult</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onidentityresult$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onidpassertionerror"><code>onidpassertionerror</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onidpassertionerror$translate" style="opacity: 0.5;">[我来译!]</a></s></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onidpvalidationerror"><code>onidpvalidationerror</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onidpvalidationerror$translate" style="opacity: 0.5;">[我来译!]</a></s></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onnegotiationneeded"><code>onnegotiationneeded</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onnegotiationneeded$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onpeeridentity"><code>onpeeridentity</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onpeeridentity$translate" style="opacity: 0.5;">[我来译!]</a></s></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onremovestream"><code>onremovestream</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onremovestream$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/onsignalingstatechange"><code>onsignalingstatechange</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/onsignalingstatechange$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/ontrack"><code>ontrack</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/peerIdentity"><code>peerIdentity</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/pendingLocalDescription"><code>pendingLocalDescription</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/pendingLocalDescription$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/pendingRemoteDescription"><code>pendingRemoteDescription</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/pendingRemoteDescription$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/remoteDescription"><code>remoteDescription</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/sctp"><code>sctp</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/sctp$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/signalingState"><code>signalingState</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/signalingState$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>方法</summary><ol><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/addIceCandidate"><code>addIceCandidate()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/addStream"><code>addStream()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/addStream$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/addTrack"><code>addTrack()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/close"><code>close()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/close$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/createAnswer"><code>createAnswer()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/createAnswer$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><em><code>createDataChannel()</code></em></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/createOffer"><code>createOffer()</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/generateCertificate"><code>generateCertificate() static function</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/generateCertificate$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/getConfiguration"><code>getConfiguration()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/getConfiguration$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/getIdentityAssertion"><code>getIdentityAssertion()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/getIdentityAssertion$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/getReceivers"><code>getReceivers()</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/getSenders"><code>getSenders()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/getSenders$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/getStats"><code>getStats()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/getStats$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/getStreamById"><code>getStreamById()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/getStreamById$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/getTransceivers"><code>getTransceivers()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/getTransceivers$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/removeStream"><code>removeStream()</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/removeTrack"><code>removeTrack()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/removeTrack$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/restartIce"><code>restartIce()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/restartIce$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/setConfiguration"><code>setConfiguration()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/RTCPeerConnection/setIdentityProvider"><code>setIdentityProvider()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/setIdentityProvider$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/setLocalDescription"><code>setLocalDescription()</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/setLocalDescription$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/setRemoteDescription"><code>setRemoteDescription()</code></a></li></ol></details></li><li class="toggle"><details open><summary>Events</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/API/RTCPeerConnection/addstream_event"><code>addstream</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/addstream_event$translate" style="opacity: 0.5;">[我来译!]</a></s></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/icecandidateerror_event"><code>icecandidateerror</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/icecandidateerror_event$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/API/RTCPeerConnection/identityresult_event"><code>identityresult</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/identityresult_event$translate" style="opacity: 0.5;">[我来译!]</a></s></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/negotiationneeded_event"><code>negotiationneeded</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/negotiationneeded_event$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/removestream_event"><code>removestream</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/removestream_event$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnection/signalingstatechange_event"><code>signalingstatechange</code></a> <a href="/zh-CN/docs/Web/API/RTCPeerConnection/signalingstatechange_event$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>继承</summary><ol><li><a href="/zh-CN/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li><li class="toggle"><details open><summary>Related pages for WebRTC</summary><ol><li><a href="/zh-CN/docs/Web/API/MediaDevices/getUserMedia"><code>MediaDevices.getUserMedia()</code></a></li><li><a href="/zh-CN/docs/Web/API/Navigator/mediaDevices"><code>Navigator.mediaDevices</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCCertificate"><code>RTCCertificate</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCDTMFSender"><code>RTCDTMFSender</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCDTMFToneChangeEvent"><code>RTCDTMFToneChangeEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCDataChannel"><code>RTCDataChannel</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCDataChannelEvent"><code>RTCDataChannelEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCDtlsTransport"><code>RTCDtlsTransport</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCErrorEvent"><code>RTCErrorEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCIceCandidate"><code>RTCIceCandidate</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCIceTransport"><code>RTCIceTransport</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnectionIceErrorEvent"><code>RTCPeerConnectionIceErrorEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCPeerConnectionIceEvent"><code>RTCPeerConnectionIceEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCRtpReceiver"><code>RTCRtpReceiver</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCRtpSender"><code>RTCRtpSender</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCRtpTransceiver"><code>RTCRtpTransceiver</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCSctpTransport"><code>RTCSctpTransport</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCSessionDescription"><code>RTCSessionDescription</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCStatsReport"><code>RTCStatsReport</code></a></li><li><a href="/zh-CN/docs/Web/API/RTCTrackEvent"><code>RTCTrackEvent</code></a></li></ol></details></li></ol></section><div class="experimental indicator-warning notecard">
    <p><strong>这是一个实验中的功能</strong><br>此功能某些浏览器尚在开发中，请参考<a href="#Browser_compatibility">浏览器兼容性表格</a>以得到在不同浏览器中适合使用的前缀。由于该功能对应的标准文档可能被重新修订，所以在未来版本的浏览器中该功能的语法和行为可能随之改变。</p>
</div>

<p><a href="/zh-CN/docs/Web/API/RTCPeerConnection"><code>RTCPeerConnection</code></a> 的 <code>createDataChannel()</code> 方法创建一个可以发送任意数据的数据通道(data channel)。常用于后台传输内容, 例如: 图像, 文件传输, 聊天文字, 游戏数据更新包, 等等。</p>

<p>基于某个连接创建第一个data channel时, 会通过发送一个<code><a href="/zh-CN/docs/Web/Reference/Events/negotiationneeded" title="/zh-CN/docs/Web/Reference/Events/negotiationneeded">negotiationneeded</a></code> event来开始重新谈判(renegotiation)。</p>

<h2 id="语法">语法</h2>

<pre class="syntaxbox notranslate"><em>dataChannel</em> = <em>RTCPeerConnection</em>.createDataChannel(<em>label</em>[, <em>options</em>]);</pre>

<h3 class="syntaxbox" id="参数">参数</h3>

<dl>
 <dt><code>label</code></dt>
 <dd>一个便于理解的通道名. 该字符串不能长于 65,535 <em>字节</em>.</dd>
 <dt><code>options</code> <span class="optional optionalInline notecard inline">可选</span></dt>
 <dd>提供data channel设置的一个 <a href="#RTCDataChannelInit_dictionary"><code>RTCDataChannelInit</code> dictionary</a> </dd>
</dl>

<h3 id="RTCDataChannelInit_dictionary">RTCDataChannelInit dictionary</h3>

<p><code>RTCDataChannelInit</code> 字典提供以下字段, 用以构造可选的options参数来设置data channel以满足你的需求:</p>

<dl>
 <dt><code>ordered</code> <span class="optional optionalInline notecard inline">可选</span></dt>
 <dd>表示通过 <a href="/zh-CN/docs/Web/API/RTCDataChannel"><code>RTCDataChannel</code></a> 的信息的到达顺序需要和发送顺序一致(<code>true</code>), 或者到达顺序不需要和发送顺序一致 (<code>false</code>). <strong>默认: <code>true</code>.</strong></dd>
 <dt><strong><code>maxPacketLifeTime</code> <span class="optional optionalInline notecard inline">可选</span></strong></dt>
 <dd>The maximum number of milliseconds that attempts to transfer a message may take in unreliable mode. While this value is a 16-bit unsigned number, each user agent may clamp it to whatever maximum it deems appropriate. <strong>Default: <code>null</code>.</strong></dd>
 <dt><code>maxRetransmits</code> <span class="optional optionalInline notecard inline">可选</span></dt>
 <dd>The maximum number of times the user agent should attempt to retransmit a message which fails the first time in unreliable mode. While this value is a16-bit unsigned number, each user agent may clamp it to whatever maximum it deems appropriate. <strong>Default: <code>null</code>.</strong></dd>
 <dt><code>protocol</code> <span class="optional optionalInline notecard inline">可选</span></dt>
 <dd>The name of the sub-protocol being used on the <a href="/zh-CN/docs/Web/API/RTCDataChannel"><code>RTCDataChannel</code></a>, if any; otherwise, the empty string (&quot;&quot;). <strong>Default: empty string, <code>&quot;&quot;</code>. </strong> This string may not be longer than 65,535 <em>bytes</em>.</dd>
 <dt><code>negotiated</code> <span class="optional optionalInline notecard inline">可选</span></dt>
 <dd>By default (<code>false</code>), data channels are negotiated in-band, where one side calls <code>createDataChannel</code>, and the other side listens to the <a href="/zh-CN/docs/Web/API/RTCDataChannelEvent"><code>RTCDataChannelEvent</code></a> event using the <code>ondatachannel</code> <code>EventHandler</code> . Alternatively (<code>true</code>), they can be negotiated out of-band, where both sides call <code>createDataChannel </code>with an agreed-upon id. <strong>Default: <code>false</code>.</strong></dd>
 <dt><code>id</code> <span class="optional optionalInline notecard inline">可选</span></dt>
 <dd>An 16-bit numeric ID for the channel; permitted values are 0-65534. If you don&apos;t include this option, the user agent will select an ID for you.</dd>
</dl>

<div class="note">
<p>The options which can be configured using the <code>RTCDataChannelInit</code> dictionary represent the script-settable subset of the properties on the <a href="/zh-CN/docs/Web/API/RTCDataChannel"><code>RTCDataChannel</code></a> interface.</p>
</div>

<h3 id="Return_value">Return value</h3>

<p>A new <a href="/zh-CN/docs/Web/API/RTCDataChannel"><code>RTCDataChannel</code></a> object with the specified <code>label</code>, configured using the options specified by <code>options</code> if that parameter is included; otherwise, the defaults listed above are established.</p>

<h3 id="Exceptions">Exceptions</h3>

<dl>
 <dt><code>InvalidStateError</code></dt>
 <dd>The <a href="/zh-CN/docs/Web/API/RTCPeerConnection"><code>RTCPeerConnection</code></a> is closed.</dd>
 <dt><code>TypeError</code></dt>
 <dd>This can happen in a couple of situations:
 <ul>
  <li>The label and/or protocol string is too long; these cannot be longer than 65,535 bytes (bytes, rather than characters).</li>
  <li>The <code>id</code> is 65535. While this is a valid unsigned 16-bit value, it&apos;s not a permitted value for <code>id</code>.</li>
 </ul>
 </dd>
 <dt><code>SyntaxError</code></dt>
 <dd>Values were specified for both the <code>maxPacketLifeTime</code> and <code>maxRetransmits</code> options. You may only specify a non-<code>null</code> value for one of these.</dd>
 <dt><code>ResourceInUse</code></dt>
 <dd>An <code>id</code> was specified, but another <a href="/zh-CN/docs/Web/API/RTCDataChannel"><code>RTCDataChannel</code></a> is already using the same value.</dd>
 <dt><code>OperationError</code></dt>
 <dd>Either the specified <code>id</code> is already in use or, if no <code>id</code> was specified, the WebRTC layer was unable to automatically generate an ID because all IDs are in use.</dd>
</dl>

<h2 id="Examples">Examples</h2>

<p>This example shows how to create a data channel and set up handlers for the <code><a href="/zh-CN/docs/Web/Reference/Events/open" title="/zh-CN/docs/Web/Reference/Events/open">open</a></code> and <code><a href="/zh-CN/docs/Web/Reference/Events/message" title="/zh-CN/docs/Web/Reference/Events/message">message</a></code> events to send and receive messages on it (For brievity, the example assumes onnegotiationneeded is set up).</p>

<pre class="brush: js notranslate">// Offerer side

var pc = new RTCPeerConnection(options);
var channel = pc.createDataChannel(&quot;chat&quot;);
channel.onopen = function(event) {
  channel.send(&apos;Hi you!&apos;);
}
channel.onmessage = function(event) {
  console.log(event.data);
}</pre>

<pre class="brush: js notranslate">// Answerer side

var pc = new RTCPeerConnection(options);
pc.ondatachannel = function(event) {
  var channel = event.channel;
﻿  channel.onopen = function(event) {
    channel.send(&apos;Hi back!&apos;);
  }
  channel.onmessage = function(event) {
    console.log(event.data);
  }
}</pre>

<p>Alternatively, more symmetrical out-of-band negotiation can be used, using an agreed-upon id (0 here):</p>

<pre class="brush: js notranslate">// Both sides

var pc = new RTCPeerConnection(options);
var channel = pc.createDataChannel(&quot;chat&quot;, {negotiated: true, id: 0});
channel.onopen = function(event) {
  channel.send(&apos;Hi!&apos;);
}
channel.onmessage = function(event) {
  console.log(event.data);
}</pre>

<p>For a more thorough example showing how the connection and channel are established, see <a href="/en-US/docs/Web/API/WebRTC_API/Simple_RTCDataChannel_sample">A simple RTCDataChannel sample</a>.</p>

<h2 id="Specifications">Specifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://w3c.github.io/webrtc-pc/#widl-RTCPeerConnection-createDataChannel-RTCDataChannel-DOMString-label-RTCDataChannelInit-dataChannelDict" hreflang="en" lang="en">WebRTC 1.0: Real-time Communication Between Browsers<br><small lang="zh-CN">createDataChannel()</small></a></td>
   <td><span class="spec-CR">Candidate Recommendation</span></td>
   <td>Initial definition.</td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<div>
<div class="hidden">The compatibility table on this page is generated from structured data. If you&apos;d like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</div>

<div class="bc-data" id="bcd:api.RTCPeerConnection.createDataChannel"></div>
</div>

<h2 id="See_also">See also</h2>

<ul>
 <li><a href="/zh-CN/docs/Web/API/RTCDataChannel"><code>RTCDataChannel</code></a></li>
 <li><a href="/en-US/docs/Web/API/WebRTC_API/Simple_RTCDataChannel_sample">A simple RTCDataChannel sample</a></li>
 <li><a href="/zh-CN/docs/Web/API/RTCPeerConnection"><code>RTCPeerConnection</code></a></li>
</ul>
