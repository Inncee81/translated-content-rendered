---
title: 屏幕捕捉API
slug: Web/API/Screen_Capture_API
tags:
  - API
  - Capture
  - Conference
  - Media
  - MediaDevices
  - MediaStream
  - NeedsTranslation
  - Overview
  - Screen Capture
  - Screen Capture API
  - Screen Sharing
  - Sharing
  - TopicStub
  - Video
  - Window
  - display
  - getDisplayMedia
  - screen
translation_of: Web/API/Screen_Capture_API
---
<div></div>

<p><span class="seoSummary">屏幕捕获API对现有的媒体捕获和流API进行了补充，让用户选择一个屏幕或屏幕的一部分（如一个窗口）作为媒体流进行捕获。然后，该流可以被记录或通过网络与他人共享。</span></p>

<h2 id="屏幕捕捉API的概念和用法">屏幕捕捉API的概念和用法</h2>

<p>屏幕捕捉API使用起来相对简单。其唯一的方法是<a href="/zh-CN/docs/Web/API/MediaDevices/getDisplayMedia"><code>MediaDevices.getDisplayMedia()</code></a>，它的任务是以捕获的形式要求用户选择一个屏幕或屏幕的一部分的<a href="/zh-CN/docs/Web/API/MediaStream"><code>MediaStream</code></a>。</p>

<p>要开始从屏幕上捕捉视频，你需要在 <code>getDisplayMedia()</code> 的实例上调用 <code>Media</code> <code>navigator.mediaDevices</code>：</p>

<pre class="brush: js notranslate">captureStream = await navigator.mediaDevices.getDisplayMedia(displayMediaOptions);</pre>

<p>The <a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> returned by <code>getDisplayMedia()</code> resolves to a <a href="/zh-CN/docs/Web/API/MediaStream"><code>MediaStream</code></a> which streams the captured media.</p>

<p>See the article <a href="/zh-CN/docs/Web/API/Screen_Capture_API/%E4%BD%BF%E7%94%A8%E5%B1%8F%E5%B9%95%E6%8D%95%E8%8E%B7API">Using the Screen Capture API</a> for a more in-depth look at how to use the API to capture screen contents as a stream.</p>

<h2 id="增加现有接口">增加现有接口</h2>

<p>屏幕捕捉API没有自己的任何接口，而是在现有的 <a href="/zh-CN/docs/Web/API/MediaDevices"><code>MediaDevices</code></a> 接口上添加了一个方法。</p>

<h3 id="MediaDevices_接口">MediaDevices 接口</h3>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/MediaDevices/getDisplayMedia"><code>MediaDevices.getDisplayMedia()</code></a></dt>
 <dd>The <code>getDisplayMedia()</code> method is added to the <code>MediaDevices</code> interface. Similar to <a href="/zh-CN/docs/Web/API/MediaDevices/getUserMedia"><code>getUserMedia()</code></a>, this method creates a promise that resolves with a <a href="/zh-CN/docs/Web/API/MediaStream"><code>MediaStream</code></a> containing the display area selected by the user, in a format that matches the specified options.</dd>
</dl>

<h2 id="Additions_to_existing_dictionaries">Additions to existing dictionaries</h2>

<p>The Screen Capture API adds properties to the following dictionaries defined by other specifications.</p>

<h3 id="MediaTrackConstraints">MediaTrackConstraints</h3>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/MediaTrackConstraints/cursor"><code>MediaTrackConstraints.cursor</code></a></dt>
 <dd>A <a href="/zh-CN/docs/Web/API/ConstrainDOMString"><code>ConstrainDOMString</code></a> indicating whether or not the cursor should be included in the captured display surface&apos;s stream, and if it should always be visible or if it should only be visible while the mouse is in motion.</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaTrackConstraints/displaySurface"><code>MediaTrackConstraints.displaySurface</code></a></dt>
 <dd>A <a href="/zh-CN/docs/Web/API/ConstrainDOMString"><code>ConstrainDOMString</code></a> indicating what type of display surface is to be captured. The value is one of <code>application</code>, <code>browser</code>, <code>monitor</code>, or <code>window</code>.</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaTrackConstraints/logicalSurface"><code>MediaTrackConstraints.logicalSurface</code></a></dt>
 <dd>Indicates whether or not the video in the stream represents a logical display surface (that is, one which may not be entirely visible onscreen, or may be completely offscreen). A value of <code>true</code> indicates a logical display surface is to be captured.</dd>
</dl>

<h3 id="MediaTrackSettings">MediaTrackSettings</h3>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/MediaTrackSettings/cursor"><code>MediaTrackSettings.cursor</code></a></dt>
 <dd>A string which indicates whether or not the display surface currently being captured includes the mouse cursor, and if so, whether it&apos;s only visible while the mouse is in motion or if it&apos;s always visible. The value is one of <code>always</code>, <code>motion</code>, or <code>never</code>.</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaTrackSettings/displaySurface"><code>MediaTrackSettings.displaySurface</code></a></dt>
 <dd>A string indicating what type of display surface is currently being captured. The value is one of <code>application</code>, <code>browser</code>, <code>monitor</code>, or <code>window</code>.</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaTrackSettings/logicalSurface"><code>MediaTrackSettings.logicalSurface</code></a></dt>
 <dd>A Boolean value which is <code>true</code> if the video being captured doesn&apos;t directly correspond to a single onscreen display area.</dd>
</dl>

<h3 id="MediaTrackSupportedConstraints">MediaTrackSupportedConstraints</h3>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/MediaTrackSupportedConstraints/cursor"><code>MediaTrackSupportedConstraints.cursor</code></a></dt>
 <dd>A Boolean which is <code>true</code> if the user agent and device support the <a href="/zh-CN/docs/Web/API/MediaTrackConstraints/cursor"><code>MediaTrackConstraints.cursor</code></a> constraint.</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaTrackSupportedConstraints/displaySurface"><code>MediaTrackSupportedConstraints.displaySurface</code></a></dt>
 <dd>A Boolean which is <code>true</code> if the current environment supports the <a href="/zh-CN/docs/Web/API/MediaTrackConstraints/displaySurface"><code>MediaTrackConstraints.displaySurface</code></a> constraint.</dd>
 <dt><a href="/zh-CN/docs/Web/API/MediaTrackSupportedConstraints/logicalSurface"><code>MediaTrackSupportedConstraints.logicalSurface</code></a></dt>
 <dd>A Boolean which is <code>true</code> if the current environment supports the constraint <a href="/zh-CN/docs/Web/API/MediaTrackConstraints/logicalSurface"><code>MediaTrackConstraints.logicalSurface</code></a>.</dd>
</dl>

<h2 id="Dictionaries">Dictionaries</h2>

<p>The following dictionaries are defined by the Screen Capture API.</p>

<dl>
 <dt><code>CursorCaptureConstraint</code></dt>
 <dd>An enumerated string type used to provide the value for the <code>cursor</code> property for the settings and constraints. The possible values are <code>always</code>, <code>motion</code>, and <code>never</code>.</dd>
 <dt><code>DisplayCaptureSurfaceType</code></dt>
 <dd>An enumerated string type which is used to identify the kind of display surface to capture. This type is used for the <code>displaySurface</code> property in the constraints and settings objects, and has the possible values <code>application</code>, <code>browser</code>, <code>monitor</code>, and <code>window</code>.</dd>
</dl>

<h2 id="Feature_Policy_validation">Feature Policy validation</h2>

<p><a href="/zh-CN/docs/Glossary/User_agent">User agents</a> that support Feature Policy (either using HTTP&apos;s <a href="/zh-CN/docs/Web/HTTP/Headers/Feature-Policy" title="更多的信息，请查看Feature Policy"><code>Feature-Policy</code></a> header or the <a href="/zh-CN/docs/Web/HTML/Element/iframe" title="browsing context"><code>&lt;iframe&gt;</code></a> attribute <code><a href="/zh-CN/docs/Web/HTML/Element/iframe#attr-allow">allow</a></code>) can specify a desire to use the Screen Capture API using the policy control directive <code>display-capture</code>:</p>

<pre class="brush: html notranslate">&lt;iframe allow=&quot;display-capture&quot; src=&quot;/some-other-document.html&quot;&gt;</pre>

<p>The default allow list is <code>self</code>, which lets the any content within the document use Screen Capture.</p>

<p>See <a href="/en-US/docs/Web/HTTP/Feature_Policy/Using_Feature_Policy">Using Feature Policy</a> for a more in-depth explanation of how Feature Policy is used.</p>

<p><font face="x-locale-heading-primary, zillaslab, Palatino, Palatino Linotype, x-locale-heading-secondary, serif"><span style="font-size: 37.33327865600586px;"><strong>规范</strong></span></font></p>

<p>
 </p><table class="standard-table">
  <tbody>
   <tr>
    <th scope="col">规范</th>
    <th scope="col">状态</th>
    <th scope="col">说明</th>
   </tr>
   <tr>
    <td><a class="external" href="https://w3c.github.io/mediacapture-screen-share/" hreflang="en" lang="en" title="Screen Capture">Screen Capture</a></td>
    <td><span class="spec-WD">Working Draft</span></td>
    <td>初始定义。</td>
   </tr>
  </tbody>
 </table>


<h2 id="浏览器兼容性">浏览器兼容性</h2>

<div>
<div class="hidden">The compatibility table on this page is generated from structured data. If you&apos;d like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</div>

<div class="bc-data" id="bcd:api.MediaDevices.getDisplayMedia"></div>
</div>

<p><font face="x-locale-heading-primary, zillaslab, Palatino, Palatino Linotype, x-locale-heading-secondary, serif"><span style="font-size: 37.33327865600586px;"><strong>相关链接</strong></span></font></p>

<p>
 </p><ul>
  <li><a href="/en-US/docs/Web/API/Screen_Capture_API/Using_Screen_Capture">Using the Screen Capture API</a></li>
  <li><a href="/zh-CN/docs/Web/API/MediaDevices/getDisplayMedia"><code>MediaDevices.getDisplayMedia()</code></a></li>
 </ul>
