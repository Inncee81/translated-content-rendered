---
title: CloseEvent
slug: Web/API/CloseEvent
tags:
  - API
  - Interface
  - Reference
  - Web
  - WebSocket
  - WebSockets
translation_of: Web/API/CloseEvent
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/Websockets_API">Websockets API</a></strong></li><li><strong><a href="/zh-CN/docs/Web/API/CloseEvent"><code>CloseEvent</code></a></strong></li><li class="toggle"><details open><summary>Constructor</summary><ol><li><a href="/zh-CN/docs/Web/API/CloseEvent/CloseEvent"><code>CloseEvent()</code></a> <a href="/zh-CN/docs/Web/API/CloseEvent/CloseEvent$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>继承</summary><ol><li><a href="/zh-CN/docs/Web/API/Event"><code>Event</code></a></li></ol></details></li><li class="toggle"><details open><summary>Related pages for Websockets API</summary><ol><li><a href="/zh-CN/docs/Web/API/MessageEvent"><code>MessageEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/WebSocket"><code>WebSocket</code></a></li></ol></details></li></ol></section>

<p><code>CloseEvent</code> 会在连接关闭时发送给使用 <a href="/zh-CN/docs/Glossary/WebSockets">WebSockets</a> 的客户端. 它在 <code>WebSocket</code> <code>对象的</code> <code>onclose</code> 事件监听器中使用.</p>

<h2 id="构造器">构造器</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/CloseEvent/CloseEvent"><code>CloseEvent()</code></a></dt>
 <dd>创建一个 <code>CloseEvent</code>.</dd>
</dl>

<h2 id="属性">属性</h2>

<p><em>该接口也继承了其父类 <a href="/zh-CN/docs/Web/API/Event"><code>Event</code></a> 的属性.</em></p>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/CloseEvent/code"><code>CloseEvent.code</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>返回一个 unsigned short 类型的数字, 表示服务端发送的关闭码, 以下为已分配的状态码.
 <table class="standard-table" id="Status_codes">
  <tbody>
   <tr>
    <td class="header">状态码</td>
    <td class="header">?名称</td>
    <td class="header">?描述</td>
   </tr>
   <tr>
    <td><code>0</code>–<code>999</code></td>
    <td></td>
    <td><strong>保留段, 未使用.</strong></td>
   </tr>
   <tr>
    <td><code>1000</code></td>
    <td><code>CLOSE_NORMAL</code></td>
    <td>正常关闭; 无论为何目的而创建, 该链接都已成功完成任务.</td>
   </tr>
   <tr>
    <td><code>1001</code></td>
    <td><code>CLOSE_GOING_AWAY</code></td>
    <td>终端离开, 可能因为服务端错误, 也可能因为浏览器正从打开连接的页面跳转离开.</td>
   </tr>
   <tr>
    <td><code>1002</code></td>
    <td><code>CLOSE_PROTOCOL_ERROR</code></td>
    <td>由于协议错误而中断连接.</td>
   </tr>
   <tr>
    <td><code>1003</code></td>
    <td><code>CLOSE_UNSUPPORTED</code></td>
    <td>由于接收到不允许的数据类型而断开连接 (如仅接收文本数据的终端接收到了二进制数据).</td>
   </tr>
   <tr>
    <td><code>1004</code></td>
    <td></td>
    <td><strong>保留.</strong> 其意义可能会在未来定义.</td>
   </tr>
   <tr>
    <td><code>1005</code></td>
    <td><code>CLOSE_NO_STATUS</code></td>
    <td><strong>保留.</strong>  表示没有收到预期的状态码.</td>
   </tr>
   <tr>
    <td><code>1006</code></td>
    <td><code>CLOSE_ABNORMAL</code></td>
    <td><strong>保留.</strong> 用于期望收到状态码时连接非正常关闭 (也就是说, 没有发送关闭帧).</td>
   </tr>
   <tr>
    <td><code>1007</code></td>
    <td>Unsupported Data</td>
    <td>由于收到了格式不符的数据而断开连接 (如文本消息中包含了非 UTF-8 数据).</td>
   </tr>
   <tr>
    <td><code>1008</code></td>
    <td>Policy Violation</td>
    <td>由于收到不符合约定的数据而断开连接. 这是一个通用状态码, 用于不适合使用 1003 和 1009 状态码的场景.</td>
   </tr>
   <tr>
    <td><code>1009</code></td>
    <td><code>CLOSE_TOO_LARGE</code></td>
    <td>由于收到过大的数据帧而断开连接.</td>
   </tr>
   <tr>
    <td><code>1010</code></td>
    <td>Missing Extension</td>
    <td>客户端期望服务器商定一个或多个拓展, 但服务器没有处理, 因此客户端断开连接.</td>
   </tr>
   <tr>
    <td><code>1011</code></td>
    <td>Internal Error</td>
    <td>客户端由于遇到没有预料的情况阻止其完成请求, 因此服务端断开连接.</td>
   </tr>
   <tr>
    <td><code>1012</code></td>
    <td>Service Restart</td>
    <td>服务器由于重启而断开连接. [<a href="https://www.ietf.org/mail-archive/web/hybi/current/msg09670.html">Ref</a>]</td>
   </tr>
   <tr>
    <td><code>1013</code></td>
    <td>Try Again Later</td>
    <td>服务器由于临时原因断开连接, 如服务器过载因此断开一部分客户端连接. [<a href="https://www.ietf.org/mail-archive/web/hybi/current/msg09670.html">Ref</a>]</td>
   </tr>
   <tr>
    <td><code>1014</code></td>
    <td></td>
    <td><strong>由 WebSocket 标准保留以便未来使用.</strong></td>
   </tr>
   <tr>
    <td><code>1015</code></td>
    <td>TLS Handshake</td>
    <td><strong>保留.</strong> 表示连接由于无法完成 TLS 握手而关闭 (例如无法验证服务器证书).</td>
   </tr>
   <tr>
    <td><code>1016</code>–<code>1999</code></td>
    <td></td>
    <td><strong>由 WebSocket 标准保留以便未来使用.</strong></td>
   </tr>
   <tr>
    <td><code>2000</code>–<code>2999</code></td>
    <td></td>
    <td><strong>由 WebSocket 拓展保留使用.</strong></td>
   </tr>
   <tr>
    <td><code>3000</code>–<code>3999</code></td>
    <td></td>
    <td>?可以由库或框架使用.? <strong>不应</strong>由应用使用. 可以在 IANA 注册, 先到先得.</td>
   </tr>
   <tr>
    <td><code>4000</code>–<code>4999</code></td>
    <td></td>
    <td>可以由应用使用.</td>
   </tr>
  </tbody>
 </table>
 </dd>
 <dt><a href="/zh-CN/docs/Web/API/CloseEvent/reason"><code>CloseEvent.reason</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>返回一个 <a href="/zh-CN/docs/Web/API/DOMString"><code>DOMString</code></a> 用以表示服务器关闭连接的原因. 这是由服务器和子协议决定的.</dd>
 <dt><a href="/zh-CN/docs/Web/API/CloseEvent/wasClean"><code>CloseEvent.wasClean</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>返回一个 <a href="/zh-CN/docs/Web/JavaScript/Reference/Boolean"><code>Boolean</code></a> 用以表示连接是否完全关闭.</dd>
</dl>

<h2 id="Methods">Methods</h2>

<p><em>该接口也继承了其父类 <a href="/zh-CN/docs/Web/API/Event"><code>Event</code></a> 的属性.</em></p>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/CloseEvent/initCloseEvent"><code>CloseEvent.initCloseEvent()</code></a> <span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span> <span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></dt>
 <dd>初始化创建的 <code>CloseEvent</code> 的值. 如果该事件已经被处理, 这个方法什么也不做. 不要直接使用这个方法, 使用 <a href="/zh-CN/docs/Web/API/CloseEvent/CloseEvent"><code>CloseEvent()</code></a> ?构造器来代替.</dd>
</dl>

<h2 id="浏览器兼容性">浏览器兼容性</h2>

<div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/zh-CN/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Desktop</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><a href="/en-US/Firefox/Releases/8">8.0</a> (8.0)<sup>[1]</sup><br>
    <a href="/en-US/Firefox/Releases/12">12.0</a> (12.0)<sup>[2]</sup></td>
   <td>10</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
  </tr>
  <tr>
   <td><code>initCloseEvent</code><code>()</code> <span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><a href="/en-US/Firefox/Releases/8">8.0</a> (8.0)<br>
    <span style="color: #f00;">未实现</span> 41.0</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td>8.0 (8.0)</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
  </tr>
  <tr>
   <td><code>initCloseEvent</code><code>()</code> <span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td>8.0 (8.0)<br>
    <span style="color: #f00;">未实现</span> 41.0</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
 </tbody>
</table>
</div>

<p>[1] Gecko 8.0 (Firefox 8.0 / Thunderbird 8.0 / SeaMonkey 2.5) 以前, Gecko ?简单地发送 <code><a href="/zh-CN/docs/Web/Reference/Events/close" title="/zh-CN/docs/Web/Reference/Events/close">close</a></code> ?事件给 WebSocket ?监听器. ?对 <code>CloseEvent</code> ?的支持是在 Gecko 8.0 实现的.</p>

<p>[2] Gecko 12.0 (Firefox 12.0 / Thunderbird 12.0 / SeaMonkey 2.9) 以前, Gecko 当通道由于未知错误关闭, 或是错误原因不在标准之内时会上报 <code>CLOSE_NORMAL</code> <code>状态码</code>. ?现在则使用 <code>CLOSE_GOING_AWAY</code> 代替.</p>

<h2 id="参考">参考</h2>

<ul>
 <li><a href="/en-US/docs/Web/API/WebSocket"><code>WebSocket</code></a></li>
</ul>
