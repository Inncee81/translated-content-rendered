---
title: InstallEvent
slug: Web/API/InstallEvent
translation_of: Web/API/InstallEvent
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/Service_Worker_API">Service Worker API</a></strong></li><li><strong><a href="/zh-CN/docs/Web/API/InstallEvent"><code>InstallEvent</code></a></strong></li><li class="toggle"><details open><summary>Constructor</summary><ol><li><span class="sidebar-icon"><span title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/InstallEvent/InstallEvent"><code>InstallEvent()</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/InstallEvent/InstallEvent$translate">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>属性</summary><ol><li><a href="/zh-CN/docs/Web/API/InstallEvent/activeWorker"><code>activeWorker</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/InstallEvent/activeWorker$translate">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>继承</summary><ol><li><a href="/zh-CN/docs/Web/API/ExtendableEvent"><code>ExtendableEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/Event"><code>Event</code></a></li></ol></details></li><li class="toggle"><details open><summary>Events</summary><ol><li><a href="/zh-CN/docs/Web/Events/statechange"><code>statechange</code></a></li><li><a href="/zh-CN/docs/Web/Events/updatefound"><code>updatefound</code></a></li><li><a href="/zh-CN/docs/Web/Events/controllerchange"><code>controllerchange</code></a></li><li><a href="/zh-CN/docs/Web/Events/error"><code>error</code></a></li><li><a href="/zh-CN/docs/Web/Events/message"><code>message</code></a></li><li><a href="/zh-CN/docs/Web/Events/install"><code>install</code></a></li><li><a href="/zh-CN/docs/Web/Events/activate"><code>activate</code></a></li><li><a href="/zh-CN/docs/Web/Events/fetch"><code>fetch</code></a></li></ol></details></li><li class="toggle"><details open><summary>Related pages for Service Workers API</summary><ol><li><a href="/zh-CN/docs/Web/API/Cache"><code>Cache</code></a></li><li><a href="/zh-CN/docs/Web/API/CacheStorage"><code>CacheStorage</code></a></li><li><a href="/zh-CN/docs/Web/API/Client"><code>Client</code></a></li><li><a href="/zh-CN/docs/Web/API/Clients"><code>Clients</code></a></li><li><a href="/zh-CN/docs/Web/API/ExtendableEvent"><code>ExtendableEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/FetchEvent"><code>FetchEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/Navigator/serviceWorker"><code>Navigator.serviceWorker</code></a></li><li><a href="/zh-CN/docs/Web/API/NotificationEvent"><code>NotificationEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/PeriodicSyncEvent"><code>PeriodicSyncEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/PeriodicSyncManager"><code>PeriodicSyncManager</code></a></li><li><a href="/zh-CN/docs/Web/API/PeriodicSyncRegistration"><code>PeriodicSyncRegistration</code></a></li><li><a href="/zh-CN/docs/Web/API/ServiceWorker"><code>ServiceWorker</code></a></li><li><a href="/zh-CN/docs/Web/API/ServiceWorkerContainer"><code>ServiceWorkerContainer</code></a></li><li><a href="/zh-CN/docs/Web/API/ServiceWorkerGlobalScope"><code>ServiceWorkerGlobalScope</code></a></li><li><a href="/zh-CN/docs/Web/API/ServiceWorkerRegistration"><code>ServiceWorkerRegistration</code></a></li><li><a href="/zh-CN/docs/Web/API/SyncEvent"><code>SyncEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/SyncManager"><code>SyncManager</code></a></li><li><a href="/zh-CN/docs/Web/API/SyncRegistration"><code>SyncRegistration</code></a></li><li><a href="/zh-CN/docs/Web/API/WindowClient"><code>WindowClient</code></a></li></ol></details></li></ol></section><div class="experimental indicator-warning notecard">
    <p><span title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span> <strong>这是一个实验中的功能</strong><br>此功能某些浏览器尚在开发中，请参考<a href="#Browser_compatibility">浏览器兼容性表格</a>以得到在不同浏览器中适合使用的前缀。由于该功能对应的标准文档可能被重新修订，所以在未来版本的浏览器中该功能的语法和行为可能随之改变。</p>
</div></div>

<p>该参数传递到 <a href="/zh-CN/docs/Web/API/ServiceWorkerGlobalScope/oninstall" title="此页面仍未被本地化, 期待您的翻译!"><code>oninstall</code></a> 事件处理程序，<code>InstallEvent接口表示一个 </code><a href="/zh-CN/docs/Web/API/ServiceWorker" title="一个ServiceWorker对象在 ServiceWorkerRegistration.active 属性和 ServiceWorkerContainer.controller 属性中可用 — 这是一个激活并在控制页面的service worker(service worker成功注册,被控页面已经重新加载完毕.)"><code>ServiceWorker</code></a><code> </code>的 <a href="/zh-CN/docs/Web/API/ServiceWorkerGlobalScope" title="The ServiceWorkerGlobalScope interface of the ServiceWorker API represents the global execution context of a service worker."><code>ServiceWorkerGlobalScope</code></a> 上分派的安装操作。作为 <a href="/zh-CN/docs/Web/API/ExtendableEvent" title="The ExtendableEvent interface extends the lifetime of the install and activate events dispatched on the global scope as part of the service worker lifecycle. This ensures that any functional events (like FetchEvent) are not dispatched until it upgrades database schemas and deletes the outdated cache entries."><code>ExtendableEvent</code></a> 的一个子类，它确保在安装期间不调度诸如 <a href="/zh-CN/docs/Web/API/FetchEvent" title="The parameter passed into the ServiceWorkerGlobalScope.onfetch handler, FetchEvent represents a fetch action that is dispatched on the ServiceWorkerGlobalScope of a ServiceWorker. It contains information about the request and resulting response, and provides the FetchEvent.respondWith() method, which allows us to provide an arbitrary response back to the controlled page."><code>FetchEvent</code></a> 之类的功能事件。</p>

<p>该接口继承自 <a href="/zh-CN/docs/Web/API/ExtendableEvent" title="The ExtendableEvent interface extends the lifetime of the install and activate events dispatched on the global scope as part of the service worker lifecycle. This ensures that any functional events (like FetchEvent) are not dispatched until it upgrades database schemas and deletes the outdated cache entries."><code>ExtendableEvent</code></a> 接口。</p>

<p></p><div class="hidden" id="inheritance_diagram">

<pre class="brush: html">  &lt;div id=&quot;interfaceDiagram&quot; style=&quot;display: inline-block; position: relative; width: 100%; padding-bottom: 8.571428571428571%; vertical-align: middle; overflow: hidden;&quot;&gt;&lt;svg style=&quot;display: inline-block; position: absolute; top: 0; left: 0;&quot; viewbox=&quot;-20 0 700 60&quot; preserveAspectRatio=&quot;xMinYMin meet&quot;&gt;&lt;a xlink:href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/API/Event&quot; target=&quot;_top&quot;&gt;&lt;rect x=&quot;1&quot; y=&quot;1&quot; width=&quot;75&quot; height=&quot;50&quot; fill=&quot;#fff&quot; stroke=&quot;#D4DDE4&quot; stroke-width=&quot;2px&quot; /&gt;&lt;text  x=&quot;38.5&quot; y=&quot;30&quot; font-size=&quot;12px&quot; font-family=&quot;Consolas,Monaco,Andale Mono,monospace&quot; fill=&quot;#4D4E53&quot; text-anchor=&quot;middle&quot; alignment-baseline=&quot;middle&quot;&gt;Event&lt;/text&gt;&lt;/a&gt;&lt;polyline points=&quot;76,25  86,20  86,30  76,25&quot; stroke=&quot;#D4DDE4&quot; fill=&quot;none&quot;/&gt;&lt;line x1=&quot;86&quot; y1=&quot;25&quot; x2=&quot;116&quot; y2=&quot;25&quot; stroke=&quot;#D4DDE4&quot;/&gt;&lt;a xlink:href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/API/ExtendableEvent&quot; target=&quot;_top&quot;&gt;&lt;rect x=&quot;116&quot; y=&quot;1&quot; width=&quot;150&quot; height=&quot;50&quot; fill=&quot;#fff&quot; stroke=&quot;#D4DDE4&quot; stroke-width=&quot;2px&quot; /&gt;&lt;text  x=&quot;191&quot; y=&quot;30&quot; font-size=&quot;12px&quot; font-family=&quot;Consolas,Monaco,Andale Mono,monospace&quot; fill=&quot;#4D4E53&quot; text-anchor=&quot;middle&quot; alignment-baseline=&quot;middle&quot;&gt;ExtendableEvent&lt;/text&gt;&lt;/a&gt;&lt;polyline points=&quot;266,25  276,20  276,30  266,25&quot; stroke=&quot;#D4DDE4&quot; fill=&quot;none&quot;/&gt;&lt;line x1=&quot;276&quot; y1=&quot;25&quot; x2=&quot;306&quot; y2=&quot;25&quot; stroke=&quot;#D4DDE4&quot;/&gt;&lt;a xlink:href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/API/InstallEvent&quot; target=&quot;_top&quot;&gt;&lt;rect x=&quot;306&quot; y=&quot;1&quot; width=&quot;120&quot; height=&quot;50&quot; fill=&quot;#F4F7F8&quot; stroke=&quot;#D4DDE4&quot; stroke-width=&quot;2px&quot; /&gt;&lt;text  x=&quot;366&quot; y=&quot;30&quot; font-size=&quot;12px&quot; font-family=&quot;Consolas,Monaco,Andale Mono,monospace&quot; fill=&quot;#4D4E53&quot; text-anchor=&quot;middle&quot; alignment-baseline=&quot;middle&quot;&gt;InstallEvent&lt;/text&gt;&lt;/a&gt;&lt;/svg&gt;&lt;/div&gt;
</pre>

<pre class="brush: css">  a:hover text { fill: #0095DD; pointer-events: all;}
</pre>

</div>

<iframe src="https://mdn.mozillademos.org/zh-CN/docs/Web/API/InstallEvent$samples/inheritance_diagram?revision=1345770" width="700" class="live-sample-frame inheritance-diagram-frame" height="60" frameborder="0" id="frame_inheritance_diagram"></iframe><p></p>

<h2 id="构造函数">构造函数</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/InstallEvent/InstallEvent" title="此页面仍未被本地化, 期待您的翻译!"><code>InstallEvent.InstallEvent()</code></a></dt>
 <dd>创建一个新的<code>InstallEvent对象。</code></dd>
</dl>

<h2 id="属性">属性</h2>

<p><em>从它的祖先<a href="/zh-CN/docs/Web/API/Event" title="此页面仍未被本地化, 期待您的翻译!"><code>Event</code></a>继承属性。</em></p>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/InstallEvent/activeWorker" title="此页面仍未被本地化, 期待您的翻译!"><code>InstallEvent.activeWorker</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>返回当前处于激活状态，控制页面的<a href="/zh-CN/docs/Web/API/ServiceWorker" title="一个ServiceWorker对象在 ServiceWorkerRegistration.active 属性和 ServiceWorkerContainer.controller 属性中可用 — 这是一个激活并在控制页面的service worker(service worker成功注册,被控页面已经重新加载完毕.)"><code>ServiceWorker</code></a>。</dd>
</dl>

<h2 id="方法">方法</h2>

<p><em>从它的父类<a href="/zh-CN/docs/Web/API/ExtendableEvent" title="The ExtendableEvent interface extends the lifetime of the install and activate events dispatched on the global scope as part of the service worker lifecycle. This ensures that any functional events (like FetchEvent) are not dispatched until it upgrades database schemas and deletes the outdated cache entries."><code>ExtendableEvent</code></a>继承方法。</em></p>

<h2 id="示例">示例</h2>

<p>该代码片段来自 <a href="https://github.com/GoogleChrome/samples/blob/gh-pages/service-worker/prefetch/service-worker.js">service worker prefetch sample</a> (请参阅 <a href="https://googlechrome.github.io/samples/service-worker/prefetch/">prefetch running live</a>)。代码在<a href="/zh-CN/docs/Web/API/ServiceWorkerGlobalScope/oninstall" title="此页面仍未被本地化, 期待您的翻译!"><code>ServiceWorkerGlobalScope.oninstall</code></a>中调用<a href="/zh-CN/docs/Web/API/ExtendableEvent/waitUntil" title="ExtendableEvent.waitUntil() 方法扩展了事件的生命周期。在服务工作线程中，延长事件的寿命从而阻止浏览器在事件中的异步操作完成之前终止服务工作线程。"><code>ExtendableEvent.waitUntil(any value)</code></a>，并延迟将<a href="/zh-CN/docs/Web/API/ServiceWorkerRegistration/installing" title="此页面仍未被本地化, 期待您的翻译!"><code>ServiceWorkerRegistration.installing</code></a> worker视为已安装的，直到传递的promise被成功地resolve。当所有资源已经获取并缓存，或者有任何异常发生时，promise才会resolve。</p>

<p>该代码片段也展示了服务工作线程使用的缓存版本控制的最佳实践。虽然此示例只有一个缓存，但您可以将此方法用于多个缓存。 代码将缓存的速记标识映射到特定的版本化缓存名称。</p>

<div class="note">
<p><strong>注意</strong>: service worker的注册日志记录在Chrome浏览器中可以通过访问chrome://serviceworker-internals查看。</p>
</div>

<pre class="brush: js">var CACHE_VERSION = 1;
var CURRENT_CACHES = {
  prefetch: &apos;prefetch-cache-v&apos; + CACHE_VERSION
};

self.addEventListener(&apos;install&apos;, function(event) {
  var urlsToPrefetch = [
    &apos;./static/pre_fetched.txt&apos;,
    &apos;./static/pre_fetched.html&apos;,
    &apos;https://www.chromium.org/_/rsrc/1302286216006/config/customLogo.gif&apos;
  ];

console.log(&apos;Handling install event. Resources to pre-fetch:&apos;, urlsToPrefetch);

  event.waitUntil(
    caches.open(CURRENT_CACHES[&apos;prefetch&apos;]).then(function(cache) {
      cache.addAll(urlsToPrefetch.map(function(urlToPrefetch) {
        return new Request(urlToPrefetch, {mode: &apos;no-cors&apos;});
      })).then(function() {
        console.log(&apos;All resources have been fetched and cached.&apos;);
      });
    }).catch(function(error) {
      console.error(&apos;Pre-fetching failed:&apos;, error);
    })
  );
});</pre>

<h2 id="规范">规范</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a lang="en" href="https://w3c.github.io/ServiceWorker/" class="external" hreflang="en">Service Workers</a></td>
   <td><span class="spec-WD">Working Draft</span></td>
   <td>As of May 2015, the install event is an instance of <a href="/zh-CN/docs/Web/API/ExtendableEvent"><code>ExtendableEvent</code></a> rather than a child of it.</td>
  </tr>
 </tbody>
</table>

<h2 id="浏览器兼容性">浏览器兼容性</h2>

<div><div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/zh-CN/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Desktop</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div></div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>40.0</td>
   <td><a href="/en-US/Firefox/Releases/44">44.0</a> (44.0)<sup>[1]</sup></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td>24</td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
   <th>Chrome for Android</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td>44.0 (44.0)</td>
   <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td>40.0</td>
  </tr>
 </tbody>
</table>
</div>

<p>[1] Service workers (and <a href="/en-US/docs/Web/API/Push_API">Push</a>) have been disabled in the <a href="https://www.mozilla.org/en-US/firefox/organizations/">Firefox 45 and 52 Extended Support Releases</a> (ESR.)</p>

<h2 id="参见">参见</h2>

<ul>
 <li><a href="/zh-CN/docs/Web/API/NotificationEvent"><code>NotificationEvent</code></a></li>
 <li><a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a></li>
 <li><a href="/en-US/docs/Web/API/Fetch_API">Fetch API</a></li>
</ul>
