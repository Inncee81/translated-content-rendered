---
title: IDBCursor
slug: Web/API/IDBCursor
translation_of: Web/API/IDBCursor
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/IndexedDB_API">IndexedDB API</a></strong></li><li><strong><a href="/zh-CN/docs/Web/API/IDBCursor"><code>IDBCursor</code></a></strong></li><li class="toggle"><details open><summary>属性</summary><ol><li><a href="/zh-CN/docs/Web/API/IDBCursor/direction"><code>direction</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBCursor/key"><code>key</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBCursor/primaryKey"><code>primaryKey</code></a> <a href="/zh-CN/docs/Web/API/IDBCursor/primaryKey$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBCursor/request"><code>request</code></a> <a href="/zh-CN/docs/Web/API/IDBCursor/request$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBCursor/source"><code>source</code></a> <a href="/zh-CN/docs/Web/API/IDBCursor/source$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>方法</summary><ol><li><a href="/zh-CN/docs/Web/API/IDBCursor/advance"><code>advance()</code></a> <a href="/zh-CN/docs/Web/API/IDBCursor/advance$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBCursor/continue"><code>continue()</code></a> <a href="/zh-CN/docs/Web/API/IDBCursor/continue$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBCursor/continuePrimaryKey"><code>continuePrimaryKey()</code></a> <a href="/zh-CN/docs/Web/API/IDBCursor/continuePrimaryKey$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBCursor/delete"><code>delete()</code></a> <a href="/zh-CN/docs/Web/API/IDBCursor/delete$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBCursor/update"><code>update()</code></a> <a href="/zh-CN/docs/Web/API/IDBCursor/update$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>Related pages for IndexedDB</summary><ol><li><a href="/zh-CN/docs/Web/API/IDBCursorSync"><code>IDBCursorSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBCursorWithValue"><code>IDBCursorWithValue</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBDatabase"><code>IDBDatabase</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBDatabaseException"><code>IDBDatabaseException</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBDatabaseSync"><code>IDBDatabaseSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBEnvironment"><code>IDBEnvironment</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBEnvironmentSync"><code>IDBEnvironmentSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBFactory"><code>IDBFactory</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBFactorySync"><code>IDBFactorySync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBIndex"><code>IDBIndex</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBIndexSync"><code>IDBIndexSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBKeyRange"><code>IDBKeyRange</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStoreSync"><code>IDBObjectStoreSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBOpenDBRequest"><code>IDBOpenDBRequest</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBRequest"><code>IDBRequest</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBTransaction"><code>IDBTransaction</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBTransactionSync"><code>IDBTransactionSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBVersionChangeEvent"><code>IDBVersionChangeEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBVersionChangeRequest"><code>IDBVersionChangeRequest</code></a></li></ol></details></li></ol></section>

<p><a href="/en-US/docs/IndexedDB">IndexedDB API</a> 中的 <code>IDBCursor</code> 接口表示一个游标，用于遍历或迭代数据库中的多条记录。</p>

<p>游标有一个源，指示需要遍历哪一个索引或者对象存储区。它在所属区间范围内有一个位置，根据记录健（存储字段）的顺序递增或递减方向移动。游标使应用程序能够异步处理在游标范围内的所有记录。</p>

<p>你可以在同一时间拥有无数个游标。你总会获得表示给定游标的同样的 <code>IDBCursor</code> 对象。在基础索引或对象存储上执行操作。</p>

<h2 id="方法">方法</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/IDBCursor/advance"><code>IDBCursor.advance</code></a></dt>
 <dd>设置光标向前移动位置的次数。</dd>
 <dt><a href="/zh-CN/docs/Web/API/IDBCursor/continue"><code>IDBCursor.continue</code></a></dt>
 <dd>将游标按它的方向移动到下一个位置，到其健与可选健参数匹配的项。</dd>
</dl>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/IDBCursor/delete"><code>IDBCursor.delete</code></a></dt>
 <dd>返回一个 <a href="/zh-CN/docs/Web/API/IDBRequest"><code>IDBRequest</code></a> 对象，并且在一个单独的线程中，删除游标位置记录，而不改变游标的位置。这个可以用作删除一些特定的记录。</dd>
 <dt><a href="/zh-CN/docs/Web/API/IDBCursor/update"><code>IDBCursor.update</code></a></dt>
 <dd>返回一个 <a href="/zh-CN/docs/Web/API/IDBRequest"><code>IDBRequest</code></a> 对象，并且在一个单独的线程中，更新对象存储中当前游标位置的值。这个可以用来更新特定的记录。</dd>
</dl>

<h2 id="属性">属性</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/IDBCursor/source"><code>IDBCursor.source</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>返回一个游标正在迭代的 <a href="/zh-CN/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a>  或者 <a href="/zh-CN/docs/Web/API/IDBIndex"><code>IDBIndex</code></a> 。这个方法永远不会返回一个空或者抛出异常，即使游标当前正在被迭代，已迭代超过其结束，再或者其事务没有处于活动状态。</dd>
 <dt><a href="/zh-CN/docs/Web/API/IDBCursor/direction"><code>IDBCursor.direction</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>返回光标遍历方向。请查看<a href="#const_next"> 常数</a> 中可能的值。</dd>
 <dt><a href="/zh-CN/docs/Web/API/IDBCursor/key"><code>IDBCursor.key</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>返回记录中游标位置的有效主键。如果游标在区间之外，将会设置成 <code>undefined</code>。游标主键可以是任意的时间类型（data type）。</dd>
 <dt><a href="/zh-CN/docs/Web/API/IDBCursor/primaryKey"><code>IDBCursor.primaryKey</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>返回游标当前有效的主键。如果游标当前正在被迭代或者已经在迭代在区间范围外，将会被设置成 <code>undefined</code> 。 游标主键可以是任意的时间类型（data type）。</dd>
</dl>

<h2 id="Constants" name="Constants">常量</h2>

<div><div class="obsolete obsoleteHeader notecard"><p><strong>已废弃 Gecko 25 (Firefox 25 / Thunderbird 25 / SeaMonkey 2.22)</strong><br>This feature is obsolete. Although it may still work in some browsers, its use is discouraged since it could be removed at any time. Try to avoid using it.</p></div></div>

<div class="warning notecard">
<p>这些常量不再被支持。你应该使用字符串常量。(<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=891944">bug 891944</a>)</p>
</div>

<ul>
 <li><code>NEXT </code>: <code>&quot;next&quot;</code> :游标展示所有记录，包括重复的记录。它从主键区间下届开始逐步上升（按键的顺序单调递增）。</li>
 <li><code>NEXTUNIQUE</code> : <code>&quot;nextunique&quot;</code> : 游标展示所有记录，不包括重复的记录。如果同一个主键存在重复的记录，只有第一条迭代记录被取出。它从主键区间的下界开始逐步上升</li>
 <li><code>PREV </code>: <code>&quot;prev&quot;</code> : 游标展示所有记录，包括重复的记录。它从主键区间上界开始逐步往下移动（按主键的顺序单调递减）</li>
 <li><code>PREVUNIQUE </code>: <code>&quot;prevunique&quot;</code> :游标展示所有记录，不包括重复的记录。如果主键存在重复记录，只有第一个迭代记录被取出。它从主键区间上界开始逐步往下移动。</li>
</ul>

<h2 id="示例">示例</h2>

<p><span style="line-height: 1.5;">在这个简单的代码片段中，我们创建了一个事务和检索一个对象存储，之后使用一个游标遍历存储对象中所有的记录。游标不是必须使用主键来选则数据库，我们可以把它全部拿出来。同时需要注意在每次循环遍历中，你可以</span><span style="line-height: 1.5;">在当前记录下的游标对象中使用 </span> <span style="line-height: 1.5;"> </span><code style="font-style: normal; line-height: 1.5;">cursor.value.foo</code> 抓取数据。对于完整的工作示例，请查看我们的 <span style="line-height: 1.5;"><a href="https://github.com/mdn/IDBcursor-example/">IDBCursor example</a></span><span style="line-height: 1.5;"> (</span><a href="http://mdn.github.io/IDBcursor-example/" style="line-height: 1.5;">在线查看示例</a><span style="line-height: 1.5;">)。</span></p>

<pre class="notranslate"><span style="line-height: 1.5;">function displayData() {</span>
  var transaction = db.transaction([&apos;rushAlbumList&apos;], &quot;readonly&quot;);
  var objectStore = transaction.objectStore(&apos;rushAlbumList&apos;);

  objectStore.openCursor().onsuccess = function(event) {
    var cursor = event.target.result;
    if(cursor) {
      var listItem = document.createElement(&apos;li&apos;);
      listItem.innerHTML = cursor.value.albumTitle + &apos;, &apos; + cursor.value.year;
      list.appendChild(listItem);

      cursor.continue();
    } else {
      console.log(&apos;Entries all displayed.&apos;);
    }
  };
};</pre>

<h2 id="Specifications">Specifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://www.w3.org/TR/IndexedDB/#idl-def-IDBCursor" hreflang="en" lang="en">Indexed Database API 2.0<br><small lang="zh-CN">cursor</small></a></td>
   <td><span class="spec-REC">Recommendation</span></td>
   <td></td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility" name="Browser_compatibility">Browser compatibility</h2>

<div><div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/zh-CN/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Desktop</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div></div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>23<span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/zh-CN/docs/Web/Guide/Prefixes">webkit</a></span><br>
    24</td>
   <td>10 <span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/zh-CN/docs/Web/Guide/Prefixes">moz</a></span><br>
    <a href="/en-US/Firefox/Releases/16">16.0</a> (16.0)</td>
   <td>10, partial</td>
   <td>15</td>
   <td>7.1</td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS</th>
   <th>IE Phone</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>4.4</td>
   <td>22.0 (22.0)</td>
   <td>1.0.1</td>
   <td>10</td>
   <td>22</td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
 </tbody>
</table>
</div>

<h2 id="See_also">See also</h2>

<ul>
 <li><a href="/en-US/docs/Web/API/IndexedDB_API/Using_IndexedDB">Using IndexedDB</a></li>
 <li>Starting transactions: <a href="/zh-CN/docs/Web/API/IDBDatabase"><code>IDBDatabase</code></a></li>
 <li>Using transactions: <a href="/zh-CN/docs/Web/API/IDBTransaction"><code>IDBTransaction</code></a></li>
 <li>Setting a range of keys: <a href="/zh-CN/docs/Web/API/IDBKeyRange"><code>IDBKeyRange</code></a></li>
 <li>Retrieving and making changes to your data: <a href="/zh-CN/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a></li>
 <li>Using cursors: <a href="/zh-CN/docs/Web/API/IDBCursor"><code>IDBCursor</code></a></li>
 <li>Reference example: <a class="external" href="https://github.com/mdn/to-do-notifications/tree/gh-pages">To-do Notifications</a> (<a class="external" href="http://mdn.github.io/to-do-notifications/">view example live</a>.)</li>
</ul>
