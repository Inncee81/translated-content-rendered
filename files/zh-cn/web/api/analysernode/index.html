---
title: AnalyserNode
slug: Web/API/AnalyserNode
translation_of: Web/API/AnalyserNode
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/Web_Audio_API">Web Audio API</a></strong></li><li><strong><a href="/zh-CN/docs/Web/API/AnalyserNode"><code>AnalyserNode</code></a></strong></li><li class="toggle"><details open><summary>Constructor</summary><ol><li><a href="/zh-CN/docs/Web/API/AnalyserNode/AnalyserNode"><code>AnalyserNode()</code></a></li></ol></details></li><li class="toggle"><details open><summary>属性</summary><ol><li><a href="/zh-CN/docs/Web/API/AnalyserNode/fftSize"><code>fftSize</code></a></li><li><a href="/zh-CN/docs/Web/API/AnalyserNode/frequencyBinCount"><code>frequencyBinCount</code></a></li><li><a href="/zh-CN/docs/Web/API/AnalyserNode/maxDecibels"><code>maxDecibels</code></a> <a href="/zh-CN/docs/Web/API/AnalyserNode/maxDecibels$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/AnalyserNode/minDecibels"><code>minDecibels</code></a> <a href="/zh-CN/docs/Web/API/AnalyserNode/minDecibels$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/AnalyserNode/smoothingTimeConstant"><code>smoothingTimeConstant</code></a></li></ol></details></li><li class="toggle"><details open><summary>方法</summary><ol><li><a href="/zh-CN/docs/Web/API/AnalyserNode/getByteFrequencyData"><code>getByteFrequencyData()</code></a></li><li><a href="/zh-CN/docs/Web/API/AnalyserNode/getByteTimeDomainData"><code>getByteTimeDomainData()</code></a></li><li><a href="/zh-CN/docs/Web/API/AnalyserNode/getFloatFrequencyData"><code>getFloatFrequencyData()</code></a></li><li><a href="/zh-CN/docs/Web/API/AnalyserNode/getFloatTimeDomainData"><code>getFloatTimeDomainData()</code></a> <a href="/zh-CN/docs/Web/API/AnalyserNode/getFloatTimeDomainData$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>继承</summary><ol><li><a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a></li><li><a href="/zh-CN/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li><li class="toggle"><details open><summary>Related pages for Web Audio API</summary><ol><li><a href="/zh-CN/docs/Web/API/AudioBuffer"><code>AudioBuffer</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioBufferSourceNode"><code>AudioBufferSourceNode</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioContext"><code>AudioContext</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioContextOptions"><code>AudioContextOptions</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioDestinationNode"><code>AudioDestinationNode</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioListener"><code>AudioListener</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioNodeOptions"><code>AudioNodeOptions</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioParam"><code>AudioParam</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioProcessingEvent"><code>AudioProcessingEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioScheduledSourceNode"><code>AudioScheduledSourceNode</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioWorklet"><code>AudioWorklet</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioWorkletGlobalScope"><code>AudioWorkletGlobalScope</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioWorkletNode"><code>AudioWorkletNode</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioWorkletProcessor"><code>AudioWorkletProcessor</code></a></li><li><a href="/zh-CN/docs/Web/API/BaseAudioContext"><code>BaseAudioContext</code></a></li><li><a href="/zh-CN/docs/Web/API/BiquadFilterNode"><code>BiquadFilterNode</code></a></li><li><a href="/zh-CN/docs/Web/API/ChannelMergerNode"><code>ChannelMergerNode</code></a></li><li><a href="/zh-CN/docs/Web/API/ChannelSplitterNode"><code>ChannelSplitterNode</code></a></li><li><a href="/zh-CN/docs/Web/API/ConstantSourceNode"><code>ConstantSourceNode</code></a></li><li><a href="/zh-CN/docs/Web/API/ConvolverNode"><code>ConvolverNode</code></a></li><li><a href="/zh-CN/docs/Web/API/DelayNode"><code>DelayNode</code></a></li><li><a href="/zh-CN/docs/Web/API/DynamicsCompressorNode"><code>DynamicsCompressorNode</code></a></li><li><a href="/zh-CN/docs/Web/API/GainNode"><code>GainNode</code></a></li><li><a href="/zh-CN/docs/Web/API/IIRFilterNode"><code>IIRFilterNode</code></a></li><li><a href="/zh-CN/docs/Web/API/MediaElementAudioSourceNode"><code>MediaElementAudioSourceNode</code></a></li><li><a href="/zh-CN/docs/Web/API/MediaStreamAudioDestinationNode"><code>MediaStreamAudioDestinationNode</code></a></li><li><a href="/zh-CN/docs/Web/API/MediaStreamAudioSourceNode"><code>MediaStreamAudioSourceNode</code></a></li><li><a href="/zh-CN/docs/Web/API/OfflineAudioCompletionEvent"><code>OfflineAudioCompletionEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/OfflineAudioContext"><code>OfflineAudioContext</code></a></li><li><a href="/zh-CN/docs/Web/API/OscillatorNode"><code>OscillatorNode</code></a></li><li><a href="/zh-CN/docs/Web/API/PannerNode"><code>PannerNode</code></a></li><li><a href="/zh-CN/docs/Web/API/PeriodicWave"><code>PeriodicWave</code></a></li><li><a href="/zh-CN/docs/Web/API/StereoPannerNode"><code>StereoPannerNode</code></a></li><li><a href="/zh-CN/docs/Web/API/WaveShaperNode"><code>WaveShaperNode</code></a></li></ol></details></li></ol></section>

<p> <strong><code>AnalyserNode</code></strong><strong> </strong>接口表示了一个可以提供实时频域和时域分析信息的节点。它是一个不对音频流作任何改动的 <a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a>，同时允许你获取和处理它生成的数据，从而创建音频可视化。</p>

<p><code>AnalyzerNode</code> 只有一个输入和输出，即使未连接到输出它也能正常工作。</p>

<p><img alt="Without modifying the audio stream, the node allows to get the frequency and time-domain data associated to it, using a FFT." src="https://mdn.mozillademos.org/files/5119/WebAudioFFT.png" style="height: 174px; width: 661px;"></p>

<table class="properties">
 <tbody>
  <tr>
   <th scope="row">输入数</th>
   <td><code>1</code></td>
  </tr>
  <tr>
   <th scope="row">输出数</th>
   <td><code>1</code> (但可能是未连接的)</td>
  </tr>
  <tr>
   <th scope="row">通道计数模式</th>
   <td><code>&quot;explicit&quot;</code></td>
  </tr>
  <tr>
   <th scope="row">通道数</th>
   <td><code>1</code></td>
  </tr>
  <tr>
   <th scope="row">通道解释</th>
   <td><code>&quot;speakers&quot;</code></td>
  </tr>
 </tbody>
</table>

<h2 id="继承">继承</h2>

<p>继承自以下父接口:</p>

<div class="hidden" id="inheritance_diagram">

<pre class="brush: html notranslate">  &lt;div id=&quot;interfaceDiagram&quot; style=&quot;display: inline-block; position: relative; width: 100%; padding-bottom: 11.666666666666666%; vertical-align: middle; overflow: hidden;&quot;&gt;&lt;svg style=&quot;display: inline-block; position: absolute; top: 0; left: 0;&quot; viewbox=&quot;-50 0 600 70&quot; preserveAspectRatio=&quot;xMinYMin meet&quot;&gt;&lt;a xlink:href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget&quot; target=&quot;_top&quot;&gt;&lt;rect x=&quot;1&quot; y=&quot;1&quot; width=&quot;110&quot; height=&quot;50&quot; fill=&quot;#fff&quot; stroke=&quot;#D4DDE4&quot; stroke-width=&quot;2px&quot; /&gt;&lt;text  x=&quot;56&quot; y=&quot;30&quot; font-size=&quot;12px&quot; font-family=&quot;Consolas,Monaco,Andale Mono,monospace&quot; fill=&quot;#4D4E53&quot; text-anchor=&quot;middle&quot; alignment-baseline=&quot;middle&quot;&gt;EventTarget&lt;/text&gt;&lt;/a&gt;&lt;polyline points=&quot;111,25  121,20  121,30  111,25&quot; stroke=&quot;#D4DDE4&quot; fill=&quot;none&quot;/&gt;&lt;line x1=&quot;121&quot; y1=&quot;25&quot; x2=&quot;151&quot; y2=&quot;25&quot; stroke=&quot;#D4DDE4&quot;/&gt;&lt;a xlink:href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/API/AudioNode&quot; target=&quot;_top&quot;&gt;&lt;rect x=&quot;151&quot; y=&quot;1&quot; width=&quot;90&quot; height=&quot;50&quot; fill=&quot;#fff&quot; stroke=&quot;#D4DDE4&quot; stroke-width=&quot;2px&quot; /&gt;&lt;text  x=&quot;196&quot; y=&quot;30&quot; font-size=&quot;12px&quot; font-family=&quot;Consolas,Monaco,Andale Mono,monospace&quot; fill=&quot;#4D4E53&quot; text-anchor=&quot;middle&quot; alignment-baseline=&quot;middle&quot;&gt;AudioNode&lt;/text&gt;&lt;/a&gt;&lt;polyline points=&quot;241,25  251,20  251,30  241,25&quot; stroke=&quot;#D4DDE4&quot; fill=&quot;none&quot;/&gt;&lt;line x1=&quot;251&quot; y1=&quot;25&quot; x2=&quot;281&quot; y2=&quot;25&quot; stroke=&quot;#D4DDE4&quot;/&gt;&lt;a xlink:href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/API/AnalyserNode&quot; target=&quot;_top&quot;&gt;&lt;rect x=&quot;281&quot; y=&quot;1&quot; width=&quot;120&quot; height=&quot;50&quot; fill=&quot;#F4F7F8&quot; stroke=&quot;#D4DDE4&quot; stroke-width=&quot;2px&quot; /&gt;&lt;text  x=&quot;341&quot; y=&quot;30&quot; font-size=&quot;12px&quot; font-family=&quot;Consolas,Monaco,Andale Mono,monospace&quot; fill=&quot;#4D4E53&quot; text-anchor=&quot;middle&quot; alignment-baseline=&quot;middle&quot;&gt;AnalyserNode&lt;/text&gt;&lt;/a&gt;&lt;/svg&gt;&lt;/div&gt;
</pre>

<pre class="brush: css notranslate">  a:hover text { fill: #0095DD; pointer-events: all;}
</pre>

</div>

<iframe class="live-sample-frame inheritance-diagram-frame" frameborder="0" height="70" id="frame_inheritance_diagram" src="https://mdn.mozillademos.org/zh-CN/docs/Web/API/AnalyserNode$samples/inheritance_diagram?revision=1580591" width="600"></iframe>

<h2 id="构造函数">构造函数</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/AnalyserNode/AnalyserNode"><code>AnalyserNode()</code></a></dt>
 <dd>创建一个新的 <code>AnalyserNode</code> 对象实例。</dd>
</dl>

<h2 id="属性">属性</h2>

<p><em>继承属性自 </em><em><a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a>。</em></p>

<dl>
 <dt><span id="cke_bm_91S" style="display: none;"> </span><a href="/zh-CN/docs/Web/API/AnalyserNode/fftSize"><code>AnalyserNode.fftSize</code></a></dt>
 <dd>一个无符号长整形(unsigned long)的值，代表了用于计算频域信号时使用的 FFT (<a href="https://zh.wikipedia.org/zh-cn/%E5%BF%AB%E9%80%9F%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2">快速傅里叶变换</a>) 的窗口大小。</dd>
 <dt><a href="/zh-CN/docs/Web/API/AnalyserNode/frequencyBinCount"><code>AnalyserNode.frequencyBinCount</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>一个无符号长整形(unsigned long)的值, 值为fftSize的一半。这通常等于将要用于可视化的数据值的数量。</dd>
 <dt><a href="/zh-CN/docs/Web/API/AnalyserNode/minDecibels"><code>AnalyserNode.minDecibels</code></a></dt>
 <dd>是一个双精度值，表示FFT分析频域数据并转换为无符号字节值时，对输入的功率数据的最小阈值 - 基本上，它限定了调用<code>getByteFrequencyData()</code>时结果范围的最小值</dd>
 <dt><a href="/zh-CN/docs/Web/API/AnalyserNode/maxDecibels"><code>AnalyserNode.maxDecibels</code></a></dt>
 <dt></dt>
 <dd>是一个双精度值，表示FFT分析频域数据并转换为无符号字节值时，对输入的功率数据的最大阈值 - 基本上，它限定了调用<code>getByteFrequencyData()</code>时结果范围的最大值</dd>
 <dt><a href="/zh-CN/docs/Web/API/AnalyserNode/smoothingTimeConstant"><code>AnalyserNode.smoothingTimeConstant</code></a></dt>
 <dd>是一个双精度浮点型(double)的值，表示最后一个分析帧的平均常数 — 基本上，它随时间使值之间的过渡更平滑。</dd>
</dl>

<h2 id="方法">方法</h2>

<p><em>继承方法自 </em><em><a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a></em>.</p>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/AnalyserNode/getFloatFrequencyData"><code>AnalyserNode.getFloatFrequencyData()</code></a></dt>
 <dd>将当前频域数据拷贝进<a href="/zh-CN/docs/Web/API/Float32Array"><code>Float32Array</code></a>数组。</dd>
</dl>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/AnalyserNode/getByteFrequencyData"><code>AnalyserNode.getByteFrequencyData()</code></a></dt>
 <dd>将当前频域数据拷贝进<a href="/zh-CN/docs/Web/API/Uint8Array"><code>Uint8Array</code></a>数组（无符号字节数组）。</dd>
</dl>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/AnalyserNode/getFloatTimeDomainData"><code>AnalyserNode.getFloatTimeDomainData()</code></a></dt>
 <dd>将当前波形，或者时域数据拷贝进<a href="/zh-CN/docs/Web/API/Float32Array"><code>Float32Array</code></a>数组。</dd>
 <dt><a href="/zh-CN/docs/Web/API/AnalyserNode/getByteTimeDomainData"><code>AnalyserNode.getByteTimeDomainData()</code></a></dt>
 <dd>将当前波形，或者时域数据拷贝进 <a href="/zh-CN/docs/Web/API/Uint8Array"><code>Uint8Array</code></a>数组（无符号字节数组）。 </dd>
</dl>

<h2 id="例子">例子</h2>

<div class="note">
<p><strong>注意：</strong>查看 <a href="/en-US/docs/Web/API/Web_Audio_API/Visualizations_with_Web_Audio_API">Visualizations with Web Audio API</a> 指南以获得更多关于创建音频可视化效果的信息。</p>
</div>

<h3 id="基础用法">基础用法</h3>

<p>下面的例子展示了 <a href="/zh-CN/docs/Web/API/AudioContext"><code>AudioContext</code></a> 创建一个 <code>AnalyserNode</code>, 然后用 <a href="/zh-CN/docs/Web/API/Window/requestAnimationFrame"><code>requestAnimationFrame</code></a> 和 <a href="/zh-CN/docs/Web/HTML/Element/canvas" title="&lt;canvas&gt;元素可被用来通过JavaScript（Canvas API 或 WebGL API）绘制图形及图形动画。"><code>&lt;canvas&gt;</code></a> 去反复收集当前音频的时域数据, 并绘制为一个示波器风格的输出(频谱).</p>

<p>更多的例子/信息, 查看 <a href="https://mdn.github.io/voice-change-o-matic/">Voice-change-O-matic</a> 演示 (相关代码在 <a href="https://github.com/mdn/voice-change-o-matic/blob/gh-pages/scripts/app.js#L128-L205">app.js 的 128行~205行</a>).</p>

<pre class="brush: js notranslate">var audioCtx = new(window.AudioContext || window.webkitAudioContext)();
var analyser = audioCtx.createAnalyser();

// ...

analyser.fftSize = 2048;
var bufferLength = analyser.frequencyBinCount;
var dataArray = new Uint8Array(bufferLength);
analyser.getByteTimeDomainData(dataArray);

// 获取ID为 &quot;oscilloscope&quot; 的画布
var canvas = document.getElementById(&quot;oscilloscope&quot;);
var canvasCtx = canvas.getContext(&quot;2d&quot;);

// 绘制一个当前音频源的示波器

function draw() {

  drawVisual = requestAnimationFrame(draw);

  analyser.getByteTimeDomainData(dataArray);

  canvasCtx.fillStyle = &apos;rgb(200, 200, 200)&apos;;
  canvasCtx.fillRect(0, 0, canvas.width, canvas.height);

  canvasCtx.lineWidth = 2;
  canvasCtx.strokeStyle = &apos;rgb(0, 0, 0)&apos;;

  canvasCtx.beginPath();

  var sliceWidth = canvas.width * 1.0 / bufferLength;
  var x = 0;

  for (var i = 0; i &lt; bufferLength; i++) {

    var v = dataArray[i] / 128.0;
    var y = v * canvas.height / 2;

    if (i === 0) {
      canvasCtx.moveTo(x, y);
    } else {
      canvasCtx.lineTo(x, y);
    }

    x += sliceWidth;
  }

  canvasCtx.lineTo(canvas.width, canvas.height / 2);
  canvasCtx.stroke();
};

draw();</pre>

<h2 id="规范">规范</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://webaudio.github.io/web-audio-api/#the-analysernode-interface" hreflang="en" lang="en">Web Audio API<br><small lang="zh-CN">AnalyserNode</small></a></td>
   <td><span class="spec-WD">Working Draft</span></td>
   <td></td>
  </tr>
 </tbody>
</table>

<h2 id="浏览器兼容性">浏览器兼容性</h2>

<div>
<div class="hidden">此页的兼容性表生成自结构化数据。如果你希望贡献相关数据，请查看 <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> 并给我们发送一个 pull request.</div>

<div class="bc-data" id="bcd:api.AnalyserNode"></div>
</div>

<h2 id="相关内容">相关内容</h2>

<ul>
 <li><a href="/zh-CN/docs/Web_Audio_API/Using_Web_Audio_API">Web Audio API的运用 </a></li>
</ul>
