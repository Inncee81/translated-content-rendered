---
title: Canvas的基本用法
slug: Web/API/Canvas_API/Tutorial/Basic_usage
tags:
  - Canvas
  - HTML
  - 中级
  - 图像
  - 教程
translation_of: Web/API/Canvas_API/Tutorial/Basic_usage
---
<div><section id="Quick_Links">
 <ol>
  <li><a href="/zh-CN/docs/Web/API/Canvas_API"><strong>Canvas API</strong></a></li>
  <li class="toggle">
    <details open>
      <summary>Canvas 教程</summary>
      <ol>
        <li><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial/Basic_usage">基本用法</a></li>
        <li><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial/Drawing_shapes">绘制形状</a></li>
        <li><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial/Applying_styles_and_colors">添加样式和颜色</a></li>
        <li><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial/Drawing_text">绘制文本</a></li>
        <li><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial/Using_images">使用图片</a></li>
        <li><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial/Transformations">变形</a></li>
        <li><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial/Compositing">合成与裁剪</a></li>
        <li><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial/Basic_animations">基本动画</a></li>
        <li><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial/Advanced_animations">高级动画</a></li>
        <li><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial/Pixel_manipulation_with_canvas">像素操作</a></li>
        <li><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial/Hit_regions_and_accessibility">点击区域和无障碍访问</a></li>
        <li><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial/Optimizing_canvas">canvas 的优化</a></li>
        <li><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial/Finale">终极</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details open>
      <summary>示例</summary>
      <ol>
        <li><a href="/zh-CN/docs/Web/API/Canvas_API/A_basic_ray-caster">一个基本的光线投射例子</a></li>
        <li><a href="/zh-CN/Add-ons/Code_snippets/Canvas">Canvas 代码片段</a></li>
        <li><a href="/zh-CN/docs/Web/API/Canvas_API/Manipulating_video_using_canvas">在 canvas 中操作视频</a></li>
      </ol>
    </details>
  </li>
  <li class="toggle">
    <details open>
      <summary>接口</summary>
      <ol>
        <li><a href="/zh-CN/docs/Web/API/HTMLCanvasElement"><code>HTMLCanvasElement</code></a></li>
        <li><a href="/zh-CN/docs/Web/API/CanvasRenderingContext2D"><code>CanvasRenderingContext2D</code></a></li>
        <li><a href="/zh-CN/docs/Web/API/CanvasGradient"><code>CanvasGradient</code></a></li>
        <li><a href="/zh-CN/docs/Web/API/CanvasPattern"><code>CanvasPattern</code></a></li>
        <li><a href="/zh-CN/docs/Web/API/ImageBitmap"><code>ImageBitmap</code></a></li>
        <li><a href="/zh-CN/docs/Web/API/ImageData"><code>ImageData</code></a></li>
        <li><a href="/zh-CN/docs/Web/API/TextMetrics"><code>TextMetrics</code></a></li>
        <li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span> <a href="/zh-CN/docs/Web/API/Path2D"><code>Path2D</code></a></li>
      </ol>
    </details>
  </li>
  <li><strong><a href="/zh-CN/docs/MDN">文档:</a></strong></li>
  <li class="toggle">
    <details>
      <summary>常用页面列表</summary>
      <ol>
        <li><a href="/zh-CN/docs/tag/Canvas">拥有 &quot;Canvas&quot; 标签的页面</a></li>
      </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
      <summary>贡献</summary>
      <ol>
        <li><a href="/zh-CN/docs/MDN/Doc_status/API/Canvas">Canvas 文档翻译状态</a></li>
        <li><a href="/zh-CN/docs/MDN">MDN 项目</a></li>
      </ol>
    </details>
  </li>
 </ol>
</section> <div class="prevnext" style="text-align: right;">
    <p><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial" style="float: left;" class="button">« 上一页</a><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial/Drawing_shapes" class="button">下一页  »</a></p>
</div></div>

<div class="summary">
<p>让我们通过了解 <a href="/zh-CN/docs/Web/HTML/Element/canvas" title="&lt;canvas&gt;元素可被用来通过脚本（通常是JavaScript）绘制图形。比如,它可以被用来绘制图形,制作图片集合,甚至用来实现动画效果。你可以(也应该)在元素标签内写入可提供替代的的代码内容，这些内容将会在在旧的、不支持&lt;canvas&gt;元素的浏览器或是禁用了JavaScript的浏览器内渲染并展现。"><code>&lt;canvas&gt;</code></a> <a class="glossaryLink" href="/en-US/docs/Glossary/HTML" title="HTML: HTML (HyperText Markup Language) is a descriptive language that specifies webpage structure.">HTML</a> 元素本身开始本教程。在本页结束时，你会了解到如何去设置一个 canvas 2D 上下文以及如何在你的浏览器上创建第一个例子。</p>
</div>

<h2 id="&lt;canvas&gt;_元素"> <code>&lt;canvas&gt;</code> 元素</h2>

<pre class="brush: html">&lt;canvas id=&quot;tutorial&quot; width=&quot;150&quot; height=&quot;150&quot;&gt;&lt;/canvas&gt;
</pre>

<p><a href="/zh-CN/docs/Web/HTML/Element/canvas" title="&lt;canvas&gt;元素可被用来通过脚本（通常是JavaScript）绘制图形。比如,它可以被用来绘制图形,制作图片集合,甚至用来实现动画效果。你可以(也应该)在元素标签内写入可提供替代的的代码内容，这些内容将会在在旧的、不支持&lt;canvas&gt;元素的浏览器或是禁用了JavaScript的浏览器内渲染并展现。"><code>&lt;canvas&gt;</code></a> 看起来和 <a href="/zh-CN/docs/Web/HTML/Element/img" title><code>&lt;img&gt;</code></a> 元素很相像，唯一的不同就是它并没有 src 和 alt 属性。实际上，<code>&lt;canvas&gt;</code> 标签只有两个属性<strong>——</strong> <code><a href="/zh-CN/docs/Web/HTML/Element/canvas#attr-width">width</a></code>和<code><a href="/zh-CN/docs/Web/HTML/Element/canvas#attr-height">height</a></code>。这些都是可选的，并且同样利用 <a class="glossaryLink" href="/en-US/docs/Glossary/DOM" title="DOM: The DOM (Document Object Model) is an API that represents and interacts with any HTML or XML document. The DOM is a document model loaded in the browser and representing the document as a node tree, where each node represents part of the document (e.g. an element, text string, or comment).">DOM</a> <a href="/zh-CN/docs/Web/API/HTMLCanvasElement">properties</a> 来设置。当没有设置宽度和高度的时候，canvas会初始化宽度为300像素和高度为150像素。该元素可以使用<a class="glossaryLink" href="/en-US/docs/Glossary/CSS" title="CSS: CSS (Cascading Style Sheets) is a declarative language that controls how webpages look in the browser.">CSS</a>来定义大小，但在绘制时图像会伸缩以适应它的框架尺寸：<span class="short_text" id="result_box" lang="zh-CN"><span>如果</span><span>CSS</span></span><span class="gt-baf-back">的尺寸</span><span class="short_text" lang="zh-CN"><span>与</span><span>初始</span><span>画布的</span><span>比例不一致</span><span>，</span><span>它会出现</span><span>扭曲</span><span>。</span></span></p>

<div class="note notecard">
<p><strong>注意:</strong> 如果你绘制出来的图像是扭曲的, 尝试用width和height属性为&lt;canvas&gt;明确规定宽高，而不是使用CSS。</p>
</div>

<p><a href="/zh-CN/docs/Web/HTML/Global_attributes/id"><code>id</code></a>属性并不是&lt;canvas&gt;元素所特有的，而是每一个HTML元素都默认具有的属性（比如class属性）。给每个标签都加上一个id属性是个好主意，因为这样你就能在我们的脚本中很容易的找到它。</p>

<p>&lt;canvas&gt;元素可以像任何一个普通的图像一样（有<a href="/zh-CN/docs/Web/CSS/margin" title="margin属性为给定元素设置所有四个（上下左右）方向的外边距属性。这是四个外边距属性设置的简写。四个外边距属性设置分别是： margin-top， margin-right， margin-bottom 和 margin-left 。指定的外边距允许为负数。"><code>margin</code></a>，<a href="/zh-CN/docs/Web/CSS/border" title="CSS的border属性是一个用于设置各种单独的边界属性的简写属性。border可以用于设置一个或多个以下属性的值： border-width, border-style, border-color。"><code>border</code></a>，<a href="/zh-CN/docs/Web/CSS/background" title="background 是一种 CSS 简写属性，用于一次性集中定义各种背景属性，包括 color, image, origin 与 size, repeat 方式等等。"><code>background</code></a>等等属性）被设计。然而，这些样式不会影响在canvas中的实际图像。我们将会在一个<span class="short_text" id="result_box" lang="zh-CN"><span><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial/Applying_styles_and_colors">专门的章节</a>里</span></span>看到这是如何解决的。当开始时没有为canvas规定样式规则，其将会完全透明。</p>

<div id="section_2">
<h3 id="替换内容">替换内容</h3>

<p>&lt;canvas&gt;元素与<a href="/zh-CN/docs/Web/HTML/Element/img" title><code>&lt;img&gt;</code></a>标签的不同之处在于，就像<a href="/zh-CN/docs/Web/HTML/Element/video" title="HTML &lt;video&gt; 元素 用于在HTML或者XHTML文档中嵌入媒体播放器，用于支持文档内的视频播放。"><code>&lt;video&gt;</code></a>，<a href="/zh-CN/docs/Web/HTML/Element/audio" title="HTML &lt;audio&gt; 元素用于在文档中表示音频内容。 &lt;audio&gt; 元素可以包含多个音频资源， 这些音频资源可以使用 src 属性或者&lt;source&gt; 元素来进行描述； 浏览器将会选择最合适的一个来使用。对于不支持&lt;audio&gt;元素的浏览器，&lt;audio&gt;元素也可以作为浏览器不识别的内容加入到文档中。"><code>&lt;audio&gt;</code></a>，或者 <a href="/zh-CN/docs/Web/HTML/Element/picture" title="HTML &lt;picture&gt; 元素通过包含零或多个 &lt;source&gt; 元素和一个 &lt;img&gt; 元素来为不同的显示/设备场景提供图像版本。浏览器会选择最匹配的子 &lt;source&gt; 元素，如果没有匹配的，就选择 &lt;img&gt; 元素的 src 属性中的URL。然后，所选图像呈现在&lt;img&gt;元素占据的空间中。"><code>&lt;picture&gt;</code></a>元素一样，<span class="short_text" id="result_box" lang="zh-CN"><span>很容易</span><span>定义一些</span><span>替代内容</span></span><span lang="zh-CN"><span>。</span></span>由于某些较老的浏览器（尤其是IE9之前的IE浏览器）或者<span class="short_text" id="result_box" lang="zh-CN"><span>文本</span><span>浏览器</span></span>不支持HTML元素&quot;canvas&quot;，在这些浏览器上你应该总是能展示替代内容。</p>

<p>这非常简单：我们只是在&lt;canvas&gt;标签中提供了替换内容。不支持&lt;canvas&gt;的浏览器将会忽略容器并在其中渲染后备内容。而支持&lt;canvas&gt;的浏览器将会忽略在容器中包含的内容，并且只是正常渲染canvas。</p>

<p>举个例子，我们可以提供对canvas内容的文字描述或者是提供动态生成内容相对应的静态图片，如下所示：</p>

<pre class="brush: html">&lt;canvas id=&quot;stockGraph&quot; width=&quot;150&quot; height=&quot;150&quot;&gt;
  current stock price: $3.15 +0.15
&lt;/canvas&gt;

&lt;canvas id=&quot;clock&quot; width=&quot;150&quot; height=&quot;150&quot;&gt;
  &lt;img src=&quot;images/clock.png&quot; width=&quot;150&quot; height=&quot;150&quot; alt=&quot;&quot;/&gt;
&lt;/canvas&gt;
</pre>

<h3 id="&lt;canvas&gt;_标签不可省"> <code>&lt;/canvas&gt;</code> 标签不可省</h3>

<p>与 <a href="/zh-CN/docs/Web/HTML/Element/img" title><code>&lt;img&gt;</code></a> 元素不同，<a href="/zh-CN/docs/Web/HTML/Element/canvas" title="&lt;canvas&gt;元素可被用来通过脚本（通常是JavaScript）绘制图形。比如,它可以被用来绘制图形,制作图片集合,甚至用来实现动画效果。你可以(也应该)在元素标签内写入可提供替代的的代码内容，这些内容将会在在旧的、不支持&lt;canvas&gt;元素的浏览器或是禁用了JavaScript的浏览器内渲染并展现。"><code>&lt;canvas&gt;</code></a> 元素<strong>需要</strong>结束标签(<code>&lt;/canvas&gt;</code>)。如果结束标签不存在，则文档的其余部分会被认为是替代内容，将不会显示出来。</p>

<p>如果不需要替代内容，一个简单的 <code>&lt;canvas id=&quot;foo&quot; ...&gt;&lt;/canvas&gt; </code>在所有支持canvas的浏览器中都是完全兼容的。</p>

<h2 id="渲染上下文（The_rendering_context）">渲染上下文（The rendering context）</h2>

<p><a href="/zh-CN/docs/Web/HTML/Element/canvas" title="&lt;canvas&gt;元素可被用来通过脚本（通常是JavaScript）绘制图形。比如,它可以被用来绘制图形,制作图片集合,甚至用来实现动画效果。你可以(也应该)在元素标签内写入可提供替代的的代码内容，这些内容将会在在旧的、不支持&lt;canvas&gt;元素的浏览器或是禁用了JavaScript的浏览器内渲染并展现。"><code>&lt;canvas&gt;</code></a> 元素创造了一个固定大小的画布，它公开了一个或多个<strong>渲染上下文</strong>，其可以用来绘制和处理要展示的内容。我们将会将注意力放在2D渲染上下文中。其他种类的上下文也许提供了不同种类的渲染方式；比如， <a href="/en-US/docs/Web/WebGL" title="/en-US/docs/Web/WebGL">WebGL</a> 使用了基于<a class="external" href="http://www.khronos.org/opengles/" rel="external" title="http://en.wikipedia.org/wiki/OpenGL_ES">OpenGL ES</a>的3D上下文 (&quot;experimental-webgl&quot;) 。</p>

<p>canvas起初是空白的。为了展示，首先脚本需要找到渲染上下文，然后在它的上面绘制。<a href="/zh-CN/docs/Web/HTML/Element/canvas" title="&lt;canvas&gt;元素可被用来通过脚本（通常是JavaScript）绘制图形。比如,它可以被用来绘制图形,制作图片集合,甚至用来实现动画效果。你可以(也应该)在元素标签内写入可提供替代的的代码内容，这些内容将会在在旧的、不支持&lt;canvas&gt;元素的浏览器或是禁用了JavaScript的浏览器内渲染并展现。"><code>&lt;canvas&gt;</code></a> 元素有一个叫做 <a href="/zh-CN/docs/Web/API/HTMLCanvasElement/getContext" title="HTMLCanvasElement.getContext() 方法返回canvas 的上下文，如果上下文没有定义则返回 null ."><code>getContext()</code></a> 的方法，这个方法是用来获得渲染上下文和它的绘画功能。<code>getContext()</code>只有一个参数，上下文的格式。对于2D图像而言，如本教程，你可以使用 <a href="/zh-CN/docs/Web/API/CanvasRenderingContext2D" title="CanvasRenderingContext2D 接口提供的 2D 渲染背景用来绘制&lt;canvas&gt;元素，为了获得这个接口的对象，需要在 &lt;canvas&gt; 上调用 getContext() ，并提供一个 &quot;2d&quot; 的参数："><code>CanvasRenderingContext2D</code></a>。</p>

<pre class="brush: js">var canvas = document.getElementById(&apos;tutorial&apos;);
var ctx = canvas.getContext(&apos;2d&apos;);
</pre>

<p>代码的第一行通过使用 <a href="/zh-CN/docs/Web/API/Document/getElementById" title="Document的方法 getElementById()返回一个匹配特定 ID的元素. 由于元素的 ID 在大部分情况下要求是独一无二的，这个方法自然而然地成为了一个高效查找特定元素的方法。"><code>document.getElementById()</code></a> 方法来为 <a href="/zh-CN/docs/Web/HTML/Element/canvas" title="&lt;canvas&gt;元素可被用来通过脚本（通常是JavaScript）绘制图形。比如,它可以被用来绘制图形,制作图片集合,甚至用来实现动画效果。你可以(也应该)在元素标签内写入可提供替代的的代码内容，这些内容将会在在旧的、不支持&lt;canvas&gt;元素的浏览器或是禁用了JavaScript的浏览器内渲染并展现。"><code>&lt;canvas&gt;</code></a> 元素得到DOM对象。一旦有了元素对象，你可以通过使用它的getContext() 方法来访问绘画上下文。</p>

<div id="section_5">
<h2 id="检查支持性">检查支持性</h2>

<p>替换内容是用于在不支持 <a href="/zh-CN/docs/Web/HTML/Element/canvas" title="&lt;canvas&gt;元素可被用来通过脚本（通常是JavaScript）绘制图形。比如,它可以被用来绘制图形,制作图片集合,甚至用来实现动画效果。你可以(也应该)在元素标签内写入可提供替代的的代码内容，这些内容将会在在旧的、不支持&lt;canvas&gt;元素的浏览器或是禁用了JavaScript的浏览器内渲染并展现。"><code>&lt;canvas&gt;</code></a> 标签的浏览器中展示的。通过简单的测试<code>getContext()方法的存在，脚本可以检查编程支持性</code>。上面的代码片段现在变成了这个样子：</p>

<pre class="brush: js">var canvas = document.getElementById(&apos;tutorial&apos;);

if (canvas.getContext){
  var ctx = canvas.getContext(&apos;2d&apos;);
  // drawing code here
} else {
  // canvas-unsupported code here
}
</pre>
</div>
</div>

<h2 id="一个模板骨架">一个模板骨架</h2>

<p>这里的是一个最简单的模板，我们之后就可以把它作为之后的例子的起点。</p>

<div class="note notecard">
<p><strong>注意: </strong>为了简洁, 我们在HTML中内嵌了script元素, 但并不推荐这种做法。</p>
</div>

<pre class="brush: html">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Canvas tutorial&lt;/title&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
      function draw(){
        var canvas = document.getElementById(&apos;tutorial&apos;);
        if (canvas.getContext){
          var ctx = canvas.getContext(&apos;2d&apos;);
        }
      }
    &lt;/script&gt;
    &lt;style type=&quot;text/css&quot;&gt;
      canvas { border: 1px solid black; }
    &lt;/style&gt;
  &lt;/head&gt;
  &lt;body onload=&quot;draw();&quot;&gt;
    &lt;canvas id=&quot;tutorial&quot; width=&quot;150&quot; height=&quot;150&quot;&gt;&lt;/canvas&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>

<p>上面的脚本中包含一个叫做draw()的函数，当页面加载结束的时候就会执行这个函数。通过使用在文档上加载事件来完成。只要页面加载结束，这个函数，或者像是这个的，同样可以使用 <a href="/zh-CN/docs/Web/API/WindowTimers/setTimeout" title="此页面仍未被本地化, 期待您的翻译!"><code>window.setTimeout()</code></a>， <a href="/zh-CN/docs/Web/API/WindowTimers/setInterval" title="此页面仍未被本地化, 期待您的翻译!"><code>window.setInterval()</code></a>，或者其他任何事件处理程序来调用。</p>

<p>模板看起来会是这样。<span class="short_text" id="result_box" lang="zh-CN"><span>如这里所示</span><span>，</span><span>它</span><span>最初是</span><span>空白的</span><span>。</span></span></p>

<p><iframe class="live-sample-frame sample-code-frame" frameborder="0" height="160" id="frame_%E4%B8%80%E4%B8%AA%E6%A8%A1%E6%9D%BF%E9%AA%A8%E6%9E%B6" src="https://mdn.mozillademos.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Basic_usage$samples/%E4%B8%80%E4%B8%AA%E6%A8%A1%E6%9D%BF%E9%AA%A8%E6%9E%B6?revision=1558090" width="160"></iframe></p>

<h2 id="一个简单例子">一个简单例子</h2>

<p>一开始，让我们来看个简单的例子，我们绘制了两个有趣的长方形，其中的一个有着alpha透明度。我们将在接下来的例子里深入探索一下这是如何工作的。</p>

<pre class="brush: html">&lt;html&gt;
 &lt;head&gt;
  &lt;script type=&quot;application/javascript&quot;&gt;
    function draw() {
      var canvas = document.getElementById(&quot;canvas&quot;);
      if (canvas.getContext) {
        var ctx = canvas.getContext(&quot;2d&quot;);

        ctx.fillStyle = &quot;rgb(200,0,0)&quot;;
        ctx.fillRect (10, 10, 55, 50);

        ctx.fillStyle = &quot;rgba(0, 0, 200, 0.5)&quot;;
        ctx.fillRect (30, 30, 55, 50);
      }
    }
  &lt;/script&gt;
 &lt;/head&gt;
 &lt;body onload=&quot;draw();&quot;&gt;
   &lt;canvas id=&quot;canvas&quot; width=&quot;150&quot; height=&quot;150&quot;&gt;&lt;/canvas&gt;
 &lt;/body&gt;
&lt;/html&gt;
</pre>

<p>例子看起来像是这样：:</p>

<table class="sample-code-table"><thead><tr><th scope="col" style="text-align: center;">Screenshot</th><th scope="col" style="text-align: center;">Live sample</th></tr></thead><tbody><tr><td><img alt class="internal" src="https://mdn.mozillademos.org/files/228/canvas_ex1.png"></td><td><iframe class="live-sample-frame sample-code-frame" frameborder="0" height="160" id="frame_%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E4%BE%8B%E5%AD%90" src="https://mdn.mozillademos.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Basic_usage$samples/%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E4%BE%8B%E5%AD%90?revision=1558090" width="160"></iframe></td></tr></tbody></table>

<div class="prevnext" style="text-align: right;">
    <p><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial" style="float: left;" class="button">« 上一页</a><a href="/zh-CN/docs/Web/API/Canvas_API/Tutorial/Drawing_shapes" class="button">下一页  »</a></p>
</div>
