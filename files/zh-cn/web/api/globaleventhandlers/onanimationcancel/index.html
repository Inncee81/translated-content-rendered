---
title: GlobalEventHandlers.onanimationcancel
slug: Web/API/GlobalEventHandlers/onanimationcancel
translation_of: Web/API/GlobalEventHandlers/onanimationcancel
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/GlobalEventHandlers"><code>GlobalEventHandlers</code></a></strong></li><li class="toggle"><details open><summary>属性</summary><ol><li><span class="sidebar-icon"><span title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onabort"><code>onabort</code></a></li><li><em><code>onanimationcancel</code></em></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onanimationend"><code>onanimationend</code></a></li><li><span class="sidebar-icon"><span title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onanimationiteration"><code>onanimationiteration</code></a></li><li><span class="sidebar-icon"><span title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onauxclick"><code>onauxclick</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onblur"><code>onblur</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/oncancel"><code>oncancel</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/GlobalEventHandlers/oncancel$translate">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/oncanplay"><code>oncanplay</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/GlobalEventHandlers/oncanplay$translate">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/oncanplaythrough"><code>oncanplaythrough</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/GlobalEventHandlers/oncanplaythrough$translate">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onchange"><code>onchange</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onclick"><code>onclick</code></a></li><li><span class="sidebar-icon"><span title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onclose"><code>onclose</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/oncontextmenu"><code>oncontextmenu</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/oncuechange"><code>oncuechange</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/GlobalEventHandlers/oncuechange$translate">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/ondblclick"><code>ondblclick</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/ondurationchange"><code>ondurationchange</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/GlobalEventHandlers/ondurationchange$translate">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onended"><code>onended</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/GlobalEventHandlers/onended$translate">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onerror"><code>onerror</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onfocus"><code>onfocus</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/ongotpointercapture"><code>ongotpointercapture</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/oninput"><code>oninput</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/oninvalid"><code>oninvalid</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/GlobalEventHandlers/oninvalid$translate">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onkeydown"><code>onkeydown</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onkeypress"><code>onkeypress</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onkeyup"><code>onkeyup</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onload"><code>onload</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onloadeddata"><code>onloadeddata</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/GlobalEventHandlers/onloadeddata$translate">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onloadedmetadata"><code>onloadedmetadata</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/GlobalEventHandlers/onloadedmetadata$translate">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onloadend"><code>onloadend</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onloadstart"><code>onloadstart</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onlostpointercapture"><code>onlostpointercapture</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onmousedown"><code>onmousedown</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onmouseenter"><code>onmouseenter</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/GlobalEventHandlers/onmouseenter$translate">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onmouseleave"><code>onmouseleave</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/GlobalEventHandlers/onmouseleave$translate">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onmousemove"><code>onmousemove</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onmouseout"><code>onmouseout</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onmouseover"><code>onmouseover</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onmouseup"><code>onmouseup</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onpause"><code>onpause</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/GlobalEventHandlers/onpause$translate">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onplay"><code>onplay</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/GlobalEventHandlers/onplay$translate">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onpointercancel"><code>onpointercancel</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onpointerdown"><code>onpointerdown</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onpointerenter"><code>onpointerenter</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onpointerleave"><code>onpointerleave</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onpointermove"><code>onpointermove</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onpointerout"><code>onpointerout</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onpointerover"><code>onpointerover</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onpointerup"><code>onpointerup</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onreset"><code>onreset</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onresize"><code>onresize</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onscroll"><code>onscroll</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onselect"><code>onselect</code></a></li><li><span class="sidebar-icon"><span title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onselectionchange"><code>onselectionchange</code></a></li><li><span class="sidebar-icon"><span title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onselectstart"><code>onselectstart</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onsubmit"><code>onsubmit</code></a></li><li><span class="sidebar-icon"><span title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/ontouchcancel"><code>ontouchcancel</code></a></li><li><span class="sidebar-icon"><span title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/ontouchstart"><code>ontouchstart</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/ontransitioncancel"><code>ontransitioncancel</code></a> <a style="opacity: 0.5;" href="/zh-CN/docs/Web/API/GlobalEventHandlers/ontransitioncancel$translate">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/ontransitionend"><code>ontransitionend</code></a></li><li><a href="/zh-CN/docs/Web/API/GlobalEventHandlers/onwheel"><code>onwheel</code></a></li></ol></details></li><li class="toggle"><details open><summary>Implemented by:</summary><ol><li><a href="/zh-CN/docs/Web/API/Document"><code>Document</code></a></li><li><a href="/zh-CN/docs/Web/API/HTMLElement"><code>HTMLElement</code></a></li><li><a href="/zh-CN/docs/Web/API/SVGElement"><code>SVGElement</code></a></li><li><a href="/zh-CN/docs/Web/API/Window"><code>Window</code></a></li><li><a href="/zh-CN/docs/Web/API/XULElement"><code>XULElement</code></a></li></ol></details></li></ol></section></div>

<p>animationcancel是一个事件处理操作,这个事件在<a href="/en-US/docs/Web/CSS/CSS_Animations">CSS Animation</a>属性意外中断时派发出来(换句话说，任何时候animation停止运行不会发出一个animationend 事件，比如，当animation-name改变以后，animation 就会被移除，或者动画节点隐藏—当前元素或者任何包含的节点隐藏)—使用css时.</p>

<h2 id="语法">语法</h2>

<pre class="syntaxbox">var <em>animCancelHandler</em> = <em>target</em>.onanimationcancel;

<em>target</em>.onanimationcancel = <em><a href="/zh-CN/docs/Web/JavaScript/Reference/Function" title="此页面仍未被本地化, 期待您的翻译!"><code>Function</code></a></em>
</pre>

<h3 id="Value">Value</h3>

<p>A <a href="/zh-CN/docs/Web/JavaScript/Reference/Function" title="此页面仍未被本地化, 期待您的翻译!"><code>Function</code></a> to be called when an <code><a href="/zh-CN/docs/Web/Reference/Events/animationcancel" title="/zh-CN/docs/Web/Reference/Events/animationcancel">animationcancel</a></code> event occurs indicating that a CSS animation has begun on the <em><code>target</code></em>, where the target object is an HTML element (<a href="/zh-CN/docs/Web/API/HTMLElement" title="HTMLElement 接口表示所有的 HTML 元素。一些HTML元素直接实现了HTMLElement接口，其它的间接实现HTMLElement接口."><code>HTMLElement</code></a>), document (<a href="/zh-CN/docs/Web/API/Document" title="Document接口表示任何在浏览器中已经加载好的网页，并作为一个入口去操作网页内容（也就是DOM tree）。DOM tree包括像 &lt;body&gt; 、&lt;table&gt;这样的还有其他的元素。它提供了全局操作document的功能，像获取网页的URL和在document里创建一个新的元素。"><code>Document</code></a>), or window (<a href="/zh-CN/docs/Web/API/Window" title="The window object represents a window containing a DOM document; the document property points to the DOM document loaded in that window."><code>Window</code></a>). The function receives as input a single parameter: an <a href="/zh-CN/docs/Web/API/AnimationEvent" title="AnimationEvent 接口表示提供与动画相关的信息的事件。"><code>AnimationEvent</code></a> object describing the event which occurred.</p>

<h2 id="Example" name="Example">Example</h2>

<h3 id="HTML_content">HTML content</h3>

<pre class="brush: html">&lt;div class=&quot;main&quot;&gt;
  &lt;div id=&quot;box&quot;&gt;
    &lt;div id=&quot;text&quot; onanimationcancel=&quot;handleCancelEvent&quot;&gt;Box&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;button&quot; id=&quot;toggleBox&quot;&gt;
  Hide the Box
&lt;/div&gt;

&lt;pre id=&quot;log&quot;&gt;&lt;/pre&gt;</pre>

<h3 id="CSS_content">CSS content</h3>

<div class="hidden">
<pre class="brush: css">:root {
  --boxwidth:50px;
}

.main {
  width: 300px;
  height:300px;
  border: 1px solid black;
}

.button {
  cursor: pointer;
  width: 300px;
  border: 1px solid black;
  font-size: 16px;
  text-align: center;
  margin-top: 0;
  padding-top: 2px;
  padding-bottom: 4px;
  color: white;
  background-color: darkgreen;
  font: 14px &quot;Open Sans&quot;, &quot;Arial&quot;, sans-serif;
}

#text {
  width: 46px;
  padding: 10px;
  position: relative;
  text-align: center;
  align-self: center;
  color: white;
  font: bold 1.4em &quot;Lucida Grande&quot;, &quot;Open Sans&quot;, sans-serif;
}

 </pre>
</div>

<p>Leaving out some bits of the CSS that don&apos;t matter for the discussion here, let&apos;s take a look at the styles for the box that we&apos;re animating. First is the box itself, with all its properties, including <a href="/zh-CN/docs/Web/CSS/animation" title="CSS animation属性是如下属性的一个简写属性形式: animation-name, animation-duration, animation-timing-function, animation-delay, animation-iteration-count, animation-direction 和 animation-fill-mode."><code>animation</code></a>, defined. We go ahead and describe the animation in-place here because the animation is intended to begin as soon as the page loads, rather than based on an event.</p>

<pre class="brush: css">#box {
  width: var(--boxwidth);
  height: var(--boxwidth);
  left: 0;
  top: 0;
  border: 1px solid #7788FF;
  margin: 0;
  position: relative;
  background-color: #2233FF;
  display: flex;
  justify-content: center;
  animation: 5s ease-in-out 0s infinite alternate both slideBox;
}

</pre>

<p>The animation&apos;s keyframes are described next, plotting a course from the top-left corner of the content box to the bottom-right corner.</p>

<pre class="brush: css">@keyframes slideBox {
  from {
    left:0;
    top:0;
  }
  to {
    left:calc(100% - var(--boxwidth));
    top:calc(100% - var(--boxwidth))
  }
}
</pre>

<p>Since the animation is described as taking place an infinite number of times, alternating direction each time, the box will glide back and forth between the two corners until stopped or the page is closed.</p>

<h3 id="JavaScript_content">JavaScript content</h3>

<p>Before we get to the animation code, we define a function which logs information to a box on the user&apos;s screen. We&apos;ll use this to show information about the events we receive. Note the use of <a href="/zh-CN/docs/Web/API/AnimationEvent/animationName" title="The AnimationEvent.animationName read-only property is a DOMString containing the value of the animation-name CSS property associated with the transition."><code>AnimationEvent.animationName</code></a> and <a href="/zh-CN/docs/Web/API/AnimationEvent/elapsedTime" title="此页面仍未被本地化, 期待您的翻译!"><code>AnimationEvent.elapsedTime</code></a> to get information about the event which occurred.</p>

<pre class="brush: js">function log(msg, event) {
  let logBox = document.getElementById(&quot;log&quot;);

  logBox.innerHTML += msg;

  if (event) {
    logBox.innerHTML += &quot; &lt;code&gt;&quot;+ event.animationName +
        &quot;&lt;/code&gt; at time &quot; + event.elapsedTime.toFixed(2) +
        &quot; seconds.&quot;;
  }

  logBox.innerHTML += &quot;\n&quot;;
};


</pre>

<p>Then we set up the <code>handleCancelEvent()</code> function, which is called in response to the <code><a href="/zh-CN/docs/Web/Reference/Events/animationcancel" title="/zh-CN/docs/Web/Reference/Events/animationcancel">animationcancel</a></code> event, as set up in the HTML above. All we do here is log information to the console, but you might find other use cases, such as starting a new animation or effect, or terminating some dependent operation.</p>

<pre class="brush: js">function handleCancelEvent(event) {
  log(&quot;Animation canceled&quot;, event);
};

</pre>

<p>Then we add a method to handle toggle <a href="/zh-CN/docs/Web/CSS/display" title="display CSS 属性指定了元素的显示类型，它包含两类基础特征，用于指定元素怎样生成盒模型——外部显示类型定义了元素怎样参与流式布局的处理，内部显示类型定义了元素内子元素的布局方式。"><code>display</code></a> between <code>&quot;</code><code>flex&quot;</code> and <code>&quot;</code><code>none&quot;</code> and establish it as the handler for a <code><a href="/zh-CN/docs/Web/Reference/Events/click" title="/zh-CN/docs/Web/Reference/Events/click">click</a></code> event on the &quot;Hide/Show&quot; the Box button:</p>

<pre class="brush: js">function toggleBox() {
  if (box.style.display == &quot;none&quot;) {
    box.style.display = &quot;flex&quot;;
    document.getElementById(&quot;toggleBox&quot;).innerHTML = &quot;Hide the box&quot;;
  } else {
    box.style.display = &quot;none&quot;;
    document.getElementById(&quot;toggleBox&quot;).innerHTML = &quot;Show the box&quot;;
  }
}</pre>

<p>Toggling the box to <code>display: none</code> has the effect of aborting its animation. In browsers that support <code><a href="/zh-CN/docs/Web/Reference/Events/animationcancel" title="/zh-CN/docs/Web/Reference/Events/animationcancel">animationcancel</a></code>, the event is fired and this handler is called.</p>

<div class="note">
<p>At this time, no major browser supports <code>animationcancel</code>.</p>
</div>

<h3 id="Result">Result</h3>

<p>Assembled together, you get this:</p>

<p><iframe src="https://mdn.mozillademos.org/zh-CN/docs/Web/API/GlobalEventHandlers/onanimationcancel$samples/Example?revision=1164953" width="500" class="live-sample-frame sample-code-frame" height="400" frameborder="0" id="frame_Example"></iframe></p>

<p>If your browser supports <code>animationcancel</code>, hiding the box using the button will cause a message to be displayed about the event.</p>

<h2 id="Specification">Specification</h2>

<table class="spectable standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a lang="en" href="https://drafts.csswg.org/css-animations/#eventdef-animationevent-animationcancel" class="external" hreflang="en">CSS Animations<br><small lang="zh-CN">onanimationcancel</small></a></td>
   <td><span class="spec-WD">Working Draft</span></td>
   <td> </td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<p></p><div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/zh-CN/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Desktop</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div><p></p>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Microsoft Edge</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span><sup>[1]</sup></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Android Webview</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
   <th>Chrome for Android</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span><sup>[1]</sup></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
 </tbody>
</table>
</div>

<p>[1] For details on the status of implementation in Firefox, see <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1302648" title="FIXED: Implement animationcancel event.">bug 1302648</a>.</p>

<h2 id="See_also">See also</h2>

<ul>
 <li>The <code><a href="/zh-CN/docs/Web/Reference/Events/animationcancel" title="/zh-CN/docs/Web/Reference/Events/animationcancel">animationcancel</a></code> event this event handler is triggered by.</li>
 <li><a href="/zh-CN/docs/Web/API/AnimationEvent" title="AnimationEvent 接口表示提供与动画相关的信息的事件。"><code>AnimationEvent</code></a></li>
</ul>
