---
title: AudioWorkletProcessor
slug: Web/API/AudioWorkletProcessor
translation_of: Web/API/AudioWorkletProcessor
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/Web_Audio_API">Web Audio API</a></strong></li><li><strong><a href="/zh-CN/docs/Web/API/AudioWorkletProcessor"><code>AudioWorkletProcessor</code></a></strong></li><li class="toggle"><details open><summary>Constructor</summary><ol><li><a href="/zh-CN/docs/Web/API/AudioWorkletProcessor/AudioWorkletProcessor"><code>AudioWorkletProcessor()</code></a> <a href="/zh-CN/docs/Web/API/AudioWorkletProcessor/AudioWorkletProcessor$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>属性</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/AudioWorkletProcessor/parameterDescriptors"><code>parameterDescriptors (static getter)</code></a> <a href="/zh-CN/docs/Web/API/AudioWorkletProcessor/parameterDescriptors$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/AudioWorkletProcessor/port"><code>port</code></a> <a href="/zh-CN/docs/Web/API/AudioWorkletProcessor/port$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>方法</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/AudioWorkletProcessor/process"><code>process</code></a> <a href="/zh-CN/docs/Web/API/AudioWorkletProcessor/process$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>Related pages for Web Audio API</summary><ol><li><a href="/zh-CN/docs/Web/API/AnalyserNode"><code>AnalyserNode</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioBuffer"><code>AudioBuffer</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioBufferSourceNode"><code>AudioBufferSourceNode</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioContext"><code>AudioContext</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioContextOptions"><code>AudioContextOptions</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioDestinationNode"><code>AudioDestinationNode</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioListener"><code>AudioListener</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioNodeOptions"><code>AudioNodeOptions</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioParam"><code>AudioParam</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioProcessingEvent"><code>AudioProcessingEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioScheduledSourceNode"><code>AudioScheduledSourceNode</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioWorklet"><code>AudioWorklet</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioWorkletGlobalScope"><code>AudioWorkletGlobalScope</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioWorkletNode"><code>AudioWorkletNode</code></a></li><li><a href="/zh-CN/docs/Web/API/BaseAudioContext"><code>BaseAudioContext</code></a></li><li><a href="/zh-CN/docs/Web/API/BiquadFilterNode"><code>BiquadFilterNode</code></a></li><li><a href="/zh-CN/docs/Web/API/ChannelMergerNode"><code>ChannelMergerNode</code></a></li><li><a href="/zh-CN/docs/Web/API/ChannelSplitterNode"><code>ChannelSplitterNode</code></a></li><li><a href="/zh-CN/docs/Web/API/ConstantSourceNode"><code>ConstantSourceNode</code></a></li><li><a href="/zh-CN/docs/Web/API/ConvolverNode"><code>ConvolverNode</code></a></li><li><a href="/zh-CN/docs/Web/API/DelayNode"><code>DelayNode</code></a></li><li><a href="/zh-CN/docs/Web/API/DynamicsCompressorNode"><code>DynamicsCompressorNode</code></a></li><li><a href="/zh-CN/docs/Web/API/GainNode"><code>GainNode</code></a></li><li><a href="/zh-CN/docs/Web/API/IIRFilterNode"><code>IIRFilterNode</code></a></li><li><a href="/zh-CN/docs/Web/API/MediaElementAudioSourceNode"><code>MediaElementAudioSourceNode</code></a></li><li><a href="/zh-CN/docs/Web/API/MediaStreamAudioDestinationNode"><code>MediaStreamAudioDestinationNode</code></a></li><li><a href="/zh-CN/docs/Web/API/MediaStreamAudioSourceNode"><code>MediaStreamAudioSourceNode</code></a></li><li><a href="/zh-CN/docs/Web/API/OfflineAudioCompletionEvent"><code>OfflineAudioCompletionEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/OfflineAudioContext"><code>OfflineAudioContext</code></a></li><li><a href="/zh-CN/docs/Web/API/OscillatorNode"><code>OscillatorNode</code></a></li><li><a href="/zh-CN/docs/Web/API/PannerNode"><code>PannerNode</code></a></li><li><a href="/zh-CN/docs/Web/API/PeriodicWave"><code>PeriodicWave</code></a></li><li><a href="/zh-CN/docs/Web/API/StereoPannerNode"><code>StereoPannerNode</code></a></li><li><a href="/zh-CN/docs/Web/API/WaveShaperNode"><code>WaveShaperNode</code></a></li></ol></details></li></ol></section>

<p><a href="/en-US/docs/Web/API/Web_Audio_API">Web Audio API</a>的 <strong><code>AudioWorkletProcessor</code></strong> 接口代表了一个 自定义的音频处理代码 <a href="/zh-CN/docs/Web/API/AudioWorkletNode"><code>AudioWorkletNode</code></a>. 它身处于 <a href="/zh-CN/docs/Web/API/AudioWorkletGlobalScope"><code>AudioWorkletGlobalScope</code></a> 并运行在 Web Audio rendering 线程上. 同时, 一个建立在其基础上的 <a href="/zh-CN/docs/Web/API/AudioWorkletNode"><code>AudioWorkletNode</code></a> 运行在主线程上.</p>

<h2 id="构造函数">构造函数</h2>

<div class="note notecard"><code>AudioWorkletProcessor</code> 及其子类不能通过用户提供的的代码直接实例化。它们只能随着与之相联系<a href="/zh-CN/docs/Web/API/AudioWorkletNode"><code>AudioWorkletNode</code></a>s的创建而被其创建再内部。其子类的构造函数将被一个可选对象调用，因此您可以执行自定义的初始化过程——详细信息请参见构造函数页面。</div>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/AudioWorkletProcessor/AudioWorkletProcessor"><code>AudioWorkletProcessor()</code></a></dt>
 <dd>创建一个 <code>AudioWorkletProcessor</code> 对象的新实例。</dd>
</dl>

<h2 id="属性">属性</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/AudioWorkletProcessor/port"><code>port</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>返回一个用于在处理程序和其所属的<a href="/zh-CN/docs/Web/API/AudioWorkletNode"><code>AudioWorkletNode</code></a>间双向通信的 <a href="/zh-CN/docs/Web/API/MessagePort"><code>MessagePort</code></a> 。 另一端 可通过该节点的<a href="/zh-CN/docs/Web/API/AudioWorkletNode/port"><code>port</code></a> 属性使用.</dd>
</dl>

<h2 id="方法">方法</h2>

<p><em><code>AudioWorkletProcessor</code> 接口没有定义任何自己的方法。但是, 您必须提供一个 <a href="/zh-CN/docs/Web/API/AudioWorkletProcessor/process"><code>process()</code></a> 方法, 用以处理音频流。</em></p>

<h2 id="事件">事件</h2>

<p><em><code>AudioWorkletProcessor</code> 接口不响应任何事件。</em></p>

<h2 id="使用说明">使用说明</h2>

<h3 id="Deriving_classes">Deriving classes</h3>

<p>要自定义音频处理代码， 你必须从<code>AudioWorkletProcessor</code> 接口派生一个类. 这个派生类必须具有在该接口中不曾定义的<a href="/zh-CN/docs/Web/API/AudioWorkletProcessor/process"><code>process</code></a> 方法. 该方法将被每个含有128 样本帧的块调用并且接受输入和输出数组以及自定义的<a href="/zh-CN/docs/Web/API/AudioParam"><code>AudioParam</code></a>s (如果它们刚被定义了) 的计算值作为参数. 您可以使用输入和 音频参数值去填充输出数组, 这是默认的用于使输出静音。</p>

<p>Optionally, if you want custom <a href="/zh-CN/docs/Web/API/AudioParam"><code>AudioParam</code></a>s on your node, you can supply a <a href="/zh-CN/docs/Web/API/AudioWorkletProcessor/parameterDescriptors"><code>parameterDescriptors</code></a> property as a <em>static getter</em> on the processor. The array of <a href="/zh-CN/docs/Web/API/AudioParamDescriptor"><code>AudioParamDescriptor</code></a>-based objects returned is used internally to create the <a href="/zh-CN/docs/Web/API/AudioParam"><code>AudioParam</code></a>s during the instantiation of the <code>AudioWorkletNode</code>.</p>

<p>The resulting <code>AudioParam</code>s reside in the <a href="/zh-CN/docs/Web/API/AudioWorkletNode/parameters"><code>parameters</code></a> property of the node and can be automated using standard methods such as <code><a href="/en-US/docs/Web/API/AudioParam/linearRampToValueAtTime">linearRampToValueAtTime</a></code>. Their calculated values will be passed into the <a href="/zh-CN/docs/Web/API/AudioWorkletProcessor/process"><code>process()</code></a> method of the processor for you to shape the node output accordingly.</p>

<h3 id="处理音频">处理音频</h3>

<p>一个创建自定义音频处理算法的步骤的实例：</p>

<ol>
 <li>创建一个独立的文件;</li>
 <li>在这个文件中:
  <ol>
   <li>Extend the <code>AudioWorkletProcessor</code> class (see <a href="#Deriving_classes">&quot;Deriving classes&quot; section</a>) and supply your own <a href="/zh-CN/docs/Web/API/AudioWorkletProcessor/process"><code>process()</code></a> method in it;</li>
   <li>Register the processor using <a href="/zh-CN/docs/Web/API/AudioWorkletGlobalScope/registerProcessor"><code>AudioWorkletGlobalScope.registerProcessor()</code></a> method;</li>
  </ol>
 </li>
 <li>Load the file using <a href="/zh-CN/docs/Web/API/Worklet/addModule"><code>addModule()</code></a> method on your audio context&apos;s <a href="/zh-CN/docs/Web/API/BaseAudioContext/audioWorklet"><code>audioWorklet</code></a> property;</li>
 <li>Create an <a href="/zh-CN/docs/Web/API/AudioWorkletNode"><code>AudioWorkletNode</code></a> based on the processor. The processor will be instantiated internally by the <code>AudioWorkletNode</code> constructor.</li>
 <li>Connect the node to the other nodes.</li>
</ol>

<h2 id="例子">例子</h2>

<p>In the example below we create a custom <a href="/zh-CN/docs/Web/API/AudioWorkletNode"><code>AudioWorkletNode</code></a> that outputs white noise.</p>

<p>First, we need to define a custom <code>AudioWorkletProcessor</code>, which will output white noise, and register it. Note that this should be done in a separate file.</p>

<pre class="brush: js notranslate">// white-noise-processor.js
class WhiteNoiseProcessor extends AudioWorkletProcessor {
  process (inputs, outputs, parameters) {
    const output = outputs[0]
    output.forEach(channel =&gt; {
      for (let i = 0; i &lt; channel.length; i++) {
        channel[i] = Math.random() * 2 - 1
      }
    })
    return true
  }
}

registerProcessor(&apos;white-noise-processor&apos;, WhiteNoiseProcessor)
</pre>

<p>Next, in our main script file we&apos;ll load the processor, create an instance of <a href="/zh-CN/docs/Web/API/AudioWorkletNode"><code>AudioWorkletNode</code></a>, passing it the name of the processor, then connect the node to an audio graph.</p>

<pre class="brush: js notranslate">const audioContext = new AudioContext()
await audioContext.audioWorklet.addModule(&apos;white-noise-processor.js&apos;)
const whiteNoiseNode = new AudioWorkletNode(audioContext, &apos;white-noise-processor&apos;)
whiteNoiseNode.connect(audioContext.destination)
</pre>

<h2 id="Specifications">Specifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://webaudio.github.io/web-audio-api/#audioworkletprocessor" hreflang="en" lang="en">Web Audio API<br><small lang="zh-CN">AudioWorkletProcessor</small></a></td>
   <td><span class="spec-WD">Working Draft</span></td>
   <td></td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<div>
<div class="hidden">The compatibility table on this page is generated from structured data. If you&apos;d like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</div>

<div class="bc-data" id="bcd:api.AudioWorkletProcessor"></div>
</div>

<h2 id="See_also">See also</h2>

<ul>
 <li><a href="/en-US/docs/Web/API/Web_Audio_API">Web Audio API</a></li>
 <li><a href="/en-US/docs/Web/API/Web_Audio_API/Using_Web_Audio_API">Using the Web Audio API</a></li>
</ul>
