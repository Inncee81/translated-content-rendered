---
title: BeforeInstallPrompt
slug: Web/API/BeforeInstallPromptEvent
tags:
  - PWA
  - beforeinstallprompt
  - 添加到主屏幕
  - 添加快捷方式
translation_of: Web/API/BeforeInstallPromptEvent
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/BeforeInstallPromptEvent"><code>BeforeInstallPromptEvent</code></a></strong></li><li class="toggle"><details open><summary>方法</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/BeforeInstallPromptEvent/prompt"><code>prompt()</code></a></li></ol></details></li><li class="toggle"><details open><summary>继承</summary><ol><li><a href="/zh-CN/docs/Web/API/Event"><code>Event</code></a></li></ol></details></li></ol></section> <div class="nonStandard nonStandardHeader notecard">
      <p><strong>非标准</strong><br>
      该特性是非标准的，请尽量不要在生产环境中使用它！</p>
      </div>

<p>在一个用户被提示”安装“一个网站到移动设备的一个主屏幕之前,  <code><strong>BeforeInstallPromptEvent </strong></code> 被<a href="/zh-CN/docs/Web/API/Window/onbeforeinstallprompt"><code>Window.onbeforeinstallprompt</code></a> 处理程序触发。</p>

<p>该接口继承自<a href="/zh-CN/docs/Web/API/Event"><code>Event</code></a>接口。</p>

<div class="hidden" id="inheritance_diagram">

<pre class="brush: html notranslate">  &lt;div id=&quot;interfaceDiagram&quot; style=&quot;display: inline-block; position: relative; width: 100%; padding-bottom: 8.571428571428571%; vertical-align: middle; overflow: hidden;&quot;&gt;&lt;svg style=&quot;display: inline-block; position: absolute; top: 0; left: 0;&quot; viewbox=&quot;-20 0 700 60&quot; preserveAspectRatio=&quot;xMinYMin meet&quot;&gt;&lt;a xlink:href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/API/Event&quot; target=&quot;_top&quot;&gt;&lt;rect x=&quot;1&quot; y=&quot;1&quot; width=&quot;75&quot; height=&quot;50&quot; fill=&quot;#fff&quot; stroke=&quot;#D4DDE4&quot; stroke-width=&quot;2px&quot; /&gt;&lt;text  x=&quot;38.5&quot; y=&quot;30&quot; font-size=&quot;12px&quot; font-family=&quot;Consolas,Monaco,Andale Mono,monospace&quot; fill=&quot;#4D4E53&quot; text-anchor=&quot;middle&quot; alignment-baseline=&quot;middle&quot;&gt;Event&lt;/text&gt;&lt;/a&gt;&lt;polyline points=&quot;76,25  86,20  86,30  76,25&quot; stroke=&quot;#D4DDE4&quot; fill=&quot;none&quot;/&gt;&lt;line x1=&quot;86&quot; y1=&quot;25&quot; x2=&quot;116&quot; y2=&quot;25&quot; stroke=&quot;#D4DDE4&quot;/&gt;&lt;a xlink:href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/API/BeforeInstallPromptEvent&quot; target=&quot;_top&quot;&gt;&lt;rect x=&quot;116&quot; y=&quot;1&quot; width=&quot;240&quot; height=&quot;50&quot; fill=&quot;#F4F7F8&quot; stroke=&quot;#D4DDE4&quot; stroke-width=&quot;2px&quot; /&gt;&lt;text  x=&quot;236&quot; y=&quot;30&quot; font-size=&quot;12px&quot; font-family=&quot;Consolas,Monaco,Andale Mono,monospace&quot; fill=&quot;#4D4E53&quot; text-anchor=&quot;middle&quot; alignment-baseline=&quot;middle&quot;&gt;BeforeInstallPromptEvent&lt;/text&gt;&lt;/a&gt;&lt;/svg&gt;&lt;/div&gt;
</pre>

<pre class="brush: css notranslate">  a:hover text { fill: #0095DD; pointer-events: all;}
</pre>

</div>

<iframe class="live-sample-frame inheritance-diagram-frame" frameborder="0" height="60" id="frame_inheritance_diagram" src="https://mdn.mozillademos.org/zh-CN/docs/Web/API/BeforeInstallPromptEvent$samples/inheritance_diagram?revision=1637982" width="700"></iframe>

<h2 id="构造器">构造器</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/New_window/BeforeInstallPromptEvent(name,_eventInitOptions)"><code>new window.BeforeInstallPromptEvent(name, eventInitOptions)</code></a></dt>
 <dd>创建一个新的 <code><strong>BeforeInstallPromptEvent</strong></code>.</dd>
</dl>

<h2 id="属性">属性</h2>

<p><em>继承自父类，<a href="/zh-CN/docs/Web/API/Event"><code>Event</code></a>.</em></p>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/BeforeInstallPromptEvent/platform"><code>BeforeInstallPromptEvent.platform</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>返回一个包含了调度事件的平台（s）的 <a href="/zh-CN/docs/Web/API/DOMString"><code>DOMString</code></a> 数组。这是为希望向用户提供版本选择的user agent提供的，例如，“web”或“play”允许用户在web版本或Android版本之间进行选择。</dd>
 <dt><a href="/zh-CN/docs/Web/API/BeforeInstallPromptEvent/userChoice"><code>BeforeInstallPromptEvent.userChoice</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>返回一个可以解析为 <a href="/zh-CN/docs/Web/API/DOMString"><code>DOMString</code></a> 的 <a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> ，其值为 &apos;installed&apos; 或 &apos;dismissed&apos;，用以判断用户是否选择安装该PWA。</dd>
</dl>

<h2 id="方法">方法</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/BeforeInstallPromptEvent/prompt"><code>BeforeInstallPromptEvent.prompt()</code></a> </dt>
 <dd>立即弹出安装提示。允许开发者按照自己选择的时间弹出安装提示。该方法返回 <a href="/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>。</dd>
</dl>

<h2 id="例子">例子</h2>

<pre class="notranslate">window.addEventListener(&quot;beforeinstallprompt&quot;, function(e) {
  // log the platforms provided as options in an install prompt
  console.log(e.platforms); // e.g., [&quot;web&quot;, &quot;android&quot;, &quot;windows&quot;]
  e.userChoice.then(function(outcome) {
    console.log(outcome); // either &quot;installed&quot;, &quot;dismissed&quot;, etc.
  }, handleError);
});
</pre>

<h2 id="浏览器兼容性">浏览器兼容性</h2>

<div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/zh-CN/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Desktop</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div>

<table>
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>
    <p>44.0 [1]</p>
   </td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
  <tr>
   <td><code>prompt()</code> method.</td>
   <td>45.0 [1]</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
 </tbody>
</table>

<table>
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Android Webview</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
   <th>Chrome for Android</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td>
    <p>44.0 [1]</p>
   </td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td>
    <p>44.0 [1]</p>
   </td>
  </tr>
  <tr>
   <td><code>prompt()</code> method.</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td>45.0 [1]</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td>45.0 [1]</td>
  </tr>
 </tbody>
</table>

<p>[1] <font face="Consolas, Liberation Mono, Courier, monospace">B</font>ehind the flag<em>chrome://flags/#bypass-app-banner-engagement-checks</em></p>
