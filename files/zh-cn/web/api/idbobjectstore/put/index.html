---
title: IDBObjectStore.put()
slug: Web/API/IDBObjectStore/put
translation_of: Web/API/IDBObjectStore/put
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/IndexedDB_API">IndexedDB API</a></strong></li><li><strong><a href="/zh-CN/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a></strong></li><li class="toggle"><details open><summary>属性</summary><ol><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/autoIncrement"><code>autoIncrement</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/indexNames"><code>indexNames</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/keyPath"><code>keyPath</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/name"><code>name</code></a> <a href="/zh-CN/docs/Web/API/IDBObjectStore/name$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/transaction"><code>transaction</code></a> <a href="/zh-CN/docs/Web/API/IDBObjectStore/transaction$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>方法</summary><ol><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/add"><code>add()</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/clear"><code>clear()</code></a> <a href="/zh-CN/docs/Web/API/IDBObjectStore/clear$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/count"><code>count()</code></a> <a href="/zh-CN/docs/Web/API/IDBObjectStore/count$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/createIndex"><code>createIndex()</code></a> <a href="/zh-CN/docs/Web/API/IDBObjectStore/createIndex$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/delete"><code>delete()</code></a> <a href="/zh-CN/docs/Web/API/IDBObjectStore/delete$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/deleteIndex"><code>deleteIndex()</code></a> <a href="/zh-CN/docs/Web/API/IDBObjectStore/deleteIndex$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/get"><code>get()</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/getAll"><code>getAll()</code></a> <a href="/zh-CN/docs/Web/API/IDBObjectStore/getAll$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/getAllKeys"><code>getAllKeys()</code></a> <a href="/zh-CN/docs/Web/API/IDBObjectStore/getAllKeys$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/getKey"><code>getKey()</code></a> <a href="/zh-CN/docs/Web/API/IDBObjectStore/getKey$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/index"><code>index()</code></a> <a href="/zh-CN/docs/Web/API/IDBObjectStore/index$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/openCursor"><code>openCursor</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore/openKeyCursor"><code>openKeyCursor()</code></a> <a href="/zh-CN/docs/Web/API/IDBObjectStore/openKeyCursor$translate" style="opacity: 0.5;">[我来译!]</a></li><li><em><code>put()</code></em></li></ol></details></li><li class="toggle"><details open><summary>Related pages for IndexedDB</summary><ol><li><a href="/zh-CN/docs/Web/API/IDBCursor"><code>IDBCursor</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBCursorSync"><code>IDBCursorSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBCursorWithValue"><code>IDBCursorWithValue</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBDatabase"><code>IDBDatabase</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBDatabaseException"><code>IDBDatabaseException</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBDatabaseSync"><code>IDBDatabaseSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBEnvironment"><code>IDBEnvironment</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBEnvironmentSync"><code>IDBEnvironmentSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBFactory"><code>IDBFactory</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBFactorySync"><code>IDBFactorySync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBIndex"><code>IDBIndex</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBIndexSync"><code>IDBIndexSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBKeyRange"><code>IDBKeyRange</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStoreSync"><code>IDBObjectStoreSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBOpenDBRequest"><code>IDBOpenDBRequest</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBRequest"><code>IDBRequest</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBTransaction"><code>IDBTransaction</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBTransactionSync"><code>IDBTransactionSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBVersionChangeEvent"><code>IDBVersionChangeEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBVersionChangeRequest"><code>IDBVersionChangeRequest</code></a></li></ol></details></li></ol></section>

<div>
<p> <a href="/zh-CN/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a> 接口的  <strong><code>put()</code></strong> 方法更新一条给定的数据库记录,如果给出的值不存在,则插入一个新的记录</p>

<p>它返回一个 <a href="/zh-CN/docs/Web/API/IDBRequest"><code>IDBRequest</code></a> 对象,并且在一个单独的线程 ,创建一个值的 <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/common-dom-interfaces.html#structured-clone">structured clone</a> ,并且把它的值储存在对象仓库(object store)中. 当事务的模式是<code>readwrite时,</code>这个方法用来添加新的记录,或者更新一条对象仓库(object store)中已存在的记录 . 如果记录被成功储存, then a success event is fired on the returned request object with the <code>result</code> set to the key for the stored record, and the <code>transaction</code> set to the transaction in which this object store is opened.</p>
</div>

<p>put方法是一个插入或更新对象仓库的方法. 参考仅用于插入的方法 <a href="/zh-CN/docs/Web/API/IDBObjectStore/add"><code>IDBObjectStore.add</code></a> 方法.</p>

<p>谨记,如果你有一条 <a href="/zh-CN/docs/Web/API/Cursor"><code>IDBCursor</code></a> 记录想要更新, 使用<a href="/zh-CN/docs/Web/API/IDBCursor/update"><code>IDBCursor.update()</code></a> 方法更新,比 <a href="/zh-CN/docs/Web/API/IDBObjectStore/put"><code>IDBObjectStore.put()</code></a> 方法更合适. 这样做可以清楚地表明将更新现有记录，而不是插入新记录.</p>

<div class="note notecard"><strong>Note:</strong> 此特性在 <a href="/zh-CN/docs/Web/API/Web_Workers_API">Web Worker</a> 中可用。</div>

<h2 id="语法">语法</h2>

<pre class="syntaxbox notranslate">var <em>request</em> = <em>objectStore</em>.put(<em>item</em>);
var <em>request</em> = <em>objectStore</em>.put(<em>item</em>, <em>key</em>);</pre>

<h3 id="参数">参数</h3>

<dl>
 <dt>item</dt>
 <dd>你想要更新 (或插入)的记录.</dd>
 <dt>key <span class="optional optionalInline notecard inline">可选</span></dt>
 <dd>你想要更新记录的主键 (e.g. from <a href="/zh-CN/docs/Web/API/IDBCursor/primaryKey"><code>IDBCursor.primaryKey</code></a>). This is only needed for object stores that have an <code>autoIncrement</code> primary key, therefore the key is not in a field on the record object. In such cases, calling <code>put(item)</code> will always insert a new record, because it doesn&apos;t know what existing record you might want to modify.</dd>
</dl>

<h3 id="返回值">返回值</h3>

<p>一个 <a href="/zh-CN/docs/Web/API/IDBRequest"><code>IDBRequest</code></a> 对象 ,在该对象上触发与此操作相关的后续事件。</p>

<h3 id="异常">异常</h3>

<p>This method may raise a <a href="/zh-CN/docs/Web/API/DOMException"><code>DOMException</code></a> of one of the following types:</p>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">Exception</th>
   <th scope="col">Description</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><code>ReadOnlyError</code></td>
   <td>The transaction associated with this operation is in read-only <a href="/en-US/docs/IndexedDB/IDBTransaction#mode_constants" title="/en-US/docs/IndexedDB/IDBTransaction#mode_constants">mode</a>.</td>
  </tr>
  <tr>
   <td><code>TransactionInactiveError</code></td>
   <td>This <a href="/zh-CN/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a>&apos;s transaction is inactive.</td>
  </tr>
  <tr>
   <td><code>DataError</code></td>
   <td>
    <p>Any of the following conditions apply:</p>

    <ul>
     <li>The object store uses in-line keys or has a key generator, and a key parameter was provided.</li>
     <li>The object store uses out-of-line keys and has no key generator, and no key parameter was provided.</li>
     <li>The object store uses in-line keys but no key generator, and the object store&apos;s key path does not yield a valid key.</li>
     <li>The key parameter was provided but does not contain a valid key.</li>
    </ul>
   </td>
  </tr>
  <tr>
   <td><code>InvalidStateError</code></td>
   <td>The <a href="/zh-CN/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a> has been deleted or removed.</td>
  </tr>
  <tr>
   <td><code>DataCloneError</code></td>
   <td>The data being stored could not be cloned by the internal structured cloning algorithm.<br>
     </td>
  </tr>
 </tbody>
</table>

<h2 id="参数_2">参数</h2>

<dl>
 <dt>value</dt>
 <dd>被储存的值.</dd>
 <dt>key</dt>
 <dd>识别记录的键. 如果没有声明,那么记录键值将为空. 如果对象仓库有一个键生成器(e.g. autoincrement) ,必须传入key来更新对象.</dd>
</dl>

<h2 id="Example">Example</h2>

<p>The following example requests a given record title; when that request is successful the <code>onsuccess</code> function gets the associated record from the <a href="/zh-CN/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a> (made available as <code>objectStoreTitleRequest.result</code><span style="line-height: 1.5;">), updates one property of the record, and then puts the updated record back into the object store in another request with <code>put()</code>. For a full working example, see our </span><a href="https://github.com/mdn/to-do-notifications/" style="line-height: 1.5;">To-do Notifications</a><span style="line-height: 1.5;"> app (</span><a href="http://mdn.github.io/to-do-notifications/" style="line-height: 1.5;">view example live</a><span style="line-height: 1.5;">.)</span></p>

<pre class="brush: js notranslate" style="font-size: 14px;">var title = &quot;Walk dog&quot;;

// Open up a transaction as usual
var objectStore = db.transaction([&apos;toDoList&apos;], &quot;readwrite&quot;).objectStore(&apos;toDoList&apos;);

// Get the to-do list object that has this title as it&apos;s title
var objectStoreTitleRequest = objectStore.get(title);

objectStoreTitleRequest.onsuccess = function() {
  // Grab the data object returned as the result
  var data = objectStoreTitleRequest.result;

  // Update the notified value in the object to &quot;yes&quot;
  data.notified = &quot;yes&quot;;

  // Create another request that inserts the item back into the database
  var updateTitleRequest = objectStore.put(data);

  <span style="font-size: 1rem;">// Log the transaction that originated this request</span>
  console.log(&quot;The transaction that originated this request is &quot; + updateTitleRequest.transaction);

  // When this new request succeeds, run the displayData() function again to update the display
  updateTitleRequest.onsuccess = function() {
    displayData();
  };
};</pre>

<h2 id="Specification"><span style="font-size: 2.14285714285714rem;">Specification</span></h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://www.w3.org/TR/IndexedDB/#widl-IDBObjectStore-put-IDBRequest-any-value-any-key" hreflang="en" lang="en">Indexed Database API 2.0<br><small lang="zh-CN">put()</small></a></td>
   <td><span class="spec-REC">Recommendation</span></td>
   <td></td>
  </tr>
  <tr>
   <td><a class="external" href="https://w3c.github.io/IndexedDB/#dom-idbobjectstore-put" hreflang="en" lang="en">Indexed Database API Draft<br><small lang="zh-CN">put()</small></a></td>
   <td><span class="spec-REC">Recommendation</span></td>
   <td></td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility" name="Browser_compatibility">Browser compatibility</h2>

<div>
<div class="hidden">The compatibility table on this page is generated from structured data. If you&apos;d like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</div>

<div class="bc-data" id="bcd:api.IDBObjectStore.put"></div>
</div>

<h2 id="See_also">See also</h2>

<ul>
 <li><a href="/en-US/docs/Web/API/IndexedDB_API/Using_IndexedDB">Using IndexedDB</a></li>
 <li>Starting transactions: <a href="/zh-CN/docs/Web/API/IDBDatabase"><code>IDBDatabase</code></a></li>
 <li>Using transactions: <a href="/zh-CN/docs/Web/API/IDBTransaction"><code>IDBTransaction</code></a></li>
 <li>Setting a range of keys: <a href="/zh-CN/docs/Web/API/IDBKeyRange"><code>IDBKeyRange</code></a></li>
 <li>Retrieving and making changes to your data: <a href="/zh-CN/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a></li>
 <li>Using cursors: <a href="/zh-CN/docs/Web/API/IDBCursor"><code>IDBCursor</code></a></li>
 <li>Reference example: <a class="external" href="https://github.com/mdn/to-do-notifications/tree/gh-pages">To-do Notifications</a> (<a class="external" href="http://mdn.github.io/to-do-notifications/">view example live</a>.)</li>
</ul>
