---
title: Node.setUserData()
slug: Web/API/Node/setUserData
translation_of: Web/API/Node/setUserData
---
<p></p><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/Node"><code>Node</code></a></strong></li><li class="toggle"><details open><summary>属性</summary><ol><li><a href="/zh-CN/docs/Web/API/Node/baseURI"><code>baseURI</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/Node/baseURIObject"><code>baseURIObject</code></a></li><li><a href="/zh-CN/docs/DOM/element.childNodes"><code>childNodes</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/firstChild"><code>firstChild</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/isConnected"><code>isConnected</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/lastChild"><code>lastChild</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/API/Node/localName"><code>localName</code></a></s></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/API/Node/namespaceURI"><code>namespaceURI</code></a></s></li><li><a href="/zh-CN/docs/Web/API/Node/nextSibling"><code>nextSibling</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/nodeName"><code>nodeName</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/API/Node/nodePrincipal"><code>nodePrincipal</code></a></s></li><li><a href="/zh-CN/docs/Web/API/Node/nodeType"><code>nodeType</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/nodeValue"><code>nodeValue</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/outerText"><code>outerText</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/ownerDocument"><code>ownerDocument</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/parentElement"><code>parentElement</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/parentNode"><code>parentNode</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/API/Node/prefix"><code>prefix</code></a></s></li><li><a href="/zh-CN/docs/Web/API/Node/previousSibling"><code>previousSibling</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/API/Node/rootNode"><code>rootNode</code></a></s></li><li><a href="/zh-CN/docs/Web/API/Node/textContent"><code>textContent</code></a></li></ol></details></li><li class="toggle"><details open><summary>方法</summary><ol><li><a href="/zh-CN/docs/Web/API/Node/appendChild"><code>appendChild</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/cloneNode"><code>cloneNode</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/compareDocumentPosition"><code>compareDocumentPosition</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/contains"><code>contains</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/getRootNode"><code>getRootNode()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/API/Node/getUserData"><code>getUserData()</code></a></s></li><li><a href="/zh-CN/docs/Web/API/Node/hasChildNodes"><code>hasChildNodes</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/insertBefore"><code>insertBefore()</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/isDefaultNamespace"><code>isDefaultNamespace</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/isEqualNode"><code>isEqualNode</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/isSameNode"><code>isSameNode</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/zh-CN/docs/Web/API/Node/isSupported"><code>isSupported</code></a></s></li><li><a href="/zh-CN/docs/Web/API/Node/lookupNamespaceURI"><code>lookupNamespaceURI</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/lookupPrefix"><code>lookupPrefix</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/normalize"><code>normalize()</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/removeChild"><code>removeChild</code></a></li><li><a href="/zh-CN/docs/Web/API/Node/replaceChild"><code>replaceChild</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><em><code>setUserData()</code></em></s></li></ol></details></li><li class="toggle"><details open><summary>继承</summary><ol><li><a href="/zh-CN/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li></ol></section><div class="obsolete obsoleteHeader notecard"><p><strong><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span> 已废弃</strong><br>This feature is obsolete. Although it may still work in some browsers, its use is discouraged since it could be removed at any time. Try to avoid using it.</p></div><p></p>
<p>The <code><strong>Node.setUserData()</strong></code> method allows a user to attach (or remove) data to an element, without needing to modify the DOM. Note that such data will not be preserved when imported via <a href="/zh-CN/docs/Web/API/Node/importNode" title="此页面仍未被本地化, 期待您的翻译!"><code>Node.importNode</code></a>, as with <a href="/zh-CN/docs/Web/API/Node/cloneNode" title="Node.cloneNode() 方法返回调用该方法的节点的一个副本."><code>Node.cloneNode()</code></a> and <a href="/zh-CN/docs/Web/API/Node/renameNode" title="此页面仍未被本地化, 期待您的翻译!"><code>Node.renameNode()</code></a> operations (though <a href="/zh-CN/docs/Web/API/Node/adoptNode" title="此页面仍未被本地化, 期待您的翻译!"><code>Node.adoptNode</code></a> does preserve the information), and equality tests in <a href="/zh-CN/docs/Web/API/Node/isEqualNode" title="Node.isEqualNode() 方法可以判断两个节点是否相等。当两个节点的类型相同，定义特征(defining characteristics)相同（对元素来说，即 id，孩子节点的数量等等），属性一致等，这两个节点就是相等的。一些具体的数据指出：多数时候的比较是根据节点的类型来的。"><code>Node.isEqualNode()</code></a> do not consider user data in making the assessment.</p>
<p>This method offers the convenience of associating data with specific nodes without needing to alter the structure of a document and in a standard fashion, but it also means that extra steps may need to be taken if one wishes to serialize the information or include the information upon clone, import, or rename operations.</p>
<div class="note notecard">
 <p>The <code>Node.getUserData</code> and <a href="/zh-CN/docs/Web/API/Node/setUserData" title="The Node.setUserData() method allows a user to attach (or remove) data to an element, without needing to modify the DOM. Note that such data will not be preserved when imported via Node.importNode, as with Node.cloneNode() and Node.renameNode() operations (though Node.adoptNode does preserve the information), and equality tests in Node.isEqualNode() do not consider user data in making the assessment."><code>Node.setUserData</code></a> methods are no longer available from Web content. <a href="/zh-CN/docs/Web/API/Element/dataset" title="此页面仍未被本地化, 期待您的翻译!"><code>Element.dataset</code></a> or <a href="/en-US/docs/JavaScript/Reference/Global_Objects/WeakMap"><code>WeakMap</code></a> can be used instead.</p>
</div>
<h2 id="Syntax">Syntax</h2>
<pre class="syntaxbox"><em>prevUserData = someNode</em>.setUserData(<em>userKey</em>, <em>userData</em>, <em>handler</em>);</pre>
<h3 id="Parameters">Parameters</h3>
<ul>
 <li><code>userKey</code> is used as the key by which one may subsequently obtain the stored data. More than one key can be set for a given node.</li>
 <li><code>handler</code> is a callback which will be called any time the node is being cloned, imported, renamed, as well as if deleted or adopted; a function can be used or an object implementing the <code>handle</code> method (part of the <a href="/zh-CN/docs/Web/API/UserDataHandler"><code>UserDataHandler</code></a> interface). The handler will be passed five arguments: an operation type integer (e.g., 1 to indicate a clone operation), the user key, the data on the node, the source node (<code>null</code> if being deleted), the destination node (the newly created node or <code>null</code> if none).If no handler is desired, one must specify <code>null</code>.</li>
 <li><code>userData</code> is the object to associate to <code>userKey</code> on someNode. If <code>null</code>, any previously registered object and UserDataHandler associated to <code>userKey</code> on this node will be removed.</li>
</ul>
<h2 id="Example">Example</h2>
<pre class="brush: js">var d = document.implementation.createDocument(&apos;&apos;, &apos;test&apos;, null);
d.documentElement.setUserData(&apos;key&apos;, 15, {handle:function (o, k, d, s, ds) {alert(o+&apos;::&apos;+k+&apos;::&apos;+d+&apos;::&apos;+s+&apos;::&apos;+ds)}}); // 2::key::15::[object Element]::[object Element]
alert(d.documentElement.getUserData(&apos;key&apos;)); // 15
var e = document.importNode(d.documentElement, true); // causes handler to be called
alert(e.getUserData(&apos;key&apos;)); // null since user data is not copied
</pre>
<h2 id="Specifications">Specifications</h2>
<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><a lang="en" href="https://dom.spec.whatwg.org/#interface-node" class="external" hreflang="en">DOM<br><small lang="zh-CN">Node</small></a></td>
   <td><span class="spec-Living">Living Standard</span></td>
   <td>Removed from the specification.</td>
  </tr>
  <tr>
   <td><a lang="en" href="https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-setUserData" class="external" hreflang="en">Document Object Model (DOM) Level 3 Core Specification<br><small lang="zh-CN">Node.setUserData()</small></a></td>
   <td><span class="spec-Obsolete">Obsolete</span></td>
   <td>Initial definition.</td>
  </tr>
 </tbody>
</table>
<h2 id="Browser_compatibility">Browser compatibility</h2>
<p></p><div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/zh-CN/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Desktop</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div><p></p>
<div id="compat-desktop">
 <table class="compat-table">
  <tbody>
   <tr>
    <th>Feature</th>
    <th>Chrome</th>
    <th>Firefox (Gecko)</th>
    <th>Internet Explorer</th>
    <th>Opera</th>
    <th>Safari</th>
   </tr>
   <tr>
    <td>Basic support</td>
    <td><span style="color: #f00;">未实现</span></td>
    <td>Supported from 1.0 (1.7 or earlier) to <a href="/en-US/Firefox/Releases/21">21.0</a> (21.0).<br>
     Removed in <a href="/en-US/Firefox/Releases/22">22.0</a> (22.0) [1]</td>
    <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
    <td><span style="color: #f00;">未实现</span></td>
    <td><span style="color: #f00;">未实现</span></td>
   </tr>
  </tbody>
 </table>
</div>
<div id="compat-mobile">
 <table class="compat-table">
  <tbody>
   <tr>
    <th>Feature</th>
    <th>Android</th>
    <th>Firefox Mobile (Gecko)</th>
    <th>IE Mobile</th>
    <th>Opera Mobile</th>
    <th>Safari Mobile</th>
   </tr>
   <tr>
    <td>Basic support</td>
    <td><span style="color: #f00;">未实现</span></td>
    <td>Supported from 1.0 (1.0) to 21.0 (21.0).<br>
     Removed in 22.0 (22.0) [1]</td>
    <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
    <td><span style="color: #f00;">未实现</span></td>
    <td><span style="color: #f00;">未实现</span></td>
   </tr>
  </tbody>
 </table>
</div>
<p>[1] The method is still available from chrome scripts.</p>
<h2 id="See_also">See also</h2>
<ul>
 <li><a href="/zh-CN/docs/Web/API/Node/getUserData"><code>Node.getUserData()</code></a></li>
 <li><a href="/zh-CN/docs/Web/API/UserDataHandler"><code>UserDataHandler</code></a></li>
 <li><a href="/zh-CN/docs/Web/API/DOMUserData"><code>DOMUserData</code></a></li>
</ul>
