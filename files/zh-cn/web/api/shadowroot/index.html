---
title: ShadowRoot
slug: Web/API/ShadowRoot
tags:
  - API
  - Interface
  - Reference
  - ShadowRoot
  - Web Components
translation_of: Web/API/ShadowRoot
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/ShadowRoot"><code>ShadowRoot</code></a></strong></li><li class="toggle"><details open><summary>属性</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/zh-CN/docs/Web/API/ShadowRoot/delegatesFocus"><code>delegatesFocus</code></a></li><li><a href="/zh-CN/docs/Web/API/ShadowRoot/host"><code>host</code></a> <a href="/zh-CN/docs/Web/API/ShadowRoot/host$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/ShadowRoot/innerHTML"><code>innerHTML</code></a></li><li><a href="/zh-CN/docs/Web/API/ShadowRoot/mode"><code>mode</code></a></li></ol></details></li><li class="toggle"><details open><summary>继承</summary><ol><li><a href="/zh-CN/docs/Web/API/DocumentFragment"><code>DocumentFragment</code></a></li><li><a href="/zh-CN/docs/Web/API/Node"><code>Node</code></a></li><li><a href="/zh-CN/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li></ol></section>

<p>Shadow DOM API 的 <code><strong>ShadowRoot</strong></code> 接口是一个 DOM 子树的根节点, 它与文档的主 DOM 树分开渲染。</p>

<p>你可以通过使用一个元素的 <a href="/zh-CN/docs/Web/API/Element/shadowRoot"><code>Element.shadowRoot</code></a> 属性来检索它的参考,假设它是由 <a href="/zh-CN/docs/Web/API/Element/attachShadow"><code>Element.attachShadow()</code></a> 创建的并使 <code>mode</code> 设置为 <code>open</code>.</p>

<h2 id="属性">属性</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/ShadowRoot/delegatesFocus"><code>ShadowRoot.delegatesFocus</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span> <span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></dt>
 <dd>返回一个boolean值表明在 shadow 添加时 delegatesFocus 是否被设置(see <a href="/zh-CN/docs/Web/API/Element/attachShadow"><code>Element.attachShadow()</code></a>)</dd>
 <dt><a href="/zh-CN/docs/Web/API/ShadowRoot/host"><code>ShadowRoot.host</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd><code>ShadowRoot</code> 附加的宿主 DOM 元素。</dd>
 <dt><a href="/zh-CN/docs/Web/API/ShadowRoot/innerHTML"><code>ShadowRoot.innerHTML</code></a></dt>
 <dd><code>ShadowRoot</code> 内部的 DOM 树。</dd>
 <dt><a href="/zh-CN/docs/Web/API/ShadowRoot/mode"><code>ShadowRoot.mode</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd><code>ShadowRoot</code> 的模式——可以是 <code>open</code> 或者 <code>closed</code>。这定义了 shadow root 的内部实现是否可被 JavaScript 访问及修改 — 也就是说，该实现是否公开，例如，<a href="/zh-CN/docs/Web/HTML/Element/video" title="HTML &lt;video&gt; 元素 用于在HTML或者XHTML文档中嵌入媒体播放器，用于支持文档内的视频播放。"><code>&lt;video&gt;</code></a> 标签内部实现无法被 JavaScript 访问及修改。</dd>
</dl>

<h3 id="从_DocumentOrShadowRoot_中包含的属性">从 DocumentOrShadowRoot 中包含的属性</h3>

<p><em><code>ShadowRoot</code> 接口包含了下列从<a href="/zh-CN/docs/Web/API/DocumentOrShadowRoot"><code>DocumentOrShadowRoot</code></a> mixin中定义的属性. 请注意它现在仅在Chrome浏览器中应用; 其它的浏览器仍在<a href="/zh-CN/docs/Web/API/Document"><code>Document</code></a>接口实现.</em></p>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/DocumentOrShadowRoot/activeElement"><code>DocumentOrShadowRoot.activeElement</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>返回含有获取焦点了的shadow tree的 <a href="/zh-CN/docs/Web/API/Element"><code>Element</code></a> </dd>
 <dt><a href="/zh-CN/docs/Web/API/DocumentOrShadowRoot/styleSheets"><code>DocumentOrShadowRoot.styleSheets</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>返回 <a href="/zh-CN/docs/Web/API/CSSStyleSheet"><code>CSSStyleSheet</code></a> 的 <a href="/zh-CN/docs/Web/API/StyleSheetList"><code>StyleSheetList</code></a> 对象，用于代表通过链接加载到文档中或内嵌的样式表。</dd>
</dl>

<h2 id="方法">方法</h2>

<p><em> <code>ShadowRoot</code> 接口包含了下列几个在 <a href="/zh-CN/docs/Web/API/DocumentOrShadowRoot"><code>DocumentOrShadowRoot</code></a> mixin中定义的方法. 请注意它现在仅在Chrome浏览器中应用; 其它的浏览器仍在<a href="/zh-CN/docs/Web/API/Document"><code>Document</code></a>接口实现.</em></p>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/DocumentOrShadowRoot/getSelection"><code>DocumentOrShadowRoot.getSelection()</code></a></dt>
 <dd>返回一个 <a href="/zh-CN/docs/Web/API/Selection"><code>Selection</code></a> 类来表明用户选择的文本选区或者光标所在的位置</dd>
 <dt><a href="/zh-CN/docs/Web/API/DocumentOrShadowRoot/elementFromPoint"><code>DocumentOrShadowRoot.elementFromPoint()</code></a></dt>
 <dd>返回在指定坐标最上层的元素.</dd>
 <dt><a href="/zh-CN/docs/Web/API/DocumentOrShadowRoot/elementsFromPoint"><code>DocumentOrShadowRoot.elementsFromPoint()</code></a></dt>
 <dd>返回一个包含所有在指定位置上的元素的Array</dd>
 <dt><a href="/zh-CN/docs/Web/API/DocumentOrShadowRoot/caretPositionFromPoint"><code>DocumentOrShadowRoot.caretPositionFromPoint()</code></a></dt>
 <dd>返回一个 <a href="/zh-CN/docs/Web/API/CaretPosition"><code>CaretPosition</code></a> 对象，包括包含了光标的DOM节点，以及光标在该节点中的字符偏移量</dd>
</dl>

<h2 id="例子">例子</h2>

<p>下面的这段代码是从我们的 <a href="https://github.com/mdn/web-components-examples/tree/master/life-cycle-callbacks">life-cycle-callbacks</a> 示例 (<a href="https://mdn.github.io/web-components-examples/life-cycle-callbacks">查看在线示例</a>)中提取出来的, 它创建了一个由元素的属性指定的大小相等的正方形.</p>

<p>Inside the <code>&lt;custom-square&gt;</code> element&apos;s class definition we include some life cycle callbacks that make a call to an external function, <code>upateStyle()</code>, which actually applies the size and color to the element. You&apos;ll see that we are passing it <code>this</code> (the custom element itself) as a parameter.</p>

<pre class="brush: js notranslate">connectedCallback() {
  console.log(&apos;Custom square element added to page.&apos;);
  updateStyle(this);
}

attributeChangedCallback(name, oldValue, newValue) {
  console.log(&apos;Custom square element attributes changed.&apos;);
  updateStyle(this);
}</pre>

<p>In the <code>updateStyle()</code> function itself, we get a reference to the shadow DOM using <a href="/zh-CN/docs/Web/API/Element/shadowRoot"><code>Element.shadowRoot</code></a>. From here we use standard DOM traversal techniques to find the <a href="/zh-CN/docs/Web/HTML/Element/style" title="HTML的&lt;style&gt;元素包含文档的样式信息或者文档的部分内容。默认情况下，该标签的样式信息通常是CSS的格式。"><code>&lt;style&gt;</code></a> element inside the shadow DOM and then update the CSS found inside it:</p>

<pre class="brush: js notranslate">function updateStyle(elem) {
  var shadow = elem.shadowRoot;
  var childNodes = shadow.childNodes;
  for(var i = 0; i &lt; childNodes.length; i++) {
    if(childNodes[i].nodeName === &apos;STYLE&apos;) {
      childNodes[i].textContent =
        &apos;div {&apos; +
          &apos;width: &apos; + elem.getAttribute(&apos;l&apos;) + &apos;px;&apos; +
          &apos;height: &apos; + elem.getAttribute(&apos;l&apos;) + &apos;px;&apos; +
          &apos;background-color: &apos; + elem.getAttribute(&apos;c&apos;) + &apos;;&apos; +
        &apos;}&apos;;
    }
  }
}</pre>

<h2 id="规范">规范</h2>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><a class="external" href="https://dom.spec.whatwg.org/#interface-shadowroot" hreflang="en" lang="en">DOM<br><small lang="zh-CN">Interface ShadowRoot</small></a></td>
   <td><span class="spec-Living">Living Standard</span></td>
   <td></td>
  </tr>
 </tbody>
</table>

<h2 id="浏览器兼容性">浏览器兼容性</h2>

<div class="hidden">The compatibility table in this page is generated from structured data. If you&apos;d like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</div>

<div class="bc-data" id="bcd:api.ShadowRoot"></div>
