---
title: XDomainRequest
slug: Web/API/XDomainRequest
tags:
  - AJAX
  - API
  - IE
  - JavaScript
  - Web
  - 废弃
  - 微软
  - 非标准
translation_of: Web/API/XDomainRequest
---
<p></p><div class="obsolete obsoleteHeader notecard"><p><strong><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span> 已废弃</strong><br>This feature is obsolete. Although it may still work in some browsers, its use is discouraged since it could be removed at any time. Try to avoid using it.</p></div><p></p>

<p></p><div class="nonStandard nonStandardHeader notecard">
      <p><strong><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span> 非标准</strong><br>
      该特性是非标准的，请尽量不要在生产环境中使用它！</p>
      </div><p></p>

<h2 id="摘要">摘要</h2>

<p><span style="font-size: 14.4444446563721px; line-height: 23.3333339691162px;">XDomainRequest是在IE8和IE9上的</span><a style="font-size: 14.4444446563721px; line-height: 23.3333339691162px;" href="/en-US/docs/HTTP/Access_control_CORS">HTTP access control (CORS) </a>的实现，在IE10中被<span style="font-size: 14.4444446563721px; line-height: 23.3333339691162px;"> 包含CORS的</span><a style="font-size: 14.4444446563721px; line-height: 23.3333339691162px;" href="/en-US/docs/Web/API/XMLHttpRequest">XMLHttpRequest </a>取代了，如果你的开发目标是IE10或IE的后续版本，或想要支待其他的浏览器，你需要使用标准的<a style="font-size: 14.4444446563721px; line-height: 23.3333339691162px;" href="/en-US/docs/Web/HTTP/Access_control_CORS">HTTP access control</a>。</p>

<p>该接口可以发送GET和POST请求</p>

<h2 id="语法">语法</h2>

<pre>var xdr = new XDomainRequest();</pre>

<p>返回<span style="font-family: Consolas,Monaco,&apos;Andale Mono&apos;,monospace; font-size: 14.4444446563721px; line-height: 23.3333339691162px;">XDomainRequest的实例，该实例可以被用来生成或管理请求。</span></p>

<h2 id="属性">属性</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/XDomainRequest/timeout" title="此页面仍未被本地化, 期待您的翻译!"><code>XDomainRequest.timeout</code></a></dt>
 <dd>获取或设置请求的过期时间。</dd>
 <dt><a href="/zh-CN/docs/Web/API/XDomainRequest/responseText" title="此页面仍未被本地化, 期待您的翻译!"><code>XDomainRequest.responseText</code></a></dt>
 <dd>以字符串形式获取响应体。</dd>
</dl>

<h2 id="方法">方法</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/XDomainRequest/open" title="此页面仍未被本地化, 期待您的翻译!"><code>XDomainRequest.open()</code></a></dt>
 <dd>根据指定的方法（GET或POST）和URL，打开请求。</dd>
 <dt><a href="/zh-CN/docs/Web/API/XDomainRequest/send" title="此页面仍未被本地化, 期待您的翻译!"><code>XDomainRequest.send()</code></a></dt>
 <dd>发送请求。POST的数据会在该方法中被指定。</dd>
 <dt><a href="/zh-CN/docs/Web/API/XDomainRequest/abort" title="此页面仍未被本地化, 期待您的翻译!"><code>XDomainRequest.abort()</code></a></dt>
 <dd>中止请求。</dd>
</dl>

<h2 id="事件处理程序">事件处理程序</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/XDomainRequest/onprogress" title="此页面仍未被本地化, 期待您的翻译!"><code>XDomainRequest.onprogress</code></a></dt>
 <dd>当请求中发送方法和onload事件中有进展时的处理程序。</dd>
 <dt><a href="/zh-CN/docs/Web/API/XDomainRequest/ontimeout" title="此页面仍未被本地化, 期待您的翻译!"><code>XDomainRequest.ontimeout</code></a></dt>
 <dd>当请求超时时的事件处理程序。</dd>
 <dt><a href="/zh-CN/docs/Web/API/XDomainRequest/onerror" title="此页面仍未被本地化, 期待您的翻译!"><code>XDomainRequest.onerror</code></a></dt>
 <dd>当请求发生错误时的处理程序。</dd>
 <dt><a href="/zh-CN/docs/Web/API/XDomainRequest/onload" title="此页面仍未被本地化, 期待您的翻译!"><code>XDomainRequest.onload</code></a></dt>
 <dd>当服务器端的响应被完整接收时的处理程序。</dd>
</dl>

<h2 id="例子">例子</h2>

<pre class="brush: js">if(window.XDomainRequest){
  var xdr = new XDomainRequest();

  xdr.open(&quot;get&quot;, &quot;http://example.com/api/method&quot;);

  xdr.onprogress = function () {
    //Progress
  };

  xdr.ontimeout = function () {
    //Timeout
  };

  xdr.onerror = function () {
    //Error Occured
  };

  xdr.onload = function() {
    //success(xdr.responseText);
  }

  setTimeout(function () {
    xdr.send();
  }, 0);
}</pre>

<div> </div>

<div class="note notecard">
<p><strong>注意： </strong>如果多个XDomainRequests同时被发送，一些请求可能会丢失，为避免这种情况，xdr.send()的调用应被包裹在setTimeout方法中（见<a href="/zh-CN/docs/Web/API/Window/setTimeout" title="WindowOrWorkerGlobalScope 混合的 setTimeout()方法设置一个定时器，该定时器在定时器到期后执行一个函数或指定的一段代码。"><code>window.setTimeout()</code></a>）。</p>
</div>

<h2 id="安全">安全</h2>

<p><span style="font-size: 14.4444446563721px; line-height: 23.3333339691162px;">XDomainRequest为了确保安全构建，采用了多种方法。</span></p>

<ul>
 <li>安全协议源必须匹配请求的URL。（http到http，https到https）。如果不匹配，请求会报“拒绝访问”的错误。</li>
 <li>被请求的URL的服务器必须带有<span style="font-size: 14.4444446563721px; line-height: 23.3333339691162px;"> 设置为（“*”）或包含了请求方的</span><code style="font-size: 14.4444446563721px; line-height: 23.3333339691162px;"><a style="font-size: 14.4444446563721px; line-height: 23.3333339691162px;" href="/en-US/docs/Web/HTTP/Access_control_CORS#Access-Control-Allow-Origin">Access-Control-Allow-Origin</a>的头部。</code></li>
</ul>

<h2 id="标准">标准</h2>

<p>该接口及其方法没有遵循标准。</p>

<h2 id="浏览器兼容性">浏览器兼容性</h2>

<p></p><div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/zh-CN/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Desktop</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div><p></p>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari</th>
  </tr>
  <tr>
   <td>XDomainRequest</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td>8.0-9.x</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>XDomainRequest</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
 </tbody>
</table>
</div>

<section id="Quick_Links">
<ol>
 <li data-default-state="open"><a href="#"><strong>Properties</strong></a>

  <ol>
   <li><a href="/zh-CN/docs/Web/API/XDomainRequest/timeout"><code>XDomainRequest.timeout</code></a></li>
   <li><a href="/zh-CN/docs/Web/API/XDomainRequest/responseText"><code>XDomainRequest.responseText</code></a></li>
  </ol>
 </li>
 <li data-default-state="open"><a href="#"><strong>Methods</strong></a>
  <ol>
   <li><a href="/zh-CN/docs/Web/API/XDomainRequest/open"><code>XDomainRequest.open()</code></a></li>
   <li><a href="/zh-CN/docs/Web/API/XDomainRequest/send"><code>XDomainRequest.send()</code></a></li>
   <li><a href="/zh-CN/docs/Web/API/XDomainRequest/abort"><code>XDomainRequest.abort()</code></a></li>
  </ol>
 </li>
 <li data-default-state="open"><a href="#"><strong>Event handlers</strong></a>
  <ol>
   <li><a href="/zh-CN/docs/Web/API/XDomainRequest/onprogress"><code>XDomainRequest.onprogress</code></a></li>
   <li><a href="/zh-CN/docs/Web/API/XDomainRequest/ontimeout"><code>XDomainRequest.ontimeout</code></a></li>
   <li><a href="/zh-CN/docs/Web/API/XDomainRequest/onerror"><code>XDomainRequest.onerror</code></a></li>
   <li><a href="/zh-CN/docs/Web/API/XDomainRequest/onload"><code>XDomainRequest.onload</code></a></li>
  </ol>
 </li>
</ol>
</section>
