---
title: MediaStream API
slug: Web/API/Media_Streams_API
tags:
  - 媒体
  - 媒体流API
  - 视频
  - 语音
  - 进一步的
  - 音频
translation_of: Web/API/Media_Streams_API
---
<div class="experimental indicator-warning notecard">
    <p><strong>这是一个实验中的功能</strong><br>此功能某些浏览器尚在开发中，请参考<a href="#Browser_compatibility">浏览器兼容性表格</a>以得到在不同浏览器中适合使用的前缀。由于该功能对应的标准文档可能被重新修订，所以在未来版本的浏览器中该功能的语法和行为可能随之改变。</p>
</div>

<p>媒体流处理API（通常被称为媒体流API或流API）是描述音频或视频数据流的 <a href="/zh-CN/docs/WebRTC">WebRTC</a> 的一部分，处理它们的方法，与数据类型相关的约束，成功和错误 当异步使用数据时的回调以及在处理期间触发的事件。</p>

<h2 id="基本概念">基本概念</h2>

<p>这个API是基于操纵一个 <font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);">MediaStream </span></font>对象代表音频或视频相关数据的流量。 通常一个 <font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);">MediaStream</span></font>是作为一个简单的URL string 它可以用来引用存储在DOM中的数据 <a href="/zh-CN/docs/Web/API/File"><code>File</code></a>, 或者一个 <a href="/zh-CN/docs/Web/API/Blob"><code>Blob</code></a> 对象建立 <a href="/zh-CN/docs/Web/API/Window/URL/createObjectURL"><code>window.URL.createObjectURL()</code></a>, <a href="https://developer.mozilla.org/en-US/docs/WebRTC/taking_webcam_photos#Get_the_video">如视频所描述的</a>。</p>

<p>一个 <font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);">MediaStream </span></font>包含零个或更多的 <font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);">MediaStreamTrack </span></font>对象，代表着各种的声轨和视频轨。 每一个 <font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);">MediaStreamTrack</span></font> 可能有一个或更多的通道。这个通道代表着媒体流的最小单元，比如一个音频信号对应着一个对应的扬声器，像是在立体声音轨中的左通道或右通道。</p>

<p><font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);">MediaStream</span></font> 对象有着单一的输入和输出。由 <code><a href="/en-US/docs/Web/API/MediaDevices/getUserMedia">getUserMedia()</a></code> 创建的 <font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);">MediaStream</span></font> 对象是在本地借助用户相机和麦克风的源输入。非本地的 <code>MediaStream</code> 代表了一个媒体元素, 像是<a href="/zh-CN/docs/Web/HTML/Element/video" title="HTML &lt;video&gt; 元素 用于在HTML或者XHTML文档中嵌入媒体播放器，用于支持文档内的视频播放。"><code>&lt;video&gt;</code></a> 元素或是 <a href="/zh-CN/docs/Web/HTML/Element/audio" title="HTML &lt;audio&gt; 元素用于在文档中嵌入音频内容。 &lt;audio&gt; 元素可以包含一个或多个音频资源， 这些音频资源可以使用 src 属性或者&lt;source&gt; 元素来进行描述：浏览器将会选择最合适的一个来使用。也可以使用 MediaStream 将这个元素用于流式媒体。"><code>&lt;audio&gt;</code></a>元素， 一般是源自网络的流，并通过 WebRTC <a href="/en-US/docs/WebRTC/PeerConnection_API" title="/en-US/docs/WebRTC/PeerConnection_API">PeerConnection API</a> 或使用 <a href="/en-US/docs/Web_Audio_API" title="/en-US/docs/Web_Audio_API">Web Audio API</a> 获得<a href="/zh-CN/docs/Web/API/MediaStreamAudioSourceNode"><code>MediaStreamAudioSourceNode</code></a> 元素。<code>MediaStream</code> 对象的输出能链接到一个<strong>用户。</strong> 它可以是一个媒体元素, 像是 <code>&lt;audio&gt;</code> 或者 <code>&lt;video&gt;</code>， the WebRTC <a href="/en-US/docs/WebRTC/PeerConnection_API" title="/en-US/docs/WebRTC/PeerConnection_API">PeerConnection API</a> 或是 <a href="/en-US/docs/Web_Audio_API" title="/en-US/docs/Web_Audio_API">Web Audio API</a> <a href="/zh-CN/docs/Web/API/MediaStreamAudioDestinationNode"><code>MediaStreamAudioDestinationNode</code></a>。</p>

<h2 id="参考">参考</h2>

<p>在这些参考文章中，您将找到构成Media Capture和Streams API的每个接口和事件需要了解的基本信息。</p>

<div class="index">
<ul>
 <li><code><a href="/zh-CN/docs/Web/Reference/Events/addtrack">addtrack</a></code> (event)</li>
 <li><a href="/zh-CN/docs/Web/API/AudioStreamTrack"><code>AudioStreamTrack</code></a></li>
 <li><a href="/zh-CN/docs/Web/API/BlobEvent"><code>BlobEvent</code></a></li>
 <li><code><a href="/zh-CN/docs/Web/Reference/Events/ended (MediaStream)">ended (MediaStream)</a></code> (event)</li>
 <li><code><a href="/zh-CN/docs/Web/Reference/Events/ended (MediaStreamTrack)">ended (MediaStreamTrack)</a></code> (event)</li>
 <li><a href="/zh-CN/docs/Web/API/MediaStream"><code>MediaStream</code></a></li>
 <li><a href="/zh-CN/docs/Web/API/MediaStreamConstraints"><code>MediaStreamConstraints</code></a></li>
 <li><a href="/zh-CN/docs/Web/API/MediaStreamTrack"><code>MediaStreamTrack</code></a></li>
 <li><a href="/zh-CN/docs/Web/API/MediaStreamTrackEvent"><code>MediaStreamTrackEvent</code></a></li>
 <li><a href="/zh-CN/docs/Web/API/MediaTrackConstraints"><code>MediaTrackConstraints</code></a></li>
 <li><code><a href="/zh-CN/docs/Web/Reference/Events/muted">muted</a></code> (event)</li>
 <li><a href="/zh-CN/docs/Web/API/NavigatorUserMedia"><code>NavigatorUserMedia</code></a></li>
 <li><a href="/zh-CN/docs/Web/API/NavigatorUserMediaError"><code>NavigatorUserMediaError</code></a></li>
 <li><code><a href="/zh-CN/docs/Web/Reference/Events/overconstrained">overconstrained</a></code> (event)</li>
 <li><code><a href="/zh-CN/docs/Web/Reference/Events/removetrack">removetrack</a></code> (event)</li>
 <li><code><a href="/zh-CN/docs/Web/Reference/Events/started">started</a></code> (event)</li>
 <li><code><a href="/zh-CN/docs/Web/Reference/Events/unmuted">unmuted</a></code> (event)</li>
 <li><a href="/zh-CN/docs/Web/API/URL"><code>URL</code></a></li>
 <li><a href="/zh-CN/docs/Web/API/VideoStreamTrack"><code>VideoStreamTrack</code></a></li>
</ul>
</div>

<p> </p>

<h2 id="浏览器支持">浏览器支持</h2>

<div class="hidden">
<p>The compatibility table on this page is generated from structured data. If you&apos;d like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</p>
</div>

<div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/zh-CN/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Desktop</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div>

<div class="bc-data" id="bcd:api.MediaStream"></div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera </th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>Stream API </td>
   <td>21<span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/zh-CN/docs/Web/Guide/Prefixes">webkit</a></span> </td>
   <td>nightly 18<span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/zh-CN/docs/Web/Guide/Prefixes">moz</a></span> </td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span> </td>
   <td>12</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span> </td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>IE Phone</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Stream API </td>
   <td><span style="color: #f00;">未实现</span> </td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span> </td>
   <td><span style="color: #f00;">未实现</span> </td>
   <td><span style="color: #f00;">未实现</span> </td>
  </tr>
 </tbody>
</table>
</div>

<p>当前已经支持在Chrome,欧朋，和Firefox Nightly 18 浏览器使用WenRTC获取相机功能 。在Firefox Nightly 中启用WebRTC 需要你在配置中进行设置：</p>

<ul>
 <li>在地址栏中输入&quot;about:config&quot; ，在需要改变的地方设置为是</li>
 <li>找到 &quot;media.navigator.enabled&quot; 的然后设置为true</li>
</ul>

<h2 id="See_Also">See Also</h2>

<ul>
 <li><a href="/en-US/docs/WebRTC">WebRTC</a> -  API 介绍页</li>
 <li><a href="/en-US/docs/Web/API/MediaDevices/getUserMedia">getUserMedia()</a></li>
 <li><a href="/en-US/docs/WebRTC/taking_webcam_photos">Taking webcam photos</a> - 关于使用 <code>getUserMedia()</code> 的演示</li>
</ul>
