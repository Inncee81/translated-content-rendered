---
title: MediaStreamAudioSourceNode
slug: Web/API/MediaStreamAudioSourceNode
tags:
  - MediaStreamAudioSourceNode
  - Web Audio API
translation_of: Web/API/MediaStreamAudioSourceNode
---
<p></p><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/Web_Audio_API">Web Audio API</a></strong></li><li><strong><a href="/zh-CN/docs/Web/API/MediaStreamAudioSourceNode"><code>MediaStreamAudioSourceNode</code></a></strong></li><li class="toggle"><details open><summary>Constructor</summary><ol><li><a href="/zh-CN/docs/Web/API/MediaStreamAudioSourceNode/MediaStreamAudioSourceNode"><code>MediaStreamAudioSourceNode()</code></a></li></ol></details></li><li class="toggle"><details open><summary>继承</summary><ol><li><a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a></li><li><a href="/zh-CN/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li><li class="toggle"><details open><summary>Related pages for Web Audio API</summary><ol><li><a href="/zh-CN/docs/Web/API/AnalyserNode"><code>AnalyserNode</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioBuffer"><code>AudioBuffer</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioBufferSourceNode"><code>AudioBufferSourceNode</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioContext"><code>AudioContext</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioContextOptions"><code>AudioContextOptions</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioDestinationNode"><code>AudioDestinationNode</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioListener"><code>AudioListener</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioNodeOptions"><code>AudioNodeOptions</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioParam"><code>AudioParam</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioProcessingEvent"><code>AudioProcessingEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/AudioScheduledSourceNode"><code>AudioScheduledSourceNode</code></a></li><li><a href="/zh-CN/docs/Web/API/BaseAudioContext"><code>BaseAudioContext</code></a></li><li><a href="/zh-CN/docs/Web/API/BiquadFilterNode"><code>BiquadFilterNode</code></a></li><li><a href="/zh-CN/docs/Web/API/ChannelMergerNode"><code>ChannelMergerNode</code></a></li><li><a href="/zh-CN/docs/Web/API/ChannelSplitterNode"><code>ChannelSplitterNode</code></a></li><li><a href="/zh-CN/docs/Web/API/ConstantSourceNode"><code>ConstantSourceNode</code></a></li><li><a href="/zh-CN/docs/Web/API/ConvolverNode"><code>ConvolverNode</code></a></li><li><a href="/zh-CN/docs/Web/API/DelayNode"><code>DelayNode</code></a></li><li><a href="/zh-CN/docs/Web/API/DynamicsCompressorNode"><code>DynamicsCompressorNode</code></a></li><li><a href="/zh-CN/docs/Web/API/GainNode"><code>GainNode</code></a></li><li><a href="/zh-CN/docs/Web/API/IIRFilterNode"><code>IIRFilterNode</code></a></li><li><a href="/zh-CN/docs/Web/API/MediaElementAudioSourceNode"><code>MediaElementAudioSourceNode</code></a></li><li><a href="/zh-CN/docs/Web/API/MediaStreamAudioDestinationNode"><code>MediaStreamAudioDestinationNode</code></a></li><li><a href="/zh-CN/docs/Web/API/OfflineAudioCompletionEvent"><code>OfflineAudioCompletionEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/OfflineAudioContext"><code>OfflineAudioContext</code></a></li><li><a href="/zh-CN/docs/Web/API/OscillatorNode"><code>OscillatorNode</code></a></li><li><a href="/zh-CN/docs/Web/API/PannerNode"><code>PannerNode</code></a></li><li><a href="/zh-CN/docs/Web/API/PeriodicWave"><code>PeriodicWave</code></a></li><li><a href="/zh-CN/docs/Web/API/StereoPannerNode"><code>StereoPannerNode</code></a></li><li><a href="/zh-CN/docs/Web/API/WaveShaperNode"><code>WaveShaperNode</code></a></li></ol></details></li></ol></section><p></p>

<div>
<p><code>MediaStreamAudioSourceNode</code> 接口代表一个音频接口，是<a href="/en-US/docs/WebRTC" title="/en-US/docs/WebRTC">WebRTC</a> <a href="/zh-CN/docs/Web/API/MediaStream" title="MediaStream 接口是一个媒体内容的流.。一个流包含几个轨道，比如视频和音频轨道。"><code>MediaStream</code></a> (比如一个摄像头或者麦克风)的一部分。是个表现为音频源的<a href="/zh-CN/docs/Web/API/AudioNode" title="AudioNode 接口是一个处理音频的通用模块, 比如一个音频源 (e.g. 一个 HTML &lt;audio&gt; or &lt;video&gt; 元素), 一个音频地址或者一个中间处理模块 (e.g. 一个过滤器如 BiquadFilterNode, 或一个音量控制器如 GainNode)."><code>AudioNode</code></a>。</p>
</div>

<p><code>MediaElementSourceNode没有输入，并且只有一个输出。创建之后使用</code> <a href="/zh-CN/docs/Web/API/AudioContext/createMediaStreamSource" title="更多关于媒体流音频源(media stream audio source nodes)的细节, 请参考MediaStreamAudioSourceNode 页面."><code>AudioContext.createMediaStreamSource</code></a>方法。输出通道的数量和<a href="/zh-CN/docs/Web/API/AudioMediaStreamTrack" title="此页面仍未被本地化, 期待您的翻译!"><code>AudioMediaStreamTrack</code></a>的通道数量相同。如果没有有效的媒体流，输出通道就变成一个静音的通道。</p>

<table class="properties">
 <tbody>
  <tr>
   <th scope="row">Number of inputs</th>
   <td><code>0</code></td>
  </tr>
  <tr>
   <th scope="row">Number of outputs</th>
   <td><code>1</code></td>
  </tr>
  <tr>
   <th scope="row">Channel count</th>
   <td>由<a href="/zh-CN/docs/Web/API/AudioMediaStreamTrack"><code>AudioMediaStreamTrack</code></a>定义，传递给 <a href="/zh-CN/docs/Web/API/AudioContext/createMediaStreamSource"><code>AudioContext.createMediaStreamSource</code></a> ，并由此创建。</td>
  </tr>
 </tbody>
</table>

<h2 id="构造器">构造器</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/MediaStreamAudioSourceNode/MediaStreamAudioSourceNode" title="MediaStreamAudioSourceNode()构造器创建一个新的 MediaStreamAudioSourceNode对象实例。"><code>MediaStreamAudioSourceNode.MediaStreamAudioSourceNode()</code></a></dt>
 <dd>创建一个新的<code>MediaStreamAudioSourceNode</code>实例。</dd>
</dl>

<h2 id="属性">属性</h2>

<p><em>从</em><em><a href="/zh-CN/docs/Web/API/AudioNode" title="AudioNode 接口是一个处理音频的通用模块, 比如一个音频源 (e.g. 一个 HTML &lt;audio&gt; or &lt;video&gt; 元素), 一个音频地址或者一个中间处理模块 (e.g. 一个过滤器如 BiquadFilterNode, 或一个音量控制器如 GainNode)."><code>AudioNode</code></a>上继承。</em></p>

<h2 id="方法">方法</h2>

<p><em>从</em><em><a href="/zh-CN/docs/Web/API/AudioNode" title="AudioNode 接口是一个处理音频的通用模块, 比如一个音频源 (e.g. 一个 HTML &lt;audio&gt; or &lt;video&gt; 元素), 一个音频地址或者一个中间处理模块 (e.g. 一个过滤器如 BiquadFilterNode, 或一个音量控制器如 GainNode)."><code>AudioNode</code></a>上继承。</em></p>

<h2 id="示例">示例</h2>

<p></p><p>本例中，我们从 <a href="/zh-CN/docs/Web/API/Navigator/getUserMedia" title="Navigator.getUserMedia()方法提醒用户需要使用音频（0或者1）和（0或者1）视频输入设备，比如相机，屏幕共享，或者麦克风。如果用户给予许可，successCallback回调就会被调用，MediaStream对象作为回调函数的参数。如果用户拒绝许可或者没有媒体可用，errorCallback就会被调用，类似的，PermissionDeniedError 或者NotFoundError对象作为它的参数。注意，有可能以上两个回调函数都不被调用，因为不要求用户一定作出选择（允许或者拒绝）。"><code>navigator.getUserMedia</code></a>获取媒体 (audio + video) 流,，把它传入 <a href="/zh-CN/docs/Web/HTML/Element/video" title="HTML &lt;video&gt; 元素 用于在HTML或者XHTML文档中嵌入视频内容。"><code>&lt;video&gt;</code></a>中播放，并把视频调成静音，然后把获取到的audio传入 <a href="/zh-CN/docs/Web/API/MediaStreamAudioSourceNode" title="MediaElementSourceNode没有输入，并且只有一个输出。创建之后使用 AudioContext.createMediaStreamSource方法。输出通道的数量和AudioMediaStreamTrack的通道数量相同。如果没有有效的媒体流，输出通道就变成一个静音的通道。"><code>MediaStreamAudioSourceNode</code></a>。接下来我们把获取到的audio传入<a href="/zh-CN/docs/Web/API/BiquadFilterNode" title="BiquadFilterNode接口表示一个简单低阶滤波器(双二阶滤波器), 通过 AudioContext.createBiquadFilter() 方法创建. 它是一个能表示不同类型的过滤器，声调控制设备，图形均衡器的AudioNode ."><code>BiquadFilterNode</code></a> (可以把声音转化为低音)，输出到 <a href="/zh-CN/docs/Web/API/AudioDestinationNode" title="AudioDestinationNode可以通过AudioContext.destination属性来查看。"><code>AudioDestinationNode</code></a>.</p>

<p><a href="/zh-CN/docs/Web/HTML/Element/video" title="HTML &lt;video&gt; 元素 用于在HTML或者XHTML文档中嵌入视频内容。"><code>&lt;video&gt;</code></a> 元素下面滑动杆控制低音过滤器过滤的程度，滑动杆的值越大，低音更明显</p>

<div class="note notecard">
<p><span style="font-size: 14px;"><strong>注意：你可以查看</strong></span> <a href="https://mdn.github.io/webaudio-examples/stream-source-buffer/">在线演示</a>，或者 <a href="https://github.com/mdn/webaudio-examples/tree/master/stream-source-buffer">查看源码</a>。</p>
</div>

<pre class="brush: js;highlight[23]">var pre = document.querySelector(&apos;pre&apos;);
var video = document.querySelector(&apos;video&apos;);
var myScript = document.querySelector(&apos;script&apos;);
var range = document.querySelector(&apos;input&apos;);

// getUserMedia获取流
// 把流放入MediaStreamAudioSourceNode
// 输出到video元素

if (navigator.mediaDevices) {
    console.log(&apos;getUserMedia supported.&apos;);
    navigator.mediaDevices.getUserMedia ({audio: true, video: true})
    .then(function(stream) {
        video.srcObject = stream;
        video.onloadedmetadata = function(e) {
            video.play();
            video.muted = true;
        };

        // 创建MediaStreamAudioSourceNode
        // Feed the HTMLMediaElement into it
        var audioCtx = new AudioContext();
        var source = audioCtx.createMediaStreamSource(stream);

        // 创建二阶滤波器
        var biquadFilter = audioCtx.createBiquadFilter();
        biquadFilter.type = &quot;lowshelf&quot;;
        biquadFilter.frequency.value = 1000;
        biquadFilter.gain.value = range.value;

        // 把AudioBufferSourceNode连接到gainNode
        // gainNode连接到目的地, 所以我们可以播放
        // 音乐并用鼠标调节音量
        source.connect(biquadFilter);
        biquadFilter.connect(audioCtx.destination);

        // Get new mouse pointer coordinates when mouse is moved
        // then set new gain value

        range.oninput = function() {
            biquadFilter.gain.value = range.value;
        }
    })
    .catch(function(err) {
        console.log(&apos;The following gUM error occured: &apos; + err);
    });
} else {
   console.log(&apos;getUserMedia not supported on your browser!&apos;);
}

// dump script to pre element

pre.innerHTML = myScript.innerHTML;</pre>

<div class="note notecard">
<p><span style="font-size: 14px;"><strong>注意</strong></span>: 调用<code>createMediaStreamSource()</code>, 来自于媒体流的音频回放将被重新传到AudioContext的处理器中。所以播放/暂停流仍然是可以通过media元素的API和自带的控制器控制。</p>
</div>

<p> </p><p></p>

<h2 id="规范">规范</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://webaudio.github.io/web-audio-api/#the-mediastreamaudiosourcenode-interface" hreflang="en" lang="en">Web Audio API<br><small lang="zh-CN">MediaStreamAudioSourceNode</small></a></td>
   <td><span class="spec-WD">Working Draft</span></td>
   <td> </td>
  </tr>
 </tbody>
</table>

<h2 id="兼容性">兼容性</h2>

<div><div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/zh-CN/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Desktop</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div></div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Edge</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>14 <span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/zh-CN/docs/Web/Guide/Prefixes">webkit</a></span></td>
   <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
   <td><a href="/en-US/Firefox/Releases/25">25</a> (25)</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td>15 <span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/zh-CN/docs/Web/Guide/Prefixes">webkit</a></span><br>
    22 (unprefixed)</td>
   <td>6 <span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/zh-CN/docs/Web/Guide/Prefixes">webkit</a></span></td>
  </tr>
  <tr>
   <td>Constructor</td>
   <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Chrome</th>
   <th>Edge</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>IE Phone</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td>28 <span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/zh-CN/docs/Web/Guide/Prefixes">webkit</a></span></td>
   <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
   <td>25.0 (25)</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td>6 <span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/zh-CN/docs/Web/Guide/Prefixes">webkit</a></span></td>
  </tr>
  <tr>
   <td>Constructor</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
 </tbody>
</table>
</div>

<h2 id="See_also">See also</h2>

<ul>
 <li><a href="/zh-CN/docs/Web/API/Web_Audio_API/Using_Web_Audio_API">Using the Web Audio API</a></li>
</ul>
