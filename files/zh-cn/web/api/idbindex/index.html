---
title: IDBIndex
slug: Web/API/IDBIndex
translation_of: Web/API/IDBIndex
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/IDBIndex"><code>IDBIndex</code></a></strong></li><li class="toggle"><details open><summary>属性</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/IDBIndex/isAutoLocale"><code>isAutoLocale</code></a> <a href="/zh-CN/docs/Web/API/IDBIndex/isAutoLocale$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBIndex/keyPath"><code>keyPath</code></a> <a href="/zh-CN/docs/Web/API/IDBIndex/keyPath$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/IDBIndex/locale"><code>locale</code></a> <a href="/zh-CN/docs/Web/API/IDBIndex/locale$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBIndex/multiEntry"><code>multiEntry</code></a> <a href="/zh-CN/docs/Web/API/IDBIndex/multiEntry$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBIndex/name"><code>name</code></a> <a href="/zh-CN/docs/Web/API/IDBIndex/name$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBIndex/objectStore"><code>objectStore</code></a> <a href="/zh-CN/docs/Web/API/IDBIndex/objectStore$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBIndex/unique"><code>unique</code></a> <a href="/zh-CN/docs/Web/API/IDBIndex/unique$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>方法</summary><ol><li><a href="/zh-CN/docs/Web/API/IDBIndex/count"><code>count()</code></a> <a href="/zh-CN/docs/Web/API/IDBIndex/count$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBIndex/get"><code>get()</code></a> <a href="/zh-CN/docs/Web/API/IDBIndex/get$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBIndex/getAll"><code>getAll()</code></a> <a href="/zh-CN/docs/Web/API/IDBIndex/getAll$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBIndex/getAllKeys"><code>getAllKeys()</code></a> <a href="/zh-CN/docs/Web/API/IDBIndex/getAllKeys$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBIndex/getKey"><code>getKey()</code></a> <a href="/zh-CN/docs/Web/API/IDBIndex/getKey$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBIndex/openCursor"><code>openCursor()</code></a> <a href="/zh-CN/docs/Web/API/IDBIndex/openCursor$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBIndex/openKeyCursor"><code>openKeyCursor()</code></a> <a href="/zh-CN/docs/Web/API/IDBIndex/openKeyCursor$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li></ol></section>

<div class="summary">
<p><a href="/en/IndexedDB" title="en/IndexedDB">IndexedDB API</a> 中的IDBIndex接口提供了异步获取数据库中一个<a href="/en/IndexedDB/Basic_Concepts_Behind_IndexedDB#gloss_index" title="en/IndexedDB/Basic_Concepts_Behind_IndexedDB#gloss_index">index</a>的功能。index是一种用于在另一个object store中查找记录的object store，其被称为被引用的object store。你可以通过使用该接口来取回数据。</p>
</div>

<p>你可以通过记录的键或使用一个index取回一个object store中的这些记录 (cursors 提供了第三种方式：请见 <a href="/zh-CN/docs/Web/API/IDBCursor"><code>IDBCursor</code></a>)。一个index可以让你在object store的records中，通过使用records的properties（属性）来寻找records。</p>

<p>index是一个持久的键-值存储，其中其记录的值部分是被引用object store中的record的关键部分。在object store中新增、更新或是删除records时，索引中的records将自动填充。索引中的每条记录只能指向其引用的object  store中的唯一一条记录，但是多个索引可以引用同一个object store。当object store变更时，所有引用object store的索引都会自动更新。</p>

<p>索引中的records总是按照records的key进行排序。然而，不像object stores，一个给定的index可以包含具有相同key的多条记录。这些records将根据被引用object store中的主键进一步排序。</p>

<p>你可以设置在一个范围内的key，点击这里查看更多： <a href="/zh-CN/docs/Web/API/IDBKeyRange"><code>IDBKeyRange</code></a>.</p>

<h2 id="Methods">Methods</h2>

<p>Inherits from: <a href="/en/DOM/EventTarget" title="en/DOM/EventTarget">EventTarget</a></p>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/IDBIndex/count"><code>IDBIndex.count</code></a></dt>
 <dd>Returns an <a href="/zh-CN/docs/Web/API/IDBRequest"><code>IDBRequest</code></a> object, and in a separate thread, returns the number of records within a key range.</dd>
 <dt><a href="/zh-CN/docs/Web/API/IDBIndex/get"><code>IDBIndex.get</code></a></dt>
 <dd>Returns an <a href="/zh-CN/docs/Web/API/IDBRequest"><code>IDBRequest</code></a> object, and, in a separate thread, finds either the value in the referenced object store that corresponds to the given key or the first corresponding value, if <code>key</code> is a key range.</dd>
 <dt><a href="/zh-CN/docs/Web/API/IDBIndex/getAll"><code>IDBIndex.getAll</code></a> <span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></dt>
 <dd>Instantly retrieves all objects inside an <a href="/zh-CN/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a>, setting them as the <code>result</code> of the request object.</dd>
 <dt><a href="/zh-CN/docs/Web/API/IDBIndex/getKey"><code>IDBIndex.getKey</code></a></dt>
 <dd>Returns an <a href="/zh-CN/docs/Web/API/IDBRequest"><code>IDBRequest</code></a> object, and, in a separate thread, finds either the given key or the primary key, if <code>key</code> is a key range.</dd>
 <dt><a href="/zh-CN/docs/Web/API/IDBIndex/getAllKeys"><code>IDBIndex.getAllKeys</code></a> <span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></dt>
 <dd>Instantly retrieves the keys of all objects inside an <a href="/zh-CN/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a>, setting them as the <code><a href="/en/IndexedDB/IDBRequest#attr_result" title="en/IndexedDB/IDBRequest#attr result">result</a></code> of the request object.</dd>
 <dt><a href="/zh-CN/docs/Web/API/IDBIndex/openCursor"><code>IDBIndex.openCursor</code></a></dt>
 <dd>Returns an <a href="/zh-CN/docs/Web/API/IDBRequest"><code>IDBRequest</code></a> object, and, in a separate thread, creates a <a href="/en/IndexedDB#gloss_cursor" title="en/IndexedDB#gloss cursor">cursor</a> over the specified key range.</dd>
 <dt><a href="/zh-CN/docs/Web/API/IDBIndex/openKeyCursor"><code>IDBIndex.openKeyCursor</code></a> <span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></dt>
 <dd>Returns an <a href="/zh-CN/docs/Web/API/IDBRequest"><code>IDBRequest</code></a> object, and, in a separate thread, creates a cursor over the specified key range, as arranged by this index.</dd>
</dl>

<h2 id="Properties">Properties</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/IDBIndex/name"><code>IDBIndex.name</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>index的名称。</dd>
 <dt><a href="/zh-CN/docs/Web/API/IDBIndex/objectStore"><code>IDBIndex.objectStore</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>index所指向的object store的名称。</dd>
 <dt><a href="/zh-CN/docs/Web/API/IDBIndex/keyPath"><code>IDBIndex.keyPath</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>此index的关键路径。它如果为null，则index不是自动填充的。</dd>
 <dt><a href="/zh-CN/docs/Web/API/IDBIndex/multiEntry"><code>IDBIndex.multiEntry</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>影响index的key路径的计算结果生成数组时索引的行为方式。如果为true，那么对于key数组中的每一项，索引中都有一条记录。如果为false，那么对于数组中的每个key都有一条记录。</dd>
 <dt><a href="/zh-CN/docs/Web/API/IDBIndex/unique"><code>IDBIndex.unique</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>如果为true，这个index不会允许key有重复值。 </dd>
</dl>

<h2 id="Examples">Examples</h2>

<p>Opening a transaction then using <code>get()</code> to retrieve an object of known key:</p>

<pre class="brush: js;highlight:[18,21] notranslate">// Let us open our database
var request = window.indexedDB.open(&quot;toDoList&quot;, 4);

// these two event handlers act on the database being opened successfully, or not
request.onerror = function(event) {
  note.innerHTML += &apos;&lt;li&gt;Error loading database.&lt;/li&gt;&apos;;
};

request.onsuccess = function(event) {
note.innerHTML += &apos;&lt;li&gt;Database initialised.&lt;/li&gt;&apos;;

// store the result of opening the database in the db variable.
db = request.result;

// Open a transaction on the current database and get a reference to the object store
//that we want to pull information out of
var transaction = db.transaction([&quot;toDoList&quot;]);
var objectStore = transaction.objectStore(&quot;toDoList&quot;);

// Use get() to get a specific object from the object store, the key of which is &quot;Walk dog&quot;
var request = objectStore.get(&quot;Walk dog&quot;);
request.onerror = function(event) {
  console.log(&quot;There is no record stored for &quot; + request.result.taskTitle);
};
request.onsuccess = function(event) {
  // Do something with the request.result!
  console.log(&quot;The deadline time for &quot; + request.result.taskTitle + &quot; is &quot; +
              request.result.hours + &quot;:&quot; + request.result.minutes + &quot;.&quot;;
};</pre>

<div class="note">
<p><strong>Note</strong>: need to work out a way to retrieve a series/range of objects using an index, or just all of them. Is this possible with get, or is this a job for cursor?</p>
</div>

<h2 id="Specifications">Specifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://www.w3.org/TR/IndexedDB/#idl-def-IDBIndex" hreflang="en" lang="en">Indexed Database API 2.0<br><small lang="zh-CN">IDBIndex</small></a></td>
   <td><span class="spec-REC">Recommendation</span></td>
   <td></td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility" name="Browser_compatibility">Browser compatibility</h2>

<div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/zh-CN/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Desktop</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>12<span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/zh-CN/docs/Web/Guide/Prefixes" title="The name of this feature is prefixed with &apos;-webkit&apos; as this browser considers it experimental">-webkit</a></span><br>
    23</td>
   <td><a href="/en-US/Firefox/Releases/4" title="Released on 2011-03-22.">4.0</a> (2.0)</td>
   <td>10</td>
   <td>17</td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
  <tr>
   <td><code>count()</code></td>
   <td>23</td>
   <td><a href="/en-US/Firefox/Releases/10" title="Released on 2012-01-31.">10.0</a> (10.0)</td>
   <td>10</td>
   <td>17</td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
  <tr>
   <td><code>getAll()</code> and <code>getAllKeys()</code></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><a href="/en-US/Firefox/Releases/24" title="Released on 2013-09-17.">24.0</a> (24.0)<br>
    behind <code>dom.indexedDB.experimental</code>  pref</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS</th>
   <th>IE Phone</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>4.4</td>
   <td>4.0 (2.0)</td>
   <td>1.0.1</td>
   <td>10</td>
   <td>17</td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
  <tr>
   <td><code>count()</code></td>
   <td>4.4</td>
   <td>10.0 (10.0)</td>
   <td>1.0.1</td>
   <td>10</td>
   <td>17</td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
  <tr>
   <td><code>getAll()</code> and <code>getAllKeys()</code></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><a href="/en-US/Firefox/Releases/24" title="Released on 2013-09-17.">24.0</a> (24.0)<br>
    behind <code>dom.indexedDB.experimental</code>  pref</td>
   <td>1.1 behind<br>
    <code>dom.indexedDB.experimental</code>  pref</td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
   <td><span style="color: #f00;">未实现</span></td>
  </tr>
 </tbody>
</table>
</div>

<div class="warning notecard">
<p>Be careful in Chrome as it still implements the old specification along the new one. Similarly it still has the prefixed <code>webkitIndexedDB</code> property even if the unprefixed <code>indexedDB</code> is present.</p>
</div>

<h2 id="See_also">See also</h2>

<p>To learn more about various topics, see the following</p>

<ul>
 <li>Starting transactions: <a href="/zh-CN/docs/Web/API/IDBDatabase"><code>IDBDatabase</code></a></li>
 <li>Setting transaction modes: <a href="/zh-CN/docs/Web/API/IDBTransaction"><code>IDBTransaction</code></a></li>
 <li>Setting a range of keys: <a href="/zh-CN/docs/Web/API/IDBKeyRange"><code>IDBKeyRange</code></a></li>
 <li>The reference application for the examples in this reference: <a class="external" href="https://github.com/chrisdavidmills/to-do-notifications/tree/gh-pages">To-do Notifications</a> (<a class="external" href="http://chrisdavidmills.github.io/to-do-notifications/">view example live</a>.) Not every snippet appears in this example, but every example uses the same data structure and syntax, and they will make sense in the context of this example.</li>
</ul>
