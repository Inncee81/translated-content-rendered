---
title: ReadableStream.getReader()
slug: Web/API/ReadableStream/getReader
tags:
  - API
  - getReader
  - 参考
  - 可读取流
  - 方法
  - 流
translation_of: Web/API/ReadableStream/getReader
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/Streams_API">Streams API</a></strong></li><li><strong><a href="/zh-CN/docs/Web/API/ReadableStream"><code>ReadableStream</code></a></strong></li><li class="toggle"><details open><summary>Constructor</summary><ol><li><a href="/zh-CN/docs/Web/API/ReadableStream/ReadableStream"><code>ReadableStream()</code></a></li></ol></details></li><li class="toggle"><details open><summary>属性</summary><ol><li><a href="/zh-CN/docs/Web/API/ReadableStream/locked"><code>locked</code></a> <a href="/zh-CN/docs/Web/API/ReadableStream/locked$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>方法</summary><ol><li><a href="/zh-CN/docs/Web/API/ReadableStream/cancel"><code>cancel()</code></a> <a href="/zh-CN/docs/Web/API/ReadableStream/cancel$translate" style="opacity: 0.5;">[我来译!]</a></li><li><em><code>getReader()</code></em></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/ReadableStream/pipeThrough"><code>pipeThrough()</code></a> <a href="/zh-CN/docs/Web/API/ReadableStream/pipeThrough$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/ReadableStream/pipeTo"><code>pipeTo()</code></a> <a href="/zh-CN/docs/Web/API/ReadableStream/pipeTo$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/ReadableStream/tee"><code>tee()</code></a> <a href="/zh-CN/docs/Web/API/ReadableStream/tee$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>Related pages for Streams</summary><ol><li><a href="/zh-CN/docs/Web/API/Body/body"><code>Body.body</code></a></li><li><a href="/zh-CN/docs/Web/API/ByteLengthQueuingStrategy"><code>ByteLengthQueuingStrategy</code></a></li><li><a href="/zh-CN/docs/Web/API/CountQueuingStrategy"><code>CountQueuingStrategy</code></a></li><li><a href="/zh-CN/docs/Web/API/ReadableByteStreamController"><code>ReadableByteStreamController</code></a></li><li><a href="/zh-CN/docs/Web/API/ReadableStreamBYOBReader"><code>ReadableStreamBYOBReader</code></a></li><li><a href="/zh-CN/docs/Web/API/ReadableStreamBYOBRequest"><code>ReadableStreamBYOBRequest</code></a></li><li><a href="/zh-CN/docs/Web/API/ReadableStreamDefaultController"><code>ReadableStreamDefaultController</code></a></li><li><a href="/zh-CN/docs/Web/API/ReadableStreamDefaultReader"><code>ReadableStreamDefaultReader</code></a></li><li><a href="/zh-CN/docs/Web/API/WindowOrWorkerGlobalScope/fetch"><code>WindowOrWorkerGlobalScope.fetch()</code></a></li><li><a href="/zh-CN/docs/Web/API/WritableStream"><code>WritableStream</code></a></li><li><a href="/zh-CN/docs/Web/API/WritableStreamDefaultController"><code>WritableStreamDefaultController</code></a></li><li><a href="/zh-CN/docs/Web/API/WritableStreamDefaultWriter"><code>WritableStreamDefaultWriter</code></a></li></ol></details></li></ol></section></div>

<p class="summary">使用<a href="/zh-CN/docs/Web/API/ReadableStream"><code>ReadableStream</code></a>接口的<strong><code>getReader()</code></strong> 方法创建一个<code>reader</code>，并将流锁定。只有当前<code>reader</code>将流释放后，其他<code>reader</code>才能使用。</p>

<h2 id="语法">语法</h2>

<pre class="syntaxbox notranslate">var reader = readableStreamInstance.getReader(<em>{mode}</em>);</pre>

<h3 id="参数">参数</h3>

<dl>
 <dt>{mode}- 可选参数</dt>
 <dd>具有 <code>mode</code>参数的对象，值为  <a href="/zh-CN/docs/Web/API/DOMString"><code>DOMString</code></a>类型 ,用来指定要创建的阅读器的类型。其值可以是：
 <ul>
  <li><code>byob</code>, 结果为 <a href="/zh-CN/docs/Web/API/ReadableStreamBYOBReader"><code>ReadableStreamBYOBReader</code></a> 类型，可读取可读字节流。</li>
  <li><code>undefined</code> (未定类型 — 默认值), 返回<a href="/zh-CN/docs/Web/API/ReadableStreamDefaultReader"><code>ReadableStreamDefaultReader</code></a> ，可以从流中返回单个块。</li>
 </ul>
 </dd>
</dl>

<h3 id="返回值">返回值</h3>

<p><a href="/zh-CN/docs/Web/API/ReadableStreamDefaultReader"><code>ReadableStreamDefaultReader</code></a> 类型或<a href="/zh-CN/docs/Web/API/ReadableStreamBYOBReader"><code>ReadableStreamBYOBReader</code></a> 类型 实例, 取决于 <code>mode</code> 值.</p>

<h3 id="错误">错误</h3>

<dl>
 <dt>RangeError——范围错误</dt>
 <dd>提供的 mode值 既不是 <font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);">byob</span></font>也不是  <font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);">undefined</span></font></dd>
 <dt>TypeError——类型错误</dt>
 <dd>尝试创建阅读器的流不是 <a href="/zh-CN/docs/Web/API/ReadableStream"><code>ReadableStream</code></a>类型</dd>
</dl>

<h2 id="例子">例子</h2>

<p>下面是个简单的例子, 在读取<code>ReadableStream</code>前，使用 <code>getReader()</code>创建一个<a href="/zh-CN/docs/Web/API/ReadableStreamDefaultReader"><code>ReadableStreamDefaultReader</code></a> 。(查看全部代码 <a href="https://mdn.github.io/dom-examples/streams/simple-random-stream/">Simple random stream example</a> ). 按顺序读取每个块，并传递给UI, 当整个流被读取完毕后, 从递归方法中退出，并在UI的另一部分输出整个流。</p>

<pre class="brush: js notranslate">function fetchStream() {
  const reader = stream.getReader();
  let charsReceived = 0;

  // read() 返回了一个promise
  // 当数据被接收时resolve
  reader.read().then(function processText({ done, value }) {
    // Result对象包含了两个属性:
    // done  - 当stream传完所有数据时则变成true
    // value - 数据片段。当done不为true时永远为undefined
    if (done) {
      console.log(&quot;Stream complete&quot;);
      para.textContent = value;
      return;
    }

    // value for fetch streams is a Uint8Array
    charsReceived += value.length;
    const chunk = value;
    let listItem = document.createElement(&apos;li&apos;);
    listItem.textContent = &apos;Received &apos; + charsReceived + &apos; characters so far. Current chunk = &apos; + chunk;
    list2.appendChild(listItem);

    result += chunk;

    // 再次调用这个函数以读取更多数据
    return reader.read().then(processText);
  });
}</pre>

<h2 id="说明">说明</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status(状态)</th>
   <th scope="col">Comment(备注)</th>
  </tr>
  <tr>
   <td><a class="external" href="https://streams.spec.whatwg.org/#rs-get-reader" hreflang="en" lang="en">Streams<br><small lang="zh-CN">getReader()</small></a></td>
   <td><span class="spec-Living">Living Standard</span></td>
   <td>Initial definition.</td>
  </tr>
 </tbody>
</table>

<h2 id="浏览器兼容">浏览器兼容</h2>

<div class="hidden">
<p>The compatibility table on this page is generated from structured data. If you&apos;d like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</p>
</div>

<div class="bc-data" id="bcd:api.ReadableStream.getReader"></div>
