---
title: ReadableStream
slug: Web/API/ReadableStream
tags:
  - API
  - Fetch
  - ReadableStream
  - 引用
  - 接口
translation_of: Web/API/ReadableStream
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/ReadableStream"><code>ReadableStream</code></a></strong></li><li class="toggle"><details open><summary>Constructor</summary><ol><li><a href="/zh-CN/docs/Web/API/ReadableStream/ReadableStream"><code>ReadableStream()</code></a></li></ol></details></li><li class="toggle"><details open><summary>属性</summary><ol><li><a href="/zh-CN/docs/Web/API/ReadableStream/locked"><code>locked</code></a> <a href="/zh-CN/docs/Web/API/ReadableStream/locked$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>方法</summary><ol><li><a href="/zh-CN/docs/Web/API/ReadableStream/cancel"><code>cancel()</code></a> <a href="/zh-CN/docs/Web/API/ReadableStream/cancel$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/ReadableStream/getReader"><code>getReader()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/ReadableStream/pipeThrough"><code>pipeThrough()</code></a> <a href="/zh-CN/docs/Web/API/ReadableStream/pipeThrough$translate" style="opacity: 0.5;">[我来译!]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="这是一个实验性的 API，请尽量不要在生产环境中使用它。"><i class="icon-beaker"> </i></span></span><a href="/zh-CN/docs/Web/API/ReadableStream/pipeTo"><code>pipeTo()</code></a> <a href="/zh-CN/docs/Web/API/ReadableStream/pipeTo$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/ReadableStream/tee"><code>tee()</code></a> <a href="/zh-CN/docs/Web/API/ReadableStream/tee$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li></ol></section>

<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Streams_API">流操作API</a> 中的<code>ReadableStream</code><span> 接口呈现了一个可读取的二进制流操作。</span><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API">Fetch API</a><span> 通过 <a href="/zh-CN/docs/Web/API/Response"><code>Response</code></a> 的属性 <a href="/zh-CN/docs/Web/API/Body/body"><code>body</code></a> 提供了一个具体的 </span><code>ReadableStream</code><span> 对象。</span></p>

<h2 id="构造函数">构造函数</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/ReadableStream/ReadableStream"><code>ReadableStream()</code></a></dt>
 <dd>创建并从给定的 Handler 返回一个可读流对象。</dd>
</dl>

<h2 id="属性">属性</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/ReadableStream/locked"><code>ReadableStream.locked</code></a> <span class="readOnly readOnlyInline notecard inline" title="该属性的值无法更改">只读 </span></dt>
 <dd>locked 返回这个可读流是否被一个<a href="https://streams.spec.whatwg.org/#locked-to-a-reader" id="ref-for-locked-to-a-reader②">读取器锁定</a>。</dd>
</dl>

<h2 id="方法">方法</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/ReadableStream/cancel"><code>ReadableStream.cancel()</code></a></dt>
 <dd>取消读取流，读取方发出一个信号，表示对这束流失去兴趣。可以传入 reason 参数表示取消原因，这个原因将传回给调用方。</dd>
 <dt><a href="/zh-CN/docs/Web/API/ReadableStream/getIterator"><code>ReadableStream.getIterator()</code></a></dt>
 <dd>创建一个异步的 ReadableStream 迭代器并将流锁定于其上。一旦流被锁定，其他读取器将不能读取它，直到它被释放。</dd>
 <dt><a href="/zh-CN/docs/Web/API/ReadableStream/getReader"><code>ReadableStream.getReader()</code></a></dt>
 <dd>创建一个读取器并将流锁定于其上。一旦流被锁定，其他读取器将不能读取它，直到它被释放。</dd>
</dl>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/ReadableStream/pipeThrough"><code>ReadableStream.pipeThrough()</code></a></dt>
 <dd>提供将当前流管道输出到一个 transform 流或 writable/readable 流对的链式方法。</dd>
</dl>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/ReadableStream/pipeTo"><code>ReadableStream.pipeTo()</code></a></dt>
 <dd>将当前 ReadableStream 管道输出到给定的 <a href="/zh-CN/docs/Web/API/WritableStream"><code>WritableStream</code></a>，并返回一个 promise，输出过程成功时返回 fulfilled，在发生错误时返回 rejected。</dd>
 <dt><a href="/zh-CN/docs/Web/API/ReadableStream/tee"><code>ReadableStream.tee()</code></a></dt>
 <dd><code>tee</code> 方法（tee本意是将高尔夫球放置在球座上）<a href="https://streams.spec.whatwg.org/#tee-a-readable-stream" id="ref-for-tee-a-readable-stream②">tees</a> 了可读流，返回包含两个<a href="/zh-CN/docs/Web/API/ReadableStream"><code>ReadableStream</code></a> 实例分支的数组，每个元素接收了相同的传输数据。</dd>
 <dt><a href="/zh-CN/docs/Web/API/ReadableStream[@@asyncIterator]"><code>ReadableStream[@@asyncIterator]()</code></a></dt>
 <dd><code>getIterator</code> 方法的别名。</dd>
</dl>

<h2 id="示例">示例</h2>

<p>下面的例子，创建了一个智能的 <a href="/zh-CN/docs/Web/API/Response"><code>Response</code></a> 来流式化从别的资源处取得的HTML 片段。</p>

<p>它演示了 <a href="/zh-CN/docs/Web/API/ReadableStream"><code>ReadableStream</code></a> 与 <a href="/zh-CN/docs/Web/API/Uint8Array"><code>Uint8Array</code></a> 的协同用法。</p>

<pre class="brush: js notranslate">fetch(&quot;https://www.example.org/&quot;).then((response) =&gt; {
  const reader = response.body.getReader();
  const stream = new ReadableStream({
    start(controller) {
      // 下面的函数处理每个数据块
      function push() {
        // &quot;done&quot;是一个布尔型，&quot;value&quot;是一个Unit8Array
        reader.read().then(({ done, value }) =&gt; {
          // 判断是否还有可读的数据？
          if (done) {
            // 告诉浏览器已经结束数据发送
            controller.close();
            return;
          }

          // 取得数据并将它通过controller发送给浏览器
          controller.enqueue(value);
          push();
        });
      };

      push();
    }
  });

  return new Response(stream, { headers: { &quot;Content-Type&quot;: &quot;text/html&quot; } });
});</pre>

<h2 id="规范">规范</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://streams.spec.whatwg.org/#rs-class" hreflang="en" lang="en">Streams<br><small lang="zh-CN">ReadableStream</small></a></td>
   <td><span class="spec-Living">Living Standard</span></td>
   <td>初始定义</td>
  </tr>
 </tbody>
</table>

<h2 id="浏览器兼容性">浏览器兼容性</h2>

<div class="bc-data" id="bcd:api.ReadableStream"></div>

<h2 id="相关链接">相关链接</h2>

<ul>
 <li><a href="https://whatwg-stream-visualizer.glitch.me/">WHATWG Stream Visualiser</a>, for a basic visualisation of readable, writable, and transform streams.</li>
</ul>
