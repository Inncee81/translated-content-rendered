---
title: IDBTransaction.db
slug: Web/API/IDBTransaction/db
translation_of: Web/API/IDBTransaction/db
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/IndexedDB_API">IndexedDB API</a></strong></li><li><strong><a href="/zh-CN/docs/Web/API/IDBTransaction"><code>IDBTransaction</code></a></strong></li><li class="toggle"><details open><summary>属性</summary><ol><li><em><code>db</code></em></li><li><a href="/zh-CN/docs/Web/API/IDBTransaction/error"><code>error</code></a> <a href="/zh-CN/docs/Web/API/IDBTransaction/error$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBTransaction/mode"><code>mode</code></a> <a href="/zh-CN/docs/Web/API/IDBTransaction/mode$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBTransaction/ObjectStoreNames"><code>objectStoreNames</code></a> <a href="/zh-CN/docs/Web/API/IDBTransaction/ObjectStoreNames$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBTransaction/onabort"><code>onabort</code></a> <a href="/zh-CN/docs/Web/API/IDBTransaction/onabort$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBTransaction/oncomplete"><code>oncomplete</code></a> <a href="/zh-CN/docs/Web/API/IDBTransaction/oncomplete$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBTransaction/onerror"><code>onerror</code></a> <a href="/zh-CN/docs/Web/API/IDBTransaction/onerror$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>方法</summary><ol><li><a href="/zh-CN/docs/Web/API/IDBTransaction/abort"><code>abort()</code></a> <a href="/zh-CN/docs/Web/API/IDBTransaction/abort$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBTransaction/commit"><code>commit()</code></a> <a href="/zh-CN/docs/Web/API/IDBTransaction/commit$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBTransaction/objectStore"><code>objectStore()</code></a> <a href="/zh-CN/docs/Web/API/IDBTransaction/objectStore$translate" style="opacity: 0.5;">[我来译!]</a></li></ol></details></li><li class="toggle"><details open><summary>Events</summary><ol><li><a href="/zh-CN/docs/Web/API/IDBTransaction/abort_event"><code>abort</code></a> <a href="/zh-CN/docs/Web/API/IDBTransaction/abort_event$translate" style="opacity: 0.5;">[我来译!]</a></li><li><a href="/zh-CN/docs/Web/API/IDBTransaction/complete_event"><code>complete</code></a></li></ol></details></li><li class="toggle"><details open><summary>继承</summary><ol><li><a href="/zh-CN/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li><li class="toggle"><details open><summary>Related pages for IndexedDB</summary><ol><li><a href="/zh-CN/docs/Web/API/IDBCursor"><code>IDBCursor</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBCursorSync"><code>IDBCursorSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBCursorWithValue"><code>IDBCursorWithValue</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBDatabase"><code>IDBDatabase</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBDatabaseException"><code>IDBDatabaseException</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBDatabaseSync"><code>IDBDatabaseSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBEnvironment"><code>IDBEnvironment</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBEnvironmentSync"><code>IDBEnvironmentSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBFactory"><code>IDBFactory</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBFactorySync"><code>IDBFactorySync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBIndex"><code>IDBIndex</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBIndexSync"><code>IDBIndexSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBKeyRange"><code>IDBKeyRange</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBObjectStoreSync"><code>IDBObjectStoreSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBOpenDBRequest"><code>IDBOpenDBRequest</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBRequest"><code>IDBRequest</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBTransactionSync"><code>IDBTransactionSync</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBVersionChangeEvent"><code>IDBVersionChangeEvent</code></a></li><li><a href="/zh-CN/docs/Web/API/IDBVersionChangeRequest"><code>IDBVersionChangeRequest</code></a></li></ol></details></li></ol></section>

<div>
<p><a href="/zh-CN/docs/Web/API/IDBTransaction"><code>IDBTransaction</code></a> 的只读属性接口 <strong><code>db</code></strong>。返回该事务所属的数据库连接。</p>

<div class="note notecard"><strong>Note:</strong> 此特性在 <a href="/zh-CN/docs/Web/API/Web_Workers_API">Web Worker</a> 中可用。</div>
</div>

<h2 id="语法">语法</h2>

<pre class="syntaxbox notranslate">var <em>myDatabase</em> = <em>transaction</em>.db;</pre>

<h3 id="值">值</h3>

<p><span style="line-height: 1.5;">一个 <a href="/zh-CN/docs/Web/API/IDBDatabase"><code>IDBDatabase</code></a> 对象。</span></p>

<h2 id="Example">Example</h2>

<p>In the following code snippet, we open a read/write transaction on our database and add some data to an object store. Note also the functions attached to transaction event handlers to report on the outcome of the transaction opening in the event of success or failure. At the end, we return the associated database connection using <code>db</code>. For a full working example, see our <a href="https://github.com/mdn/to-do-notifications/" style="line-height: 1.5;">To-do Notifications</a><span style="line-height: 1.5;"> app (</span><a href="http://mdn.github.io/to-do-notifications/" style="line-height: 1.5;">view example live</a><span style="line-height: 1.5;">.)</span></p>

<pre class="brush: js notranslate" style="font-size: 14px;">// Let us open our database
<span style="line-height: 1.5;">var DBOpenRequest = window.indexedDB.open(&quot;toDoList&quot;, 4);

</span><span style="line-height: 1.5;">DBOpenRequest.onsuccess = function(event) {</span>
  note.innerHTML += &apos;&lt;li&gt;Database initialised.&lt;/li&gt;&apos;;

  // store the result of opening the database in the db variable.
  // This is used a lot below
  db = DBOpenRequest.result;

  // Run the addData() function to add the data to the database
  addData();
};

function addData() {
  // Create a new object ready for being inserted into the IDB
  var newItem = [ { taskTitle: &quot;Walk dog&quot;, hours: 19, minutes: 30, day: 24, month: &quot;December&quot;, year: 2013, notified: &quot;no&quot; } ];

  // open a read/write db transaction, ready for adding the data
  var transaction = db.transaction([&quot;toDoList&quot;], &quot;readwrite&quot;);

  // report on the success of opening the transaction
  transaction.oncomplete = function(event) {
    note.innerHTML += &apos;&lt;li&gt;Transaction completed: database modification finished.&lt;/li&gt;&apos;;
  };

  transaction.onerror = function(event) {
    note.innerHTML += &apos;&lt;li&gt;Transaction not opened due to error. Duplicate items not allowed.&lt;/li&gt;&apos;;
  };

  // create an object store on the transaction
  var objectStore = transaction.objectStore(&quot;toDoList&quot;);

  // add our newItem object to the object store
  var objectStoreRequest = objectStore.add(newItem[0]);

  objectStoreRequest.onsuccess = function(event) {
    // report the success of the request (this does not mean the item
    // has been stored successfully in the DB - for that you need transaction.onsuccess)
    note.innerHTML += &apos;&lt;li&gt;Request successful.&lt;/li&gt;&apos;;
  };

  // Return the database (IDBDatabase) connection with which this transaction is associated
  transaction.db;
};</pre>

<h2 id="Specification">Specification</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://www.w3.org/TR/IndexedDB/#widl-IDBTransaction-db" hreflang="en" lang="en">Indexed Database API 2.0<br><small lang="zh-CN">db</small></a></td>
   <td><span class="spec-REC">Recommendation</span></td>
   <td> </td>
  </tr>
  <tr>
   <td><a class="external" href="https://w3c.github.io/IndexedDB/#dom-idbtransaction-db" hreflang="en" lang="en">Indexed Database API Draft<br><small lang="zh-CN">db</small></a></td>
   <td><span class="spec-REC">Recommendation</span></td>
   <td> </td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility" name="Browser_compatibility">Browser compatibility</h2>

<div>
<div class="hidden">The compatibility table on this page is generated from structured data. If you&apos;d like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</div>

<div class="bc-data" id="bcd:api.IDBTransaction.db"></div>
</div>

<h2 id="See_also">See also</h2>

<ul>
 <li><a href="/en-US/docs/Web/API/IndexedDB_API/Using_IndexedDB">Using IndexedDB</a></li>
 <li>Starting transactions: <a href="/zh-CN/docs/Web/API/IDBDatabase"><code>IDBDatabase</code></a></li>
 <li>Using transactions: <a href="/zh-CN/docs/Web/API/IDBTransaction"><code>IDBTransaction</code></a></li>
 <li>Setting a range of keys: <a href="/zh-CN/docs/Web/API/IDBKeyRange"><code>IDBKeyRange</code></a></li>
 <li>Retrieving and making changes to your data: <a href="/zh-CN/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a></li>
 <li>Using cursors: <a href="/zh-CN/docs/Web/API/IDBCursor"><code>IDBCursor</code></a></li>
 <li>Reference example: <a class="external" href="https://github.com/mdn/to-do-notifications/tree/gh-pages">To-do Notifications</a> (<a class="external" href="http://mdn.github.io/to-do-notifications/">view example live</a>.)</li>
</ul>
