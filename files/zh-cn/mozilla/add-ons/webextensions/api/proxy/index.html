---
title: proxy
slug: Mozilla/Add-ons/WebExtensions/API/proxy
translation_of: Mozilla/Add-ons/WebExtensions/API/proxy
---
<div><section class="Quick_links" id="Quick_Links">
  <ol>
    <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions"><strong>浏览器扩展程序</strong></a></li>
    <li class="toggle">
      <details>
        <summary>开始</summary>
        <ol>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions">什么是扩展程序?</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension">你的第一个扩展程序</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension">你的第二个扩展程序</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension">详解扩展程序</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Examples">扩展程序示例</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/What_next_">接下来呢?</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>概念</summary>
        <ol>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs">使用 JavaScript APIs</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Content_scripts">Content scripts</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Match_patterns">匹配样式</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Working_with_files">处理文件</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Internationalization">国际化</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy">内容安全举措</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Native_messaging">本地消息</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Differences_between_API_implementations">API实现之间的差异</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities">Chrome不兼容</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>用户界面</summary>
        <ol>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface">用户界面</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action">工具栏按钮</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions">地址栏按钮</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars">侧边栏</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items">上下文菜单项</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages">选项页面</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages">扩展页面</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications">通知</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox">地址栏建议</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels">开发人员工具面板</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>怎么做</summary>
        <ol>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests">拦截HTTP 请求</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page">修改网页</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page">插入外部内容</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts">Share objects with page scripts</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar">向工具栏添加按钮</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page">应用设置页面</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API">使用Tabs API</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API">使用Bookmarks API</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API">使用Cookies API</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities">使用上下文身份</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Build_a_cross_browser_extension">构建跨浏览器扩展</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators">Firefox的优势</a></summary>
      </details>
    </li>
    <li class="toggle">
      <details open>
        <summary>JavaScript APIs</summary>
        <ol><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs">Browser support for JavaScript APIs</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/alarms">alarms</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks">bookmarks</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/browserAction">browserAction</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/captivePortal">captivePortal</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/%E5%89%AA%E5%88%87%E6%9D%BF">%E5%89%AA%E5%88%87%E6%9D%BF</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts">contentScripts</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/contextMenus">contextMenus</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/cookies">cookies</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/devtools.inspectedWindow">devtools.inspectedWindow</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/downloads">downloads</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/find">find</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/history">history</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/idle">idle</a></li><li class="webextension-api-sidebar"><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/proxy">proxy</a><ol></ol></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/runtime">runtime</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/search">search</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/sessions">sessions</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/storage">storage</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/tabs">tabs</a></li><li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/types">types</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/webNavigation">webNavigation</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/webRequest">webRequest</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/windows">windows</a></li></ol>
      </details>
    </li>
    <li class="toggle">
      <details>
      <summary>Manifest keys</summary>
      <ol><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings">applications</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action">browser_action</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts">content_scripts</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale">default_locale</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer">developer</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/%E4%B8%BB%E9%A1%B5%E5%9C%B0%E5%9D%80">homepage_url</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version">manifest_version</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version">version</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources">web_accessible_resources</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author">作者 - author</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name">名称 - name</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background">后台 - background</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description">描述 - description</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">权限 - permissions</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name">短名称 - short_name</a></li></ol>
      </details>
    </li>
     <li class="toggle">
      <details>
        <summary>Extension Workshop</summary>
        <ol>
          <li><a href="https://extensionworkshop.com/documentation/develop/">Develop</a></li>
          <li><a href="https://extensionworkshop.com/documentation/publish/">Publish</a></li>
          <li><a href="https://extensionworkshop.com/documentation/manage/">Manage</a></li>
          <li><a href="https://extensionworkshop.com/documentation/enterprise/">Enterprise</a></li>
        </ol>
      </details>
    </li>
    <li><a href="/zh-CN/docs/Mozilla/Add-ons/Contact_us"><strong>联系我们</strong></a></li>
    <li class="toggle">
      <details>
        <summary>渠道</summary>
        <ol>
          <li><a href="https://blog.mozilla.org/addons">Add-ons博客</a></li>
          <li><a href="https://discourse.mozilla.org/c/add-ons">Add-ons论坛</a></li>
          <li><a href="https://chat.mozilla.org/#/room/%23addons:mozilla.org">Add-ons chat</a></li>
        </ol>
      </details>
    </li>
  </ol>
</section></div>

<div></div>

<div class="warning notecard">
<p><strong>Warning</strong><br>
 不推荐使用 <a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/proxy/register" title="此页面仍未被本地化, 期待您的翻译!"><code>proxy.register()</code></a> 或者 <a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/proxy/unregister" title="此页面仍未被本地化, 期待您的翻译!"><code>proxy.unregister()</code></a> 方法使用 <a href="/en-US/Add-ons/WebExtensions/API/proxy/register#PAC_file_specification">Proxy Auto-Configuration (PAC) file</a>. 这个 API 将会在 Firefox 68 中废弃并且在 Firefox 71中删除.</p>
</div>

<p>使用proxy API来代理web请求。你可以使用<code><strong><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/proxy/onRequest" title="此页面仍未被本地化, 期待您的翻译!"><code>proxy.onRequest</code></a></strong></code>事件监听器来拦截web请求，并且返回一个可以描述是否代理并且怎样代理它们的对象。</p>

<p><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/proxy/onRequest" title="此页面仍未被本地化, 期待您的翻译!"><code>proxy.onRequest</code></a>的好处在于，用于实现你拦截策略的代码在你的扩展的后台脚本运行，所以，它可以让<code><strong>WebExtension APIs</strong></code>能够完全的访问你的扩展(举例来说，可以访问你扩展的<code>storage</code>和像dns等类似的网络api)</p>

<p>除了这个api，扩展也能够使用<strong><code><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browserSettings/proxyConfig">browserSettings.proxyConfig</a></code></strong>属性来重新编辑你全局的<code>proxy</code>设置</p>

<p>Chrome浏览器提供了一个叫做<code><a href="https://developer.chrome.com/extensions/proxy">&apos;proxy&apos;</a>的</code>api扩展，它的功能跟这个api类似，在chrome的api中也可以用来实现一个<code>拦截策略。</code>然而，Chrome 的API的设计跟这个API设计完全不同。因为这个API跟谷歌的<code>proxy</code>的<font face="consolas, Liberation Mono, courier, monospace"><span style="background-color: rgba(220, 220, 220, 0.5);">API完全不同, 这个API只能通过&apos;browser&apos;命名空间访问</span></font></p>

<p>如果你想用这个API你需要得到&apos;<code>proxy</code>&apos;的<a href="https://developer.mozilla.org/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">permission</a>.并且，如果你想拦截一个请求，你同样也需要当前拦截请求的url的 <a href="https://developer.mozilla.org/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">host permission</a>。</p>

<h2 id="Types">Types</h2>

<dl>
 <dt><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/proxy/ProxyInfo" title="此页面仍未被本地化, 期待您的翻译!"><code>proxy.ProxyInfo</code></a></dt>
 <dd>Describes a proxy.</dd>
 <dt><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/proxy/RequestDetails" title="此页面仍未被本地化, 期待您的翻译!"><code>proxy.RequestDetails</code></a></dt>
 <dd>
 <p>Contains information about a web request that the browser is about to make.</p>
 </dd>
</dl>

<h2 id="Properties">Properties</h2>

<dl>
 <dt><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/proxy/settings" title="此页面仍未被本地化, 期待您的翻译!"><code>proxy.settings</code></a></dt>
 <dd>Get and set proxy settings.</dd>
</dl>

<h2 id="Functions">Functions</h2>

<dl>
 <dt><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/proxy/register" title="此页面仍未被本地化, 期待您的翻译!"><code>proxy.register()</code></a> <span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></dt>
 <dd>Registers the given proxy script.</dd>
 <dt><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/proxy/unregister" title="此页面仍未被本地化, 期待您的翻译!"><code>proxy.unregister()</code></a> <span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></dt>
 <dd>Unregisters the proxy script.</dd>
</dl>

<h2 id="Events">Events</h2>

<dl>
 <dt><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/proxy/onError" title="此页面仍未被本地化, 期待您的翻译!"><code>proxy.onError</code></a></dt>
 <dd>Fired when the system encounters an error running the PAC script or the <code>onRequest</code> listener.</dd>
 <dt><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/proxy/onRequest" title="此页面仍未被本地化, 期待您的翻译!"><code>proxy.onRequest</code></a></dt>
 <dd>Fired when a web request is about to be made, giving the extension an opportunity to proxy it.</dd>
</dl>

<h2 id="Example_extensions">Example extensions</h2><ul><li><a href="https://github.com/mdn/webextensions-examples/tree/master/proxy-blocker">proxy-blocker</a></li></ul>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<div class="bc-data" id="bcd:webextensions.api.proxy"></div>
