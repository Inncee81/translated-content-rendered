---
title: Firefox 21 for developers
slug: Mozilla/Firefox/Releases/21
translation_of: Mozilla/Firefox/Releases/21
---
<div><section class="Quick_links" id="Quick_Links">
  <ol>
    <li class="toggle">
        <details>
            <summary>Firefox developer 发布说明</summary>
            <ol>
              <li><a href="/zh-CN/docs/Mozilla/Firefox/Releases">Firefox developer 发布说明</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>附加组件</summary>
            <ol>
              <li><a href="/zh-CN/Add-ons/WebExtensions">浏览器扩展</a></li>
              <li><a href="/zh-CN/Add-ons/Themes">主题</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Firefox 的内部机制</summary>
            <ol>
              <li><a href="/zh-CN/docs/Mozilla/">Mozilla 项目</a></li>
              <li><a href="/zh-CN/docs/Mozilla/Gecko">Gecko</a></li>
              <li><a href="/zh-CN/docs/Mozilla/Firefox/Headless_mode">Headless mode</a></li>
              <li><a href="/zh-CN/docs/Mozilla/JavaScript_code_modules">JavaScript代码模块</a></li>
              <li><a href="/zh-CN/docs/Mozilla/js-ctypes">JS-ctypes</a></li>
              <li><a href="/zh-CN/docs/Mozilla/MathML_Project">MathML 项目</a></li>
              <li><a href="/zh-CN/docs/Mozilla/MFBT">MFBT</a></li>
              <li><a href="/zh-CN/docs/Mozilla/Projects">Mozilla 项目</a></li>
              <li><a href="/zh-CN/docs/Mozilla/Preferences">Preference 系统</a></li>
              <li><a href="/zh-CN/docs/Mozilla/WebIDL_bindings">WebIDL 绑定</a></li>
              <li><a href="/zh-CN/docs/Mozilla/Tech/XPCOM">XPCOM</a></li>
              <li><a href="/zh-CN/docs/Mozilla/Tech/XUL">XUL</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>构建与作出贡献</summary>
            <ol>
              <li><a href="/zh-CN/docs/Mozilla/Developer_guide/Build_Instructions">构建说明</a></li>
              <li><a href="/zh-CN/docs/Mozilla/Developer_guide/Build_Instructions/Configuring_Build_Options">配置构建选项</a></li>
              <li><a href="/zh-CN/docs/Mozilla/Developer_guide/Build_Instructions/How_Mozilla_s_build_system_works">构建系统如何工作</a></li>
              <li><a href="/zh-CN/docs/Mozilla/Developer_guide/Source_Code/Mercurial">Mozilla源代码</a></li>
              <li><a href="/zh-CN/docs/Mozilla/Localization">本地化</a></li>
              <li><a href="/zh-CN/docs/Mozilla/Mercurial">Mercurial</a></li>
              <li><a href="/zh-CN/docs/Mozilla/QA">质量保证</a></li>
              <li><a href="/zh-CN/docs/Mozilla/Using_Mozilla_code_in_other_projects">在其他项目中使用来自Mozilla的代码</a></li>
            </ol>
        </details>
    </li>
  </ol>
</section></div><h2 id="Web开发者需要注意的变化">Web开发者需要注意的变化</h2>
<h3 id="HTML">HTML</h3>
<ul>
  <li>实现了<a href="/zh-CN/docs/Web/HTML/Element/style" title="HTML的&lt;style>元素包含文档的样式信息或者文档的部分内容。默认情况下，该标签的样式信息通常是CSS的格式。"><code>&lt;style&gt;</code></a>元素上的<code><a href="/zh-CN/docs/Web/HTML/Element/style#attr-scoped">scoped</a></code>属性.拥有该属性的<a href="/zh-CN/docs/Web/HTML/Element/style" title="HTML的&lt;style>元素包含文档的样式信息或者文档的部分内容。默认情况下，该标签的样式信息通常是CSS的格式。"><code>&lt;style&gt;</code></a>元素可以通过在Firefox 20中实现的CSS伪类<a href="/zh-CN/docs/Web/CSS/:scope" title=":scope 属于CSS伪类，它将会匹配作为选择符匹配元素的参考点(css的作用域或作用点)。在HTML中，可以使用&lt;style>的scoped属性来重新定义新的参考点。如果HTML中没有使用这个属性，那么默认的参考点(css的作用域或作用点)是&lt;html>。"><code>:scope</code></a>选择器选择到.(<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=508725" title="FIXED: Implement HTML 5 scoped attribute on STYLE tag">bug 508725</a>).</li>
  <li>实现了新的<a href="/zh-CN/docs/Web/HTML/Element/main" title="HTML &lt;main>元素呈现了文档&lt;body>或应用的主体部分。主体部分由与文档直接相关，或者扩展于文档的中心主题、应用的主要功能部分的内容组成。这部分内容在文档中应当是独一无二的，不包含任何在一系列文档中重复的内容，比如侧边栏，导航栏链接，版权信息，网站logo，搜索框（除非搜索框作为文档的主要功能）。"><code>&lt;main&gt;</code></a>元素(<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=820508" title="FIXED: Add support for &lt;main> element">bug 820508</a>).</li>
</ul>
<h3 id="JavaScript">JavaScript</h3>
<ul>
  <li><a href="/zh-CN/docs/E4X" title="/zh-CN/docs/E4X">E4X</a>,一个古老的JavaScript扩展(ECMA-357),已经被删除.因为一直以来,只有Gecko支持它.(<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=788293" title="FIXED: Remove E4X from SpiderMonkey">bug 788293</a>).</li>
  <li><a href="https://developer.mozilla.org/zh-CN/docs/JavaScript/Reference/Global_Objects/parseInt" title="/zh-CN/docs/">parseInt</a>不再将以"0"开头的字符串作为8进制数字来解析(<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=786135" title='FIXED: Make parseInt("042") === 42, now that other engines are moving that way'>bug 786135</a>).</li>
</ul>
<h3 id="CSS">CSS</h3>
<ul>
  <li><a href="/zh-CN/docs/Web/CSS/user-select" title="此页面仍未被本地化, 期待您的翻译!"><code>-moz-user-select</code></a>属性的属性值在设置为<code>none时和设置为</code><code>-moz-none时</code><code>效果等同于</code>,这样才能让Gecko和其他内核WebKit(Chrome, Safari),Presto (Opera)以及Trident(Internet Explorer)中的表现相同(<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=816298" title='FIXED: Change "-moz-user-select:none" to behave like WebKit, IE, and Opera (and "-moz-user-select:-moz-none")'>bug 816298</a>).</li>
  <li>On XHTML content, the <code>auto</code> value of <a href="/zh-CN/docs/Web/CSS/hyphens" title="此页面仍未被本地化, 期待您的翻译!"><code>-moz-hyphens</code></a> incorrectly applied hyphenation rules when the language was not explicitly declared. This is fixed by (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=702121" title="FIXED: Incorrect hyphenation patterns used by CSS moz-hyphens in XHTML content (en-US patterns used, regardless of lang declaration)">bug 702121</a>).</li>
  <li>CSS属性<a href="/zh-CN/docs/Web/CSS/-moz-orient" title="此页面仍未被本地化, 期待您的翻译!"><code>-moz-orient</code></a>现在支持新的值<code>auto</code>.当应用到一个<a href="/zh-CN/docs/Web/HTML/Element/meter" title="HTML &lt;meter>元素用来显示已知范围的标量值或者分数值。"><code>&lt;meter&gt;</code></a>元素或者<a href="/zh-CN/docs/Web/HTML/Element/progress" title="HTML中的progress (&lt;progress>) 元素用来显示一项任务的完成进度.虽然规范中没有规定该元素具体如何显示,浏览器开发商可以自己决定,但通常情况下,该元素都显示为一个进度条形式."><code>&lt;progress&gt;</code></a>元素上时,<code>auto就等同于</code><code>horizontal</code>(<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=835883" title="FIXED: Give the -moz-orient property an 'auto' value, and make that its initial value">bug 835883</a>).</li>
</ul>
<h3 id="DOM">DOM</h3>
<ul>
  <li>实现了<a href="/zh-CN/docs/Web/API/Window/location" title="window.location 只读属性，返回一个 Location  对象，其中包含有关文档当前位置的信息。"><code>window.location</code></a>上的<code>origin</code>属性 (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=828261" title="FIXED: Implement `window.location.origin`.">bug 828261</a>).</li>
  <li><code>实现了</code><code>&lt;input type="time"&gt;</code>对象上的<code>valueAsDate</code>和<code>valueAsNumber</code>方法(<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=781570" title="FIXED: implement valueAsNumber and valueAsDate for input &lt;input type=time>">bug 781570</a>).</li>
  <li>实现了<code>&lt;input type="time"&gt;</code>对象上的<code>min</code>和<code>max</code>属性(<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=781572" title="FIXED: implement the min and max attribute for &lt;input type=time>">bug 781572</a>).</li>
  <li>Some new keyCodes for volume control are supported (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=674739" title="FIXED: Implement DOM3 KeyboardEvent types for audio">bug 674739</a>).</li>
  <li>Some new keyCodes for ancient keyboard layout such as AS/400 are now supported on Windows and Linux (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=833719" title="FIXED: Some function keys are not working since Firefox Version 15">bug 833719</a>).</li>
  <li>Various keyCode values for OEM sepecific keys on Windows are now supported again (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=833719" title="FIXED: Some function keys are not working since Firefox Version 15">bug 833719</a>).</li>
  <li>实现了<a href="../../../../../zh-CN/docs/DOM/window.crypto.getRandomValues" title="DOM/window.crypto.getRandomValues"><code>window.crypto.getRandomValues</code></a>函数(<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=440046" title="FIXED: expose secure PRNG in the DOM (window.crypto.getRandomValues)">bug 440046</a>).</li>
</ul>
<h3 id="SVG">SVG</h3>
<ul>
  <li>实现了<a href="/zh-CN/docs/Web/CSS/paint-order" title="CSS  paint-order  属性可以让你控制文本区域和图形绘制的填充和绘制（和markers）的顺序"><code>paint-order</code></a>属性(<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=828805" title="FIXED: implement paint-order property from SVG 2">bug 828805</a>).</li>
</ul>
<h3 id="网络">网络</h3>
<ul>
  <li>更新CSP实现到最新的CSP规范1.0(CR):
    <ul>
      <li>Support for the spec-compliant <span id="summary_alias_container"><span id="short_desc_nonedit_display"><code>Content-Security-Policy</code> HTTP header (in addition to the experimental </span></span><span id="summary_alias_container"><span id="short_desc_nonedit_display"><code>X-Content-Security-Policy</code>) has been added (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=783049" title="FIXED: CSP : use existing/old parser for X-Content-Security-Policy header, new/CSP 1.0 spec compliant parser for Content-Security-Policy header">bug 783049</a>). <strong>Note</strong>: the patch for this new header landed in Firefox 21, it is disabled on builds</span></span> (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=842657" title="FIXED: Flip the pref to enable the CSP 1.0 parser for Firefox">bug 842657</a>).</li>
    </ul>
  </li>
</ul>
<h2 id="附加组件和Mozilla开发者需要注意的变化">附加组件和Mozilla开发者需要注意的变化</h2>
<ul>
  <li>FUEL applications cannot use the Livemarks service anymore (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=834492" title="FIXED: Drop livemarks support from FUEL">bug 834492</a>). The Livemarks service is deprecated and phased out in favor of the new async interface.</li>
  <li>History API saw numerous deprecated API being removed:
    <ul>
      <li>Replaced by <code>mozIAsyncFavicons</code>:
        <ul>
          <li><code>nsIFaviconService::setFaviconUrlForPage</code></li>
          <li><code>nsIFaviconService::setFaviconData</code></li>
          <li><code>nsIFaviconService::getFaviconData</code></li>
          <li><code>nsIFaviconService::getFaviconForPage</code></li>
          <li><code>nsIFaviconService::setAndLoadFaviconForPage</code></li>
          <li><code>nsIFaviconService::getFaviconImageForPage</code></li>
          <li><code>nsIFaviconService::getFaviconDataAsDataURL</code></li>
        </ul>
      </li>
      <li>Replaced by <code>mozIAsyncLivemarks</code>:
        <ul>
          <li><code>nsILivemarkService::*</code></li>
          <li><code>PlacesUtils.itemIsLivemark</code></li>
          <li><code>PlacesUtils.nodeIsLivemarkContainer</code></li>
          <li><code>PlacesUtils.nodeIsLivemarkItem</code></li>
        </ul>
      </li>
      <li>Removed only third argument:
        <ul>
          <li><code>PlacesUIUtils.showBookmarkDialog</code></li>
        </ul>
      </li>
      <li>No more implemented by Places, use <code>mozIAsyncHistory</code> instead:
        <ul>
          <li><code>nsIGlobalHistory2::addURI</code></li>
          <li><code>nsIGlobalHistory2::isVisited</code></li>
          <li><code>nsIGlobalHistory2::setPageTitle</code></li>
        </ul>
      </li>
      <li>No more needed, use <code>onDeleteURI</code> or <code>onItemRemoved</code>:
        <ul>
          <li><code>nsINavHistoryObserver::OnBeforeDeleteURI</code></li>
          <li><code>nsINavBookmarkObserver::OnBeforeItemRemoved</code></li>
        </ul>
      </li>
      <li>Never implemented properly:
        <ul>
          <li><code>nsINavHistoryFullVisitResultNode</code></li>
        </ul>
      </li>
      <li>Deprecated, use<code> mozIAsyncHistory::updatePlaces</code> instead:
        <ul>
          <li><code>nsINavHistoryService::AddVisit</code></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<h2 id="相关链接">相关链接</h2>
<ul>
  <li><a href="http://www.mozilla.org/zh-CN/firefox/21.0/releasenotes/">Firefox 21发行说明</a></li>
  <li><a href="../../../../../zh-CN/docs/Site_Compatibility_for_Firefox_21">Firefox 21网站兼容性</a></li>
  <li><a href="https://blog.mozilla.org/addons/2013/04/26/compatibility-for-firefox-21/">Firefox 21附加组件兼容性</a></li>
</ul>
<h3 id="更早版本">更早版本</h3>
<p></p><div class="multiColumnList">
<ul>
<li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/20">Firefox 20 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/19">Firefox 19 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/18">Firefox 18 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/17">Firefox 17 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/16">Firefox 16 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/15">Firefox 15 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/14">Firefox 14 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/13">Firefox 13 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/12">Firefox 12 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/11">Firefox 11 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/10">Firefox 10 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/9">Firefox 9 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/8">Firefox 8 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/7">Firefox 7 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/6">Firefox 6 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/5">Firefox 5 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/4">Firefox 4 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/3.6">Firefox 3.6 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/3.5">Firefox 3.5 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/3">Firefox 3 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/2">Firefox 2 for developers</a></li><li><a href="/zh-CN/docs/Mozilla/Firefox/Releases/1.5">Firefox 1.5 for developers</a></li></ul>
</div><p></p>
