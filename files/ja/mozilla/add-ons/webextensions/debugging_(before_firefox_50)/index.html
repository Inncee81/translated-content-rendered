---
title: デバッグ (Firefox 50 より前)
slug: Mozilla/Add-ons/WebExtensions/Debugging_(before_Firefox_50)
translation_of: Mozilla/Add-ons/WebExtensions/Debugging_(before_Firefox_50)
---
<div><section class="Quick_links" id="Quick_Links">
  <ol>
    <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions"><strong>ブラウザー拡張機能</strong></a></li>
    <li class="toggle">
      <details>
        <summary>始めましょう</summary>
        <ol>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions">拡張機能とは何か?</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension">初めての拡張機能</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension">2つめの拡張機能</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension">拡張機能の中身</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Examples">拡張機能の例</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/What_next_">次にどうするのか？</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>概念</summary>
        <ol>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs">JavaScript API 群の利用</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Content_scripts">コンテンツスクリプト</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Match_patterns">マッチパターン</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Working_with_files">ファイルの操作</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Internationalization">多言語対応</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Security_best_practices">セキュリティのベストプラクティス</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy">Content Security Policy</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Native_messaging">Native messaging</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>ユーザーインターフェイス</summary>
        <ol>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface">ユーザーインターフェイス</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action">ブラウザーツールバーボタン</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions">アドレスバーボタン</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars">サイドバー</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items">コンテキストメニュー項目</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages">オプションページ</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages">ページ拡張</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications">通知</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox">Address bar suggestions</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels">開発ツールパネル</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>逆引きリファレンス</summary>
        <ol>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests">HTTP リクエストへの介入</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page">web ページの変更</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page">外部コンテンツの挿入</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar">ツールバーボタンの追加</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page">設定画面の実装</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API">Tabs API 群の使い方</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API">Bookmark API 群の使い方</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API">Cookie API 群の使い方</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities">contextual identities の使い方</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/onboarding_upboarding_offboarding_best_practices">Onboard, upboard, and offboard users</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>移行</summary>
        <ol>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators">Firefox differentiators</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Porting_a_Google_Chrome_extension">Google Chrome extension からの移行</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Porting_a_legacy_Firefox_add-on">古い Firefox アドオンの移行</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Embedded_WebExtensions">Embedded WebExtensions</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Comparison_with_the_Add-on_SDK">Add-on SDK との比較</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Comparison_with_XUL_XPCOM_extensions">XUL/XPCOM 拡張との比較</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Differences_between_API_implementations">Differences between API implementations</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities">Chrome との非互換性</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Differences_between_desktop_and_Android">デスクトップと Android の差</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Firefox でのワークフロー</summary>
        <ol>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Development_Tools">Developer tools</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/User_experience_best_practices">ユーザー体験の成功事例</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Temporary_Installation_in_Firefox">Firefox への一時的なインストール</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Debugging">デバッグ</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Testing_persistent_and_restart_features">テストの持続と再起動機能</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Developing_WebExtensions_for_Firefox_for_Android">Firefox for Android の拡張機能開発</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Getting_started_with_web-ext">web-ext を使って始めよう</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/web-ext_command_reference">web-ext コマンドリファレンス</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/WebExtensions_and_the_Add-on_ID">Extensions と Add-on ID</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Request_the_right_permissions">正しいパーミッションを要求する</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>JavaScript API 群</summary>
        <ol><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs">Browser support for JavaScript APIs</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/alarms">alarms</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks">bookmarks</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/browserAction">browserAction</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/browserSettings">browserSettings</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/browsingData">browsingData</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/clipboard">clipboard</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/commands">commands</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts">contentScripts</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/contextualIdentities">contextualIdentities</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/cookies">cookies</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/devtools.inspectedWindow">devtools.inspectedWindow</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/devtools.network">devtools.network</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/devtools.panels">devtools.panels</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/downloads">downloads</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/events">events</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/extension">extension</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/extensionTypes">extensionTypes</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/find">find</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/history">history</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/i18n">i18n</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/identity">identity</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/idle">idle</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/management">management</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/menus">menus</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/notifications">notifications</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/omnibox">omnibox</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/pageAction">pageAction</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/permissions">permissions</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/pkcs11">pkcs11</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/privacy">privacy</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/proxy">proxy</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/runtime">runtime</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/sessions">sessions</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/sidebarAction">sidebarAction</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/storage">storage</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs">tabs</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/theme">theme</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/topSites">topSites</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/types">types</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/webNavigation">webNavigation</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/webRequest">webRequest</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/windows">windows</a></li></ol>
      </details>
    </li>

    <li class="toggle">
      <details>
      <summary>Manifest keys</summary>
      <ol><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings">applications</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author">author</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background">background</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action">browser_action</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_settings_overrides">chrome_settings_overrides</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_url_overrides">chrome_url_overrides</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands">commands</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts">content_scripts</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_security_policy">content_security_policy</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale">default_locale</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description">description</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer">developer</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/devtools_page">devtools_page</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url">homepage_url</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/icons">icons</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/incognito">incognito</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version">manifest_version</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name">name</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/omnibox">omnibox</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions">optional_permissions</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_ui">options_ui</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action">page_action</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">permissions</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/protocol_handlers">protocol_handlers</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name">short_name</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/sidebar_action">sidebar_action</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme">theme</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version">version</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version_name">version_name</a></li><li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources">web_accessible_resources</a></li></ol>
      </details>
    </li>

    <li><a href="/ja/docs/Mozilla/Add-ons/Themes"><strong>テーマ</strong></a></li>
    <li class="toggle">
      <details>
        <summary>ブラウザのテーマ</summary>
        <ol>
          <li><a href="/ja/docs/Mozilla/Add-ons/Themes/Theme_concepts">ブラウザのテーマのコンセプト</a></li>
        </ol>
      </details>
    </li>
    <li><a href="/ja/docs/Mozilla/Add-ons/Distribution"><strong>公開して配布する</strong></a></li>
    <li class="toggle">
      <details>
        <summary>アドオンを公開する</summary>
        <ol>
          <li><a href="/ja/docs/Mozilla/Add-ons/Distribution">署名して配布する</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Package_your_extension_">拡張機能をパッケージ化する</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/Distribution/Submitting_an_add-on">アドオンを投稿する</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/Source_Code_Submission">ソースコードの提出</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/Distribution/Resources_for_publishers">公開した人のためのドキュメント</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/Listing">魅力的に作るためのリスト</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/Distribution/Make_money_from_browser_extensions">Make money from browser extensions</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/Distribution/Promoting_your_extension_or_theme">Promoting your extension or theme</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/AMO/Policy/Reviews">レビューポリシー</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/AMO/Policy/Agreement">開発者同意事項</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/AMO/Policy/Featured">AMO でおすすめされるアドオン</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/Distribution/Retiring_your_extension">拡張機能のクロージング</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>アドオンの配布</summary>
        <ol>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Sideloading_add-ons">サイドローディング</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Add-ons_for_desktop_apps">デスクトップアプリ</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Add-ons_in_the_enterprise">エンタープライズ</a></li>
        </ol>
      </details>
    </li>
    <li><a href="https://discourse.mozilla.org/c/add-ons"><strong>コミュニティとサポート</strong></a></li>
    <li class="toggle">
      <details>
        <summary>チャンネル</summary>
        <ol>
          <li><a href="https://blog.mozilla.org/addons">ブログ</a></li>
          <li><a href="https://discourse.mozilla.org/c/add-ons">フォーラム</a></li>
          <li><a href="http://stackoverflow.com/questions/tagged/firefox-addon">Stack Overflow</a></li>
          <li><a href="/ja/docs/Mozilla/Add-ons/#Contact_us">コンタクト</a></li>
        </ol>
      </details>
    </li>
  </ol>
</section></div>

<div class="note">
<p>この記事では Firefox バージョン50よりも前で WebExtension API を使った拡張機能のデバッグする方法を説明しています。</p>

<p>Firefox 50 以降をお使いの場合、<a href="/ja/Add-ons/WebExtensions/Debugging">メイン記事の拡張機能をデバッグする</a>を見てください。</p>
</div>

<p>この記事では、デフォルトでインストールされている Firefox 開発ツールを使って、WebExtension API で開発された拡張機能をどのようにデバッグするか説明します。Add-on SDK で開発したアドオンをデバッグする場合は、<a href="https://developer.mozilla.org/ja/docs/Mozilla/Add-ons/Add-on_Debugger">アドオンデバッガ</a> の解説を参照してください。</p>

<p><span id="A_simple_example:_notify-link-clicks-i18n"></span></p>

<ul>
</ul>

<h2 id="簡単なサンプル_notify-link-clicks-i18n">簡単なサンプル: notify-link-clicks-i18n</h2>

<p>デバックツールへの接続方法を、簡単なサンプル拡張機能 &quot;notify-link-clicks-i18n&quot; を用いて説明します。このコードは <a href="https://github.com/mdn/webextensions-examples/tree/master/notify-link-clicks-i18n">GitHub の WebExtensions examples リポジトリ</a> で公開されています。</p>

<p>この拡張機能は以下から構成されています。</p>

<ul>
 <li>バックグラウンドスクリプト &quot;background-script.js&quot;</li>
 <li>コンテンツスクリプト &quot;content-script.js&quot; （全てのページに読み込まれるスクリプト）</li>
</ul>

<p>ページ上のリンクをクリックするという動作は、コンテンツスクリプトがイベントとして感知します。リンクがクリックされた際、 リンクを含んだメッセージがコンテンツスクリプトからバックグラウンドスクリプトに送られます。</p>

<p>バックグラウンドスクリプトがメッセージを受け取ると、リンクを含んだ通知画面が表示されます。</p>

<p>&quot;content-script.js&quot; は次の通りです:</p>

<pre class="brush: js">/*
 <code class="language-js"><span class="comment token">リンクがクリックされた場合、バックグラウンドページにメッセージを送信する。
 このメッセージにはリンクの URL が含まれている。</span></code>
*/
function notifyExtension(e) {
  var target = e.target;
  while ((target.tagName != &quot;A&quot; || !target.href) &amp;&amp; target.parentNode) {
    target = target.parentNode;
  }
  if (target.tagName != &quot;A&quot;)
    return;

  console.log(&quot;content script sending message&quot;);
  chrome.runtime.sendMessage({&quot;url&quot;: target.href});
}

/*
 <code class="language-js"><span class="comment token">クリックイベントのリスナ関数に notifyExtension() を追加する</span></code>
*/
window.addEventListener(&quot;click&quot;, notifyExtension);
</pre>

<p>&quot;background-script.js&quot; は次の通りです:</p>

<pre class="brush: js">/*
 <code class="language-js"><span class="comment token">受信したメッセージを記録する。
 続いて通知画面を表示する。
 この通知画面には、メッセージから読み取った URL が含まれている。</span></code>
*/
function notify(message) {
  console.log(&quot;background script received message&quot;);
  var title = chrome.i18n.getMessage(&quot;notificationTitle&quot;);
  var content = chrome.i18n.getMessage(&quot;notificationContent&quot;, message.url);
  chrome.notifications.create({
    &quot;type&quot;: &quot;basic&quot;,
    &quot;iconUrl&quot;: chrome.extension.getURL(&quot;icons/link-48.png&quot;),
    &quot;title&quot;: title,
    &quot;message&quot;: content
  });
}

/*
 <code class="language-js"><span class="comment token">content script からのメッセージを受信するリスナ関数に `notify()` を追加する</span></code>
*/
chrome.runtime.onMessage.addListener(notify);
</pre>

<p>以下の手順を実際に試してみる際は、 <a href="https://github.com/mdn/webextensions-examples">webextensions-examples</a> リポジトリからコードを clone し、&quot;notify-link-clicks-i18n&quot; を<a href="/ja/Add-ons/WebExtensions/Packaging_and_installation"> インストールして下さい</a>。</p>

<p><span id="The_Browser_Toolbox"></span></p>

<h2 id="ブラウザツールボックス">ブラウザツールボックス</h2>

<p>拡張機能をデバッグするには <a href="/ja/docs/Tools/Browser_Toolbox">ブラウザツールボックス</a> を使用します。</p>

<p><span id="Prerequisites"></span></p>

<h3 id="前提条件">前提条件</h3>

<p>ブラウザツールボックスを使用する準備として、以下の手順を踏む必要があります。</p>

<ul>
 <li>Firefox 開発ツールを開く (Shift+Ctrl+I / F12)</li>
 <li><a href="https://developer.mozilla.org/ja/docs/Tools/Settings">設定</a> タブ（歯車のアイコン）を開く</li>
 <li>&quot;詳細な設定&quot; において下記の設定項目にチェックが入っているか確認する。
  <ul>
   <li><em>ブラウザとアドオンのデバッガを有効</em></li>
   <li><em>リモートデバッグを有効</em></li>
  </ul>
 </li>
</ul>

<p></p><div class="intrinsic-wrapper"><div class="intrinsic-container "><iframe src="https://www.youtube.com/embed/LJAM2vXJ790?rel=0&amp;html5=1"></iframe></div></div><p></p>

<p><span id="Opening_the_Browser_Toolbox"></span></p>

<h3 id="ブラウザツールボックスを開く">ブラウザツールボックスを開く</h3>

<p>次に、ブラウザツールボックスを開きます。</p>

<ul>
 <li>Alt キーを押下して表示されるメニューで、&quot;ツール&quot; → &quot;Web 開発&quot; → &quot;ブラウザツールボックス&quot; の順にクリックします。ブラウザコンソールでは無いことに中止して下さい。</li>
 <li>警告ダイアログが出るかもしれませんが OK を押して下さい。</li>
</ul>

<p>ブラウザツールボックスが新しいウインドウとして開きます。ここで Firefox のメインウィンドウが前面に表示された場合は、ブラウザツールボックスが前に表示されるように画面をクリックしてください。</p><div class="intrinsic-wrapper"><div class="intrinsic-container "><iframe src="https://www.youtube.com/embed/fZ492zAAy3o?rel=0&amp;html5=1"></iframe></div></div><p></p>

<p>Firefox における &quot;ツールボックス&quot; とは、下図のように複数のツールがタブで句切られているウインドウの名前です。<img src="https://mdn.mozillademos.org/files/11873/browser-toolbox.png" alt style="display: block; height: 458px; margin-left: auto; margin-right: auto; width: 900px;">上記のツールボックスには 5 つのツール、&quot;Inspector&quot; / &quot;Console&quot; / &quot;Debugger&quot; / &quot;Style Editor&quot; / &quot;Scratchpad&quot; が含まれており、ウインドウの上部にあるタブで切り替えることができます。この記事では &quot;Console（コンソール）&quot; と &quot;Debugger（デバッガ）&quot; の 2 つのツールを使用します。</p>

<p><span id="Viewing_log_output"></span></p>

<h3 id="ログの出力を見る">ログの出力を見る</h3>

<p>コンソールタブでログを見ることができます。ここに表示されるメッセージは以下から出力されたものです。</p>

<ul>
 <li>バックグラウンドスクリプト</li>
 <li>ポップアップの中で動作しているスクリプト</li>
 <li>コンテンツスクリプト</li>
</ul>

<p>このメッセージには、<a href="/ja/docs/Web/API/Console">Console API</a> を使用しているコードから出力されたログも含まれています。また、JavaScript エンジンからもエラーメッセージが出力されます。</p>

<p>それでは上記のサンプルを使って試してみましょう。ブラウザツールボックスのコンソールタブを選択し、何かしらの Web ページを開き、リンクをクリックし、コンテンツスクリプトやバックグラウンドスクリプトからメッセージが記録されるのを確認してみましょう。</p>

<p></p><div class="intrinsic-wrapper"><div class="intrinsic-container "><iframe src="https://www.youtube.com/embed/Qpx0n8gP3Qw?rel=0&amp;html5=1"></iframe></div></div><p></p>

<p>ただし、ブラウザツールボックスはどんなメッセージも受け取るため、要らないメッセージも多く受け取ってしまう問題があります。この問題を解決するには<a href="/ja/docs/Tools/Web_Console/Console_messages#Filtering_and_searching">フィルタリングと検索</a>を参照して下さい。</p>

<p><span id="Debugging_JavaScript"></span></p>

<h3 id="JavaScript_をデバッグする">JavaScript をデバッグする</h3>

<p>ブラウザツールボックスを用いると、バックグラウンドスクリプトやブラウザ上で動作しているスクリプト、ポップアップのページアクションで動作するスクリプトに対し、JavaScript デバッガでブレークポイントを設定することができます。</p>

<p>拡張機能がインストールされて有効になっている間は、デバッガからバックグラウンドスクリプトにアクセス可能です。ポップアップスクリプトは、ポップアップが表示されている間にアクセス可能です。ポップアップスクリプトが読み込まれた時点ですぐにデバッガからアクセスしたい場合は、スクリプトの最初に <code><a href="/ja/docs/Web/JavaScript/Reference/Statements/debugger">debugger;</a></code> 文を挿入してみてください。</p>

<p>JavaScript デバッガを使用するために、まずはブラウザツールボックスのデバッガタブを選択します。ここにはブラウザで動いている全てのソースコードが表示されています。そのため、<a href="/ja/docs/Tools/Debugger/How_to/Search_and_filter">検索ボックスをクリックしてソースの名前を入力し</a>、自分のスクリプトが表示されるようにします。</p>

<p>自分のスクリプトを見つかったら、ブレークポイントをコードに設定したり、コードをステップ実行したり、<a href="/ja/docs/Tools/Debugger">他にもデバッガに可能なことは何でも実行できます</a>。</p>

<p></p><div class="intrinsic-wrapper"><div class="intrinsic-container "><iframe src="https://www.youtube.com/embed/3edeJiG38ZA?rel=0&amp;html5=1"></iframe></div></div><p></p>

<p><span id="JavaScript_command_line_interpreter"></span></p>

<h3 id="JavaScript_コマンドラインインタプリタ">JavaScript コマンドラインインタプリタ</h3>

<p>コンソールには <a href="/ja/docs/Tools/Web_Console/The_command_line_interpreter">コマンドラインインタプリタ</a> が含まれており、実行しているプログラムの状態を調べたり操作することができます。この機能はコンソールを Web ページにアタッチしている際によく使いますが、ブラウザツールボックスでインタプリタを用いるのは一般に難しくなります（ブラウザツールボックスのコンソールは、デバッグしたい特定の拡張機能だけではなく、ブラウザ全体をスコープとしてしまうため）。</p>

<p>とはいえ、次のようなトリックを使うと上手くいきます。デバッガがブレークポイントで停止している間は、そのプログラムにコンソールのスコープが設定されます。そのため、拡張機能のコードにブレークポイントを設定しておくことで、拡張機能中の関数を呼び出したり、変数値を再代入したりするなど、拡張機能に対して動的にアクセスすることができます。</p>

<p>この機能は <a href="/ja/docs/Tools/Web_Console/Split_console">コンソールを常時表示</a> （画面の半分にはコンソールを、もう半分にはデバッガなどの異なるツールを表示）している際に特に効果的です。</p>

<p></p><div class="intrinsic-wrapper"><div class="intrinsic-container "><iframe src="https://www.youtube.com/embed/xprf58qOtLY?rel=0&amp;html5=1"></iframe></div></div><p></p>

<p><span id="Debugging_content_scripts"></span></p>

<h3 id="コンテンツスクリプトをデバッグする">コンテンツスクリプトをデバッグする</h3>

<p>ブラウザツールボックスには大きな制約が 1 つあります。それは、<a href="/ja/docs/Mozilla/Firefox/Multiprocess_Firefox">マルチプロセス Firefox</a> で開発している場合に、 JavaScript Debugger からコンテンツスクリプトにアタッチできない点です。</p>

<p>マルチプロセス Firefox では少なくとも 2 つのプロセスに分かれています。一つはブラウザ自身の UI やシステムコードを実行し、他は Web ページのスクリプト実行などを担当する<em>コンテンツプロセス </em>です。ブラウザツールボックスは前者のプロセスにデバッガとしてアタッチします。しかし、コンテンツスクリプトは他のプロセスで実行しているため、ブラウザツールボックスのスクリプト一覧には表示されないのです。</p>

<p>コンテンツスクリプトスクリプトをマルチプロセス Firefox でデバッグするには Browser Content Toolbox を使用して下さい。Browser Content Toolbox はブラウザツールボックスにちょうど似ていますが、開発ツールをブラウザのコンテンツプロセスにアタッチさせる点で異なり、コンテンツスクリプトにアクセスできるようになります。</p>

<div class="note">
<p>補足: この Browser Content Toolbox は、マルチプロセス Firefox で開発している場合にのみ必要なものであり、またその場合のみ利用可能です。</p>
</div>

<div class="warning notecard">
<p>ブラウザツールボックスのオプションで &quot;Worker のデバッグを有効&quot; を設定すると、Browser Content Toolbox でデバッグができなくなります。この問題は<span id="summary_alias_container"><span id="short_desc_nonedit_display"> </span></span> <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1236892">Bug 1236892</a> で解決されるはずです。</p>
</div>

<p></p><div class="intrinsic-wrapper"><div class="intrinsic-container "><iframe src="https://www.youtube.com/embed/xAt3Q0PgJP4?rel=0&amp;html5=1"></iframe></div></div><p></p>

<p><span id="Debugging_popups"></span></p>

<h3 id="ポップアップをデバッグする">ポップアップをデバッグする</h3>

<div class="geckoVersionNote">Firefox 47 からの新機能です</div>

<p>Firefox 47 から、ブラウザツールボックスでポップアップの中身をデバッグできるようになりました。デバッグは 3 つの手順からなります。</p>

<ul>
 <li>パネルの autohide を無効化する</li>
 <li>ポップアップを開く</li>
 <li>ポップアップを含んだドキュメントを選択する</li>
</ul>

<p></p><div class="intrinsic-wrapper"><div class="intrinsic-container "><iframe src="https://www.youtube.com/embed/EEU4NeAS1s4?rel=0&amp;html5=1"></iframe></div></div><p></p>

<h4 id="autohide_を無効化する">autohide を無効化する</h4>

<p>パネルのデバッグに関してありがちな問題は、パネルの外をクリックすると隠れてしまう点です。そのため、まず初めにこの動作を無効化しておきましょう。ブラウザツールボックスで 4 つの小さい四角形からなるアイコンをクリックします。</p>

<p><img src="https://mdn.mozillademos.org/files/12622/disable-autohide.png" alt style="display: block; height: 417px; margin-left: auto; margin-right: auto; width: 877px;">すると、Escape キーを押した場合でもパネルが前面に表示されたままになるはずです。</p>

<div class="note">
<p>ここで設定した authohide の無効化は、拡張機能のポップアップのみならず、ハンバーガーメニュー (<img src="https://mdn.mozillademos.org/files/12712/hamburger.png" alt style="height: 20px; width: 22px;">) などによる <a href="/ja/docs/Tools/Browser_Toolbox#Debugging_popups">ブラウザ本体のポップアップ</a> にも適用されます。</p>

<p>また、この設定はブラウザを再起動した後も引き継がれます。この件に関しては <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1251658">bug 1251658</a> で修正中ですが、現時点ではブラウザツールボックスを閉じる前に autohide を再び有効にしておくと良いでしょう。</p>

<p>ブラウザの内部構造的には、この autohide ボタンは <code>ui.popup.disable_autohide</code> の設定項目を切り替えるだけのものです。そのため、about:config において手動で切り替えることも可能です。</p>
</div>

<h4 id="ポップアップを開く">ポップアップを開く</h4>

<p>次にポップアップを開きます。ここでブラウザツールボックスに戻ると、パネルが開いたままになっているはずです。</p>

<h4 id="ポップアップのフレームを選択する">ポップアップのフレームを選択する</h4>

<p>ポップアップはそれ自身のフレームに読み込まれています。そのため、ブラウザツールボックスの <a href="/ja/docs/Tools/Browser_Toolbox#Targeting_a_document">フレーム選択ボタン</a> でポップアップのドキュメントを選択します。<img src="https://mdn.mozillademos.org/files/12624/frame-selection.png" alt style="display: block; height: 417px; margin-left: auto; margin-right: auto; width: 877px;">このドキュメントは以下のような名前を持っています。</p>

<pre class="line-numbers  language-html"><code class="language-html">moz-extension://<span class="tag token"><span class="tag token"><span class="punctuation token">&lt;</span>some-uuid</span><span class="punctuation token">&gt;</span></span>/path/to/your-popup.html</code></pre>

<p></p><div class="intrinsic-wrapper"><div class="intrinsic-container "><iframe src="https://www.youtube.com/embed//9jdHDCKIN-U?rel=0&amp;html5=1"></iframe></div></div><p></p>

<p>こうしてツールボックスのスコープがポップアップに設定されました。インスペクタでポップアップの HTML や CSS の確認・変更が行えます。デバッガでは、ポップアップに読み込まれているスクリプトを検索したり、スクリプトにブレークポイントを設定することができます。</p>

<p><span id="What_about_the_Add-on_Debugger?"></span></p>

<h2 id="Add-on_Debuggerとは？">Add-on Debuggerとは？</h2>

<p>Firefox での拡張機能のデバッグは、今後 <a href="/ja/Add-ons/Add-on_Debugger">Add-on Debugger</a> が用いられる予定になっています。</p>

<p>ブラウザツールボックスと比較した際、<a href="/ja/docs/Mozilla/Add-ons/Add-on_Debugger">Add-on Debugger</a> は拡張機能ファイルのみを表示するため、容易にスクリプトを探すことができるという大きな利点があります。しかし今のところ、コンソールメッセージを拡張機能から Add-on Debugger へ表示させられないため、ブラウザツールボックスのほうが便利です。</p>
