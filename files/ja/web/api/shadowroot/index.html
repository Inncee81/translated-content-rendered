---
title: ShadowRoot
slug: Web/API/ShadowRoot
tags:
  - API
  - Interface
  - Reference
  - ShadowRoot
  - Web Components
  - shadow dom
  - インターフェイス
translation_of: Web/API/ShadowRoot
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/ja/docs/Web/API/ShadowRoot"><code>ShadowRoot</code></a></strong></li><li class="toggle"><details open><summary>プロパティ</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="この API は標準化されていません。"><i class="icon-warning-sign"> </i></span></span><a href="/ja/docs/Web/API/ShadowRoot/delegatesFocus"><code>delegatesFocus</code></a></li><li><a href="/ja/docs/Web/API/ShadowRoot/host"><code>host</code></a> <a href="/ja/docs/Web/API/ShadowRoot/host$translate" style="opacity: 0.5;">[翻訳する]</a></li><li><a href="/ja/docs/Web/API/ShadowRoot/innerHTML"><code>innerHTML</code></a></li><li><a href="/ja/docs/Web/API/ShadowRoot/mode"><code>mode</code></a> <a href="/ja/docs/Web/API/ShadowRoot/mode$translate" style="opacity: 0.5;">[翻訳する]</a></li></ol></details></li><li class="toggle"><details open><summary>継承</summary><ol><li><a href="/ja/docs/Web/API/DocumentFragment"><code>DocumentFragment</code></a></li><li><a href="/ja/docs/Web/API/Node"><code>Node</code></a></li><li><a href="/ja/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li></ol></section></div>

<p><code><strong>ShadowRoot</strong></code> インターフェイスは Shadow DOM API の1つで、文書の DOM ツリーから分離してレンダリングされた部分木の根ノードを指します。</p>

<p>shadow ツリーが <code>mode</code> オプションを <code>open</code> に指定して <a href="/ja/docs/Web/API/Element/attachShadow"><code>Element.attachShadow()</code></a> から作られた場合、shadow root への参照は <a href="/ja/docs/Web/API/Element/shadowRoot"><code>Element.shadowRoot</code></a> プロパティによって読み出すことが出来ます。</p>

<h2 id="Properties" name="Properties">プロパティ</h2>

<dl>
 <dt><a href="/ja/docs/Web/API/ShadowRoot/delegatesFocus"><code>ShadowRoot.delegatesFocus</code></a> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">読取専用 </span> <span class="icon-only-inline" title="この API は標準化されていません。"><i class="icon-warning-sign"> </i></span></dt>
 <dd>シャドウが添付されたときに delegatesFocus が設定されていたかどうかを示す真偽値を返します (<a href="/ja/docs/Web/API/Element/attachShadow"><code>Element.attachShadow()</code></a> を参照)。</dd>
 <dt><a href="/ja/docs/Web/API/ShadowRoot/host"><code>ShadowRoot.host</code></a> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">読取専用 </span></dt>
 <dd><code>ShadowRoot</code> が追加された DOM 要素への参照を返します。</dd>
 <dt><a href="/ja/docs/Web/API/ShadowRoot/innerHTML"><code>ShadowRoot.innerHTML</code></a> <span class="icon-only-inline" title="この API は標準化されていません。"><i class="icon-warning-sign"> </i></span></dt>
 <dd><code>ShadowRoot</code> の内部ツリーへの参照を設定する、または受け取ることが出来ます。</dd>
 <dt><a href="/ja/docs/Web/API/ShadowRoot/mode"><code>ShadowRoot.mode</code></a> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">読取専用 </span></dt>
 <dd><code>ShadowRoot</code> のモードで <code>open</code> または <code>closed</code> の値を取ります。これはシャドウルートの内部の機能に JavaScript からアクセスできるかどうかを定義します。</dd>
</dl>

<h3 id="Properties_included_from_DocumentOrShadowRoot" name="Properties_included_from_DocumentOrShadowRoot">DocumentOrShadowRoot 由来のプロパティ</h3>

<p><em><code>ShadowRoot</code> インターフェイスは <a href="/ja/docs/Web/API/DocumentOrShadowRoot"><code>DocumentOrShadowRoot</code></a> で定義された以下のプロパティを含みます。これは Chrome ブラウザーのみ実装されており、他のブラウザーでは依然 <a href="/ja/docs/Web/API/Document"><code>Document</code></a> インターフェイスで実装されています。</em></p>

<dl>
 <dt><a href="/ja/docs/Web/API/DocumentOrShadowRoot/activeElement"><code>DocumentOrShadowRoot.activeElement</code></a> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">読取専用 </span></dt>
 <dd>shadow ツリーの範囲内で、フォーカスされている <a href="/ja/docs/Web/API/Element"><code>Element</code></a> を返します。</dd>
 <dt><a href="/ja/docs/Web/API/DocumentOrShadowRoot/styleSheets"><code>DocumentOrShadowRoot.styleSheets</code></a> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">読取専用 </span></dt>
 <dd>文書に明示的にリンクされている、または埋め込まれている<a href="/ja/docs/Web/API/CSSStyleSheet"><code>CSSStyleSheet</code></a> オブジェクトの <a href="/ja/docs/Web/API/StyleSheetList"><code>StyleSheetList</code></a> を返します。</dd>
</dl>

<h2 id="Methods" name="Methods">メソッド</h2>

<p><em><code>ShadowRoot</code> インターフェイスは <a href="/ja/docs/Web/API/DocumentOrShadowRoot"><code>DocumentOrShadowRoot</code></a> で定義された以下のプロパティを含みます。これは Chrome ブラウザーのみ実装されており、他のブラウザーでは依然 <a href="/ja/docs/Web/API/Document"><code>Document</code></a> インターフェイスで実装されています。</em></p>

<dl>
 <dt><a href="/ja/docs/Web/API/DocumentOrShadowRoot/getSelection"><code>DocumentOrShadowRoot.getSelection()</code></a></dt>
 <dd>ユーザーによって選択されたテキストの範囲または現在のキャレットの位置を表現する <a href="/ja/docs/Web/API/Selection"><code>Selection</code></a> オブジェクトを返します。</dd>
 <dt><a href="/ja/docs/Web/API/DocumentOrShadowRoot/elementFromPoint"><code>DocumentOrShadowRoot.elementFromPoint()</code></a></dt>
 <dd>指定された座標における最上位の要素を返します。</dd>
 <dt><a href="/ja/docs/Web/API/DocumentOrShadowRoot/elementsFromPoint"><code>DocumentOrShadowRoot.elementsFromPoint()</code></a></dt>
 <dd>指定された座標における全要素からなる配列を返します。</dd>
 <dt><a href="/ja/docs/Web/API/DocumentOrShadowRoot/caretPositionFromPoint"><code>DocumentOrShadowRoot.caretPositionFromPoint()</code></a></dt>
 <dd>キャレットを含む DOM ノードとキャレットのオフセットを含む <a href="/ja/docs/Web/API/CaretPosition"><code>CaretPosition</code></a> オブジェクトを返します。</dd>
</dl>

<h2 id="Examples" name="Examples">例</h2>

<p>以下のコードは、サイズと色の属性が指定された四角形の要素を作る <a href="https://github.com/mdn/web-components-examples/tree/master/life-cycle-callbacks">life-cycle-callbacks</a> の例です。 (<a href="https://mdn.github.io/web-components-examples/life-cycle-callbacks">実行例</a>)</p>

<p><code>&lt;custom-square&gt;</code> 要素のクラス定義の中に、外部関数である <code>updateStyle</code> を呼び出す life-cycle-callbacks が含まれています。<code>updateStyle</code> は要素のサイズと色を適用しています。<code>this</code> (カスタム要素自身) をパラメータとして関数に渡していることが分かるでしょう。</p>

<pre class="brush: js notranslate">connectedCallback() {
  console.log(&apos;四角形のカスタム要素がページに追加されました。&apos;);
  updateStyle(this);
}

attributeChangedCallback(name, oldValue, newValue) {
  console.log(&apos;四角形のカスタム要素の属性が変更されました。&apos;);
  updateStyle(this);
}</pre>

<p><code>updateStyle</code> 関数の中では、<a href="/ja/docs/Web/API/Element/shadowRoot"><code>Element.shadowRoot</code></a> を利用して shadow DOM への参照を取得しています。shadow DOM 内では、標準的な DOM の探索手法を用いて <a href="/ja/docs/Web/HTML/Element/style" title="HTML の &lt;style&gt; 要素は、文書あるいは文書の一部分のスタイル情報を含みます。"><code>&lt;style&gt;</code></a> を探し、CSS を更新しています。</p>

<pre class="brush: js notranslate">function updateStyle(elem) {
  var shadow = elem.shadowRoot;
  var childNodes = shadow.childNodes;
  for(var i = 0; i &lt; childNodes.length; i++) {
    if(childNodes[i].nodeName === &apos;STYLE&apos;) {
      childNodes[i].textContent = &apos;div {&apos; +
                          &apos; width: &apos; + elem.getAttribute(&apos;l&apos;) + &apos;px;&apos; +
                          &apos; height: &apos; + elem.getAttribute(&apos;l&apos;) + &apos;px;&apos; +
                          &apos; background-color: &apos; + elem.getAttribute(&apos;c&apos;);
    }
  }
}</pre>

<h2 id="Specifications" name="Specifications">仕様書</h2>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">仕様書</th>
   <th scope="col">状態</th>
   <th scope="col">備考</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><a class="external" href="https://dom.spec.whatwg.org/#interface-shadowroot" hreflang="en" lang="en">DOM<br><small lang="ja">Interface ShadowRoot の定義</small></a></td>
   <td><span class="spec-Living">現行の標準</span></td>
   <td> </td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility" name="Browser_compatibility">ブラウザーの対応</h2>

<div class="hidden">このページの互換性一覧表は構造化データから生成されています。データに協力していただけるのであれば、 <a class="external" href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> をチェックアウトしてプルリクエストを送信してください。</div>

<div class="bc-data" id="bcd:api.ShadowRoot"></div>
