---
title: AudioProcessingEvent
slug: Web/API/AudioProcessingEvent
translation_of: Web/API/AudioProcessingEvent
---
<p></p><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/ja/docs/Web/API/Web_Audio_API">Web Audio API</a></strong></li><li><strong><a href="/ja/docs/Web/API/AudioProcessingEvent"><code>AudioProcessingEvent</code></a></strong></li><li class="toggle"><details open><summary>継承</summary><ol><li><a href="/ja/docs/Web/API/Event"><code>Event</code></a></li></ol></details></li><li class="toggle"><details open><summary>イベント</summary><ol><li><a href="/ja/docs/Web/Events/statechange"><code>statechange</code></a></li><li><a href="/ja/docs/Web/Events/complete"><code>complete</code></a></li><li><a href="/ja/docs/Web/Events/ended"><code>ended</code></a></li><li><a href="/ja/docs/Web/Events/message"><code>message</code></a></li><li><a href="/ja/docs/Web/Events/loaded"><code>loaded</code></a></li><li><a href="/ja/docs/Web/Events/audioprocess"><code>audioprocess</code></a></li><li><a href="/ja/docs/Web/Events/nodecreate"><code>nodecreate</code></a></li></ol></details></li><li class="toggle"><details open><summary>Web Audio API に関連するページ</summary><ol><li><a href="/ja/docs/Web/API/AnalyserNode"><code>AnalyserNode</code></a></li><li><a href="/ja/docs/Web/API/AudioBuffer"><code>AudioBuffer</code></a></li><li><a href="/ja/docs/Web/API/AudioBufferSourceNode"><code>AudioBufferSourceNode</code></a></li><li><a href="/ja/docs/Web/API/AudioContext"><code>AudioContext</code></a></li><li><a href="/ja/docs/Web/API/AudioContextOptions"><code>AudioContextOptions</code></a></li><li><a href="/ja/docs/Web/API/AudioDestinationNode"><code>AudioDestinationNode</code></a></li><li><a href="/ja/docs/Web/API/AudioListener"><code>AudioListener</code></a></li><li><a href="/ja/docs/Web/API/AudioNode"><code>AudioNode</code></a></li><li><a href="/ja/docs/Web/API/AudioNodeOptions"><code>AudioNodeOptions</code></a></li><li><a href="/ja/docs/Web/API/AudioParam"><code>AudioParam</code></a></li><li><a href="/ja/docs/Web/API/AudioScheduledSourceNode"><code>AudioScheduledSourceNode</code></a></li><li><a href="/ja/docs/Web/API/BaseAudioContext"><code>BaseAudioContext</code></a></li><li><a href="/ja/docs/Web/API/BiquadFilterNode"><code>BiquadFilterNode</code></a></li><li><a href="/ja/docs/Web/API/ChannelMergerNode"><code>ChannelMergerNode</code></a></li><li><a href="/ja/docs/Web/API/ChannelSplitterNode"><code>ChannelSplitterNode</code></a></li><li><a href="/ja/docs/Web/API/ConstantSourceNode"><code>ConstantSourceNode</code></a></li><li><a href="/ja/docs/Web/API/ConvolverNode"><code>ConvolverNode</code></a></li><li><a href="/ja/docs/Web/API/DelayNode"><code>DelayNode</code></a></li><li><a href="/ja/docs/Web/API/DynamicsCompressorNode"><code>DynamicsCompressorNode</code></a></li><li><a href="/ja/docs/Web/API/GainNode"><code>GainNode</code></a></li><li><a href="/ja/docs/Web/API/IIRFilterNode"><code>IIRFilterNode</code></a></li><li><a href="/ja/docs/Web/API/MediaElementAudioSourceNode"><code>MediaElementAudioSourceNode</code></a></li><li><a href="/ja/docs/Web/API/MediaStreamAudioDestinationNode"><code>MediaStreamAudioDestinationNode</code></a></li><li><a href="/ja/docs/Web/API/MediaStreamAudioSourceNode"><code>MediaStreamAudioSourceNode</code></a></li><li><a href="/ja/docs/Web/API/OfflineAudioCompletionEvent"><code>OfflineAudioCompletionEvent</code></a></li><li><a href="/ja/docs/Web/API/OfflineAudioContext"><code>OfflineAudioContext</code></a></li><li><a href="/ja/docs/Web/API/OscillatorNode"><code>OscillatorNode</code></a></li><li><a href="/ja/docs/Web/API/PannerNode"><code>PannerNode</code></a></li><li><a href="/ja/docs/Web/API/PeriodicWave"><code>PeriodicWave</code></a></li><li><a href="/ja/docs/Web/API/StereoPannerNode"><code>StereoPannerNode</code></a></li><li><a href="/ja/docs/Web/API/WaveShaperNode"><code>WaveShaperNode</code></a></li></ol></details></li></ol></section><p></p>

<div>
<p>The <a href="/en-US/docs/Web_Audio_API" title="/en-US/docs/Web_Audio_API">Web Audio API</a> <code>AudioProcessingEvent</code> represents events that occur when a <a href="/ja/docs/Web/API/ScriptProcessorNode" title><code>ScriptProcessorNode</code></a> input buffer is ready to be processed.</p>

<div class="note notecard">
<p><strong>Note</strong>: As of the August 29 2014 Web Audio API spec publication, this feature has been marked as deprecated, and is soon to be replaced by <a href="/en-US/docs/Web/API/Web_Audio_API#Audio_Workers">Audio Workers</a>.</p>
</div>
</div>

<h2 id="プロパティ">プロパティ</h2>

<p><em>The list below includes the properties inherited from its parent, <a href="/ja/docs/Web/API/Event" title="Event インターフェイスは、DOM で発生するイベントを表します。ユーザーによって発生するイベント (マウスやキーボードのイベント) もありますし、API によって発生するイベント (アニメーションの実行が完了したことを示すイベントや、動画再生が一時停止したイベントなど) もあります。さまざまな型のイベントがあり、一部のイベントは基底の Event インターフェイスを基にした他のインターフェイスを使用します。Event 自体は、すべてのイベントで共通のプロパティやメソッドを持ちます。"><code>Event</code></a></em>.</p>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">プロパティ</th>
   <th scope="col">型</th>
   <th scope="col">説明</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><code>target</code> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">読取専用 </span></td>
   <td><a href="/ja/docs/Web/API/EventTarget"><code>EventTarget</code></a></td>
   <td>The event target (the topmost target in the DOM tree).</td>
  </tr>
  <tr>
   <td><code>type</code> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">読取専用 </span></td>
   <td><a href="/ja/docs/Web/API/DOMString"><code>DOMString</code></a></td>
   <td>The type of event.</td>
  </tr>
  <tr>
   <td><code>bubbles</code> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">読取専用 </span></td>
   <td><code>boolean</code></td>
   <td>Does the event normally bubble?</td>
  </tr>
  <tr>
   <td><code>cancelable</code> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">読取専用 </span></td>
   <td><code>boolean</code></td>
   <td>Is it possible to cancel the event?</td>
  </tr>
  <tr>
   <td><code>playbackTime</code> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">読取専用 </span></td>
   <td><code>double</code></td>
   <td>The time when the audio will be played, as defined by the time of <a href="/ja/docs/Web/API/AudioContext/currentTime"><code>AudioContext.currentTime</code></a></td>
  </tr>
  <tr>
   <td><code>inputBuffer</code> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">読取専用 </span></td>
   <td><a href="/ja/docs/Web/API/AudioBuffer"><code>AudioBuffer</code></a></td>
   <td>The buffer containing the input audio data to be processed. The number of channels is defined as a parameter, <code>numberOfInputChannels</code>, of the factory method <a href="/ja/docs/Web/API/AudioContext/createScriptProcessor"><code>AudioContext.createScriptProcessor()</code></a>. Note the the returned <code>AudioBuffer</code> is only valid in the scope of the <code>onaudioprocess</code> function.</td>
  </tr>
  <tr>
   <td><code>outputBuffer</code> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">読取専用 </span></td>
   <td><a href="/ja/docs/Web/API/AudioBuffer"><code>AudioBuffer</code></a></td>
   <td>The buffer where the output audio data should be written. The number of channels is defined as a parameter, <code>numberOfOutputChannels</code>, of the factory method <a href="/ja/docs/Web/API/AudioContext/createScriptProcessor"><code>AudioContext.createScriptProcessor()</code></a>. Note the the returned <code>AudioBuffer</code> is only valid in the scope of the <code>onaudioprocess</code> function.</td>
  </tr>
 </tbody>
</table>

<h2 id="Example">Example</h2>

<p></p><p>The following example shows basic usage of a <code>ScriptProcessorNode</code> to take a track loaded via <a href="/en-US/docs/Web/API/AudioContext/decodeAudioData" title="The documentation about this has not yet been written; please consider contributing!"><code>AudioContext.decodeAudioData()</code></a>, process it, adding a bit of white noise to each audio sample of the input track (buffer) and play it through the <a href="/en-US/docs/Web/API/AudioDestinationNode" title="AudioDestinationNode has no output (as it is the output, no more AudioNode can be linked after it in the audio graph) and one input. The number of channels in the input must be between 0 and the maxChannelCount value or an exception is raised."><code>AudioDestinationNode</code></a>. For each channel and each sample frame, the <code>scriptNode.onaudioprocess</code> function takes the associated <code>audioProcessingEvent</code> and uses it to loop through each channel of the input buffer, and each sample in each channel, and add a small amount of white noise, before setting that result to be the output sample in each case.</p>

<div class="note notecard">
<p><strong>Note</strong>: For a full working example, see our <a href="https://mdn.github.io/webaudio-examples/script-processor-node/">script-processor-node</a> github repo (also view the <a href="https://github.com/mdn/webaudio-examples/blob/master/script-processor-node/index.html">source code</a>.)</p>
</div>

<pre class="brush: js">var myScript = document.querySelector(&apos;script&apos;);
var myPre = document.querySelector(&apos;pre&apos;);
var playButton = document.querySelector(&apos;button&apos;);

// Create AudioContext and buffer source
var audioCtx = new AudioContext();
source = audioCtx.createBufferSource();

// Create a ScriptProcessorNode with a bufferSize of 4096 and a single input and output channel
var scriptNode = audioCtx.createScriptProcessor(4096, 1, 1);
console.log(scriptNode.bufferSize);

// load in an audio track via XHR and decodeAudioData

function getData() {
  request = new XMLHttpRequest();
  request.open(&apos;GET&apos;, &apos;viper.ogg&apos;, true);
  request.responseType = &apos;arraybuffer&apos;;
  request.onload = function() {
    var audioData = request.response;

    audioCtx.decodeAudioData(audioData, function(buffer) {
    myBuffer = buffer;
    source.buffer = myBuffer;
  },
    function(e){&quot;Error with decoding audio data&quot; + e.err});
  }
  request.send();
}

// Give the node a function to process audio events
scriptNode.onaudioprocess = function(audioProcessingEvent) {
  // The input buffer is the song we loaded earlier
  var inputBuffer = audioProcessingEvent.inputBuffer;

  // The output buffer contains the samples that will be modified and played
  var outputBuffer = audioProcessingEvent.outputBuffer;

  // Loop through the output channels (in this case there is only one)
  for (var channel = 0; channel &lt; outputBuffer.numberOfChannels; channel++) {
    var inputData = inputBuffer.getChannelData(channel);
    var outputData = outputBuffer.getChannelData(channel);

    // Loop through the 4096 samples
    for (var sample = 0; sample &lt; inputBuffer.length; sample++) {
      // make output equal to the same as the input
      outputData[sample] = inputData[sample];

      // add noise to each output sample
      outputData[sample] += ((Math.random() * 2) - 1) * 0.2;
    }
  }
}

getData();

// wire up play button
playButton.onclick = function() {
  source.connect(scriptNode);
  scriptNode.connect(audioCtx.destination);
  source.start();
}

// When the buffer source stops playing, disconnect everything
source.onended = function() {
  source.disconnect(scriptNode);
  scriptNode.disconnect(audioCtx.destination);
}
</pre><p></p>

<h2 id="Specifications">Specifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a lang="en" href="https://webaudio.github.io/web-audio-api/#the-audioprocessingevent-interface---deprecated" class="external" hreflang="en">Web Audio API<br><small lang="ja">AudioProcessingEvent の定義</small></a></td>
   <td><span class="spec-WD">草案</span></td>
   <td> </td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<div><div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">現在、互換性データを可読形式の JSON フォーマットに置き換えているところです。</a></strong>
            この互換性一覧は古い形式を使っており、これに含まれるデータの置き換えが済んでいません。
            <strong><a href="/ja/docs/MDN/Contribute/Structures/Compatibility_tables">手助けしていただける場合は、こちらから！</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>デスクトップ</a></li>
        <li><a>モバイル</a></li>
    </ul>
</div></div>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari (WebKit)</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>10.0<span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/ja/docs/Web/Guide/Prefixes">webkit</a></span></td>
   <td><a href="/en-US/Firefox/Releases/25">25.0</a> (25.0) </td>
   <td><span style="color: #f00;">未サポート</span></td>
   <td>15.0<span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/ja/docs/Web/Guide/Prefixes">webkit</a></span><br>
    22 (unprefixed)</td>
   <td>6.0<span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/ja/docs/Web/Guide/Prefixes">webkit</a></span></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>Firefox OS</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
   <th>Chrome for Android</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td>26.0</td>
   <td>1.2</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td>33.0</td>
  </tr>
 </tbody>
</table>
</div>

<h2 id="See_also">See also</h2>

<ul>
 <li><a href="/en-US/docs/Web_Audio_API/Using_Web_Audio_API">Using the Web Audio API</a></li>
</ul>
