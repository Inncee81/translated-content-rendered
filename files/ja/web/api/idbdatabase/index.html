---
title: IDBDatabase
slug: Web/API/IDBDatabase
tags:
  - API
  - Database
  - IDBDatabase
  - IndexedDB
  - Storage
  - transactions
translation_of: Web/API/IDBDatabase
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/ja/docs/Web/API/IDBDatabase"><code>IDBDatabase</code></a></strong></li><li class="toggle"><details open><summary>プロパティ</summary><ol><li><a href="/ja/docs/Web/API/IDBDatabase/name"><code>name</code></a></li><li><a href="/ja/docs/Web/API/IDBDatabase/objectStoreNames"><code>objectStoreNames</code></a></li><li><a href="/ja/docs/Web/API/IDBDatabase/onabort"><code>onabort</code></a> <a href="/ja/docs/Web/API/IDBDatabase/onabort$translate" style="opacity: 0.5;">[翻訳する]</a></li><li><a href="/ja/docs/Web/API/IDBDatabase/onclose"><code>onclose</code></a> <a href="/ja/docs/Web/API/IDBDatabase/onclose$translate" style="opacity: 0.5;">[翻訳する]</a></li><li><a href="/ja/docs/Web/API/IDBDatabase/onerror"><code>onerror</code></a> <a href="/ja/docs/Web/API/IDBDatabase/onerror$translate" style="opacity: 0.5;">[翻訳する]</a></li><li><a href="/ja/docs/Web/API/IDBDatabase/onversionchange"><code>onversionchange</code></a> <a href="/ja/docs/Web/API/IDBDatabase/onversionchange$translate" style="opacity: 0.5;">[翻訳する]</a></li><li><a href="/ja/docs/Web/API/IDBDatabase/version"><code>version</code></a></li></ol></details></li><li class="toggle"><details open><summary>メソッド</summary><ol><li><a href="/ja/docs/Web/API/IDBDatabase/close"><code>close</code></a></li><li><a href="/ja/docs/Web/API/IDBDatabase/createObjectStore"><code>createObjectStore</code></a></li><li><a href="/ja/docs/Web/API/IDBDatabase/deleteObjectStore"><code>deleteObjectStore()</code></a> <a href="/ja/docs/Web/API/IDBDatabase/deleteObjectStore$translate" style="opacity: 0.5;">[翻訳する]</a></li><li><a href="/ja/docs/Web/API/IDBDatabase/transaction"><code>transaction()</code></a> <a href="/ja/docs/Web/API/IDBDatabase/transaction$translate" style="opacity: 0.5;">[翻訳する]</a></li></ol></details></li><li class="toggle"><details open><summary>イベント</summary><ol><li><a href="/ja/docs/Web/API/IDBDatabase/versionchange_event"><code>versionchange</code></a> <a href="/ja/docs/Web/API/IDBDatabase/versionchange_event$translate" style="opacity: 0.5;">[翻訳する]</a></li></ol></details></li><li class="toggle"><details open><summary>継承</summary><ol><li><a href="/ja/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li></ol></section>
<div>
 <p>IndexedDB API<code>のIDBDatabase</code>インターフェイスは、<a href="/ja/docs/IndexedDB#database_connection">データベースへの接続</a>を提供します。 <code>IDBDatabase</code>オブジェクトで、データベースの<a href="/ja/docs/IndexedDB#gloss_transaction">transaction</a>を開き、データベースのオブジェクト（データ）を生成したり、操作したり、削除したりできます。このインターフェイスはデータベースのバージョンを取得したり、統合したりする唯一の方法を提供します。</p>
</div>
<div class="note">
 <p><strong>Note</strong>: Everything you do in IndexedDB always happens in the context of a <a href="/en-US/docs/IndexedDB/Basic_Concepts_Behind_IndexedDB#gloss_transaction">transaction</a>, representing interactions with data in the database. All objects in IndexedDB — including object stores, indexes, and cursors — are tied to a particular transaction. Thus, you cannot execute commands, access data, or open anything outside of a transaction.</p>
</div>
<h2 id="メソッド">メソッド</h2>
<p>Inherits from: <a href="/en-US/docs/DOM/EventTarget">EventTarget</a></p>
<dl>
 <dt>
  <a href="/ja/docs/Web/API/IDBDatabase/close" title="実際には、この接続を使用していて生成されたすべてのトランザクションが完了するまで、接続は閉じられません。一度このメソッドが呼び出されたら、この接続では、新しいトランザクションを生成することはできません。終了処理がペンディングされている場合は、トランザクションを生成するメソッドは、例外を発生させます。"><code>IDBDatabase.close</code></a></dt>
 <dd>
  即座に応答して、別スレッドでデータベースを閉じる。</dd>
 <dt>
  <a href="/ja/docs/Web/API/IDBDatabase/createObjectStore" title="このメソッドは、ストアの名前をとるだけでなく、重要なオプションプロパティを定義するためのオプションオブジェクトもとります。ストアの個々のオブジェクトを一意にするために、プロパティを使用できます。 プロパティが識別子ならば、それはすべてのオブジェクトで一意であり、すべてのオブジェクトはそのプロパティを持つべきです。"><code>IDBDatabase.createObjectStore</code></a></dt>
 <dd>
  新しくオブジェクトストアかインデックスを生成して返す。</dd>
 <dt>
  <a href="/ja/docs/Web/API/IDBDatabase/deleteObjectStore" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>IDBDatabase.deleteObjectStore</code></a></dt>
 <dd>
  参照しているインデックスがあったとしても、接続中のデータベースで与えられた名前のオブジェクトストアを削除する。</dd>
 <dt>
  <a href="/ja/docs/Web/API/IDBDatabase/transaction" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>IDBDatabase.transaction</code></a></dt>
 <dd>
  オブジェクトストアにアクセスできる<a href="/ja/docs/Web/API/IDBTransaction/objectStore" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>IDBTransaction.objectStore</code></a>メソッドを含むトランザクションオブジェクト (<a href="/ja/docs/Web/API/IDBTransaction" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>IDBTransaction</code></a>)を即座に返す。別スレッドで実行される。</dd>
</dl>
<h2 id="プロパティ">プロパティ</h2>
<dl>
 <dt>
  <a href="/ja/docs/Web/API/IDBDatabase/name" title="接続しているデータベース名を含むDOMString。"><code>IDBDatabase.name</code></a> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">読取専用 </span></dt>
 <dd>
  接続しているデータベース名を含む<a href="/ja/docs/Web/API/DOMString" title="DOMString は、UTF-16 文字列です。JavaScript では UTF-16 文字列を用いるため、DOMString は直接 String に対応します。"><code>DOMString</code></a> 。</dd>
 <dt>
  <a href="/ja/docs/Web/API/IDBDatabase/version" title="接続しているデータベースのバージョンを含む整数値。"><code>IDBDatabase.version</code></a> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">読取専用 </span></dt>
 <dd>
  接続しているデータベースのバージョンを含む<a href="/en-US/docs/NSPR_API_Reference/Long_Long_(64-bit)_Integers">64-bit integer</a>。データベースが初めて作られた場合、この属性は空文字である。</dd>
 <dt>
  <a href="/ja/docs/Web/API/IDBDatabase/objectStoreNames" title="現在接続しているデータベースのobject stores名のリストを含むDOMStringList。"><code>IDBDatabase.objectStoreNames</code></a> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">読取専用 </span></dt>
 <dd>
  接続しているデータベースの<a href="/en-US/docs/IndexedDB#gloss_object_store">object stores</a>名のリストを含む<a href="/ja/docs/Web/API/DOMStringList" title="DOMString (strings) のリストを含むいくつかの API が返す型です。"><code>DOMStringList</code></a> 。</dd>
</dl>
<h3 id="イベントハンドラ">イベントハンドラ</h3>
<dl>
 <dt>
  <a href="/ja/docs/Web/API/IDBDatabase/onabort" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>IDBDatabase.onabort</code></a></dt>
 <dd>
  データベースの接続が中止された場合に発生する。</dd>
 <dt>
  <a href="/ja/docs/Web/API/IDBDatabase/onerror" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>IDBDatabase.onerror</code></a></dt>
 <dd>
  データベースへの接続が失敗した場合に発生する。</dd>
 <dt>
  <a href="/ja/docs/Web/API/IDBDatabase/onversionchange" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>IDBDatabase.onversionchange</code></a></dt>
 <dd>
  <p>データベースの構造が(<a href="/ja/docs/Web/API/IDBOpenDBRequest/onupgradeneeded" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>IDBOpenDBRequest.onupgradeneeded</code></a><code>イベントで変更されるか、</code><a href="/ja/docs/Web/API/IDBFactory/deleteDatabase" title="データベースの削除が成功した場合、 このメソッドから返されたrequestオブジェクトにおいて、resultにnullが設定された状態でsuccessイベントが発生します。 データベースの削除中にエラーが発生した場合、このメソッドから返されたrequestオブジェクトで、errorイベントが発生します。"><code>IDBFactory.deleteDatabase</code></a> がどこかで(ほとんどの場合、同じコンピューターの他のウィンドウやタブで)要求された場合に発生します。これはversion change transaction (see <a href="/ja/docs/Web/API/IDBVersionChangeEvent" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>IDBVersionChangeEvent</code></a>)とは異なりますが、関連があります。</p>
 </dd>
</dl>
<h2 id="example" name="example">例</h2>
<p>次のコードスニペットでは、データベースを非同期で開き(<a href="/ja/docs/Web/API/IDBFactory" title="次のコードスニペットでは、 データベースを開く要求をし、 成功の場合と失敗の場合のイベントハンドラーを登録しています。完全に動作する例は、To-do Notifications app (view example live.) を見てください。"><code>IDBFactory</code></a>)、成功と失敗の場合にイベントを登録し、アップグレードが必要な場合には、新しいオブジェクトストアを生成しています(<a href="/ja/docs/Web/API/IDBdatabase" title="Inherits from: EventTarget"><code>IDBdatabase</code></a>)。 完璧に動作する例は、 <a href="https://github.com/mdn/to-do-notifications/">To-do Notifications</a> app (<a href="http://mdn.github.io/to-do-notifications/">view example live</a>.)を見てください。</p>
<pre class="brush: js;highlight:[13,24,26,27,28,32]">// Let us open our database
  var DBOpenRequest = window.indexedDB.open(&quot;toDoList&quot;, 4);

  // these two event handlers act on the IDBDatabase object, when the database is opened successfully, or not
  DBOpenRequest.onerror = function(event) {
    note.innerHTML += &apos;&lt;li&gt;Error loading database.&lt;/li&gt;&apos;;
  };

  DBOpenRequest.onsuccess = function(event) {
    note.innerHTML += &apos;&lt;li&gt;Database initialised.&lt;/li&gt;&apos;;

    // store the result of opening the database in the db variable. This is used a lot later on
    db = DBOpenRequest.result;

    // Run the displayData() function to populate the task list with all the to-do list data already in the IDB
    displayData();
  };

  // This event handles the event whereby a new version of the database needs to be created
  // Either one has not been created before, or a new version number has been submitted via the
  // window.indexedDB.open line above

  DBOpenRequest.onupgradeneeded = function(event) {
    var db = event.target.result;

    db.onerror = function(event) {
      note.innerHTML += &apos;&lt;li&gt;Error loading database.&lt;/li&gt;&apos;;
    };

    // Create an objectStore for this database using IDBDatabase.createObjectStore

    var objectStore = db.createObjectStore(&quot;toDoList&quot;, { keyPath: &quot;taskTitle&quot; });

    // define what data items the objectStore will contain

    objectStore.createIndex(&quot;hours&quot;, &quot;hours&quot;, { unique: false });
    objectStore.createIndex(&quot;minutes&quot;, &quot;minutes&quot;, { unique: false });
    objectStore.createIndex(&quot;day&quot;, &quot;day&quot;, { unique: false });
    objectStore.createIndex(&quot;month&quot;, &quot;month&quot;, { unique: false });
    objectStore.createIndex(&quot;year&quot;, &quot;year&quot;, { unique: false });

    objectStore.createIndex(&quot;notified&quot;, &quot;notified&quot;, { unique: false });

    note.innerHTML += &apos;&lt;li&gt;Object store created.&lt;/li&gt;&apos;;
  };</pre>
<p>次の行は、データベースでトランザクションを開いて、そしてオブジェクトストアを開いて、内側のデータを操作しています。</p>
<pre class="brush: js">    var objectStore = db.transaction(&apos;toDoList&apos;).objectStore(&apos;toDoList&apos;); </pre>
<h2 id="仕様">仕様</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a class="external" href="https://www.w3.org/TR/IndexedDB/#idl-def-IDBDatabase" hreflang="en" lang="en">Indexed Database API 2.0<br><small lang="ja">IDBDatabase の定義</small></a></td>
   <td><span class="spec-REC">勧告</span></td>
   <td> </td>
  </tr>
 </tbody>
</table>
<h2 id="Browser_compatibility" name="Browser_compatibility">ブラウザ実装状況</h2>
<div>
 <div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">現在、互換性データを可読形式の JSON フォーマットに置き換えているところです。</a></strong>
            この互換性一覧は古い形式を使っており、これに含まれるデータの置き換えが済んでいません。
            <strong><a href="/ja/docs/MDN/Contribute/Structures/Compatibility_tables">手助けしていただける場合は、こちらから！</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>デスクトップ</a></li>
        <li><a>モバイル</a></li>
    </ul>
</div></div>
<div id="compat-desktop">
 <table class="compat-table">
  <tbody>
   <tr>
    <th>Feature</th>
    <th>Chrome</th>
    <th>Firefox (Gecko)</th>
    <th>Internet Explorer</th>
    <th>Opera</th>
    <th>Safari (WebKit)</th>
   </tr>
   <tr>
    <td>Basic support</td>
    <td>23<span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/ja/docs/Web/Guide/Prefixes" title="The name of this feature is prefixed with &apos;webkit&apos; as this browser considers it experimental">webkit</a></span><br>
     24</td>
    <td>10 <span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/ja/docs/Web/Guide/Prefixes" title="The name of this feature is prefixed with &apos;moz&apos; as this browser considers it experimental">moz</a></span><br>
     <a href="/en-US/Firefox/Releases/16" title="Released on 2012-10-09.">16.0</a> (16.0)</td>
    <td>10, partial</td>
    <td>15</td>
    <td>7.1</td>
   </tr>
  </tbody>
 </table>
</div>
<div id="compat-mobile">
 <table class="compat-table">
  <tbody>
   <tr>
    <th>Feature</th>
    <th>Android</th>
    <th>Firefox Mobile (Gecko)</th>
    <th>Firefox OS</th>
    <th>IE Phone</th>
    <th>Opera Mobile</th>
    <th>Safari Mobile</th>
   </tr>
   <tr>
    <td>Basic support</td>
    <td>4.4</td>
    <td>22.0 (22.0)</td>
    <td>1.0.1</td>
    <td>10</td>
    <td>22</td>
    <td><span style="color: #f00;">未サポート</span></td>
   </tr>
  </tbody>
 </table>
</div>
<h2 id="関連情報">関連情報</h2>
<ul>
 <li><a href="/en-US/docs/Web/API/IndexedDB_API/Using_IndexedDB">Using IndexedDB</a></li>
 <li>Starting transactions: <a href="/ja/docs/Web/API/IDBDatabase"><code>IDBDatabase</code></a></li>
 <li>Using transactions: <a href="/ja/docs/Web/API/IDBTransaction"><code>IDBTransaction</code></a></li>
 <li>Setting a range of keys: <a href="/ja/docs/Web/API/IDBKeyRange"><code>IDBKeyRange</code></a></li>
 <li>Retrieving and making changes to your data: <a href="/ja/docs/Web/API/IDBObjectStore"><code>IDBObjectStore</code></a></li>
 <li>Using cursors: <a href="/ja/docs/Web/API/IDBCursor"><code>IDBCursor</code></a></li>
 <li>Reference example: <a class="external" href="https://github.com/mdn/to-do-notifications/tree/gh-pages">To-do Notifications</a> (<a class="external" href="http://mdn.github.io/to-do-notifications/">view example live</a>.)</li>
</ul>
<p> </p>
