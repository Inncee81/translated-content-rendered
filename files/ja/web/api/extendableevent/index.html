---
title: ExtendableEvent
slug: Web/API/ExtendableEvent
tags:
  - API
  - ExtendableEvent
  - Interface
  - Offline
  - Reference
  - Service Workers
  - ServiceWorker
  - Workers
translation_of: Web/API/ExtendableEvent
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/ja/docs/Web/API/Service_Worker_API">Service Worker API</a></strong></li><li><strong><a href="/ja/docs/Web/API/ExtendableEvent"><code>ExtendableEvent</code></a></strong></li><li class="toggle"><details open><summary>コンストラクター</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="これは実験段階の API です。製品内のコードで使用しないようご注意ください。"><i class="icon-beaker"> </i></span></span><a href="/ja/docs/Web/API/ExtendableEvent/ExtendableEvent"><code>ExtendableEvent()</code></a></li></ol></details></li><li class="toggle"><details open><summary>メソッド</summary><ol><li><a href="/ja/docs/Web/API/ExtendableEvent/waitUntil"><code>waitUntil()</code></a></li></ol></details></li><li class="toggle"><details open><summary>継承</summary><ol><li><a href="/ja/docs/Web/API/Event"><code>Event</code></a></li></ol></details></li><li class="toggle"><details open><summary>Service Workers API に関連するページ</summary><ol><li><a href="/ja/docs/Web/API/Cache"><code>Cache</code></a></li><li><a href="/ja/docs/Web/API/CacheStorage"><code>CacheStorage</code></a></li><li><a href="/ja/docs/Web/API/Client"><code>Client</code></a></li><li><a href="/ja/docs/Web/API/Clients"><code>Clients</code></a></li><li><a href="/ja/docs/Web/API/FetchEvent"><code>FetchEvent</code></a></li><li><a href="/ja/docs/Web/API/InstallEvent"><code>InstallEvent</code></a></li><li><a href="/ja/docs/Web/API/Navigator/serviceWorker"><code>Navigator.serviceWorker</code></a></li><li><a href="/ja/docs/Web/API/NotificationEvent"><code>NotificationEvent</code></a></li><li><a href="/ja/docs/Web/API/PeriodicSyncEvent"><code>PeriodicSyncEvent</code></a></li><li><a href="/ja/docs/Web/API/PeriodicSyncManager"><code>PeriodicSyncManager</code></a></li><li><a href="/ja/docs/Web/API/PeriodicSyncRegistration"><code>PeriodicSyncRegistration</code></a></li><li><a href="/ja/docs/Web/API/ServiceWorker"><code>ServiceWorker</code></a></li><li><a href="/ja/docs/Web/API/ServiceWorkerContainer"><code>ServiceWorkerContainer</code></a></li><li><a href="/ja/docs/Web/API/ServiceWorkerGlobalScope"><code>ServiceWorkerGlobalScope</code></a></li><li><a href="/ja/docs/Web/API/ServiceWorkerRegistration"><code>ServiceWorkerRegistration</code></a></li><li><a href="/ja/docs/Web/API/SyncEvent"><code>SyncEvent</code></a></li><li><a href="/ja/docs/Web/API/SyncManager"><code>SyncManager</code></a></li><li><a href="/ja/docs/Web/API/SyncRegistration"><code>SyncRegistration</code></a></li><li><a href="/ja/docs/Web/API/WindowClient"><code>WindowClient</code></a></li></ol></details></li></ol></section></div>

<p><span class="seoSummary"><strong><code>ExtendableEvent</code></strong> インターフェイスは、サービスワーカーのライフサイクルの一部として、グローバルスコープでディスパッチされた <code><a href="/ja/docs/Web/API/ServiceWorkerGlobalScope/install">install</a></code> イベントと <code><a href="/ja/docs/Web/API/ServiceWorkerGlobalScope/activate">activate</a></code> イベントの存続期間を延長します。 これにより、データベーススキーマがアップグレードされて古いキャッシュエントリが削除されるまで、機能イベント（<a href="/ja/docs/Web/API/FetchEvent"><code>FetchEvent</code></a> など）が送出されなくなります。</span></p>

<p><a href="/ja/docs/Web/API/ExtendableEvent/waitUntil"><code>waitUntil()</code></a> が <code>ExtendableEvent</code> ハンドラーの外で呼び出された場合、ブラウザーは <code>InvalidStateError</code> をスローする必要があります。 また、複数の呼び出しが積み重なり、その結果の Promise が存続期間延長 Promise（<a href="https://w3c.github.io/ServiceWorker/#extendableevent-extend-lifetime-promises">extend lifetime promises</a>）のリストに追加されることにも注意してください。</p>

<div class="note notecard">
<p><strong>注</strong>: 上記の段落で説明した振る舞いは、Firefox 43 で修正されました（<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1180274">バグ 1180274</a> を参照）。</p>
</div>

<p>このインターフェイスは、<a href="/ja/docs/Web/API/Event"><code>Event</code></a> インターフェイスを継承しています。</p>

<div class="hidden" id="inheritance_diagram">

<pre class="brush: html notranslate">  &lt;div id=&quot;interfaceDiagram&quot; style=&quot;display: inline-block; position: relative; width: 100%; padding-bottom: 8.571428571428571%; vertical-align: middle; overflow: hidden;&quot;&gt;&lt;svg style=&quot;display: inline-block; position: absolute; top: 0; left: 0;&quot; viewbox=&quot;-20 0 700 60&quot; preserveAspectRatio=&quot;xMinYMin meet&quot;&gt;&lt;a xlink:href=&quot;https://developer.mozilla.org/ja/docs/Web/API/Event&quot; target=&quot;_top&quot;&gt;&lt;rect x=&quot;1&quot; y=&quot;1&quot; width=&quot;75&quot; height=&quot;50&quot; fill=&quot;#fff&quot; stroke=&quot;#D4DDE4&quot; stroke-width=&quot;2px&quot; /&gt;&lt;text  x=&quot;38.5&quot; y=&quot;30&quot; font-size=&quot;12px&quot; font-family=&quot;Consolas,Monaco,Andale Mono,monospace&quot; fill=&quot;#4D4E53&quot; text-anchor=&quot;middle&quot; alignment-baseline=&quot;middle&quot;&gt;Event&lt;/text&gt;&lt;/a&gt;&lt;polyline points=&quot;76,25  86,20  86,30  76,25&quot; stroke=&quot;#D4DDE4&quot; fill=&quot;none&quot;/&gt;&lt;line x1=&quot;86&quot; y1=&quot;25&quot; x2=&quot;116&quot; y2=&quot;25&quot; stroke=&quot;#D4DDE4&quot;/&gt;&lt;a xlink:href=&quot;https://developer.mozilla.org/ja/docs/Web/API/ExtendableEvent&quot; target=&quot;_top&quot;&gt;&lt;rect x=&quot;116&quot; y=&quot;1&quot; width=&quot;150&quot; height=&quot;50&quot; fill=&quot;#F4F7F8&quot; stroke=&quot;#D4DDE4&quot; stroke-width=&quot;2px&quot; /&gt;&lt;text  x=&quot;191&quot; y=&quot;30&quot; font-size=&quot;12px&quot; font-family=&quot;Consolas,Monaco,Andale Mono,monospace&quot; fill=&quot;#4D4E53&quot; text-anchor=&quot;middle&quot; alignment-baseline=&quot;middle&quot;&gt;ExtendableEvent&lt;/text&gt;&lt;/a&gt;&lt;/svg&gt;&lt;/div&gt;
</pre>

<pre class="brush: css notranslate">  a:hover text { fill: #0095DD; pointer-events: all;}
</pre>

</div>

<iframe class="live-sample-frame inheritance-diagram-frame" frameborder="0" height="60" id="frame_inheritance_diagram" src="https://mdn.mozillademos.org/ja/docs/Web/API/ExtendableEvent$samples/inheritance_diagram?revision=1620225" width="700"></iframe>

<div class="note notecard">
<p><strong>注</strong>: このインターフェイスは、グローバルスコープが <a href="/ja/docs/Web/API/ServiceWorkerGlobalScope"><code>ServiceWorkerGlobalScope</code></a> の場合にのみ使用できます。 <a href="/ja/docs/Web/API/Window"><code>Window</code></a> または別の種類のワーカーのスコープの場合は使用できません。</p>
</div>

<h2 id="Constructor" name="Constructor">コンストラクター</h2>

<dl>
 <dt><a href="/ja/docs/Web/API/ExtendableEvent/ExtendableEvent"><code>ExtendableEvent()</code></a></dt>
 <dd>新しい <code>ExtendableEvent</code> オブジェクトを作成します。</dd>
</dl>

<h2 id="Properties" name="Properties">プロパティ</h2>

<p><em>特定のプロパティを実装していませんが、親である <a href="/ja/docs/Web/API/Event"><code>Event</code></a> からプロパティを継承しています。</em></p>

<h2 id="Methods" name="Methods">メソッド</h2>

<p><em>親である <a href="/ja/docs/Web/API/Event"><code>Event</code></a> からメソッドを継承しています。</em></p>

<dl>
 <dt><a href="/ja/docs/Web/API/ExtendableEvent/waitUntil"><code>ExtendableEvent.waitUntil()</code></a></dt>
 <dd>
 <p>イベントの存続期間を延長します。 これは、インストール中（<a href="/ja/docs/Web/API/ServiceWorkerRegistration/installing"><code>installing</code></a>）のワーカーの <code><a href="/ja/docs/Web/API/ServiceWorkerGlobalScope/install">install</a></code> <a href="/ja/docs/Web/API/EventHandler"><code>EventHandler</code></a> と、アクティブ（<a href="/ja/docs/Web/API/ServiceWorkerRegistration/active"><code>active</code></a>）ワーカーの <code><a href="/ja/docs/Web/API/ServiceWorkerGlobalScope/activate">activate</a></code> <a href="/ja/docs/Web/API/EventHandler"><code>EventHandler</code></a> で呼び出されることを目的としています。</p>
 </dd>
</dl>

<h2 id="Examples" name="Examples">例</h2>

<p>このコードスニペットは、<a href="https://github.com/GoogleChrome/samples/blob/gh-pages/service-worker/prefetch/service-worker.js">サービスワーカーのプリフェッチの例</a>からのものです（<a href="https://googlechrome.github.io/samples/service-worker/prefetch/">プリフェッチの例をライブで</a>見る）。 コードは <a href="/ja/docs/Web/API/ServiceWorkerGlobalScope/oninstall"><code>ServiceWorkerGlobalScope.oninstall</code></a> で <a href="/ja/docs/Web/API/ExtendableEvent/waitUntil"><code>ExtendableEvent.waitUntil()</code></a> を呼び出し、インストール中（<a href="/ja/docs/Web/API/ServiceWorkerRegistration/installing"><code>ServiceWorkerRegistration.installing</code></a>）のワーカーがインストール済み（installed）として扱われるのを、渡された Promise が正常に解決されるまで遅らせます。 Promise は、すべてのリソースがフェッチされてキャッシュされたとき、または例外が発生したときに解決します。</p>

<p>コードスニペットは、サービスワーカーが使用するキャッシュのバージョン管理のベストプラクティスも示しています。 この例ではキャッシュは1つしかありませんが、同じアプローチを複数のキャッシュに使用できます。 キャッシュの一括指定識別子を特定のバージョン管理されたキャッシュ名にマップします。</p>

<div class="note notecard">
<p><strong>注</strong>: Chrome では、ログ文は、chrome://serviceworker-internals を介してアクセスされる関連サービスワーカーの &quot;Inspect&quot; インターフェイスを介して表示されます。</p>
</div>

<pre class="brush: js notranslate">var CACHE_VERSION = 1;
var CURRENT_CACHES = {
  prefetch: &apos;prefetch-cache-v&apos; + CACHE_VERSION
};

self.addEventListener(&apos;install&apos;, function(event) {
  var urlsToPrefetch = [
    &apos;./static/pre_fetched.txt&apos;,
    &apos;./static/pre_fetched.html&apos;,
    &apos;https://www.chromium.org/_/rsrc/1302286216006/config/customLogo.gif&apos;
  ];

  console.log(&apos;install イベントの処理。 プリフェッチするリソース:&apos;, urlsToPrefetch);

  event.waitUntil(
    caches.open(CURRENT_CACHES[&apos;prefetch&apos;]).then(function(cache) {
      return cache.addAll(urlsToPrefetch.map(function(urlToPrefetch) {
        return new Request(urlToPrefetch, {mode: &apos;no-cors&apos;});
      })).then(function() {
        console.log(&apos;すべてのリソースをフェッチし、キャッシュしました。&apos;);
      });
    }).catch(function(error) {
      console.error(&apos;プリフェッチに失敗:&apos;, error);
    })
  );
});</pre>

<div class="note notecard"><strong>重要</strong>: リソースをフェッチするとき、リソースが <a href="/ja/docs/Glossary/CORS">CORS</a> をサポートしていないサーバーから提供される可能性がある場合は、<code>{mode: &apos;no-cors&apos;}</code> を使用することが非常に重要です。 この例では、<a href="http://www.chromium.org">www.chromium.org</a> は CORS をサポートしていません。</div>

<h2 id="Specifications" name="Specifications">仕様</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">仕様</th>
   <th scope="col">状態</th>
   <th scope="col">コメント</th>
  </tr>
  <tr>
   <td><a class="external" href="https://w3c.github.io/ServiceWorker/#extendableevent" hreflang="en" lang="en">Service Workers<br><small lang="ja">ExtendableEvent の定義</small></a></td>
   <td><span class="spec-WD">草案</span></td>
   <td>初期定義</td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility" name="Browser_compatibility">ブラウザーの互換性</h2>

<div>
<div class="hidden">The compatibility table on this page is generated from structured data. If you&apos;d like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</div>

<div class="bc-data" id="bcd:api.ExtendableEvent"></div>
</div>

<h2 id="See_also" name="See_also">関連情報</h2>

<ul>
 <li><a href="/ja/docs/Web/API/Service_Worker_API/Using_Service_Workers">Service worker の使用</a></li>
 <li><a class="external external-icon" href="https://github.com/mdn/sw-test">サービスワーカーの基本的なコード例</a>（英語）</li>
 <li><a class="external external-icon" href="https://jakearchibald.github.io/isserviceworkerready/">ServiceWorker の準備はできていますか？</a>（英語）</li>
 <li><a href="/ja/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a></li>
 <li><a href="/ja/docs/Web/API/Web_Workers_API/Using_web_workers">Web worker の使用</a></li>
</ul>
