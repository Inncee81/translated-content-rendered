---
title: Pointer events
slug: Web/API/Pointer_events
tags:
  - API
  - Landing
  - Overview
  - Pointer Events
translation_of: Web/API/Pointer_events
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/ja/docs/Web/API/Pointer_events">Pointer events</a></strong></li><li class="toggle"><details open><summary>ガイド</summary><ol><li><a href="/ja/docs/Web/API/Pointer_events/Using_Pointer_Events">Pointer Events の使用</a></li><li><a href="/ja/docs/Web/API/Pointer_events/Multi-touch_interaction">マルチタッチ操作</a></li><li><a href="/ja/docs/Web/API/Pointer_events/Pinch_zoom_gestures">ピンチズームジェスチャー</a></li></ol></details></li><li class="toggle"><details open><summary>インターフェイス</summary><ol><li><a href="/ja/docs/Web/API/PointerEvent"><code>PointerEvent</code></a></li></ol></details></li><li class="toggle"><details open><summary>プロパティ</summary><ol><li><a href="/ja/docs/Web/API/Element/ongotpointercapture"><code>Element.ongotpointercapture</code></a></li><li><a href="/ja/docs/Web/API/Element/onlostpointercapture"><code>Element.onlostpointercapture</code></a></li><li><a href="/ja/docs/Web/API/GlobalEventHandlers/onpointerdown"><code>GlobalEventHandlers.onpointerdown</code></a></li><li><a href="/ja/docs/Web/API/GlobalEventHandlers/onpointermove"><code>GlobalEventHandlers.onpointermove</code></a></li><li><a href="/ja/docs/Web/API/GlobalEventHandlers/onpointerup"><code>GlobalEventHandlers.onpointerup</code></a></li><li><a href="/ja/docs/Web/API/GlobalEventHandlers/onpointercancel"><code>GlobalEventHandlers.onpointercancel</code></a></li><li><a href="/ja/docs/Web/API/GlobalEventHandlers/onpointerover"><code>GlobalEventHandlers.onpointerover</code></a></li><li><a href="/ja/docs/Web/API/GlobalEventHandlers/onpointerout"><code>GlobalEventHandlers.onpointerout</code></a></li><li><a href="/ja/docs/Web/API/GlobalEventHandlers/onpointerenter"><code>GlobalEventHandlers.onpointerenter</code></a></li><li><a href="/ja/docs/Web/API/GlobalEventHandlers/onpointerleave"><code>GlobalEventHandlers.onpointerleave</code></a></li><li><a href="/ja/docs/Web/API/Navigator/maxTouchPoints"><code>Navigator.maxTouchPoints</code></a></li></ol></details></li><li class="toggle"><details open><summary>メソッド</summary><ol><li><a href="/ja/docs/Web/API/Element/setPointerCapture"><code>Element.setPointerCapture()</code></a></li><li><a href="/ja/docs/Web/API/Element/releasePointerCapture"><code>Element.releasePointerCapture()</code></a></li></ol></details></li><li class="toggle"><details open><summary>イベント</summary><ol><li><a href="/ja/docs/Web/API/HTMLElement/gotpointercapture_event"><code>HTMLElement</code>: <code>gotpointercapture</code></a></li><li><a href="/ja/docs/Web/API/HTMLElement/lostpointercapture_event"><code>HTMLElement</code>: <code>lostpointercapture</code></a></li><li><a href="/ja/docs/Web/API/HTMLElement/pointercancel_event"><code>HTMLElement</code>: <code>pointercancel</code></a></li><li><a href="/ja/docs/Web/API/HTMLElement/pointerdown_event"><code>HTMLElement</code>: <code>pointerdown</code></a></li><li><a href="/ja/docs/Web/API/HTMLElement/pointerenter_event"><code>HTMLElement</code>: <code>pointerenter</code></a></li><li><a href="/ja/docs/Web/API/HTMLElement/pointerleave_event"><code>HTMLElement</code>: <code>pointerleave</code></a></li><li><a href="/ja/docs/Web/API/HTMLElement/pointermove_event"><code>HTMLElement</code>: <code>pointermove</code></a></li><li><a href="/ja/docs/Web/API/HTMLElement/pointerout_event"><code>HTMLElement</code>: <code>pointerout</code></a></li><li><a href="/ja/docs/Web/API/HTMLElement/pointerover_event"><code>HTMLElement</code>: <code>pointerover</code></a></li><li><a href="/ja/docs/Web/API/HTMLElement/pointerup_event"><code>HTMLElement</code>: <code>pointerup</code></a></li></ol></details></li></ol></section>

<p><span class="seoSummary">今日のウェブコンテンツの多くは、ユーザーのポインティングデバイスがマウスであることを前提としています。 しかしながら、多くのデバイスがペン/スタイラスおよびタッチ面のような他のタイプのポインティング入力デバイスをサポートしているので、既存のポインティングデバイスのイベントモデルへの拡張が必要であり、そして<em><a href="#term_pointer_event">ポインタイベント</a></em>はその必要性に対処します。</span></p>

<p>ポインタイベントは、ポインティングデバイスに対して発生する DOM イベントです。 これらは、マウス、ペン/スタイラス、（1本以上の指でなどの）タッチなどのポインティング入力デバイスを処理する単一の DOM イベントモデルを作成するように設計されています。 <em><a href="#term_pointer">ポインタ</a></em>は、特定の画面座標セットをターゲットにできるハードウェアにとらわれないデバイスです。 ポインタに単一のイベントモデルを使用すると、ウェブサイトやウェブアプリの作成が簡単になり、ユーザーのハードウェアに関係なく優れたユーザーエクスペリエンスを提供できます。 しかしながら、デバイス固有の処理が必要なシナリオのために、ポインタイベントはイベントを生成したデバイスタイプを調べるための <a href="/ja/docs/Web/API/PointerEvent/pointerType" title="PointerEvent インターフェイスの pointerType 読み取り専用プロパティは、特定のポインタイベントを引き起こしたデバイスタイプ（マウス、ペン、またはタッチ）を示します。"><code>pointerType</code></a> プロパティを定義しています。</p>

<p>一般的なポインタ入力を処理するために必要なイベントは、<a href="/ja/docs/Web/API/MouseEvent" title="MouseEvent インターフェイスは、ポインティングデバイス (マウスなど) によるユーザの対話によって発生したイベントを表します。このインターフェイスを使用する一般的なイベントとして click、dblclick、mouseup、mousedown があります。"><code>マウスイベント</code></a>に似ています（<code>mousedown/pointerdown</code>、<code>mousemove/pointermove</code> など）。 したがって、ポインタイベントタイプは意図的にマウスイベントタイプと似せています。 さらに、ポインタイベントには、マウスイベントに存在する通常のプロパティ（クライアント座標、ターゲット要素、ボタンの状態など）、およびその他の入力形式のための新しいプロパティ（圧力、接触ジオメトリ、傾きなど）が含まれています。 実際、<a href="/ja/docs/Web/API/PointerEvent" title="PointerEvent インターフェイスは、接触点のジオメトリ、イベントを生成したデバイスタイプ、接触面に加えられた圧力の量など、ポインタによって生成された DOM イベントの状態を表します。"><code>PointerEvent</code></a> インターフェイスはすべての <a href="/ja/docs/Web/API/MouseEvent" title="MouseEvent インターフェイスは、ポインティングデバイス (マウスなど) によるユーザの対話によって発生したイベントを表します。このインターフェイスを使用する一般的なイベントとして click、dblclick、mouseup、mousedown があります。"><code>MouseEvent</code></a> のプロパティを継承するため、マウスイベントからポインタイベントへのコンテンツの移行が容易になります。</p>

<h2 id="Terminology" name="Terminology">用語</h2>

<dl>
 <dt>アクティブボタン状態（active buttons state）</dt>
 <dd><em><a href="#term_pointer">ポインタ</a></em>が <code>buttons</code> プロパティに対してゼロ以外の値を持つ場合の条件。 例えば、ペンの場合は、ペンがデジタイザと物理的に接触しているか、ホバー中に少なくとも1つのボタンが押されているときです。</dd>
 <dt>アクティブポインタ（active pointer）</dt>
 <dd>イベントを生成できる任意の<em><a href="#term_pointer">ポインタ</a></em>入力デバイス。 ポインタがそれ以上のイベントを生成する可能性がある場合、ポインタはアクティブと見なされます。 例えば、ペンが持ち上げられたり動かされたりすると追加のイベントが発生する可能性があるため、ペンがダウン状態であるとアクティブであると見なされます。</dd>
 <dt id="term_digitizer">デジタイザ（digitizer）</dt>
 <dd>接触を検出できる表面を備えた検知デバイス。 最も一般的な検知デバイスは、ペン、スタイラス、または指などの入力デバイスからの入力を検知することができるタッチ対応画面です。 検知デバイスの中には、入力デバイスの近接を検出できるものもあり、その状態をマウスにならってホバーと表現します。</dd>
 <dt id="term_hit_test">ヒットテスト（hit test）</dt>
 <dd>ブラウザーがポインタイベントのターゲット要素を決定するために使用するプロセス。 通常、これはポインタの位置と、画面媒体上のドキュメント内の要素の視覚的なレイアウトを考慮して決定されます。</dd>
 <dt id="term_pointer">ポインタ（pointer）</dt>
 <dd>画面上の特定の座標（または座標のセット）をターゲットにできる、入力デバイスのハードウェアにとらわれない表現。 <em>ポインタ</em>入力デバイスの例は、マウス、ペン/スタイラス、およびタッチ接触です。</dd>
 <dt>ポインタキャプチャ（pointer capture）</dt>
 <dd>ポインタキャプチャでは、ポインタイベントをポインタの位置による通常のヒットテストの結果以外の特定の要素にターゲットしなおすことができます。</dd>
 <dt id="term_pointer_event">ポインタイベント（pointer event）</dt>
 <dd><em><a href="#term_pointer">ポインタ</a></em>に対して発生した DOM <a href="/ja/docs/Web/API/PointerEvent" title="PointerEvent インターフェイスは、接触点のジオメトリ、イベントを生成したデバイスタイプ、接触面に加えられた圧力の量など、ポインタによって生成された DOM イベントの状態を表します。"><code>イベント</code></a>。</dd>
</dl>

<h2 id="Interfaces" name="Interfaces">インターフェイス</h2>

<p>主なインターフェイスは、<a href="/ja/docs/Web/API/PointerEvent/PointerEvent" title="PointerEvent() コンストラクタは、新しい信頼できない合成 PointerEvent オブジェクトのインスタンスを作成します。"><code>コンストラクタ</code></a>といくつかのイベントタイプおよび関連するグローバルイベントハンドラを持つ <a href="/ja/docs/Web/API/PointerEvent" title="PointerEvent インターフェイスは、接触点のジオメトリ、イベントを生成したデバイスタイプ、接触面に加えられた圧力の量など、ポインタによって生成された DOM イベントの状態を表します。"><code>PointerEvent</code></a> インターフェイスです。 この標準には、<a href="/ja/docs/Web/API/Element" title="Element は Document の中にあるすべての要素が継承する、もっとも一般的な基底クラスです。このインターフェイスは、すべての種類の要素に共通するメソッドとプロパティを記述するだけのものです。多くの具体的なクラスが Element を継承します。"><code>Element</code></a> インターフェイスと <a href="/ja/docs/Web/API/Navigator" title="Navigator インターフェイスは、ユーザーエージェントの状態や身元情報を表します。スクリプトからその情報を問い合わる、および活動を続けるためにそれら自体を登録することができます。"><code>Navigator</code></a> インターフェイスの拡張も含まれています。 以下のサブセクションでは、各インターフェイスとプロパティについて簡単に説明します。</p>

<h3 id="PointerEvent_interface" name="PointerEvent_interface">PointerEvent インターフェイス</h3>

<p><a href="/ja/docs/Web/API/PointerEvent" title="PointerEvent インターフェイスは、接触点のジオメトリ、イベントを生成したデバイスタイプ、接触面に加えられた圧力の量など、ポインタによって生成された DOM イベントの状態を表します。"><code>PointerEvent</code></a> インターフェイスは、<a href="/ja/docs/Web/API/MouseEvent" title="MouseEvent インターフェイスは、ポインティングデバイス (マウスなど) によるユーザの対話によって発生したイベントを表します。このインターフェイスを使用する一般的なイベントとして click、dblclick、mouseup、mousedown があります。"><code>MouseEvent</code></a> インターフェイスを拡張したもので、次のプロパティがあります（それらはすべて<span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">読取専用 </span>です）。</p>

<ul>
 <li><a href="/ja/docs/Web/API/PointerEvent/pointerId"><code>pointerId</code></a> - イベントの原因となっているポインタの一意の識別子。</li>
 <li><a href="/ja/docs/Web/API/PointerEvent/width"><code>width</code></a> - ポインタの接触ジオメトリの幅（X 軸上の大きさ、CSS ピクセル単位）。</li>
 <li><a href="/ja/docs/Web/API/PointerEvent/height"><code>height</code></a> - ポインタの接触ジオメトリの高さ（Y 軸上の大きさ、CSS ピクセル単位）。</li>
 <li><a href="/ja/docs/Web/API/PointerEvent/pressure"><code>pressure</code></a> - 0 から 1 までの範囲のポインタ入力の正規化された圧力。 ここで、0 と 1 は、それぞれハードウェアが検出できる最小圧力と最大圧力を表します。</li>
 <li><a href="/ja/docs/Web/API/PointerEvent/tangentialPressure"><code>tangentialPressure</code></a> - ポインタ入力の正規化された接線圧力（バレル圧力またはシリンダー応力（cylinder stress）とも呼ばれます）は -1 から 1 の範囲で、0 はコントロールの中立位置です。</li>
 <li><a href="/ja/docs/Web/API/PointerEvent/tiltX"><code>tiltX</code></a> - Y-Z 平面と、ポインタ（ペン/スタイラスなど）の軸と Y 軸の両方を含む平面との間の平面角度（度単位で、-90 から 90 の範囲）。</li>
 <li><a href="/ja/docs/Web/API/PointerEvent/tiltY"><code>tiltY</code></a> - X-Z 平面と、ポインタ（ペン/スタイラスなど）の軸と X 軸の両方を含む平面との間の平面角度（度単位で、-90 から 90 の範囲）。</li>
 <li><a href="/ja/docs/Web/API/PointerEvent/twist"><code>twist</code></a> - ポインタ（ペン/スタイラスなど）の長軸を中心とした時計回りの回転の度数（0 から 359の範囲の値）。</li>
 <li><a href="/ja/docs/Web/API/PointerEvent/pointerType"><code>pointerType</code></a> - イベントの原因となったデバイスタイプ（マウス、ペン、タッチなど）を示します。</li>
 <li><a href="/ja/docs/Web/API/PointerEvent/isPrimary"><code>isPrimary</code></a> - ポインタがこのポインタタイプのプライマリポインタを表すかどうかを示します。</li>
</ul>

<h3 id="Event_types_and_Global_Event_Handlers" name="Event_types_and_Global_Event_Handlers">イベントタイプとグローバルイベントハンドラ</h3>

<p>ポインタイベントには10​​のイベントタイプがあり、そのうち7つはマウスイベントと同等の意味を持ちます（ダウン（<code>down</code>）、アップ（<code>up</code>）、移動（<code>move</code>）、オーバー（<code>over</code>）、アウト（<code>out</code>）、進入（<code>enter</code>）、離脱（<code>leave</code>））。 以下は、各イベントタイプとそれに関連する<a href="/ja/docs/Web/API/GlobalEventHandlers" title="GlobalEventHandlers ミックスインは、 HTMLElement や Document 、 Window といったインターフェイスに共通のイベントハンドラーを示します。"><code>グローバルイベントハンドラ</code></a>の簡単な説明です。</p>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">イベント</th>
   <th scope="col">イベントハンドラ</th>
   <th scope="col">説明</th>
  </tr>
  <tr>
   <td><code><a href="/ja/docs/Web/Reference/Events/pointerover">pointerover</a></code></td>
   <td><a href="/ja/docs/Web/API/GlobalEventHandlers/onpointerover"><code>onpointerover</code></a></td>
   <td>ポインタが要素の<a href="#term_hit_test">ヒットテスト</a>境界内に移動したときに発生します。</td>
  </tr>
  <tr>
   <td><code><a href="/ja/docs/Web/Reference/Events/pointerenter">pointerenter</a></code></td>
   <td><a href="/ja/docs/Web/API/GlobalEventHandlers/onpointerenter"><code>onpointerenter</code></a></td>
   <td>ポインタが要素またはその子孫の1つの<a href="#term_hit_test">ヒットテスト</a>境界内に移動したときに発生します。 これには、ホバーをサポートしていないデバイスからの <code>pointerdown</code> イベントの結果も含まれます（<code>pointerdown</code> を参照）。</td>
  </tr>
  <tr>
   <td><code><a href="/ja/docs/Web/Reference/Events/pointerdown">pointerdown</a></code></td>
   <td><a href="/ja/docs/Web/API/GlobalEventHandlers/onpointerdown"><code>onpointerdown</code></a></td>
   <td>ポインタが<em>アクティブボタン状態</em>になったときに発生します。</td>
  </tr>
  <tr>
   <td><code><a href="/ja/docs/Web/Reference/Events/pointermove">pointermove</a></code></td>
   <td><a href="/ja/docs/Web/API/GlobalEventHandlers/onpointermove"><code>onpointermove</code></a></td>
   <td>ポインタが座標を変更したときに発生します。 また、ポインタの状態の変化がこれ以外のイベントで報告できない場合もこのイベントが使われます。</td>
  </tr>
  <tr>
   <td><code><a href="/ja/docs/Web/Reference/Events/pointerup">pointerup</a></code></td>
   <td><a href="/ja/docs/Web/API/GlobalEventHandlers/onpointerup"><code>onpointerup</code></a></td>
   <td>ポインタが<em>アクティブボタン状態</em>でなくなったときに発生します。</td>
  </tr>
  <tr>
   <td><code><a href="/ja/docs/Web/Reference/Events/pointercancel">pointercancel</a></code></td>
   <td><a href="/ja/docs/Web/API/GlobalEventHandlers/onpointercancel"><code>onpointercancel</code></a></td>
   <td>ブラウザーは、ポインタがイベントを生成できなくなったと判断した場合（例えば、関連デバイスが無効になった場合）、このイベントを発生させます。</td>
  </tr>
  <tr>
   <td><code><a href="/ja/docs/Web/Reference/Events/pointerout">pointerout</a></code></td>
   <td><a href="/ja/docs/Web/API/GlobalEventHandlers/onpointerout"><code>onpointerout</code></a></td>
   <td>次のようないくつかの理由で発生します。 ポインタが要素の<a href="#term_hit_test">ヒットテスト</a>境界外に移動した。 ホバーをサポートしていないデバイスの <code>pointerup</code> イベントが発生した（<code>pointerup</code> を参照）。 <code>pointercancel</code> イベントの発生後（<code>pointercancel</code> を参照）。 ペン/スタイラスがデジタイザで検出可能なホバー範囲を離脱したとき。</td>
  </tr>
  <tr>
   <td><code><a href="/ja/docs/Web/Reference/Events/pointerleave">pointerleave</a></code></td>
   <td><a href="/ja/docs/Web/API/GlobalEventHandlers/onpointerleave"><code>onpointerleave</code></a></td>
   <td>ポインタが要素の<a href="#term_hit_test">ヒットテスト</a>境界外に移動したときに発生します。 ペンデバイスの場合、このイベントは、スタイラスがデジタイザで検出可能なホバー範囲を離脱したときに発生します。</td>
  </tr>
  <tr>
   <td><code><a href="/ja/docs/Web/Reference/Events/gotpointercapture">gotpointercapture</a></code></td>
   <td><a href="/ja/docs/Web/API/GlobalEventHandlers/ongotpointercapture"><code>ongotpointercapture</code></a></td>
   <td>要素がポインタキャプチャを受け取ったときに発生します。</td>
  </tr>
  <tr>
   <td><code><a href="/ja/docs/Web/Reference/Events/lostpointercapture">lostpointercapture</a></code></td>
   <td><a href="/ja/docs/Web/API/GlobalEventHandlers/onlostpointercapture"><code>onlostpointercapture</code></a></td>
   <td>ポインタに対するポインタキャプチャが解放された後に発生します。</td>
  </tr>
 </tbody>
</table>

<h3 id="Element_extensions" name="Element_extensions">Element の拡張</h3>

<p><a href="/ja/docs/Web/API/Element" title="Element は Document の中にあるすべての要素が継承する、もっとも一般的な基底クラスです。このインターフェイスは、すべての種類の要素に共通するメソッドとプロパティを記述するだけのものです。多くの具体的なクラスが Element を継承します。"><code>Element</code></a> インターフェイスには次の3つの拡張機能があります。</p>

<ul>
 <li><a href="/ja/docs/Web/API/Element/setPointerCapture"><code>setPointerCapture()</code></a> - このメソッドは、将来のポインタイベントの<em>キャプチャターゲット</em>として特定の要素を指定します。</li>
 <li><a href="/ja/docs/Web/API/Element/releasePointerCapture"><code>releasePointerCapture()</code></a> - このメソッドは、特定のポインタイベントに対して以前に設定された<em>ポインタキャプチャ</em>を解放（停止）します。</li>
</ul>

<h3 id="Navigator_extension" name="Navigator_extension">Navigator の拡張</h3>

<p><a href="/ja/docs/Web/API/Navigator/maxTouchPoints" title="Navigator インターフェイスの maxTouchPoints プロパティは読み取り専用で、現在の端末で対応している同時タッチコンタクト点の最大数を返します。"><code>Navigator.maxTouchPoints</code></a> プロパティは、任意の時点でサポートしている同時タッチポイントの最大数を決定するために使用します。</p>

<h2 id="Examples" name="Examples">例</h2>

<p>このセクションでは、ポインタイベントのインターフェイスを使用した基本的な使い方の例を紹介します。</p>

<h3 id="Registering_event_handlers" name="Registering_event_handlers">イベントハンドラの登録</h3>

<p>この例では、特定の要素のすべてのイベントタイプに対してハンドラを登録します。</p>

<pre class="brush: html">&lt;html&gt;
  &lt;script&gt;
    function over_handler(event) { }
    function enter_handler(event) { }
    function down_handler(event) { }
    function move_handler(event) { }
    function up_handler(event) { }
    function cancel_handler(event) { }
    function out_handler(event) { }
    function leave_handler(event) { }
    function gotcapture_handler(event) { }
    function lostcapture_handler(event) { }

    function init() {
      var el=document.getElementById(&quot;target&quot;);
      // ポインタイベントハンドラの登録
      el.onpointerover = over_handler;
      el.onpointerenter = enter_handler;
      el.onpointerdown = down_handler;
      el.onpointermove = move_handler;
      el.onpointerup = up_handler;
      el.onpointercancel = cancel_handler;
      el.onpointerout = out_handler;
      el.onpointerleave = leave_handler;
      el.gotpointercapture = gotcapture_handler;
      el.lostpointercapture = lostcapture_handler;
    }
  &lt;/script&gt;
  &lt;body onload=&quot;init();&quot;&gt;
    &lt;div id=&quot;target&quot;&gt; Touch me ... &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>

<h3 id="Event_properties" name="Event_properties">イベントのプロパティ</h3>

<p>この例では、タッチイベントのすべてのプロパティにアクセスする方法を示します。</p>

<pre class="brush: html">&lt;html&gt;
  &lt;script&gt;
    var id = -1;

    function process_id(event) {
      // イベントの識別子に基づいて、このイベントを処理する
    }
    function process_mouse(event) {
      // マウスポインタイベントを処理する
    }
    function process_pen(event) {
      // ペンポインタイベントを処理する
    }
    function process_touch(event) {
      // タッチポインタイベントを処理する
    }
    function process_tilt(tiltX, tiltY) {
      // 傾斜データハンドラ
    }
    function process_pressure(pressure) {
      // 圧力ハンドラ
    }
    function process_non_primary(event) {
      // 非プライマリハンドラ
    }

    function down_handler(ev) {
      // タッチポイントの接触面積を計算する
      var area = ev.width * ev.height;

      // キャッシュされた id とこのイベントの id を比較し、それに応じて処理する
      if (id == ev.identifier) process_id(ev);

      // 適切なポインタタイプのハンドラを呼び出す
      switch (ev.pointerType) {
        case &quot;mouse&quot;:
          process_mouse(ev);
          break;
        case &quot;pen&quot;:
          process_pen(ev);
          break;
        case &quot;touch&quot;:
          process_touch(ev);
          break;
        default:
          console.log(&quot;pointerType &quot; + ev.pointerType + &quot; はサポートしていません&quot;);
      }

      // 傾斜ハンドラを呼び出す
      if (ev.tiltX != 0 &amp;&amp; ev.tiltY != 0) process_tilt(ev.tiltX, ev.tiltY);

      // 圧力ハンドラを呼び出す
      process_pressure(ev.pressure);

      // このイベントがプライマリではない場合は、非プライマリハンドラを呼び出す
      if (!ev.isPrimary) process_non_primary(ev);
    }

    function init() {
      var el=document.getElementById(&quot;target&quot;);
      // pointerdown ハンドラの登録
      el.onpointerdown = down_handler;
    }
  &lt;/script&gt;
  &lt;body onload=&quot;init();&quot;&gt;
    &lt;div id=&quot;target&quot;&gt; Touch me ... &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>

<h2 id="Determining_the_Primary_Pointer" name="Determining_the_Primary_Pointer">プライマリポインタの決定</h2>

<p>シナリオによっては、複数のポインタ（例えば、タッチ画面とマウスの両方を備えたデバイス）やポインタが複数の接触点をサポートする（例えば、複数の指でのタッチをサポートするタッチ画面）ことがあります。 アプリは、<a href="/ja/docs/Web/API/PointerEvent/isPrimary" title="PointerEvent インターフェイスの isPrimary 読み取り専用プロパティは、イベントを作成したポインタデバイスがプライマリポインタであるかどうかを示します。"><code>isPrimary</code></a> プロパティを使用して、各ポインタタイプの<em>アクティブポインタ</em>のセットの中からマスターポインタを識別できます。 アプリがプライマリポインタのみをサポートしたい場合は、プライマリではないすべてのポインタイベントを無視できます。</p>

<p>マウスの場合、ポインタは1つだけなので、常にプライマリポインタになります。 タッチ入力の場合、他にアクティブなタッチがなかったときにユーザーが画面にタッチした場合、ポインタはプライマリと見なされます。 ペンとスタイラスの入力では、他のアクティブなペンが画面に接触していないときにユーザーのペンが最初に画面に接触した場合、ポインタはプライマリと見なされます。</p>

<h2 id="Determining_button_states" name="Determining_button_states">ボタンの状態の判断</h2>

<p>マウスやペンなどの一部のポインタデバイスは複数のボタンをサポートしており、ボタンの押下で<em>和音を弾く</em>ことができます。 すなわち、ポインタデバイス上の別のボタンが既に押されている間に、追加のボタンを押すことができます。 ボタンが押された状態を判断するために、ポインタイベントは（<a href="/ja/docs/Web/API/PointerEvent" title="PointerEvent インターフェイスは、接触点のジオメトリ、イベントを生成したデバイスタイプ、接触面に加えられた圧力の量など、ポインタによって生成された DOM イベントの状態を表します。"><code>PointerEvent</code></a> の継承元の）<a href="/ja/docs/Web/API/MouseEvent" title="MouseEvent インターフェイスは、ポインティングデバイス (マウスなど) によるユーザの対話によって発生したイベントを表します。このインターフェイスを使用する一般的なイベントとして click、dblclick、mouseup、mousedown があります。"><code>MouseEvent</code></a> インターフェイスの <a href="/ja/docs/Web/API/MouseEvent/button" title="読み取り専用プロパティ MouseEvent.button はイベントのトリガーとなったのがどのボタンが押されたのかを表します。"><code>button</code></a> プロパティおよび <a href="/ja/docs/Web/API/MouseEvent/buttons" title="この項目についての文書はまだ書かれていません。書いてみませんか？"><code>buttons</code></a> プロパティを使用します。 次の表は、さまざまなデバイスボタンの状態に対応する <code>button</code> および <code>buttons</code> の値を示しています。</p>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">デバイスボタンの状態</th>
   <th scope="col">button</th>
   <th scope="col">buttons</th>
  </tr>
  <tr>
   <td>最後のイベント以降、ボタンもタッチ/ペンの接触も変更されませんでした</td>
   <td>-1</td>
   <td>—</td>
  </tr>
  <tr>
   <td>ボタンを押さずにマウスを動かした、ボタンを押さずにホバー中にペンを動かした</td>
   <td>—</td>
   <td>0</td>
  </tr>
  <tr>
   <td>左マウス、タッチ接触、ペン接触</td>
   <td>0</td>
   <td>1</td>
  </tr>
  <tr>
   <td>中マウス</td>
   <td>1</td>
   <td>4</td>
  </tr>
  <tr>
   <td>右マウス、ペンのバレルボタン</td>
   <td>2</td>
   <td>2</td>
  </tr>
  <tr>
   <td>X1（戻る）マウス</td>
   <td>3</td>
   <td>8</td>
  </tr>
  <tr>
   <td>X2（進む）マウス</td>
   <td>4</td>
   <td>16</td>
  </tr>
  <tr>
   <td>ペンの消しゴムボタン</td>
   <td>5</td>
   <td>32</td>
  </tr>
 </tbody>
</table>

<div class="note notecard">
<p><code>button</code> プロパティは、ボタンの状態の変化を示していることに注意してください。 ただし、タッチの場合のように、1つのイベントに伴って複数のイベントが発生する場合は、それらはすべて同じ値になります。</p>
</div>

<h2 id="Pointer_capture" name="Pointer_capture">ポインタキャプチャ</h2>

<p>ポインタキャプチャでは、ポインタの位置での通常の<a href="#term_hit_test">ヒットテスト</a>ではなく、特定の<a href="/ja/docs/Web/API/PointerEvent" title="PointerEvent インターフェイスは、接触点のジオメトリ、イベントを生成したデバイスタイプ、接触面に加えられた圧力の量など、ポインタによって生成された DOM イベントの状態を表します。"><code>ポインタイベント</code></a>のイベントを特定の要素にターゲットしなおすことができます。 これは、ポインタデバイスの接触が要素から外れた場合でも、要素がポインタイベントを受信し続けるようにするために使用できます（例えば、スクロールで）。</p>

<p>次の例では、要素にポインタキャプチャを設定しています。</p>

<pre class="brush: html">&lt;html&gt;
&lt;script&gt;
  function downHandler(ev) {
    var el=document.getElementById(&quot;target&quot;);
    // 要素 &apos;target&apos; はそれ以上のイベントを受信/キャプチャします
    el.setPointerCapture(ev.pointerId);
  }

  function init() {
    var el=document.getElementById(&quot;target&quot;);
    el.onpointerdown = downHandler;
  }
&lt;/script&gt;
&lt;body onload=&quot;init();&quot;&gt;
  &lt;div id=&quot;target&quot;&gt; Touch me ... &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<p>次の例は、（<code><a href="/ja/docs/Web/Reference/Events/pointercancel" title="/ja/docs/Web/Reference/Events/pointercancel">pointercancel</a></code> イベントが発生したときに）ポインタキャプチャを解放しています。 <code><a href="/ja/docs/Web/Reference/Events/pointerup" title="/ja/docs/Web/Reference/Events/pointerup">pointerup</a></code> イベントや <code><a href="/ja/docs/Web/Reference/Events/pointercancel" title="/ja/docs/Web/Reference/Events/pointercancel">pointercancel</a></code> イベントが発生すると、ブラウザーはこれを自動的に行います。</p>

<pre class="brush: html">&lt;html&gt;
  &lt;script&gt;
    function downHandler(ev) {
      var el=document.getElementById(&quot;target&quot;);
      // 要素 &quot;target&quot; はそれ以上のイベントを受信/キャプチャします
      el.setPointerCapture(ev.pointerId);
    }

    function cancelHandler(ev) {
      var el=document.getElementById(&quot;target&quot;);
      // ポインタキャプチャを解放する
      el.releasePointerCapture(ev.pointerId);
    }

    function init() {
      var el=document.getElementById(&quot;target&quot;);
      // pointerdown と pointercancel のハンドラの登録
      el.onpointerdown = downHandler;
      el.onpointercancel = cancelHandler;
    }
  &lt;/script&gt;
  &lt;body onload=&quot;init();&quot;&gt;
    &lt;div id=&quot;target&quot;&gt; Touch me ... &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>

<h2 id="touch-action_property" name="touch-action_property">touch-action プロパティ</h2>

<p><a href="/ja/docs/Web/CSS/touch-action" title="CSS の touch-action プロパティは、タッチ画面のユーザーが要素のある領域をどのように操作できるか (例えば、ブラウザー内に組み込まれたパンまたはズーム機能) を設定します。"><code>touch-action</code></a> CSS プロパティは、ブラウザーがデフォルトの（<em>ネイティブな</em>）タッチの振る舞い（ズームやパンなど）を領域に適用するかどうかを指定するために使用します。 このプロパティは、置換されていないインライン要素、テーブル行、行グループ、テーブル列、および列グループを除くすべての要素に適用できます。</p>

<p><code>auto</code> の値は、ブラウザーがそのデフォルトのタッチの振る舞いを（指定された領域に）自由に適用できることを意味し、<code>none</code> の値はブラウザーのその領域に対するデフォルトのタッチの振る舞いを無効にします。 値 <code>pan-x</code> および <code>pan-y</code> は、指定された領域で始まるタッチがそれぞれ水平スクロールおよび垂直スクロール専用であることを意味します。 値 <code>manipulation</code> は、ブラウザーがその要素から始まるタッチをスクロールとズームのみを考慮していることを意味します。</p>

<p>次の例では、ブラウザーのデフォルトのタッチの振る舞いは <code>div</code> 要素に対して無効になります。</p>

<pre class="brush: html">&lt;html&gt;
  &lt;body&gt;
    &lt;div style=&quot;touch-action:none;&quot;&gt;Can&apos;t touch this ... &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>

<p>次の例では、一部の <code>button</code> 要素ではデフォルトのタッチの振る舞いが無効になります。</p>

<pre class="brush: css">button#tiny {
  touch-action: none;
}
</pre>

<p>次の例では、<code>target</code> 要素にタッチすると、水平方向にのみパンします。</p>

<pre class="brush: css">#target {
  touch-action: pan-x;
}
</pre>

<h2 id="Compatibility_with_mouse_events" name="Compatibility_with_mouse_events">マウスイベントとの互換性</h2>

<p>ポインタイベントのインターフェイスを使用すると、アプリはポインタ対応デバイスで高度なユーザーエクスペリエンスを作成できますが、現実での今日のウェブコンテンツの大部分はマウス入力でのみ機能するように設計されています。 その結果、ブラウザーがポインタイベントをサポートしていても、マウスのみの入力が直接変更せずにそのまま機能することを前提として、ブラウザーはマウスイベントを処理する必要があります。 理想的には、ポインタ対応アプリはマウス入力を明示的に処理する必要はありません。 ただし、ブラウザーはマウスイベントを処理する必要があるため、対処する必要がある互換性の問題がいくつかあるかもしれません。 このセクションでは、ポインタイベントとマウスイベントの相互作用、およびアプリ開発者への影響について説明します。</p>

<p>ブラウザーは、<em>マウスベースのコンテンツとの互換性のために、汎用ポインタ入力をマウスイベントにマッピングすることができます</em>。 このイベントのマッピングは、<em>互換性マウスイベント</em>と呼ばれます。 作成者は <code>pointerdown</code> イベントをキャンセルすることで特定の互換性マウスイベントの生成を防ぐことができますが、次の点に注意してください。</p>

<ul>
 <li>マウスイベントは、ポインタがダウンしているときにのみ防ぐことができます。</li>
 <li>ホバーしているポインタ（例えばボタンが押されていないマウス）は、それらのマウスイベントを防ぐことができません。</li>
 <li><code>mouseover</code>、<code>mouseout</code>、<code>mouseenter</code>、<code>mouseleave</code> の各イベントが防止されることはありません（ポインタがダウンしている場合でも）。</li>
</ul>

<h2 id="Best_practices" name="Best_practices">ベストプラクティス</h2>

<p>ポインタイベントを使用する際に考慮すべき、いくつかの<em>ベストプラクティス</em>は次のとおりです。</p>

<ul>
 <li>イベントハンドラで行われる作業量を最小限に抑えます。</li>
 <li>イベントハンドラを特定のターゲット要素に追加します（ドキュメント全体またはドキュメントツリーの上位のノードではなく）。</li>
 <li>ターゲット要素（ノード）は、（通常は指で触れた）最大接触表面積を収容するのに十分な大きさであるべきです。 ターゲット領域が小さすぎる場合、それに触れると隣接する要素に対して他のイベントが発生する可能性があります。</li>
</ul>

<h2 id="Implementation_and_deployment_status" name="Implementation_and_deployment_status">実装と展開の状態</h2>

<p><a href="https://caniuse.com/#feat=pointer">ポインタイベントのブラウザーの互換性のデータ</a>（英語）は、デスクトップブラウザーとモバイルブラウザーの間のポインタイベントのサポートが、Safari を除くほぼすべてで利用可能であることを示しています。</p>

<p><a href="https://w3c.github.io/pointerevents/">Pointer Events Level 2</a> 仕様の一部として、CSS の <a href="/ja/docs/Web/CSS/touch-action" title="CSS の touch-action プロパティは、タッチ画面のユーザーが要素のある領域をどのように操作できるか (例えば、ブラウザー内に組み込まれたパンまたはズーム機能) を設定します。"><code>touch-action</code></a> プロパティに新しい値が提案されていますが、現在これらの新しい値には実装サポートがありません。</p>

<h2 id="Demos_and_examples" name="Demos_and_examples">デモと例</h2>

<ul>
 <li><a href="http://patrickhlauke.github.io/touch/">タッチ/ポインタのテストとデモ</a>（Patrick H. Lauke 著、英語）</li>
</ul>

<h2 id="Community" name="Community">コミュニティ</h2>

<ul>
 <li><a href="https://github.com/w3c/pointerevents">ポインタイベントのワーキンググループ</a>（英語）</li>
 <li><a href="http://lists.w3.org/Archives/Public/public-pointer-events/">メールリスト</a>（英語）</li>
 <li><a href="irc://irc.w3.org:6667/">W3C の #pointerevents IRC チャンネル</a>（英語）</li>
</ul>

<h2 id="Related_topics_and_resources" name="Related_topics_and_resources">関連トピックとリソース</h2>

<ul>
 <li><a href="http://www.w3.org/TR/touch-events/">タッチイベント標準</a>（英語）</li>
</ul>
