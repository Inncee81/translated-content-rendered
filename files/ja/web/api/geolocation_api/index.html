---
title: 位置情報 API
slug: Web/API/Geolocation_API
tags:
  - Geolocation API
  - Guide
  - Intermediate
  - Overview
  - ガイド
  - 位置情報
  - 概要
translation_of: Web/API/Geolocation_API
---
<div><div class="secureContexts notecard"><p><strong>安全なコンテキスト用</strong><br>この機能は一部またはすべての<a href="#Browser_compatibility">対応しているブラウザー</a>において、<a href="/ja/docs/Web/Security/Secure_Contexts">安全なコンテキスト</a> (HTTPS) でのみ利用できます。</p></div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/ja/docs/Web/API/Geolocation_API">Geolocation API</a></strong></li><li class="toggle"><details open><summary>ガイド</summary><ol><li><a href="/ja/docs/Web/API/Geolocation_API/Using_the_Geolocation_API">位置情報 API の使用</a></li></ol></details></li><li class="toggle"><details open><summary>インターフェイス</summary><ol><li><a href="/ja/docs/Web/API/Geolocation"><code>Geolocation</code></a></li><li><a href="/ja/docs/Web/API/GeolocationCoordinates"><code>GeolocationCoordinates</code></a></li><li><a href="/ja/docs/Web/API/GeolocationPosition"><code>GeolocationPosition</code></a></li><li><a href="/ja/docs/Web/API/GeolocationPositionError"><code>GeolocationPositionError</code></a></li></ol></details></li><li class="toggle"><details open><summary>プロパティ</summary><ol><li><a href="/ja/docs/Web/API/Navigator/geolocation"><code>Navigator.geolocation</code></a></li></ol></details></li></ol></section></div>

<p><ruby>位置情報<rp> (</rp><rt>Geolocation</rt><rp>)</rp></ruby> API を使用すると、ユーザーが望む場合には、自分の位置情報をウェブアプリケーションに提供することができます。プライバシー上の理由から、ユーザーは位置情報を報告する許可を求められます。</p>

<p>Geolocation オブジェクトを使用する WebExtension では、マニフェストに <code>&quot;geolocation&quot;</code> パーミッションを追加しなければなりません。ユーザーのオペレーティングシステムは、最初に要求されたときに位置情報へのアクセスを許可するようにユーザーに促します。</p>

<h2 id="Concepts_and_usage" name="Concepts_and_usage">概念と使用方法</h2>

<p>ウェブアプリでユーザーの位置情報を取得したいと思うことはよくあります。例えば、ユーザーの位置を地図上にプロットしたり、ユーザーの位置に関連するパーソナライズされた情報を表示したりすることができます。</p>

<p>位置情報 APIは <a href="/ja/docs/Web/API/Navigator/geolocation"><code>navigator.geolocation</code></a> への呼び出しを介してアクセスします。これにより、ブラウザーはユーザーに自分の位置情報にアクセスする許可を要求します。ユーザーが許可すると、ブラウザーは端末上で利用可能な最良の機能を使用してこの情報にアクセスします (GPS など)。</p>

<p>開発者は、いくつかの異なる方法でこの位置情報にアクセスできるようになりました。</p>

<ul>
 <li><a href="/ja/docs/Web/API/Geolocation/getCurrentPosition"><code>Geolocation.getCurrentPosition()</code></a>: 端末の現在の位置を受け取ります。</li>
 <li><a href="/ja/docs/Web/API/Geolocation/watchPosition"><code>Geolocation.watchPosition()</code></a>: 端末の位置が変化するごとに自動的に呼び出され、更新された位置情報を返すハンドラー関数を登録します。</li>
</ul>

<p>どちらの場合も、メソッド呼び出しには最大3つの引数を取ります。</p>

<ul>
 <li>成功コールバック (必須): 位置情報の取得に成功した場合、このコールバックが <a href="/ja/docs/Web/API/GeolocationPosition"><code>GeolocationPosition</code></a> オブジェクトを唯一の引数として実行され、位置情報へのアクセスを提供します。</li>
 <li>エラーコールバック (オプション): 位置情報の検索に失敗した場合、このコールバックが <a href="/ja/docs/Web/API/GeolocationPositionError"><code>GeolocationPositionError</code></a> オブジェクトを唯一の引数として実行され、何が問題となったかに関するアクセス情報を提供します。</li>
 <li>位置データを取得するためのオプションを提供するオプションの <a href="/ja/docs/Web/API/PositionOptions"><code>PositionOptions</code></a> オブジェクト。</li>
</ul>

<p>位置情報の使用に関するさらなる情報は、<a href="/ja/docs/Web/API/Geolocation_API/Using_the_Geolocation_API">位置情報 API の使用</a>を参照してください。</p>

<h2 id="Interfaces" name="Interfaces">インターフェイス</h2>

<dl>
 <dt><a href="/ja/docs/Web/API/Geolocation"><code>Geolocation</code></a></dt>
 <dd>この API のメインクラスです。ユーザーの現在位置の取得、位置の変化の監視、および以前に設定した管理のクリアを行うメソッドが含まれています。</dd>
 <dt><a href="/ja/docs/Web/API/GeolocationPosition"><code>GeolocationPosition</code></a></dt>
 <dd>ユーザの位置を表します。 <code>GeolocationPosition</code> インスタンスは、 <a href="/ja/docs/Web/API/Geolocation"><code>Geolocation</code></a> に含まれるメソッドのいずれかの呼び出しが成功した場合に、成功コールバックの内部で返され、タイムスタンプと <a href="/ja/docs/Web/API/GeolocationCoordinates"><code>GeolocationCoordinates</code></a> オブジェクトのインスタンスが含まれます。</dd>
 <dt><a href="/ja/docs/Web/API/GeolocationCoordinates"><code>GeolocationCoordinates</code></a></dt>
 <dd>ユーザーの位置の座標を表します。 <code>GeolocationCoordinates</code> のインスタンスには、緯度、経度、その他の重要な関連情報が含まれています。</dd>
 <dt><a href="/ja/docs/Web/API/GeolocationPositionError"><code>GeolocationPositionError</code></a></dt>
 <dd><code>GeolocationPositionError</code> は、 <a href="/ja/docs/Web/API/Geolocation"><code>Geolocation</code></a> に含まれるメソッドのいずれかの呼び出しに失敗した場合、エラーコールバック内で返され、エラーコードとメッセージが含まれています。</dd>
 <dt><a href="/ja/docs/Web/API/Navigator/geolocation"><code>Navigator.geolocation</code></a></dt>
 <dd>API のエントリーポイント。 <a href="/ja/docs/Web/API/Geolocation"><code>Geolocation</code></a> オブジェクトのインスタンスを返し、そこから他のすべての機能にアクセスすることができます。</dd>
</dl>

<h2 id="Dictionaries" name="Dictionaries">辞書</h2>

<dl>
 <dt><a href="/ja/docs/Web/API/PositionOptions"><code>PositionOptions</code></a></dt>
 <dd><a href="/ja/docs/Web/API/Geolocation/getCurrentPosition"><code>Geolocation.getCurrentPosition()</code></a> と <a href="/ja/docs/Web/API/Geolocation/watchPosition"><code>Geolocation.watchPosition()</code></a> の引数として渡すオプションを含むオブジェクトを表します。</dd>
</dl>

<h2 id="Examples" name="Examples">例</h2>

<p>以下の例では、 Geolocation API はユーザーの経度と緯度を取得するために使用されます。成功した場合、その位置を表示する <code>openstreetmap.org</code> の URL の有効なハイパーリンクが表示されます。</p>

<div class="hidden">
<pre class="brush: css notranslate">body {
  padding: 20px;
  background-color:#ffffc9
}

button {
  margin: .5rem 0;
}
</pre>
</div>

<h3 id="HTML">HTML</h3>

<pre class="brush: html; notranslate">&lt;button id = &quot;find-me&quot;&gt;Show my location&lt;/button&gt;&lt;br/&gt;
&lt;p id = &quot;status&quot;&gt;&lt;/p&gt;
&lt;a id = &quot;map-link&quot; target=&quot;_blank&quot;&gt;&lt;/a&gt;
</pre>

<h3 id="JavaScript">JavaScript</h3>

<pre class="brush: js notranslate">function geoFindMe() {

  const status = document.querySelector(&apos;#status&apos;);
  const mapLink = document.querySelector(&apos;#map-link&apos;);

  mapLink.href = &apos;&apos;;
  mapLink.textContent = &apos;&apos;;

  function success(position) {
    const latitude  = position.coords.latitude;
    const longitude = position.coords.longitude;

    status.textContent = &apos;&apos;;
    mapLink.href = `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`;
    mapLink.textContent = `Latitude: ${latitude} °, Longitude: ${longitude} °`;
  }

  function error() {
    status.textContent = &apos;Unable to retrieve your location&apos;;
  }

  if(!navigator.geolocation) {
    status.textContent = &apos;Geolocation is not supported by your browser&apos;;
  } else {
    status.textContent = &apos;Locating…&apos;;
    navigator.geolocation.getCurrentPosition(success, error);
  }

}

document.querySelector(&apos;#find-me&apos;).addEventListener(&apos;click&apos;, geoFindMe);
</pre>

<h3 id="Result" name="Result">結果</h3>

<p><iframe class="live-sample-frame sample-code-frame" frameborder="0" height="150" id="frame_Examples" src="https://mdn.mozillademos.org/ja/docs/Web/API/Geolocation_API/Using_the_Geolocation_API%24samples/Examples?revision=1636053" width="350"></iframe></p>

<h2 id="Specifications" name="Specifications">仕様書</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">仕様書</th>
   <th scope="col">状態</th>
   <th scope="col">備考</th>
  </tr>
  <tr>
   <td><a class="external" href="https://w3c.github.io/geolocation-api/" hreflang="en" lang="en">Geolocation API</a></td>
   <td><span class="spec-REC">勧告</span></td>
   <td></td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility" name="Browser_compatibility">ブラウザーの互換性</h2>

<div class="bc-data" id="bcd:api.Geolocation"></div>

<h3 id="Availability" name="Availability">可用性</h3>

<p>WiFi ベースの測位は Google が提供することが多いため、中国ではバニラの位置情報 API が利用できない場合があります。 <a href="http://lbsyun.baidu.com/index.php?title=jspopular/guide/geolocation">Baidu</a>, <a href="https://lbs.amap.com/api/javascript-api/guide/services/geolocation#geolocation">Autonavi</a>, <a href="http://lbs.qq.com/tool/component-geolocation.html">Tencent</a> などの地域ののサードパーティプロバイダを使用することができます。これらのサービスは、ユーザーの IP アドレスおよび/またはローカルアプリを使用して、より高度な位置情報を提供します。</p>

<h2 id="See_also" name="See_also">関連情報</h2>

<ul>
 <li><a href="/ja/docs/Web/API/Geolocation_API/Using_the_Geolocation_API">Using the Geolocation API</a></li>
 <li><a href="https://www.w3.org/TR/geolocation-API/" rel="external">Geolocation API on w3.org</a></li>
 <li><a href="https://hacks.mozilla.org/2013/10/who-moved-my-geolocation/">Who moved my geolocation?</a> (Hacks blog)</li>
</ul>
