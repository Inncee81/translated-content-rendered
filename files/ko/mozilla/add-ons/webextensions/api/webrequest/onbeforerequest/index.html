---
title: webRequest.onBeforeRequest
slug: Mozilla/Add-ons/WebExtensions/API/webRequest/onBeforeRequest
translation_of: Mozilla/Add-ons/WebExtensions/API/webRequest/onBeforeRequest
---
<div><section class="Quick_links" id="Quick_Links">
  <ol>
    <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions"><strong>브라우저 확장 기능</strong></a></li>
    <li class="toggle">
      <details>
        <summary>시작하기</summary>
        <ol>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions">확장 기능이 무엇인가요?</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension">첫 번째 확장 기능</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension">두 번째 확장 기능</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension">확장 기능의 구조</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Examples">확장 기능 예시</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/What_next_">다음은 무엇인가요?</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>개념</summary>
        <ol>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs">JavaScript API 사용하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Content_scripts">컨텐츠 스크립트</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Match_patterns">일치 패턴</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Working_with_files">파일 작업</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Internationalization">국제화</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy">컨텐츠 보안 정책</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Native_messaging">네이티브 메시징</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Differences_between_API_implementations">API 구현간의 차이점</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities">Chrome 비호환성</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>사용자 인터페이스</summary>
        <ol>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface">사용자 인터페이스</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action">도구 모음 버튼</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions">주소 표시줄 버튼</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars">사이드바</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items">컨텍스트 메뉴 항목</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages">옵션 페이지</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages">확장 기능 페이지</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications">알림</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox">주소 표시줄 제안</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels">개발자 도구 패널</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>방법</summary>
        <ol>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests">HTTP 요청 가로채기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page">웹 페이지 수정하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page">외부 컨텐츠 삽입하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts">Share objects with page scripts</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar">도구 모음에 버튼 추가하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page">설정 페이지 구현하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API">Tabs API 사용하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API">Bookmarks API 사용하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API">Cookies API 사용하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities">contextual identities 사용하기</a></li>
          <li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Build_a_cross_browser_extension">Build a cross-browser extension</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators">Firefox의 차별화</a></summary>
      </details>
    </li>
    <li class="toggle">
      <details open>
        <summary>JavaScript APIs</summary>
        <ol><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs">Browser support for JavaScript APIs</a></li><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/browsingData">browsingData</a></li><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts">contentScripts</a></li><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/contextMenus">contextMenus</a></li><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/pageAction">pageAction</a></li><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/storage">storage</a></li><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/tabs">tabs</a></li><li class="webextension-api-sidebar"><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/webRequest">webRequest</a><ol></ol></li></ol>
      </details>
    </li>
    <li class="toggle">
      <details>
      <summary>Manifest 키</summary>
      <ol><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts">content_scripts</a></li><li><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action">page_action</a></li></ol>
      </details>
    </li>
     <li class="toggle">
      <details>
        <summary>Extension Workshop</summary>
        <ol>
          <li><a href="https://extensionworkshop.com/documentation/develop/">Develop</a></li>
          <li><a href="https://extensionworkshop.com/documentation/publish/">Publish</a></li>
          <li><a href="https://extensionworkshop.com/documentation/manage/">Manage</a></li>
          <li><a href="https://extensionworkshop.com/documentation/enterprise/">Enterprise</a></li>
        </ol>
      </details>
    </li>
    <li><a href="/ko/docs/Mozilla/Add-ons/Contact_us"><strong>연락하기</strong></a></li>
    <li class="toggle">
      <details>
        <summary>채널</summary>
        <ol>
          <li><a href="https://blog.mozilla.org/addons">부가 기능 블로그</a></li>
          <li><a href="https://discourse.mozilla.org/c/add-ons">부가 기능 포럼</a></li>
          <li><a href="https://chat.mozilla.org/#/room/%23addons:mozilla.org">Add-ons chat</a></li>
        </ol>
      </details>
    </li>
  </ol>
</section></div>

<p>This event is triggered when a request is about to be made, and before headers are available. This is a good place to listen if you want to cancel or redirect the request.</p>

<p>To cancel or redirect the request, first include <code>&quot;blocking&quot;</code> in the <code>extraInfoSpec</code> array argument to <code>addListener()</code>. Then, in the listener function, return a <a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/BlockingResponse" title="The documentation about this has not yet been written; please consider contributing!"><code>BlockingResponse</code></a> object, setting the appropriate property:</p>

<ul>
 <li>to cancel the request, include a property <code>cancel</code> with the value <code>true</code>.</li>
 <li>to redirect the request, include a property <code>redirectUrl</code> with the value set to the URL to which you want to redirect.</li>
</ul>

<p>From Firefox 52 onwards, instead of returning <code>BlockingResponse</code>, the listener can return a <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></code> which is resolved with a <code>BlockingResponse</code>. This enables the listener to process the request asynchronously.</p>

<p>If you use <code>&quot;blocking&quot;</code>, you must have the <a href="/en-US/Add-ons/WebExtensions/manifest.json/permissions#API_permissions">&quot;webRequestBlocking&quot; API permission</a> in your manifest.json.</p>

<h2 id="문법">문법</h2>

<pre class="syntaxbox brush:js notranslate">browser.webRequest.onBeforeRequest.addListener(
  listener,             // function
  filter,               //  object
  extraInfoSpec         //  optional array of strings
)
browser.webRequest.onBeforeRequest.removeListener(listener)
browser.webRequest.onBeforeRequest.hasListener(listener)
</pre>

<p>Events have three functions:</p>

<dl>
 <dt><code>addListener(callback, filter, extraInfoSpec)</code></dt>
 <dd>Adds a listener to this event.</dd>
 <dt><code>removeListener(listener)</code></dt>
 <dd>Stop listening to this event. The <code>listener</code> argument is the listener to remove.</dd>
 <dt><code>hasListener(listener)</code></dt>
 <dd>Check whether <code>listener</code> is registered for this event. Returns <code>true</code> if it is listening, <code>false</code> otherwise.</dd>
</dl>

<h2 id="리스너_등록_문법">리스너 등록 문법</h2>

<h3 id="Parameters">Parameters</h3>

<dl>
 <dt><code>callback</code></dt>
 <dd>
 <p>Function that will be called when this event occurs. The function will be passed the following arguments:</p>

 <dl class="reference-values">
  <dt><code>details</code></dt>
  <dd><a href="#details"><code>object</code></a>. Details about the request. See <code><a href="#details">details</a></code> below.</dd>
 </dl>

 <p>Returns: <a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/BlockingResponse" title="The documentation about this has not yet been written; please consider contributing!"><code>webRequest.BlockingResponse</code></a>. If <code>&quot;blocking&quot;</code> is specified in the <code>extraInfoSpec</code> parameter, the event listener should return a <code>BlockingResponse</code> object, and can set either its <code>cancel</code> or its <code>redirectUrl</code> properties. From Firefox 52 onwards, instead of returning <code>BlockingResponse</code>, the listener can return a <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></code> which is resolved with a <code>BlockingResponse</code>. This enables the listener to process the request asynchronously.</p>
 </dd>
 <dt><code>filter</code></dt>
 <dd><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/RequestFilter" title="The documentation about this has not yet been written; please consider contributing!"><code>webRequest.RequestFilter</code></a>. A filter that restricts the events that will be sent to this listener.</dd>
 <dt><code>extraInfoSpec</code><span class="optional optionalInline notecard inline">Optional</span></dt>
 <dd><code>array</code> of <code>string</code>. <span class="im">Extra options for the event. You can pass any of the following values:</span></dd>
 <dd>
 <ul>
  <li><code>&quot;blocking&quot;</code>: make the request synchronous, so you can cancel or redirect the request</li>
  <li><span class="im"><code>&quot;requestBody&quot;</code>: include <code>requestBody</code> in the <code>details</code> object passed to the listener</span></li>
 </ul>
 </dd>
</dl>

<h2 id="추가적인_객체">추가적인 객체</h2>

<h3 id="details">details</h3>

<dl class="reference-values">
 <dt><code>requestId</code></dt>
 <dd><code>string</code>. The ID of the request. Request IDs are unique within a browser session, so you can use them to relate different events associated with the same request.</dd>
 <dt><code>url</code></dt>
 <dd><code>string</code>. Target of the request.</dd>
 <dt><code>method</code></dt>
 <dd><code>string</code>. Standard HTTP method: for example, &quot;GET&quot; or &quot;POST&quot;.</dd>
 <dt><code>frameId</code></dt>
 <dd><code>integer</code>. Zero if the request happens in the main frame; a positive value is the ID of a subframe in which the request happens. If the document of a (sub-)frame is loaded (<code>type</code> is <code>main_frame</code> or <code>sub_frame</code>), <code>frameId</code> indicates the ID of this frame, not the ID of the outer frame. Frame IDs are unique within a tab.</dd>
 <dt><code>parentFrameId</code></dt>
 <dd><code>integer</code>. ID of the frame that contains the frame which sent the request. Set to -1 if no parent frame exists.</dd>
 <dt><code>requestBody</code><span class="optional optionalInline notecard inline">Optional</span></dt>
 <dd><code>object</code>. Contains the HTTP request body data. Only provided if <code>extraInfoSpec</code> contains <code>&quot;requestBody&quot;</code>.</dd>
 <dd>
 <dl class="reference-values">
  <dt><code>error</code><span class="optional optionalInline notecard inline">Optional</span></dt>
  <dd><code>string</code>. This is set if any errors were encountered when obtaining request body data.</dd>
  <dt><code>formData</code><span class="optional optionalInline notecard inline">Optional</span></dt>
  <dd><code>object</code>. This object is present if the request method is POST and the body is a sequence of key-value pairs encoded in UTF-8 as either &quot;multipart/form-data&quot; or &quot;application/x-www-form-urlencoded&quot;.</dd>
  <dd>It is a dictionary in which each key contains the list of all values for that key. For example: <code>{&apos;key&apos;: [&apos;value1&apos;, &apos;value2&apos;]}</code>. If the data is of another media type, or if it is malformed, the object is not present.</dd>
  <dt><code>raw</code><span class="optional optionalInline notecard inline">Optional</span></dt>
  <dd><code>array</code> of <code><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/UploadData" title="The documentation about this has not yet been written; please consider contributing!"><code>webRequest.UploadData</code></a></code>. If the request method is PUT or POST, and the body is not already parsed in <code>formData</code>, then this array contains the unparsed request body elements.</dd>
 </dl>
 </dd>
 <dt><code>tabId</code></dt>
 <dd><code>integer</code>. ID of the tab in which the request takes place. Set to -1 if the request isn&apos;t related to a tab.</dd>
 <dt><code>type</code></dt>
 <dd><a href="/ko/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/ResourceType" title="The documentation about this has not yet been written; please consider contributing!"><code>webRequest.ResourceType</code></a>. The type of resource being requested: for example, &quot;image&quot;, &quot;script&quot;, &quot;stylesheet&quot;.</dd>
 <dt><code>timeStamp</code></dt>
 <dd><code>number</code>. The time when this event fired, in <a href="https://en.wikipedia.org/wiki/Unix_time">milliseconds since the epoch</a>.</dd>
 <dt><code>originUrl</code></dt>
 <dd><code>string</code>. URL of the resource that triggered this request. Note that this may not be the same as the URL of the page into which the requested resource will be loaded. For example, if a document triggers a load in a different window through the <a href="/en-US/docs/Web/HTML/Element/a#attr-target">target attribute of a link</a>, or a CSS document includes an image using the <a href="/en-US/docs/Web/CSS/url#The_url()_functional_notation"><code>url()</code> functional notation</a>, then this will be the URL of the original document or of the CSS document, respectively.</dd>
</dl>

<h2 id="브라우저_호환성">브라우저 호환성</h2>

<p class="hidden">The compatibility table in this page is generated from structured data. If you&apos;d like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</p>

<div class="bc-data" id="bcd:webextensions.api.webRequest.onBeforeRequest"></div>

<h2 id="예제">예제</h2>

<p>This code logs the URL for every resource requested which matches the <a href="/en-US/Add-ons/WebExtensions/Match_patterns#&lt;all_urls&gt;">&lt;all_urls&gt;</a> pattern:</p>

<pre class="brush: js notranslate">function logURL(requestDetails) {
  console.log(&quot;Loading: &quot; + requestDetails.url);
}

browser.webRequest.onBeforeRequest.addListener(
  logURL,
  {urls: [&quot;&lt;all_urls&gt;&quot;]}
);</pre>

<p>This code cancels requests for images that are made to URLs under &quot;https://mdn.mozillademos.org/&quot; (to see the effect, visit any page on MDN that contains images, such as <a href="/en-US/docs/Mozilla/Firefox/Developer_Edition">Firefox Developer Edition</a>):</p>

<pre class="brush: js notranslate">// match pattern for the URLs to redirect
var pattern = &quot;https://mdn.mozillademos.org/*&quot;;

// cancel function returns an object
// which contains a property `cancel` set to `true`
function cancel(requestDetails) {
  console.log(&quot;Canceling: &quot; + requestDetails.url);
  return {cancel: true};
}

// add the listener,
// passing the filter argument and &quot;blocking&quot;
browser.webRequest.onBeforeRequest.addListener(
  cancel,
  {urls: [pattern], types: [&quot;image&quot;]},
  [&quot;blocking&quot;]
);
</pre>

<p>This code replaces, by redirection, all network requests for images that are made to URLs under &quot;https://mdn.mozillademos.org/&quot; (to see the effect, visit any page on MDN that contains images, such as <a href="/en-US/docs/Mozilla/Firefox/Developer_Edition">Firefox Developer Edition</a>):</p>

<pre class="brush: js notranslate">// match pattern for the URLs to redirect
var pattern = &quot;https://mdn.mozillademos.org/*&quot;;

// redirect function
// returns an object with a property `redirectURL`
// set to the new URL
function redirect(requestDetails) {
  console.log(&quot;Redirecting: &quot; + requestDetails.url);
  return {
    redirectUrl: &quot;https://38.media.tumblr.com/tumblr_ldbj01lZiP1qe0eclo1_500.gif&quot;
  };
}

// add the listener,
// passing the filter argument and &quot;blocking&quot;
browser.webRequest.onBeforeRequest.addListener(
  redirect,
  {urls:[pattern], types:[&quot;image&quot;]},
  [&quot;blocking&quot;]
);</pre>

<p>This code is exactly like the previous example, except that the listener handles the request asynchronously. It returns a <code><a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></code> that sets a timer, and resolves with the redirect URL when the timer expires:</p>

<pre class="brush: js notranslate">// match pattern for the URLs to redirect
var pattern = &quot;https://mdn.mozillademos.org/*&quot;;

// URL we will redirect to
var redirectUrl = &quot;https://38.media.tumblr.com/tumblr_ldbj01lZiP1qe0eclo1_500.gif&quot;;

// redirect function returns a Promise
// which is resolved with the redirect URL when a timer expires
function redirectAsync(requestDetails) {
  console.log(&quot;Redirecting async: &quot; + requestDetails.url);
  var asyncCancel = new Promise((resolve, reject) =&gt; {
    window.setTimeout(() =&gt; {
      resolve({redirectUrl});
    }, 2000);
  });

  return asyncCancel;
}

// add the listener,
// passing the filter argument and &quot;blocking&quot;
browser.webRequest.onBeforeRequest.addListener(
  redirectAsync,
  {urls: [pattern], types: [&quot;image&quot;]},
  [&quot;blocking&quot;]
);</pre>

<h3 id="Example_extensions">Example extensions</h3><ul><li><a href="https://github.com/mdn/webextensions-examples/tree/master/http-response">http-response</a></li></ul>

<div class="note notecard"><strong>Acknowledgements</strong>

<p>This API is based on Chromium&apos;s <a href="https://developer.chrome.com/extensions/webRequest#event-onBeforeRequest"><code>chrome.webRequest</code></a> API. This documentation is derived from <a href="https://chromium.googlesource.com/chromium/src/+/master/extensions/common/api/web_request.json"><code>web_request.json</code></a> in the Chromium code.</p>

<p>Microsoft Edge compatibility data is supplied by Microsoft Corporation and is included here under the Creative Commons Attribution 3.0 United States License.</p>
</div>

<div class="hidden">
<pre class="notranslate">// Copyright 2015 The Chromium Authors. All rights reserved.
//
// Redistribution and use in source and binary forms, with or without
// modification, are permitted provided that the following conditions are
// met:
//
//    * Redistributions of source code must retain the above copyright
// notice, this list of conditions and the following disclaimer.
//    * Redistributions in binary form must reproduce the above
// copyright notice, this list of conditions and the following disclaimer
// in the documentation and/or other materials provided with the
// distribution.
//    * Neither the name of Google Inc. nor the names of its
// contributors may be used to endorse or promote products derived from
// this software without specific prior written permission.
//
// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
// &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
</pre>
</div>
