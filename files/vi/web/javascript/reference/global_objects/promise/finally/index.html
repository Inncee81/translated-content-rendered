---
title: Promise.prototype.finally()
slug: Web/JavaScript/Reference/Global_Objects/Promise/finally
translation_of: Web/JavaScript/Reference/Global_Objects/Promise/finally
---
<div><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects">Standard built-in objects</a></strong></li><li><strong><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a></strong></li><li data-default-state="open"><a href="#"><strong>Methods</strong></a><ol><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/all"><code>Promise.all()</code></a></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/allSettled"><code>Promise.allSettled()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/allSettled$translate" style="opacity: 0.5;">[Translate]</a></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/any"><code>Promise.any()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/any$translate" style="opacity: 0.5;">[Translate]</a></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch"><code>Promise.prototype.catch()</code></a></li><li><em><code>Promise.prototype.finally()</code></em></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/then"><code>Promise.prototype.then()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/then$translate" style="opacity: 0.5;">[Translate]</a></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/race"><code>Promise.race()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/race$translate" style="opacity: 0.5;">[Translate]</a></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/reject"><code>Promise.reject()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/reject$translate" style="opacity: 0.5;">[Translate]</a></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/resolve"><code>Promise.resolve()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/resolve$translate" style="opacity: 0.5;">[Translate]</a></li></ol></li><li><strong>Inheritance:</strong></li><li><strong><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function"><code>Function</code></a></strong></li><li><a href="#"><strong>Properties</strong></a><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/arguments"><code>Function.arguments</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/arguments$translate" style="opacity: 0.5;">[Translate]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/caller"><code>Function.caller</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/caller$translate" style="opacity: 0.5;">[Translate]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/displayName"><code>Function.displayName</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/displayName$translate" style="opacity: 0.5;">[Translate]</a></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/length"><code>Function.length</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/length$translate" style="opacity: 0.5;">[Translate]</a></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/name"><code>Function.name</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/name$translate" style="opacity: 0.5;">[Translate]</a></li></ol></li><li><a href="#"><strong>Methods</strong></a><ol><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/apply"><code>Function.prototype.apply()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/apply$translate" style="opacity: 0.5;">[Translate]</a></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/bind"><code>Function.prototype.bind()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/bind$translate" style="opacity: 0.5;">[Translate]</a></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/call"><code>Function.prototype.call()</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/toSource"><code>Function.prototype.toSource()</code></a></s></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/toString"><code>Function.prototype.toString()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function/toString$translate" style="opacity: 0.5;">[Translate]</a></li></ol></li><li><strong><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object"><code>Object</code></a></strong></li><li><a href="#"><strong>Properties</strong></a><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/proto"><code>Object.prototype.__proto__</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/proto$translate" style="opacity: 0.5;">[Translate]</a></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/constructor"><code>Object.prototype.constructor</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/constructor$translate" style="opacity: 0.5;">[Translate]</a></li></ol></li><li><a href="#"><strong>Methods</strong></a><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/__defineGetter__"><code>Object.prototype.__defineGetter__()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/__defineGetter__$translate" style="opacity: 0.5;">[Translate]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/__defineSetter__"><code>Object.prototype.__defineSetter__()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/__defineSetter__$translate" style="opacity: 0.5;">[Translate]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/__lookupGetter__"><code>Object.prototype.__lookupGetter__()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/__lookupGetter__$translate" style="opacity: 0.5;">[Translate]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/__lookupSetter__"><code>Object.prototype.__lookupSetter__()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/__lookupSetter__$translate" style="opacity: 0.5;">[Translate]</a></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty"><code>Object.prototype.hasOwnProperty()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty$translate" style="opacity: 0.5;">[Translate]</a></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/isPrototypeOf"><code>Object.prototype.isPrototypeOf()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/isPrototypeOf$translate" style="opacity: 0.5;">[Translate]</a></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/propertyIsEnumerable"><code>Object.prototype.propertyIsEnumerable()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/propertyIsEnumerable$translate" style="opacity: 0.5;">[Translate]</a></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/toLocaleString"><code>Object.prototype.toLocaleString()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/toLocaleString$translate" style="opacity: 0.5;">[Translate]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><span class="sidebar-icon"><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span></span><s class="obsoleteElement"><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/toSource"><code>Object.prototype.toSource()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/toSource$translate" style="opacity: 0.5;">[Translate]</a></s></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/toString"><code>Object.prototype.toString()</code></a></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/valueOf"><code>Object.prototype.valueOf()</code></a></li><li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf"><code>Object.setPrototypeOf()</code></a> <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf$translate" style="opacity: 0.5;">[Translate]</a></li></ol></li></ol></section></div>

<p>Phương thức <code><strong>finally()</strong></code> trả về một <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>. Một khi <em>promise</em> được thực hiện (<em>settle</em>), dù kết quả là <em>fulfilled</em> hay <em>rejected</em>, thì hàm <em>callback</em> đã chỉ định sẽ được thực thi. Đây là cách để làm cho một đoạn code phải được thực thi sau khi <code>Promise</code> hoàn thành, dù kết quả là fulfilled hay rejected.</p>

<p>Cách này giúp bạn tránh phải viết những dòng code trùng lặp giữa hai phương thức xử lý <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/then"><code>then()</code></a> và <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch"><code>catch()</code></a>.</p>

<h2 id="Syntax">Syntax</h2>

<pre class="syntaxbox notranslate"><var>p.finally(onFinally)</var>;

p.finally(function() {
   // settled (fulfilled or rejected)
});
</pre>

<h3 id="Parameters">Parameters</h3>

<dl>
 <dt><code>onFinally</code></dt>
 <dd>Một <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Function"><code>Function</code></a> được gọi khi <code>Promise</code> được thực hiện</dd>
</dl>

<h3 id="Return_value">Return value</h3>

<p>Return a <a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> whose <code>finally</code> handler is set to the specified function, <code>onFinally</code>.</p>

<h2 id="Description">Description</h2>

<p>Phương thức <code>finally()</code> hữu ích khi bạn muốn xử lý công việc sau khi promise được thực hiện.</p>

<p>Phương thức <code>finally()</code> cũng tương tự như việc gọi <code>.then(onFinally, onFinally)</code> , tuy nhiên có một số sự khác biệt:</p>

<ul>
 <li>Khi tạo một hàm inline, bạn có thể gán nó một lần, thay vì phải định nghĩa tới hai lần, hoặc phải tạo thêm biến cho nó.</li>
 <li>Một callback <code style>finally</code><span style> sẽ không nhận tham số nào, vì không có cách xác đáng nào để biết liệu promise đã fulfilled hay bị rejected. Bạn dùng tới hàm này trong trường hợp bạn không quan tâm đến kết quả khi fulfilled, hay lý do khi reject. Vậy nên, không dùng tới thì bạn không cần phải truyền vào.</span></li>
 <li>Không như <code>Promise.resolve(2).then(() =&gt; {}, () =&gt; {})</code> (sẽ được resolve với <code>undefined</code>), <code>Promise.resolve(2).finally(() =&gt; {})</code> sẽ được resolve với <code>2</code>.</li>
 <li>Tương tự, không như <code>Promise.reject(3).then(() =&gt; {}, () =&gt; {})</code> (sẽ được fulfill với <code>undefined</code>), <code>Promise.reject(3).finally(() =&gt; {})</code> sẽ bị reject với <code>3</code>.</li>
</ul>

<div class="note notecard">
<p><strong>Note:</strong> Một <code>throw</code> (hoặc trả về một promise bị reject) trong callback <code>finally</code> sẽ reject cái promise mới với lý do reject được chỉ định khi gọi <code>throw()</code>.</p>
</div>

<h2 id="Examples">Examples</h2>

<pre class="brush: js notranslate">let isLoading = true;

fetch(myRequest).then(function(response) {
    var contentType = response.headers.get(&quot;content-type&quot;);
    if(contentType &amp;&amp; contentType.includes(&quot;application/json&quot;)) {
      return response.json();
    }
    throw new TypeError(&quot;Oops, we haven&apos;t got JSON!&quot;);
  })
  .then(function(json) { /* process your JSON further */ })
  .catch(function(error) { console.log(error); })
  .finally(function() { isLoading = false; });

</pre>

<h2 id="Specifications">Specifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td><a href="https://github.com/tc39/proposal-promise-finally">TC39 proposal</a></td>
   <td>Stage 4</td>
   <td> </td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<p class="hidden">To contribute to this compatibility data, please write a pull request against this repository: <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a>.</p>

<div class="bc-data" id="bcd:javascript.builtins.Promise.finally"></div>

<h2 id="See_also">See also</h2>

<ul>
 <li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a></li>
 <li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/then"><code>Promise.prototype.then()</code></a></li>
 <li><a href="/vi/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch"><code>Promise.prototype.catch()</code></a></li>
</ul>
