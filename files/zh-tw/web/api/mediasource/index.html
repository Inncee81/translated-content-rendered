---
title: MediaSource
slug: Web/API/MediaSource
translation_of: Web/API/MediaSource
---
<section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-TW/docs/Web/API/Media_Source_Extensions_API">Media Source Extensions API</a></strong></li><li><strong><a href="/zh-TW/docs/Web/API/MediaSource"><code>MediaSource</code></a></strong></li><li class="toggle"><details open><summary>Constructor</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/zh-TW/docs/Web/API/MediaSource/MediaSource"><code>MediaSource()</code></a></li></ol></details></li><li class="toggle"><details open><summary>Properties</summary><ol><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/zh-TW/docs/Web/API/MediaSource/activeSourceBuffers"><code>activeSourceBuffers</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/zh-TW/docs/Web/API/MediaSource/duration"><code>duration</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/zh-TW/docs/Web/API/MediaSource/readyState"><code>readyState</code></a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/zh-TW/docs/Web/API/MediaSource/sourceBuffers"><code>sourceBuffers</code></a> <a href="/zh-TW/docs/Web/API/MediaSource/sourceBuffers$translate" style="opacity: 0.5;">[Translate]</a></li></ol></details></li><li class="toggle"><details open><summary>Methods</summary><ol><li><a href="/zh-TW/docs/Web/API/MediaSource/addSourceBuffer"><code>addSourceBuffer()</code></a> <a href="/zh-TW/docs/Web/API/MediaSource/addSourceBuffer$translate" style="opacity: 0.5;">[Translate]</a></li><li><a href="/zh-TW/docs/Web/API/MediaSource/clearLiveSeekableRange"><code>clearLiveSeekableRange()</code></a> <a href="/zh-TW/docs/Web/API/MediaSource/clearLiveSeekableRange$translate" style="opacity: 0.5;">[Translate]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/zh-TW/docs/Web/API/MediaSource/endOfStream"><code>endOfStream()</code></a> <a href="/zh-TW/docs/Web/API/MediaSource/endOfStream$translate" style="opacity: 0.5;">[Translate]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/zh-TW/docs/Web/API/MediaSource/isTypeSupported"><code>isTypeSupported()</code></a> <a href="/zh-TW/docs/Web/API/MediaSource/isTypeSupported$translate" style="opacity: 0.5;">[Translate]</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This is an experimental API that should not be used in production code."><i class="icon-beaker"> </i></span></span><a href="/zh-TW/docs/Web/API/MediaSource/removeSourceBuffer"><code>removeSourceBuffer()</code></a> <a href="/zh-TW/docs/Web/API/MediaSource/removeSourceBuffer$translate" style="opacity: 0.5;">[Translate]</a></li><li><a href="/zh-TW/docs/Web/API/MediaSource/setLiveSeekableRange"><code>setLiveSeekableRange()</code></a> <a href="/zh-TW/docs/Web/API/MediaSource/setLiveSeekableRange$translate" style="opacity: 0.5;">[Translate]</a></li></ol></details></li><li class="toggle"><details open><summary>Inheritance:</summary><ol><li><a href="/zh-TW/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li><li class="toggle"><details open><summary>Related pages for Media Source Extensions</summary><ol><li><a href="/zh-TW/docs/Web/API/HTMLVideoElement/getVideoPlaybackQuality"><code>HTMLVideoElement.getVideoPlaybackQuality()</code></a></li><li><a href="/zh-TW/docs/Web/API/SourceBuffer"><code>SourceBuffer</code></a></li><li><a href="/zh-TW/docs/Web/API/SourceBufferList"><code>SourceBufferList</code></a></li><li><a href="/zh-TW/docs/Web/API/TextTrack/sourceBuffer"><code>TextTrack.sourceBuffer</code></a></li><li><a href="/zh-TW/docs/Web/API/TrackDefault"><code>TrackDefault</code></a></li><li><a href="/zh-TW/docs/Web/API/TrackDefaultList"><code>TrackDefaultList</code></a></li><li><a href="/zh-TW/docs/Web/API/URL/createObjectURL"><code>URL.createObjectURL()</code></a></li><li><a href="/zh-TW/docs/Web/API/VideoPlaybackQuality"><code>VideoPlaybackQuality</code></a></li><li><a href="/zh-TW/docs/Web/API/VideoTrack/sourceBuffer"><code>VideoTrack.sourceBuffer</code></a></li></ol></details></li></ol></section><div class="experimental indicator-warning notecard">
    <p><strong>這是一個實驗中的功能</strong><br>此功能在某些瀏覽器尚在開發中，請參考<a href="#Browser_compatibility">兼容表格</a>以得到不同瀏覽器用的前輟。</p>
</div>

<p><a href="/en-US/docs/Web/API/Media_Source_Extensions_API">Media Source Extensions API</a> 的 <strong><code>MediaSource</code></strong> 介面代表 <a href="/zh-TW/docs/Web/API/HTMLMediaElement"><code>HTMLMediaElement</code></a> 物件的媒體資料來源。一個 <code>MediaSource</code> 物件可以被附加到一個 <a href="/zh-TW/docs/Web/API/HTMLMediaElement"><code>HTMLMediaElement</code></a> 以被用戶代理 (user agent) 播放。</p>

<div class="hidden" id="inheritance_diagram">

<pre class="brush: html notranslate">  &lt;div id=&quot;interfaceDiagram&quot; style=&quot;display: inline-block; position: relative; width: 100%; padding-bottom: 11.666666666666666%; vertical-align: middle; overflow: hidden;&quot;&gt;&lt;svg style=&quot;display: inline-block; position: absolute; top: 0; left: 0;&quot; viewbox=&quot;-50 0 600 70&quot; preserveAspectRatio=&quot;xMinYMin meet&quot;&gt;&lt;a xlink:href=&quot;https://developer.mozilla.org/zh-TW/docs/Web/API/EventTarget&quot; target=&quot;_top&quot;&gt;&lt;rect x=&quot;1&quot; y=&quot;1&quot; width=&quot;110&quot; height=&quot;50&quot; fill=&quot;#fff&quot; stroke=&quot;#D4DDE4&quot; stroke-width=&quot;2px&quot; /&gt;&lt;text  x=&quot;56&quot; y=&quot;30&quot; font-size=&quot;12px&quot; font-family=&quot;Consolas,Monaco,Andale Mono,monospace&quot; fill=&quot;#4D4E53&quot; text-anchor=&quot;middle&quot; alignment-baseline=&quot;middle&quot;&gt;EventTarget&lt;/text&gt;&lt;/a&gt;&lt;polyline points=&quot;111,25  121,20  121,30  111,25&quot; stroke=&quot;#D4DDE4&quot; fill=&quot;none&quot;/&gt;&lt;line x1=&quot;121&quot; y1=&quot;25&quot; x2=&quot;151&quot; y2=&quot;25&quot; stroke=&quot;#D4DDE4&quot;/&gt;&lt;a xlink:href=&quot;https://developer.mozilla.org/zh-TW/docs/Web/API/MediaSource&quot; target=&quot;_top&quot;&gt;&lt;rect x=&quot;151&quot; y=&quot;1&quot; width=&quot;110&quot; height=&quot;50&quot; fill=&quot;#F4F7F8&quot; stroke=&quot;#D4DDE4&quot; stroke-width=&quot;2px&quot; /&gt;&lt;text  x=&quot;206&quot; y=&quot;30&quot; font-size=&quot;12px&quot; font-family=&quot;Consolas,Monaco,Andale Mono,monospace&quot; fill=&quot;#4D4E53&quot; text-anchor=&quot;middle&quot; alignment-baseline=&quot;middle&quot;&gt;MediaSource&lt;/text&gt;&lt;/a&gt;&lt;/svg&gt;&lt;/div&gt;
</pre>

<pre class="brush: css notranslate">  a:hover text { fill: #0095DD; pointer-events: all;}
</pre>

</div>

<iframe class="live-sample-frame inheritance-diagram-frame" frameborder="0" height="70" id="frame_inheritance_diagram" src="https://mdn.mozillademos.org/zh-TW/docs/Web/API/MediaSource$samples/inheritance_diagram?revision=1630922" width="600"></iframe>

<h2 id="建構子_Constructor">建構子 (Constructor)</h2>

<dl>
 <dt><a href="/zh-TW/docs/Web/API/MediaSource/MediaSource"><code>MediaSource()</code></a></dt>
 <dd>建構且回傳一個新的 <code>MediaSource</code> 物件但不與任何來源緩衝 (source buffers) 關聯 (associate)。</dd>
</dl>

<h2 id="屬性_Properties">屬性 (Properties)</h2>

<dl>
 <dt><a href="/zh-TW/docs/Web/API/MediaSource/sourceBuffers"><code>MediaSource.sourceBuffers</code></a> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">Read only </span></dt>
 <dd>回傳一個含有與此 <code>MediaSource</code> 關聯的 <a href="/zh-TW/docs/Web/API/SourceBuffer"><code>SourceBuffer</code></a> 物件串列的 <a href="/zh-TW/docs/Web/API/SourceBufferList"><code>SourceBufferList</code></a> 物件。</dd>
 <dt><a href="/zh-TW/docs/Web/API/MediaSource/activeSourceBuffers"><code>MediaSource.activeSourceBuffers</code></a> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">Read only </span></dt>
 <dd>回傳一個 <a href="/zh-TW/docs/Web/API/SourceBufferList"><code>SourceBufferList</code></a> 物件，含有 <a href="/zh-TW/docs/Web/API/SourceBuffers"><code>SourceBuffers</code></a> 的子集合 <a href="/zh-TW/docs/Web/API/SourceBuffer"><code>SourceBuffer</code></a> 物件 — 物件的串列提供被選擇的影片軌 (video track), 啟用的音軌 (audio tracks), 以及顯示或隱藏的字軌。</dd>
 <dt><a href="/zh-TW/docs/Web/API/MediaSource/readyState"><code>MediaSource.readyState</code></a> <span class="readOnly readOnlyInline notecard inline" title="This value may not be changed.">Read only </span></dt>
 <dd>回傳一個列舉類型表示目前 <code>MediaSource</code> 的狀態：沒有附加到媒體元件 (<code>closed</code>)，已經附加且可以接收 <a href="/zh-TW/docs/Web/API/SourceBuffer"><code>SourceBuffer</code></a> 物件 (<code>open</code>)，已經附加但是串流已經經由 <a href="/zh-TW/docs/Web/API/MediaSource/endOfStream"><code>MediaSource.endOfStream()</code></a> 結束 (<code>ended</code>)。</dd>
 <dt><a href="/zh-TW/docs/Web/API/MediaSource/duration"><code>MediaSource.duration</code></a></dt>
 <dd>取得或設置現在正被表示的媒體的時間長度。</dd>
 <dt>
 <h3 id="事件處理函數_Event_handlers">事件處理函數 (Event handlers)</h3>


 </dt>
 <dt><a href="/zh-TW/docs/Web/API/MediaSource/onsourceclose"><code>MediaSource.onsourceclose</code></a></dt>
 <dd><code>sourceclose</code> 事件的事件處理函數。</dd>
 <dt><a href="/zh-TW/docs/Web/API/MediaSource/onsourceended"><code>MediaSource.onsourceended</code></a></dt>
 <dd><code>sourceended</code> 事件的事件處理函數。</dd>
 <dt><a href="/zh-TW/docs/Web/API/MediaSource/onsourceopen"><code>MediaSource.onsourceopen</code></a></dt>
 <dd><code>sourceopen</code> 事件的事件處理函數。</dd>
</dl>

<dl>
</dl>

<dl>
</dl>

<h2 id="方法_Methods">方法 (Methods)</h2>

<p><em>從親介面 (parent interface) <a href="/zh-TW/docs/Web/API/EventTarget"><code>EventTarget</code></a> 繼承屬性。</em></p>

<dl>
 <dt><a href="/zh-TW/docs/Web/API/MediaSource/addSourceBuffer"><code>MediaSource.addSourceBuffer()</code></a></dt>
 <dd>依據指定的 MIME 類型建立一個新的 <a href="/zh-TW/docs/Web/API/SourceBuffer"><code>SourceBuffer</code></a> 且將其加入 <code>MediaSource</code> 的 <a href="/zh-TW/docs/Web/API/SourceBuffers"><code>SourceBuffers</code></a> 串列。</dd>
 <dt><a href="/zh-TW/docs/Web/API/MediaSource/clearLiveSeekableRange"><code>MediaSource.clearLiveSeekableRange()</code></a></dt>
 <dd>清除先前藉由呼叫 <code>setLiveSeekableRange()</code> 所設定的可尋找範圍。</dd>
 <dt><a href="/zh-TW/docs/Web/API/MediaSource/endOfStream"><code>MediaSource.endOfStream()</code></a></dt>
 <dd>示意串流的結束。</dd>
 <dt><a href="/zh-TW/docs/Web/API/MediaSource/removeSourceBuffer"><code>MediaSource.removeSourceBuffer()</code></a></dt>
 <dd>從與此 <code>MediaSource</code> 物件關聯的 <a href="/zh-TW/docs/Web/API/SourceBuffers"><code>SourceBuffers</code></a> 串列移除指定的 <a href="/zh-TW/docs/Web/API/SourceBuffer"><code>SourceBuffer</code></a>。</dd>
 <dt><a href="/zh-TW/docs/Web/API/MediaSource/setLiveSeekableRange"><code>MediaSource.setLiveSeekableRange()</code></a></dt>
 <dd>設定使用者可以在媒體元素中的可尋找範圍。</dd>
</dl>

<h2 id="靜態方法_Static_methods">靜態方法 (Static methods)</h2>

<dl>
 <dt><a href="/zh-TW/docs/Web/API/MediaSource/isTypeSupported"><code>MediaSource.isTypeSupported()</code></a></dt>
 <dd>回傳一個 <a href="/zh-TW/docs/Web/API/Boolean"><code>Boolean</code></a> 值表示指定的 MIME 類型是否被現在的用戶代理支援 — 意即可否成功的為該 MIME 類型建立 <a href="/zh-TW/docs/Web/API/SourceBuffer"><code>SourceBuffer</code></a> 物件。</dd>
</dl>

<h2 id="範例">範例</h2>

<p>以下簡單的範例儘快的載入一個個影片塊 (chunk) 且儘快的播放。這個範例是由 Nick Desaulniers 所撰寫且可以<a href="http://nickdesaulniers.github.io/netfix/demo/bufferAll.html">在此實際觀看</a>（您也可以<a href="https://github.com/nickdesaulniers/netfix/blob/gh-pages/demo/bufferAll.html">下載原始碼</a>以更進一步研究）</p>

<pre class="brush: js notranslate">var video = document.querySelector(&apos;video&apos;);

var assetURL = &apos;frag_bunny.mp4&apos;;
// Need to be specific for Blink regarding codecs
// ./mp4info frag_bunny.mp4 | grep Codec
var mimeCodec = &apos;video/mp4; codecs=&quot;avc1.42E01E, mp4a.40.2&quot;&apos;;

if (&apos;MediaSource&apos; in window &amp;&amp; MediaSource.isTypeSupported(mimeCodec)) {
  var mediaSource = new MediaSource();
  //console.log(mediaSource.readyState); // closed
  video.src = URL.createObjectURL(mediaSource);
  mediaSource.addEventListener(&apos;sourceopen&apos;, sourceOpen);
} else {
  console.error(&apos;Unsupported MIME type or codec: &apos;, mimeCodec);
}

function sourceOpen (_) {
  //console.log(this.readyState); // open
  var mediaSource = this;
  var sourceBuffer = mediaSource.addSourceBuffer(mimeCodec);
  fetchAB(assetURL, function (buf) {
    sourceBuffer.addEventListener(&apos;updateend&apos;, function (_) {
      mediaSource.endOfStream();
      video.play();
      //console.log(mediaSource.readyState); // ended
    });
    sourceBuffer.appendBuffer(buf);
  });
};

function fetchAB (url, cb) {
  console.log(url);
  var xhr = new XMLHttpRequest;
  xhr.open(&apos;get&apos;, url);
  xhr.responseType = &apos;arraybuffer&apos;;
  xhr.onload = function () {
    cb(xhr.response);
  };
  xhr.send();
};</pre>

<h2 id="規格">規格</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">規格</th>
   <th scope="col">狀態</th>
   <th scope="col">註釋</th>
  </tr>
  <tr>
   <td><a class="external" href="https://w3c.github.io/media-source/#mediasource" hreflang="en" lang="en">Media Source Extensions<br><small lang="zh-TW">The definition of &apos;MediaSource&apos; in that specification.</small></a></td>
   <td><span class="spec-REC">Recommendation</span></td>
   <td>Initial definition.</td>
  </tr>
 </tbody>
</table>

<h2 id="相容性表格">相容性表格</h2>

<div><div class="bc-data" id="bcd:api.MediaSource"></div></div>

<h2 id="相關資料">相關資料</h2>

<ul>
 <li><a href="/zh-TW/docs/Web/API/SourceBuffer"><code>SourceBuffer</code></a></li>
 <li><a href="/zh-TW/docs/Web/API/SourceBufferList"><code>SourceBufferList</code></a></li>
</ul>
