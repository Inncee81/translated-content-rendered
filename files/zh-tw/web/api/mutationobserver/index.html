---
title: MutationObserver
slug: Web/API/MutationObserver
translation_of: Web/API/MutationObserver
---
<p></p><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-TW/docs/Web/API/Document_Object_Model">Document Object Model</a></strong></li><li><strong><a href="/zh-TW/docs/Web/API/MutationObserver"><code>MutationObserver</code></a></strong></li><li class="toggle"><details open><summary>Constructor</summary><ol><li><a href="/zh-TW/docs/Web/API/MutationObserver/MutationObserver"><code>MutationObserver()</code></a> <a style="opacity: 0.5;" href="/zh-TW/docs/Web/API/MutationObserver/MutationObserver$translate">[Translate]</a></li></ol></details></li><li class="toggle"><details open><summary>Methods</summary><ol><li><a href="/zh-TW/docs/Web/API/MutationObserver/observe"><code>observe()</code></a> <a style="opacity: 0.5;" href="/zh-TW/docs/Web/API/MutationObserver/observe$translate">[Translate]</a></li><li><a href="/zh-TW/docs/Web/API/MutationObserver/takeRecords"><code>takeRecords()</code></a> <a style="opacity: 0.5;" href="/zh-TW/docs/Web/API/MutationObserver/takeRecords$translate">[Translate]</a></li></ol></details></li><li class="toggle"><details open><summary>Related pages for DOM</summary><ol><li><a href="/zh-TW/docs/Web/API/AbortController"><code>AbortController</code></a></li><li><a href="/zh-TW/docs/Web/API/AbortSignal"><code>AbortSignal</code></a></li><li><a href="/zh-TW/docs/Web/API/Attr"><code>Attr</code></a></li><li><a href="/zh-TW/docs/Web/API/ByteString"><code>ByteString</code></a></li><li><a href="/zh-TW/docs/Web/API/CDATASection"><code>CDATASection</code></a></li><li><a href="/zh-TW/docs/Web/API/CSSPrimitiveValue"><code>CSSPrimitiveValue</code></a></li><li><a href="/zh-TW/docs/Web/API/CSSValue"><code>CSSValue</code></a></li><li><a href="/zh-TW/docs/Web/API/CSSValueList"><code>CSSValueList</code></a></li><li><a href="/zh-TW/docs/Web/API/CharacterData"><code>CharacterData</code></a></li><li><a href="/zh-TW/docs/Web/API/ChildNode"><code>ChildNode</code></a></li><li><a href="/zh-TW/docs/Web/API/Comment"><code>Comment</code></a></li><li><a href="/zh-TW/docs/Web/API/CustomEvent"><code>CustomEvent</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMConfiguration"><code>DOMConfiguration</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMError"><code>DOMError</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMErrorHandler"><code>DOMErrorHandler</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMException"><code>DOMException</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMImplementation"><code>DOMImplementation</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMImplementationList"><code>DOMImplementationList</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMImplementationRegistry"><code>DOMImplementationRegistry</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMImplementationSource"><code>DOMImplementationSource</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMLocator"><code>DOMLocator</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMObject"><code>DOMObject</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMParser"><code>DOMParser</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMPoint"><code>DOMPoint</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMPointInit"><code>DOMPointInit</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMPointReadOnly"><code>DOMPointReadOnly</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMRect"><code>DOMRect</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMString"><code>DOMString</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMTimeStamp"><code>DOMTimeStamp</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMTokenList"><code>DOMTokenList</code></a></li><li><a href="/zh-TW/docs/Web/API/DOMUserData"><code>DOMUserData</code></a></li><li><a href="/zh-TW/docs/Web/API/Document"><code>Document</code></a></li><li><a href="/zh-TW/docs/Web/API/DocumentFragment"><code>DocumentFragment</code></a></li><li><a href="/zh-TW/docs/Web/API/DocumentType"><code>DocumentType</code></a></li><li><a href="/zh-TW/docs/Web/API/Element"><code>Element</code></a></li><li><a href="/zh-TW/docs/Web/API/ElementTraversal"><code>ElementTraversal</code></a></li><li><a href="/zh-TW/docs/Web/API/Entity"><code>Entity</code></a></li><li><a href="/zh-TW/docs/Web/API/EntityReference"><code>EntityReference</code></a></li><li><a href="/zh-TW/docs/Web/API/Event"><code>Event</code></a></li><li><a href="/zh-TW/docs/Web/API/EventTarget"><code>EventTarget</code></a></li><li><a href="/zh-TW/docs/Web/API/HTMLCollection"><code>HTMLCollection</code></a></li><li><a href="/zh-TW/docs/Web/API/Node"><code>Node</code></a></li><li><a href="/zh-TW/docs/Web/API/NodeFilter"><code>NodeFilter</code></a></li><li><a href="/zh-TW/docs/Web/API/NodeIterator"><code>NodeIterator</code></a></li><li><a href="/zh-TW/docs/Web/API/NodeList"><code>NodeList</code></a></li><li><a href="/zh-TW/docs/Web/API/NonDocumentTypeChildNode"><code>NonDocumentTypeChildNode</code></a></li><li><a href="/zh-TW/docs/Web/API/ProcessingInstruction"><code>ProcessingInstruction</code></a></li><li><a href="/zh-TW/docs/Web/API/PromiseResolver"><code>PromiseResolver</code></a></li><li><a href="/zh-TW/docs/Web/API/Range"><code>Range</code></a></li><li><a href="/zh-TW/docs/Web/API/Text"><code>Text</code></a></li><li><a href="/zh-TW/docs/Web/API/TextDecoder"><code>TextDecoder</code></a></li><li><a href="/zh-TW/docs/Web/API/TextEncoder"><code>TextEncoder</code></a></li><li><a href="/zh-TW/docs/Web/API/TimeRanges"><code>TimeRanges</code></a></li><li><a href="/zh-TW/docs/Web/API/TreeWalker"><code>TreeWalker</code></a></li><li><a href="/zh-TW/docs/Web/API/TypeInfo"><code>TypeInfo</code></a></li><li><a href="/zh-TW/docs/Web/API/USVString"><code>USVString</code></a></li><li><a href="/zh-TW/docs/Web/API/UserDataHandler"><code>UserDataHandler</code></a></li><li><a href="/zh-TW/docs/Web/API/XMLDocument"><code>XMLDocument</code></a></li></ol></details></li></ol></section><p></p>

<p><code>MutationObserver</code> 提供開發人員一個方法，來對 <a href="/en-US/docs/DOM">DOM</a> tree 的變動來作反應，這被設計用來替換在 DOM3 事件規範中的 <a href="/en-US/docs/DOM/Mutation_events">Mutation Events</a>。</p>

<h2 id="建構式">建構式</h2>

<h3 id="MutationObserver()"><code>MutationObserver()</code></h3>

<p>以下舉例為一個新的 DOM mutation observers 建構式。</p>

<pre class="syntaxbox">new MutationObserver(
  function callback
);
</pre>

<h6 id="參數">參數</h6>

<dl>
 <dt><code>callback</code></dt>
 <dd>這個函式會在 DOM 有變化時被呼叫，observer 會用兩個參數來呼叫它，第一個是 <code><a href="#MutationRecord">MutationRecord</a> </code>物件陣列，而第二個參數則是觀察者目標本身。</dd>
</dl>

<h2 id="Instance_methods">Instance methods</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <td><code>void <a href="#observe()">observe</a>( <a href="/zh-TW/docs/Web/API/Node" title="Node 是一個被多種 DOM 類型繼承的介面，它讓各種類型的 DOM 都能以同樣的方式來操作。如繼承了相同的方法，或能以相同的方式測試。"><code>Node</code></a> target, <a href="#MutationObserverInit">MutationObserverInit</a> options );</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#disconnect()">disconnect</a>();</code></td>
  </tr>
  <tr>
   <td><code>Array <a href="#takeRecords()">takeRecords</a>();</code></td>
  </tr>
 </tbody>
</table>

<div class="note">
<p><strong>筆記</strong>: <a href="/zh-TW/docs/Web/API/Node" title="Node 是一個被多種 DOM 類型繼承的介面，它讓各種類型的 DOM 都能以同樣的方式來操作。如繼承了相同的方法，或能以相同的方式測試。"><code>Node</code></a> target should not be confused with <a href="https://nodejs.org/en/">NodeJS</a>.</p>
</div>

<h3 id="observe()"><code>observe()</code></h3>

<p>Registers the <code>MutationObserver</code> instance to receive notifications of DOM mutations on the specified node.</p>

<pre class="syntaxbox">void observe(
  <a href="/zh-TW/docs/Web/API/Node" title="Node 是一個被多種 DOM 類型繼承的介面，它讓各種類型的 DOM 都能以同樣的方式來操作。如繼承了相同的方法，或能以相同的方式測試。"><code>Node</code></a> target,
  <a href="#MutationObserverInit"><code>MutationObserverInit</code></a> options
);
</pre>

<h6 id="Parameters">Parameters</h6>

<dl>
 <dt><code>target</code></dt>
 <dd>The <a href="/zh-TW/docs/Web/API/Node" title="Node 是一個被多種 DOM 類型繼承的介面，它讓各種類型的 DOM 都能以同樣的方式來操作。如繼承了相同的方法，或能以相同的方式測試。"><code>Node</code></a> on which to observe DOM mutations.</dd>
 <dt><code>options</code></dt>
 <dd>A <a href="#MutationObserverInit"><code>MutationObserverInit</code></a> object, specifies which DOM mutations should be reported.</dd>
</dl>

<div class="note">NOTE: Adding an observer to an element is just like addEventListener, if you observe the element multiple times it does not make a difference. Meaning if you observe element twice, the observe callback does not fire twice, nor will you have to run disconnect() twice. In other words, once an element is observed, observing it again with the same observer instance will do nothing. However if the callback object is different it will of course add another observer to it.</div>

<h3 id="disconnect()"><code>disconnect()</code></h3>

<p>Stops the <code>MutationObserver</code> instance from receiving notifications of DOM mutations. Until the <a href="#observe()"><code>observe()</code></a> method is used again, observer&apos;s callback will not be invoked.</p>

<pre class="syntaxbox">void disconnect();
</pre>

<h3 id="takeRecords()"><code>takeRecords()</code></h3>

<p>Empties the <code>MutationObserver</code> instance&apos;s record queue and returns what was in there.</p>

<pre class="syntaxbox">Array takeRecords();
</pre>

<h6 id="Return_value">Return value</h6>

<p>Returns an Array of <a href="#MutationRecord"><code>MutationRecord</code>s</a>.</p>

<h2 id="MutationObserverInit"><code>MutationObserverInit</code></h2>

<p><code>MutationObserverInit</code> is an object which can specify the following properties:</p>

<div class="note">NOTE: At the very least, <code>childList</code>, <code>attributes</code>, or <code>characterData</code> must be set to <code>true</code>. Otherwise, &quot;An invalid or illegal string was specified&quot; error is thrown.</div>

<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Property</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code>childList</code></td>
   <td>Set to <code>true</code> if additions and removals of the target node&apos;s child elements (including text nodes) are to be observed.</td>
  </tr>
  <tr>
   <td><code>attributes</code></td>
   <td>Set to <code>true</code> if mutations to target&apos;s attributes are to be observed.</td>
  </tr>
  <tr>
   <td><code>characterData</code></td>
   <td>Set to <code>true</code> if mutations to target&apos;s data are to be observed.</td>
  </tr>
  <tr>
   <td><code>subtree</code></td>
   <td>Set to <code>true</code> if mutations to not just target, but also target&apos;s descendants are to be observed.</td>
  </tr>
  <tr>
   <td><code>attributeOldValue</code></td>
   <td>Set to <code>true</code> if <code>attributes</code> is set to <code>true</code> and target&apos;s attribute value before the mutation needs to be recorded.</td>
  </tr>
  <tr>
   <td><code>characterDataOldValue</code></td>
   <td>Set to <code>true</code> if <code>characterData</code> is set to <code>true</code> and target&apos;s data before the mutation needs to be recorded.</td>
  </tr>
  <tr>
   <td><code>attributeFilter</code></td>
   <td>Set to an array of attribute local names (without namespace) if not all attribute mutations need to be observed.</td>
  </tr>
 </tbody>
</table>

<h2 id="MutationRecord"><code>MutationRecord</code></h2>

<p><code>MutationRecord</code> is the object that will be passed to the observer&apos;s callback. It has the following properties:</p>

<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Property</td>
   <td class="header">Type</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code>type</code></td>
   <td><code>String</code></td>
   <td>Returns <code>attributes</code> if the mutation was an attribute mutation, <code>characterData</code> if it was a mutation to a <code>CharacterData</code> node, and <code>childList</code> if it was a mutation to the tree of nodes.</td>
  </tr>
  <tr>
   <td><code>target</code></td>
   <td><code><a href="/zh-TW/docs/Web/API/Node" title="Node 是一個被多種 DOM 類型繼承的介面，它讓各種類型的 DOM 都能以同樣的方式來操作。如繼承了相同的方法，或能以相同的方式測試。"><code>Node</code></a></code></td>
   <td>Returns the node the mutation affected, depending on the <code>type</code>. For <code>attributes</code>, it is the element whose attribute changed. For <code>characterData</code>, it is the <code>CharacterData</code> node. For <code>childList</code>, it is the node whose children changed.</td>
  </tr>
  <tr>
   <td><code>addedNodes</code></td>
   <td><code><a href="/zh-TW/docs/Web/API/NodeList" title="NodeList 物件是節點的集合，可藉由 Node.childNodes 屬性以及 document.querySelectorAll() 方法取得。"><code>NodeList</code></a></code></td>
   <td>Return the nodes added. Will be an empty <code>NodeList</code> if no nodes were added.</td>
  </tr>
  <tr>
   <td><code>removedNodes</code></td>
   <td><code><a href="/zh-TW/docs/Web/API/NodeList" title="NodeList 物件是節點的集合，可藉由 Node.childNodes 屬性以及 document.querySelectorAll() 方法取得。"><code>NodeList</code></a></code></td>
   <td>Return the nodes removed. Will be an empty <code>NodeList</code> if no nodes were removed.</td>
  </tr>
  <tr>
   <td><code>previousSibling</code></td>
   <td><code><a href="/zh-TW/docs/Web/API/Node" title="Node 是一個被多種 DOM 類型繼承的介面，它讓各種類型的 DOM 都能以同樣的方式來操作。如繼承了相同的方法，或能以相同的方式測試。"><code>Node</code></a></code></td>
   <td>Return the previous sibling of the added or removed nodes, or <code>null</code>.</td>
  </tr>
  <tr>
   <td><code>nextSibling</code></td>
   <td><code><a href="/zh-TW/docs/Web/API/Node" title="Node 是一個被多種 DOM 類型繼承的介面，它讓各種類型的 DOM 都能以同樣的方式來操作。如繼承了相同的方法，或能以相同的方式測試。"><code>Node</code></a></code></td>
   <td>Return the next sibling of the added or removed nodes, or <code>null</code>.</td>
  </tr>
  <tr>
   <td><code>attributeName</code></td>
   <td><code>String</code></td>
   <td>Returns the local name of the changed attribute, or <code>null</code>.</td>
  </tr>
  <tr>
   <td><code>attributeNamespace</code></td>
   <td><code>String</code></td>
   <td>Returns the namespace of the changed attribute, or <code>null</code>.</td>
  </tr>
  <tr>
   <td><code>oldValue</code></td>
   <td><code>String</code></td>
   <td>The return value depends on the <code>type</code>. For <code>attributes</code>, it is the value of the changed attribute before the change. For <code>characterData</code>, it is the data of the changed node before the change. For <code>childList</code>, it is <code>null</code>.</td>
  </tr>
 </tbody>
</table>

<h2 id="Example_usage">Example usage</h2>

<p>The following example was taken from <a href="http://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/" class="external" rel="freelink">this blog post</a>.</p>

<pre class="brush: js">// select the target node
var target = document.querySelector(&apos;#some-id&apos;);

// create an observer instance
var observer = new MutationObserver(function(mutations) {
  mutations.forEach(function(mutation) {
    console.log(mutation.type);
  });
});

// configuration of the observer:
var config = { attributes: true, childList: true, characterData: true };

// pass in the target node, as well as the observer options
observer.observe(target, config);

// later, you can stop observing
observer.disconnect();
</pre>

<h2 id="Additional_reading">Additional reading</h2>

<ul>
 <li><a href="http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers" class="external" rel="freelink">A brief overview</a></li>
 <li><a href="http://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/" class="external" rel="freelink">A more in-depth discussion</a></li>
 <li><a href="http://www.youtube.com/watch?v=eRZ4pO0gVWw" class="external" rel="freelink">A screencast by Chromium developer Rafael Weinstein</a></li>
 <li><a href="http://code.google.com/p/mutation-summary/" class="external" rel="freelink">The mutation summary library</a></li>
 <li><a href="http://dom.spec.whatwg.org/#mutation-observers">The DOM standard</a> which defines the <code>MutationObserver</code> interface</li>
</ul>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<p></p><div class="warning notecard"><strong><a href="https://github.com/mdn/browser-compat-data">We&apos;re converting our compatibility data into a machine-readable JSON format</a></strong>.
            This compatibility table still uses the old format,
            because we haven&apos;t yet converted the data it contains.
            <strong><a href="/zh-TW/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong></div>

<div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Desktop</a></li>
        <li><a>Mobile</a></li>
    </ul>
</div><p></p>

<div id="compat-desktop">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>18 <span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/zh-TW/docs/Web/Guide/Prefixes" title="The name of this feature is prefixed with &apos;-webkit&apos; as this browser considers it experimental">-webkit</a></span><br>
    26</td>
   <td><a href="/en-US/Firefox/Releases/14" title="Released on 2012-07-17.">14</a> (14)</td>
   <td>11</td>
   <td>15</td>
   <td>6.0 <span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/zh-TW/docs/Web/Guide/Prefixes" title="The name of this feature is prefixed with &apos;-webkit&apos; as this browser considers it experimental">-webkit</a></span></td>
  </tr>
 </tbody>
</table>
</div>

<div id="compat-mobile">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Chrome for Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>IE Phone</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
   <td>18 <span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/zh-TW/docs/Web/Guide/Prefixes" title="The name of this feature is prefixed with &apos;-webkit&apos; as this browser considers it experimental">-webkit</a></span><br>
    26</td>
   <td>14.0 (14)</td>
   <td>11 (8.1)</td>
   <td>15</td>
   <td>6 <span class="prefixBox prefixBoxInline notecard inline" title="prefix"><a href="/zh-TW/docs/Web/Guide/Prefixes" title="The name of this feature is prefixed with &apos;-webkit&apos; as this browser considers it experimental">-webkit</a></span><br>
    7</td>
  </tr>
 </tbody>
</table>
</div>
